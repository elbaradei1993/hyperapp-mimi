(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))l(d);new MutationObserver(d=>{for(const f of d)if(f.type==="childList")for(const g of f.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&l(g)}).observe(document,{childList:!0,subtree:!0});function o(d){const f={};return d.integrity&&(f.integrity=d.integrity),d.referrerPolicy&&(f.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?f.credentials="include":d.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function l(d){if(d.ep)return;d.ep=!0;const f=o(d);fetch(d.href,f)}})();function Uu(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}function _g(u){if(Object.prototype.hasOwnProperty.call(u,"__esModule"))return u;var a=u.default;if(typeof a=="function"){var o=function l(){var d=!1;try{d=this instanceof l}catch{}return d?Reflect.construct(a,arguments,this.constructor):a.apply(this,arguments)};o.prototype=a.prototype}else o={};return Object.defineProperty(o,"__esModule",{value:!0}),Object.keys(u).forEach(function(l){var d=Object.getOwnPropertyDescriptor(u,l);Object.defineProperty(o,l,d.get?d:{enumerable:!0,get:function(){return u[l]}})}),o}var Vh={exports:{}},Po={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jm;function Py(){if(jm)return Po;jm=1;var u=Symbol.for("react.transitional.element"),a=Symbol.for("react.fragment");function o(l,d,f){var g=null;if(f!==void 0&&(g=""+f),d.key!==void 0&&(g=""+d.key),"key"in d){f={};for(var b in d)b!=="key"&&(f[b]=d[b])}else f=d;return d=f.ref,{$$typeof:u,type:l,key:g,ref:d!==void 0?d:null,props:f}}return Po.Fragment=a,Po.jsx=o,Po.jsxs=o,Po}var Am;function Uy(){return Am||(Am=1,Vh.exports=Py()),Vh.exports}var _=Uy(),Gh={exports:{}},Tt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zm;function Hy(){if(zm)return Tt;zm=1;var u=Symbol.for("react.transitional.element"),a=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),f=Symbol.for("react.consumer"),g=Symbol.for("react.context"),b=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),z=Symbol.iterator;function R(O){return O===null||typeof O!="object"?null:(O=z&&O[z]||O["@@iterator"],typeof O=="function"?O:null)}var q={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},P=Object.assign,W={};function G(O,V,et){this.props=O,this.context=V,this.refs=W,this.updater=et||q}G.prototype.isReactComponent={},G.prototype.setState=function(O,V){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,V,"setState")},G.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function K(){}K.prototype=G.prototype;function B(O,V,et){this.props=O,this.context=V,this.refs=W,this.updater=et||q}var ot=B.prototype=new K;ot.constructor=B,P(ot,G.prototype),ot.isPureReactComponent=!0;var _t=Array.isArray;function ht(){}var ct={H:null,A:null,T:null,S:null},Ht=Object.prototype.hasOwnProperty;function qt(O,V,et){var nt=et.ref;return{$$typeof:u,type:O,key:V,ref:nt!==void 0?nt:null,props:et}}function wt(O,V){return qt(O.type,V,O.props)}function Ct(O){return typeof O=="object"&&O!==null&&O.$$typeof===u}function Ut(O){var V={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(et){return V[et]})}var ze=/\/+/g;function Kt(O,V){return typeof O=="object"&&O!==null&&O.key!=null?Ut(""+O.key):V.toString(36)}function De(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(ht,ht):(O.status="pending",O.then(function(V){O.status==="pending"&&(O.status="fulfilled",O.value=V)},function(V){O.status==="pending"&&(O.status="rejected",O.reason=V)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function $(O,V,et,nt,ut){var lt=typeof O;(lt==="undefined"||lt==="boolean")&&(O=null);var zt=!1;if(O===null)zt=!0;else switch(lt){case"bigint":case"string":case"number":zt=!0;break;case"object":switch(O.$$typeof){case u:case a:zt=!0;break;case C:return zt=O._init,$(zt(O._payload),V,et,nt,ut)}}if(zt)return ut=ut(O),zt=nt===""?"."+Kt(O,0):nt,_t(ut)?(et="",zt!=null&&(et=zt.replace(ze,"$&/")+"/"),$(ut,V,et,"",function(ci){return ci})):ut!=null&&(Ct(ut)&&(ut=wt(ut,et+(ut.key==null||O&&O.key===ut.key?"":(""+ut.key).replace(ze,"$&/")+"/")+zt)),V.push(ut)),1;zt=0;var oe=nt===""?".":nt+":";if(_t(O))for(var le=0;le<O.length;le++)nt=O[le],lt=oe+Kt(nt,le),zt+=$(nt,V,et,lt,ut);else if(le=R(O),typeof le=="function")for(O=le.call(O),le=0;!(nt=O.next()).done;)nt=nt.value,lt=oe+Kt(nt,le++),zt+=$(nt,V,et,lt,ut);else if(lt==="object"){if(typeof O.then=="function")return $(De(O),V,et,nt,ut);throw V=String(O),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.")}return zt}function at(O,V,et){if(O==null)return O;var nt=[],ut=0;return $(O,nt,"","",function(lt){return V.call(et,lt,ut++)}),nt}function k(O){if(O._status===-1){var V=O._result;V=V(),V.then(function(et){(O._status===0||O._status===-1)&&(O._status=1,O._result=et)},function(et){(O._status===0||O._status===-1)&&(O._status=2,O._result=et)}),O._status===-1&&(O._status=0,O._result=V)}if(O._status===1)return O._result.default;throw O._result}var rt=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var V=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(V))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)},tt={map:at,forEach:function(O,V,et){at(O,function(){V.apply(this,arguments)},et)},count:function(O){var V=0;return at(O,function(){V++}),V},toArray:function(O){return at(O,function(V){return V})||[]},only:function(O){if(!Ct(O))throw Error("React.Children.only expected to receive a single React element child.");return O}};return Tt.Activity=E,Tt.Children=tt,Tt.Component=G,Tt.Fragment=o,Tt.Profiler=d,Tt.PureComponent=B,Tt.StrictMode=l,Tt.Suspense=w,Tt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ct,Tt.__COMPILER_RUNTIME={__proto__:null,c:function(O){return ct.H.useMemoCache(O)}},Tt.cache=function(O){return function(){return O.apply(null,arguments)}},Tt.cacheSignal=function(){return null},Tt.cloneElement=function(O,V,et){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var nt=P({},O.props),ut=O.key;if(V!=null)for(lt in V.key!==void 0&&(ut=""+V.key),V)!Ht.call(V,lt)||lt==="key"||lt==="__self"||lt==="__source"||lt==="ref"&&V.ref===void 0||(nt[lt]=V[lt]);var lt=arguments.length-2;if(lt===1)nt.children=et;else if(1<lt){for(var zt=Array(lt),oe=0;oe<lt;oe++)zt[oe]=arguments[oe+2];nt.children=zt}return qt(O.type,ut,nt)},Tt.createContext=function(O){return O={$$typeof:g,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:f,_context:O},O},Tt.createElement=function(O,V,et){var nt,ut={},lt=null;if(V!=null)for(nt in V.key!==void 0&&(lt=""+V.key),V)Ht.call(V,nt)&&nt!=="key"&&nt!=="__self"&&nt!=="__source"&&(ut[nt]=V[nt]);var zt=arguments.length-2;if(zt===1)ut.children=et;else if(1<zt){for(var oe=Array(zt),le=0;le<zt;le++)oe[le]=arguments[le+2];ut.children=oe}if(O&&O.defaultProps)for(nt in zt=O.defaultProps,zt)ut[nt]===void 0&&(ut[nt]=zt[nt]);return qt(O,lt,ut)},Tt.createRef=function(){return{current:null}},Tt.forwardRef=function(O){return{$$typeof:b,render:O}},Tt.isValidElement=Ct,Tt.lazy=function(O){return{$$typeof:C,_payload:{_status:-1,_result:O},_init:k}},Tt.memo=function(O,V){return{$$typeof:x,type:O,compare:V===void 0?null:V}},Tt.startTransition=function(O){var V=ct.T,et={};ct.T=et;try{var nt=O(),ut=ct.S;ut!==null&&ut(et,nt),typeof nt=="object"&&nt!==null&&typeof nt.then=="function"&&nt.then(ht,rt)}catch(lt){rt(lt)}finally{V!==null&&et.types!==null&&(V.types=et.types),ct.T=V}},Tt.unstable_useCacheRefresh=function(){return ct.H.useCacheRefresh()},Tt.use=function(O){return ct.H.use(O)},Tt.useActionState=function(O,V,et){return ct.H.useActionState(O,V,et)},Tt.useCallback=function(O,V){return ct.H.useCallback(O,V)},Tt.useContext=function(O){return ct.H.useContext(O)},Tt.useDebugValue=function(){},Tt.useDeferredValue=function(O,V){return ct.H.useDeferredValue(O,V)},Tt.useEffect=function(O,V){return ct.H.useEffect(O,V)},Tt.useEffectEvent=function(O){return ct.H.useEffectEvent(O)},Tt.useId=function(){return ct.H.useId()},Tt.useImperativeHandle=function(O,V,et){return ct.H.useImperativeHandle(O,V,et)},Tt.useInsertionEffect=function(O,V){return ct.H.useInsertionEffect(O,V)},Tt.useLayoutEffect=function(O,V){return ct.H.useLayoutEffect(O,V)},Tt.useMemo=function(O,V){return ct.H.useMemo(O,V)},Tt.useOptimistic=function(O,V){return ct.H.useOptimistic(O,V)},Tt.useReducer=function(O,V,et){return ct.H.useReducer(O,V,et)},Tt.useRef=function(O){return ct.H.useRef(O)},Tt.useState=function(O){return ct.H.useState(O)},Tt.useSyncExternalStore=function(O,V,et){return ct.H.useSyncExternalStore(O,V,et)},Tt.useTransition=function(){return ct.H.useTransition()},Tt.version="19.2.0",Tt}var Rm;function vd(){return Rm||(Rm=1,Gh.exports=Hy()),Gh.exports}var it=vd();const Ts=Uu(it);var $h={exports:{}},Uo={},Yh={exports:{}},Wh={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lm;function qy(){return Lm||(Lm=1,(function(u){function a($,at){var k=$.length;$.push(at);t:for(;0<k;){var rt=k-1>>>1,tt=$[rt];if(0<d(tt,at))$[rt]=at,$[k]=tt,k=rt;else break t}}function o($){return $.length===0?null:$[0]}function l($){if($.length===0)return null;var at=$[0],k=$.pop();if(k!==at){$[0]=k;t:for(var rt=0,tt=$.length,O=tt>>>1;rt<O;){var V=2*(rt+1)-1,et=$[V],nt=V+1,ut=$[nt];if(0>d(et,k))nt<tt&&0>d(ut,et)?($[rt]=ut,$[nt]=k,rt=nt):($[rt]=et,$[V]=k,rt=V);else if(nt<tt&&0>d(ut,k))$[rt]=ut,$[nt]=k,rt=nt;else break t}}return at}function d($,at){var k=$.sortIndex-at.sortIndex;return k!==0?k:$.id-at.id}if(u.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var f=performance;u.unstable_now=function(){return f.now()}}else{var g=Date,b=g.now();u.unstable_now=function(){return g.now()-b}}var w=[],x=[],C=1,E=null,z=3,R=!1,q=!1,P=!1,W=!1,G=typeof setTimeout=="function"?setTimeout:null,K=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;function ot($){for(var at=o(x);at!==null;){if(at.callback===null)l(x);else if(at.startTime<=$)l(x),at.sortIndex=at.expirationTime,a(w,at);else break;at=o(x)}}function _t($){if(P=!1,ot($),!q)if(o(w)!==null)q=!0,ht||(ht=!0,Ut());else{var at=o(x);at!==null&&De(_t,at.startTime-$)}}var ht=!1,ct=-1,Ht=5,qt=-1;function wt(){return W?!0:!(u.unstable_now()-qt<Ht)}function Ct(){if(W=!1,ht){var $=u.unstable_now();qt=$;var at=!0;try{t:{q=!1,P&&(P=!1,K(ct),ct=-1),R=!0;var k=z;try{e:{for(ot($),E=o(w);E!==null&&!(E.expirationTime>$&&wt());){var rt=E.callback;if(typeof rt=="function"){E.callback=null,z=E.priorityLevel;var tt=rt(E.expirationTime<=$);if($=u.unstable_now(),typeof tt=="function"){E.callback=tt,ot($),at=!0;break e}E===o(w)&&l(w),ot($)}else l(w);E=o(w)}if(E!==null)at=!0;else{var O=o(x);O!==null&&De(_t,O.startTime-$),at=!1}}break t}finally{E=null,z=k,R=!1}at=void 0}}finally{at?Ut():ht=!1}}}var Ut;if(typeof B=="function")Ut=function(){B(Ct)};else if(typeof MessageChannel<"u"){var ze=new MessageChannel,Kt=ze.port2;ze.port1.onmessage=Ct,Ut=function(){Kt.postMessage(null)}}else Ut=function(){G(Ct,0)};function De($,at){ct=G(function(){$(u.unstable_now())},at)}u.unstable_IdlePriority=5,u.unstable_ImmediatePriority=1,u.unstable_LowPriority=4,u.unstable_NormalPriority=3,u.unstable_Profiling=null,u.unstable_UserBlockingPriority=2,u.unstable_cancelCallback=function($){$.callback=null},u.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ht=0<$?Math.floor(1e3/$):5},u.unstable_getCurrentPriorityLevel=function(){return z},u.unstable_next=function($){switch(z){case 1:case 2:case 3:var at=3;break;default:at=z}var k=z;z=at;try{return $()}finally{z=k}},u.unstable_requestPaint=function(){W=!0},u.unstable_runWithPriority=function($,at){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var k=z;z=$;try{return at()}finally{z=k}},u.unstable_scheduleCallback=function($,at,k){var rt=u.unstable_now();switch(typeof k=="object"&&k!==null?(k=k.delay,k=typeof k=="number"&&0<k?rt+k:rt):k=rt,$){case 1:var tt=-1;break;case 2:tt=250;break;case 5:tt=1073741823;break;case 4:tt=1e4;break;default:tt=5e3}return tt=k+tt,$={id:C++,callback:at,priorityLevel:$,startTime:k,expirationTime:tt,sortIndex:-1},k>rt?($.sortIndex=k,a(x,$),o(w)===null&&$===o(x)&&(P?(K(ct),ct=-1):P=!0,De(_t,k-rt))):($.sortIndex=tt,a(w,$),q||R||(q=!0,ht||(ht=!0,Ut()))),$},u.unstable_shouldYield=wt,u.unstable_wrapCallback=function($){var at=z;return function(){var k=z;z=at;try{return $.apply(this,arguments)}finally{z=k}}}})(Wh)),Wh}var km;function Zy(){return km||(km=1,Yh.exports=qy()),Yh.exports}var Kh={exports:{}},Ve={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mm;function Iy(){if(Mm)return Ve;Mm=1;var u=vd();function a(w){var x="https://react.dev/errors/"+w;if(1<arguments.length){x+="?args[]="+encodeURIComponent(arguments[1]);for(var C=2;C<arguments.length;C++)x+="&args[]="+encodeURIComponent(arguments[C])}return"Minified React error #"+w+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(){}var l={d:{f:o,r:function(){throw Error(a(522))},D:o,C:o,L:o,m:o,X:o,S:o,M:o},p:0,findDOMNode:null},d=Symbol.for("react.portal");function f(w,x,C){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:d,key:E==null?null:""+E,children:w,containerInfo:x,implementation:C}}var g=u.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function b(w,x){if(w==="font")return"";if(typeof x=="string")return x==="use-credentials"?x:""}return Ve.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=l,Ve.createPortal=function(w,x){var C=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!x||x.nodeType!==1&&x.nodeType!==9&&x.nodeType!==11)throw Error(a(299));return f(w,x,null,C)},Ve.flushSync=function(w){var x=g.T,C=l.p;try{if(g.T=null,l.p=2,w)return w()}finally{g.T=x,l.p=C,l.d.f()}},Ve.preconnect=function(w,x){typeof w=="string"&&(x?(x=x.crossOrigin,x=typeof x=="string"?x==="use-credentials"?x:"":void 0):x=null,l.d.C(w,x))},Ve.prefetchDNS=function(w){typeof w=="string"&&l.d.D(w)},Ve.preinit=function(w,x){if(typeof w=="string"&&x&&typeof x.as=="string"){var C=x.as,E=b(C,x.crossOrigin),z=typeof x.integrity=="string"?x.integrity:void 0,R=typeof x.fetchPriority=="string"?x.fetchPriority:void 0;C==="style"?l.d.S(w,typeof x.precedence=="string"?x.precedence:void 0,{crossOrigin:E,integrity:z,fetchPriority:R}):C==="script"&&l.d.X(w,{crossOrigin:E,integrity:z,fetchPriority:R,nonce:typeof x.nonce=="string"?x.nonce:void 0})}},Ve.preinitModule=function(w,x){if(typeof w=="string")if(typeof x=="object"&&x!==null){if(x.as==null||x.as==="script"){var C=b(x.as,x.crossOrigin);l.d.M(w,{crossOrigin:C,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0})}}else x==null&&l.d.M(w)},Ve.preload=function(w,x){if(typeof w=="string"&&typeof x=="object"&&x!==null&&typeof x.as=="string"){var C=x.as,E=b(C,x.crossOrigin);l.d.L(w,C,{crossOrigin:E,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0,type:typeof x.type=="string"?x.type:void 0,fetchPriority:typeof x.fetchPriority=="string"?x.fetchPriority:void 0,referrerPolicy:typeof x.referrerPolicy=="string"?x.referrerPolicy:void 0,imageSrcSet:typeof x.imageSrcSet=="string"?x.imageSrcSet:void 0,imageSizes:typeof x.imageSizes=="string"?x.imageSizes:void 0,media:typeof x.media=="string"?x.media:void 0})}},Ve.preloadModule=function(w,x){if(typeof w=="string")if(x){var C=b(x.as,x.crossOrigin);l.d.m(w,{as:typeof x.as=="string"&&x.as!=="script"?x.as:void 0,crossOrigin:C,integrity:typeof x.integrity=="string"?x.integrity:void 0})}else l.d.m(w)},Ve.requestFormReset=function(w){l.d.r(w)},Ve.unstable_batchedUpdates=function(w,x){return w(x)},Ve.useFormState=function(w,x,C){return g.H.useFormState(w,x,C)},Ve.useFormStatus=function(){return g.H.useHostTransitionStatus()},Ve.version="19.2.0",Ve}var Bm;function yg(){if(Bm)return Kh.exports;Bm=1;function u(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(u)}catch(a){console.error(a)}}return u(),Kh.exports=Iy(),Kh.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dm;function Vy(){if(Dm)return Uo;Dm=1;var u=Zy(),a=vd(),o=yg();function l(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)e+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function d(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function f(t){var e=t,i=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,(e.flags&4098)!==0&&(i=e.return),t=e.return;while(t)}return e.tag===3?i:null}function g(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function b(t){if(t.tag===31){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function w(t){if(f(t)!==t)throw Error(l(188))}function x(t){var e=t.alternate;if(!e){if(e=f(t),e===null)throw Error(l(188));return e!==t?null:t}for(var i=t,s=e;;){var h=i.return;if(h===null)break;var p=h.alternate;if(p===null){if(s=h.return,s!==null){i=s;continue}break}if(h.child===p.child){for(p=h.child;p;){if(p===i)return w(h),t;if(p===s)return w(h),e;p=p.sibling}throw Error(l(188))}if(i.return!==s.return)i=h,s=p;else{for(var v=!1,T=h.child;T;){if(T===i){v=!0,i=h,s=p;break}if(T===s){v=!0,s=h,i=p;break}T=T.sibling}if(!v){for(T=p.child;T;){if(T===i){v=!0,i=p,s=h;break}if(T===s){v=!0,s=p,i=h;break}T=T.sibling}if(!v)throw Error(l(189))}}if(i.alternate!==s)throw Error(l(190))}if(i.tag!==3)throw Error(l(188));return i.stateNode.current===i?t:e}function C(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=C(t),e!==null)return e;t=t.sibling}return null}var E=Object.assign,z=Symbol.for("react.element"),R=Symbol.for("react.transitional.element"),q=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),W=Symbol.for("react.strict_mode"),G=Symbol.for("react.profiler"),K=Symbol.for("react.consumer"),B=Symbol.for("react.context"),ot=Symbol.for("react.forward_ref"),_t=Symbol.for("react.suspense"),ht=Symbol.for("react.suspense_list"),ct=Symbol.for("react.memo"),Ht=Symbol.for("react.lazy"),qt=Symbol.for("react.activity"),wt=Symbol.for("react.memo_cache_sentinel"),Ct=Symbol.iterator;function Ut(t){return t===null||typeof t!="object"?null:(t=Ct&&t[Ct]||t["@@iterator"],typeof t=="function"?t:null)}var ze=Symbol.for("react.client.reference");function Kt(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===ze?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case P:return"Fragment";case G:return"Profiler";case W:return"StrictMode";case _t:return"Suspense";case ht:return"SuspenseList";case qt:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case q:return"Portal";case B:return t.displayName||"Context";case K:return(t._context.displayName||"Context")+".Consumer";case ot:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ct:return e=t.displayName||null,e!==null?e:Kt(t.type)||"Memo";case Ht:e=t._payload,t=t._init;try{return Kt(t(e))}catch{}}return null}var De=Array.isArray,$=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,at=o.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,k={pending:!1,data:null,method:null,action:null},rt=[],tt=-1;function O(t){return{current:t}}function V(t){0>tt||(t.current=rt[tt],rt[tt]=null,tt--)}function et(t,e){tt++,rt[tt]=t.current,t.current=e}var nt=O(null),ut=O(null),lt=O(null),zt=O(null);function oe(t,e){switch(et(lt,e),et(ut,t),et(nt,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?Qp(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=Qp(e),t=Jp(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}V(nt),et(nt,t)}function le(){V(nt),V(ut),V(lt)}function ci(t){t.memoizedState!==null&&et(zt,t);var e=nt.current,i=Jp(e,t.type);e!==i&&(et(ut,t),et(nt,i))}function Pi(t){ut.current===t&&(V(nt),V(ut)),zt.current===t&&(V(zt),Mo._currentValue=k)}var hi,Tr;function di(t){if(hi===void 0)try{throw Error()}catch(i){var e=i.stack.trim().match(/\n( *(at )?)/);hi=e&&e[1]||"",Tr=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+hi+t+Tr}var Er=!1;function Cr(t,e){if(!t||Er)return"";Er=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(e){var F=function(){throw Error()};if(Object.defineProperty(F.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(F,[])}catch(Y){var I=Y}Reflect.construct(t,[],F)}else{try{F.call()}catch(Y){I=Y}t.call(F.prototype)}}else{try{throw Error()}catch(Y){I=Y}(F=t())&&typeof F.catch=="function"&&F.catch(function(){})}}catch(Y){if(Y&&I&&typeof Y.stack=="string")return[Y.stack,I.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=s.DetermineComponentFrameRoot(),v=p[0],T=p[1];if(v&&T){var A=v.split(`
`),H=T.split(`
`);for(h=s=0;s<A.length&&!A[s].includes("DetermineComponentFrameRoot");)s++;for(;h<H.length&&!H[h].includes("DetermineComponentFrameRoot");)h++;if(s===A.length||h===H.length)for(s=A.length-1,h=H.length-1;1<=s&&0<=h&&A[s]!==H[h];)h--;for(;1<=s&&0<=h;s--,h--)if(A[s]!==H[h]){if(s!==1||h!==1)do if(s--,h--,0>h||A[s]!==H[h]){var X=`
`+A[s].replace(" at new "," at ");return t.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",t.displayName)),X}while(1<=s&&0<=h);break}}}finally{Er=!1,Error.prepareStackTrace=i}return(i=t?t.displayName||t.name:"")?di(i):""}function Rs(t,e){switch(t.tag){case 26:case 27:case 5:return di(t.type);case 16:return di("Lazy");case 13:return t.child!==e&&e!==null?di("Suspense Fallback"):di("Suspense");case 19:return di("SuspenseList");case 0:case 15:return Cr(t.type,!1);case 11:return Cr(t.type.render,!1);case 1:return Cr(t.type,!0);case 31:return di("Activity");default:return""}}function Oa(t){try{var e="",i=null;do e+=Rs(t,i),i=t,t=t.return;while(t);return e}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}var Ls=Object.prototype.hasOwnProperty,Or=u.unstable_scheduleCallback,ja=u.unstable_cancelCallback,Qo=u.unstable_shouldYield,Jo=u.unstable_requestPaint,$e=u.unstable_now,$u=u.unstable_getCurrentPriorityLevel,jr=u.unstable_ImmediatePriority,ks=u.unstable_UserBlockingPriority,Aa=u.unstable_NormalPriority,Yu=u.unstable_LowPriority,Ms=u.unstable_IdlePriority,Fo=u.log,Wu=u.unstable_setDisableYieldValue,Ui=null,Ne=null;function Mn(t){if(typeof Fo=="function"&&Wu(t),Ne&&typeof Ne.setStrictMode=="function")try{Ne.setStrictMode(Ui,t)}catch{}}var Ye=Math.clz32?Math.clz32:Xu,za=Math.log,Ku=Math.LN2;function Xu(t){return t>>>=0,t===0?32:31-(za(t)/Ku|0)|0}var Ra=256,La=262144,ka=4194304;function fi(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Ar(t,e,i){var s=t.pendingLanes;if(s===0)return 0;var h=0,p=t.suspendedLanes,v=t.pingedLanes;t=t.warmLanes;var T=s&134217727;return T!==0?(s=T&~p,s!==0?h=fi(s):(v&=T,v!==0?h=fi(v):i||(i=T&~t,i!==0&&(h=fi(i))))):(T=s&~p,T!==0?h=fi(T):v!==0?h=fi(v):i||(i=s&~t,i!==0&&(h=fi(i)))),h===0?0:e!==0&&e!==h&&(e&p)===0&&(p=h&-h,i=e&-e,p>=i||p===32&&(i&4194048)!==0)?e:h}function Ma(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function Qu(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function tl(){var t=ka;return ka<<=1,(ka&62914560)===0&&(ka=4194304),t}function Bs(t){for(var e=[],i=0;31>i;i++)e.push(t);return e}function pi(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Ju(t,e,i,s,h,p){var v=t.pendingLanes;t.pendingLanes=i,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=i,t.entangledLanes&=i,t.errorRecoveryDisabledLanes&=i,t.shellSuspendCounter=0;var T=t.entanglements,A=t.expirationTimes,H=t.hiddenUpdates;for(i=v&~i;0<i;){var X=31-Ye(i),F=1<<X;T[X]=0,A[X]=-1;var I=H[X];if(I!==null)for(H[X]=null,X=0;X<I.length;X++){var Y=I[X];Y!==null&&(Y.lane&=-536870913)}i&=~F}s!==0&&el(t,s,0),p!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=p&~(v&~e))}function el(t,e,i){t.pendingLanes|=e,t.suspendedLanes&=~e;var s=31-Ye(e);t.entangledLanes|=e,t.entanglements[s]=t.entanglements[s]|1073741824|i&261930}function nl(t,e){var i=t.entangledLanes|=e;for(t=t.entanglements;i;){var s=31-Ye(i),h=1<<s;h&e|t[s]&e&&(t[s]|=e),i&=~h}}function il(t,e){var i=e&-e;return i=(i&42)!==0?1:Qe(i),(i&(t.suspendedLanes|e))!==0?0:i}function Qe(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function mt(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Ds(){var t=at.p;return t!==0?t:(t=window.event,t===void 0?32:xm(t.type))}function Ns(t,e){var i=at.p;try{return at.p=t,e()}finally{at.p=i}}var Bn=Math.random().toString(36).slice(2),ve="__reactFiber$"+Bn,Re="__reactProps$"+Bn,mi="__reactContainer$"+Bn,Wn="__reactEvents$"+Bn,al="__reactListeners$"+Bn,Fu="__reactHandles$"+Bn,rl="__reactResources$"+Bn,Ba="__reactMarker$"+Bn;function Ps(t){delete t[ve],delete t[Re],delete t[Wn],delete t[al],delete t[Fu]}function gi(t){var e=t[ve];if(e)return e;for(var i=t.parentNode;i;){if(e=i[mi]||i[ve]){if(i=e.alternate,e.child!==null||i!==null&&i.child!==null)for(t=rm(t);t!==null;){if(i=t[ve])return i;t=rm(t)}return e}t=i,i=t.parentNode}return null}function Hi(t){if(t=t[ve]||t[mi]){var e=t.tag;if(e===5||e===6||e===13||e===31||e===26||e===27||e===3)return t}return null}function Kn(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(l(33))}function qi(t){var e=t[rl];return e||(e=t[rl]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function be(t){t[Ba]=!0}var sl=new Set,ol={};function _i(t,e){Xn(t,e),Xn(t+"Capture",e)}function Xn(t,e){for(ol[t]=e,t=0;t<e.length;t++)sl.add(e[t])}var Da=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Us={},Hs={};function Na(t){return Ls.call(Hs,t)?!0:Ls.call(Us,t)?!1:Da.test(t)?Hs[t]=!0:(Us[t]=!0,!1)}function Lt(t,e,i){if(Na(e))if(i===null)t.removeAttribute(e);else{switch(typeof i){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var s=e.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+i)}}function Jt(t,e,i){if(i===null)t.removeAttribute(e);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+i)}}function Je(t,e,i,s){if(s===null)t.removeAttribute(i);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttributeNS(e,i,""+s)}}function Ce(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function yi(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function qs(t,e,i){var s=Object.getOwnPropertyDescriptor(t.constructor.prototype,e);if(!t.hasOwnProperty(e)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var h=s.get,p=s.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return h.call(this)},set:function(v){i=""+v,p.call(this,v)}}),Object.defineProperty(t,e,{enumerable:s.enumerable}),{getValue:function(){return i},setValue:function(v){i=""+v},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function St(t){if(!t._valueTracker){var e=yi(t)?"checked":"value";t._valueTracker=qs(t,e,""+t[e])}}function ue(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var i=e.getValue(),s="";return t&&(s=yi(t)?t.checked?"true":"false":t.value),t=s,t!==i?(e.setValue(t),!0):!1}function Zi(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var zr=/[\n"\\]/g;function re(t){return t.replace(zr,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function Zs(t,e,i,s,h,p,v,T){t.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?t.type=v:t.removeAttribute("type"),e!=null?v==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+Ce(e)):t.value!==""+Ce(e)&&(t.value=""+Ce(e)):v!=="submit"&&v!=="reset"||t.removeAttribute("value"),e!=null?Dn(t,v,Ce(e)):i!=null?Dn(t,v,Ce(i)):s!=null&&t.removeAttribute("value"),h==null&&p!=null&&(t.defaultChecked=!!p),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.name=""+Ce(T):t.removeAttribute("name")}function Pa(t,e,i,s,h,p,v,T){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(t.type=p),e!=null||i!=null){if(!(p!=="submit"&&p!=="reset"||e!=null)){St(t);return}i=i!=null?""+Ce(i):"",e=e!=null?""+Ce(e):i,T||e===t.value||(t.value=e),t.defaultValue=e}s=s??h,s=typeof s!="function"&&typeof s!="symbol"&&!!s,t.checked=T?t.checked:!!s,t.defaultChecked=!!s,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(t.name=v),St(t)}function Dn(t,e,i){e==="number"&&Zi(t.ownerDocument)===t||t.defaultValue===""+i||(t.defaultValue=""+i)}function ne(t,e,i,s){if(t=t.options,e){e={};for(var h=0;h<i.length;h++)e["$"+i[h]]=!0;for(i=0;i<t.length;i++)h=e.hasOwnProperty("$"+t[i].value),t[i].selected!==h&&(t[i].selected=h),h&&s&&(t[i].defaultSelected=!0)}else{for(i=""+Ce(i),e=null,h=0;h<t.length;h++){if(t[h].value===i){t[h].selected=!0,s&&(t[h].defaultSelected=!0);return}e!==null||t[h].disabled||(e=t[h])}e!==null&&(e.selected=!0)}}function Qn(t,e,i){if(e!=null&&(e=""+Ce(e),e!==t.value&&(t.value=e),i==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=i!=null?""+Ce(i):""}function Ii(t,e,i,s){if(e==null){if(s!=null){if(i!=null)throw Error(l(92));if(De(s)){if(1<s.length)throw Error(l(93));s=s[0]}i=s}i==null&&(i=""),e=i}i=Ce(e),t.defaultValue=i,s=t.textContent,s===i&&s!==""&&s!==null&&(t.value=s),St(t)}function Sn(t,e){if(e){var i=t.firstChild;if(i&&i===t.lastChild&&i.nodeType===3){i.nodeValue=e;return}}t.textContent=e}var Is=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Vi(t,e,i){var s=e.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?s?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":s?t.setProperty(e,i):typeof i!="number"||i===0||Is.has(e)?e==="float"?t.cssFloat=i:t[e]=(""+i).trim():t[e]=i+"px"}function Rr(t,e,i){if(e!=null&&typeof e!="object")throw Error(l(62));if(t=t.style,i!=null){for(var s in i)!i.hasOwnProperty(s)||e!=null&&e.hasOwnProperty(s)||(s.indexOf("--")===0?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="");for(var h in e)s=e[h],e.hasOwnProperty(h)&&i[h]!==s&&Vi(t,h,s)}else for(var p in e)e.hasOwnProperty(p)&&Vi(t,p,e[p])}function Ua(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Lr=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Vs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Gi(t){return Vs.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Fe(){}var kr=null;function Ha(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var $i=null,xt=null;function hn(t){var e=Hi(t);if(e&&(t=e.stateNode)){var i=t[Re]||null;t:switch(t=e.stateNode,e.type){case"input":if(Zs(t,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),e=i.name,i.type==="radio"&&e!=null){for(i=t;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+re(""+e)+'"][type="radio"]'),e=0;e<i.length;e++){var s=i[e];if(s!==t&&s.form===t.form){var h=s[Re]||null;if(!h)throw Error(l(90));Zs(s,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(e=0;e<i.length;e++)s=i[e],s.form===t.form&&ue(s)}break t;case"textarea":Qn(t,i.value,i.defaultValue);break t;case"select":e=i.value,e!=null&&ne(t,!!i.multiple,e,!1)}}}var Wt=!1;function Gs(t,e,i){if(Wt)return t(e,i);Wt=!0;try{var s=t(e);return s}finally{if(Wt=!1,($i!==null||xt!==null)&&(iu(),$i&&(e=$i,t=xt,xt=$i=null,hn(e),t)))for(e=0;e<t.length;e++)hn(t[e])}}function vi(t,e){var i=t.stateNode;if(i===null)return null;var s=i[Re]||null;if(s===null)return null;i=s[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break t;default:t=!1}if(t)return null;if(i&&typeof i!="function")throw Error(l(231,e,typeof i));return i}var dn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qa=!1;if(dn)try{var fn={};Object.defineProperty(fn,"passive",{get:function(){qa=!0}}),window.addEventListener("test",fn,fn),window.removeEventListener("test",fn,fn)}catch{qa=!1}var Tn=null,bi=null,fe=null;function Jn(){if(fe)return fe;var t,e=bi,i=e.length,s,h="value"in Tn?Tn.value:Tn.textContent,p=h.length;for(t=0;t<i&&e[t]===h[t];t++);var v=i-t;for(s=1;s<=v&&e[i-s]===h[p-s];s++);return fe=h.slice(t,1<s?1-s:void 0)}function Za(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ia(){return!0}function ll(){return!1}function Pe(t){function e(i,s,h,p,v){this._reactName=i,this._targetInst=h,this.type=s,this.nativeEvent=p,this.target=v,this.currentTarget=null;for(var T in t)t.hasOwnProperty(T)&&(i=t[T],this[T]=i?i(p):p[T]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Ia:ll,this.isPropagationStopped=ll,this}return E(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Ia)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Ia)},persist:function(){},isPersistent:Ia}),e}var Nn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Mr=Pe(Nn),Yi=E({},Nn,{view:0,detail:0}),Dt=Pe(Yi),$s,We,Pn,Va=E({},Yi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Js,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Pn&&(Pn&&t.type==="mousemove"?($s=t.screenX-Pn.screenX,We=t.screenY-Pn.screenY):We=$s=0,Pn=t),$s)},movementY:function(t){return"movementY"in t?t.movementY:We}}),ul=Pe(Va),Ys=E({},Va,{dataTransfer:0}),tc=Pe(Ys),cl=E({},Yi,{relatedTarget:0}),Ws=Pe(cl),ec=E({},Nn,{animationName:0,elapsedTime:0,pseudoElement:0}),Ks=Pe(ec),nc=E({},Nn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),En=Pe(nc),ic=E({},Nn,{data:0}),Xs=Pe(ic),Fn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Qs(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=dl[t])?!!e[t]:!1}function Js(){return Qs}var fl=E({},Yi,{key:function(t){if(t.key){var e=Fn[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Za(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?hl[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Js,charCode:function(t){return t.type==="keypress"?Za(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Za(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),pl=Pe(fl),ac=E({},Va,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ml=Pe(ac),Fs=E({},Yi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Js}),rc=Pe(Fs),gl=E({},Nn,{propertyName:0,elapsedTime:0,pseudoElement:0}),_l=Pe(gl),Br=E({},Va,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),xi=Pe(Br),sc=E({},Nn,{newState:0,oldState:0}),Ga=Pe(sc),tn=[9,13,27,32],Dr=dn&&"CompositionEvent"in window,Wi=null;dn&&"documentMode"in document&&(Wi=document.documentMode);var oc=dn&&"TextEvent"in window&&!Wi,Nr=dn&&(!Dr||Wi&&8<Wi&&11>=Wi),Pr=" ",yl=!1;function vl(t,e){switch(t){case"keyup":return tn.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function to(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ki=!1;function pn(t,e){switch(t){case"compositionend":return to(e);case"keypress":return e.which!==32?null:(yl=!0,Pr);case"textInput":return t=e.data,t===Pr&&yl?null:t;default:return null}}function Xi(t,e){if(Ki)return t==="compositionend"||!Dr&&vl(t,e)?(t=Jn(),fe=bi=Tn=null,Ki=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Nr&&e.locale!=="ko"?null:e.data;default:return null}}var lc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cn(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!lc[t.type]:e==="textarea"}function bl(t,e,i,s){$i?xt?xt.push(s):xt=[s]:$i=s,e=cu(e,"onChange"),0<e.length&&(i=new Mr("onChange","change",null,i,s),t.push({event:i,listeners:e}))}var On=null,$a=null;function Ya(t){Gp(t,0)}function Wa(t){var e=Kn(t);if(ue(e))return t}function Ka(t,e){if(t==="change")return e}var xl=!1;if(dn){var jn;if(dn){var Qi="oninput"in document;if(!Qi){var wl=document.createElement("div");wl.setAttribute("oninput","return;"),Qi=typeof wl.oninput=="function"}jn=Qi}else jn=!1;xl=jn&&(!document.documentMode||9<document.documentMode)}function Ur(){On&&(On.detachEvent("onpropertychange",Sl),$a=On=null)}function Sl(t){if(t.propertyName==="value"&&Wa($a)){var e=[];bl(e,$a,t,Ha(t)),Gs(Ya,e)}}function Un(t,e,i){t==="focusin"?(Ur(),On=e,$a=i,On.attachEvent("onpropertychange",Sl)):t==="focusout"&&Ur()}function uc(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Wa($a)}function Ji(t,e){if(t==="click")return Wa(e)}function cc(t,e){if(t==="input"||t==="change")return Wa(e)}function Hn(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Le=typeof Object.is=="function"?Object.is:Hn;function Fi(t,e){if(Le(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var i=Object.keys(t),s=Object.keys(e);if(i.length!==s.length)return!1;for(s=0;s<i.length;s++){var h=i[s];if(!Ls.call(e,h)||!Le(t[h],e[h]))return!1}return!0}function Hr(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Xa(t,e){var i=Hr(t);t=0;for(var s;i;){if(i.nodeType===3){if(s=t+i.textContent.length,t<=e&&s>=e)return{node:i,offset:e-t};t=s}t:{for(;i;){if(i.nextSibling){i=i.nextSibling;break t}i=i.parentNode}i=void 0}i=Hr(i)}}function qr(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?qr(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Qa(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=Zi(t.document);e instanceof t.HTMLIFrameElement;){try{var i=typeof e.contentWindow.location.href=="string"}catch{i=!1}if(i)t=e.contentWindow;else break;e=Zi(t.document)}return e}function ti(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var Zr=dn&&"documentMode"in document&&11>=document.documentMode,ei=null,Ir=null,Ja=null,ta=!1;function Tl(t,e,i){var s=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;ta||ei==null||ei!==Zi(s)||(s=ei,"selectionStart"in s&&ti(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Ja&&Fi(Ja,s)||(Ja=s,s=cu(Ir,"onSelect"),0<s.length&&(e=new Mr("onSelect","select",null,e,i),t.push({event:e,listeners:s}),e.target=ei)))}function ni(t,e){var i={};return i[t.toLowerCase()]=e.toLowerCase(),i["Webkit"+t]="webkit"+e,i["Moz"+t]="moz"+e,i}var ea={animationend:ni("Animation","AnimationEnd"),animationiteration:ni("Animation","AnimationIteration"),animationstart:ni("Animation","AnimationStart"),transitionrun:ni("Transition","TransitionRun"),transitionstart:ni("Transition","TransitionStart"),transitioncancel:ni("Transition","TransitionCancel"),transitionend:ni("Transition","TransitionEnd")},Vr={},El={};dn&&(El=document.createElement("div").style,"AnimationEvent"in window||(delete ea.animationend.animation,delete ea.animationiteration.animation,delete ea.animationstart.animation),"TransitionEvent"in window||delete ea.transitionend.transition);function ke(t){if(Vr[t])return Vr[t];if(!ea[t])return t;var e=ea[t],i;for(i in e)if(e.hasOwnProperty(i)&&i in El)return Vr[t]=e[i];return t}var Fa=ke("animationend"),Cl=ke("animationiteration"),tr=ke("animationstart"),hc=ke("transitionrun"),Ol=ke("transitionstart"),dc=ke("transitioncancel"),na=ke("transitionend"),jl=new Map,ii="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ii.push("scrollEnd");function en(t,e){jl.set(t,e),_i(e,[t])}var er=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},nn=[],Ze=0,Gr=0;function nr(){for(var t=Ze,e=Gr=Ze=0;e<t;){var i=nn[e];nn[e++]=null;var s=nn[e];nn[e++]=null;var h=nn[e];nn[e++]=null;var p=nn[e];if(nn[e++]=null,s!==null&&h!==null){var v=s.pending;v===null?h.next=h:(h.next=v.next,v.next=h),s.pending=h}p!==0&&ia(i,h,p)}}function ai(t,e,i,s){nn[Ze++]=t,nn[Ze++]=e,nn[Ze++]=i,nn[Ze++]=s,Gr|=s,t.lanes|=s,t=t.alternate,t!==null&&(t.lanes|=s)}function eo(t,e,i,s){return ai(t,e,i,s),ir(t)}function An(t,e){return ai(t,null,null,e),ir(t)}function ia(t,e,i){t.lanes|=i;var s=t.alternate;s!==null&&(s.lanes|=i);for(var h=!1,p=t.return;p!==null;)p.childLanes|=i,s=p.alternate,s!==null&&(s.childLanes|=i),p.tag===22&&(t=p.stateNode,t===null||t._visibility&1||(h=!0)),t=p,p=p.return;return t.tag===3?(p=t.stateNode,h&&e!==null&&(h=31-Ye(i),t=p.hiddenUpdates,s=t[h],s===null?t[h]=[e]:s.push(e),e.lane=i|536870912),p):null}function ir(t){if(50<Oo)throw Oo=0,ph=null,Error(l(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var wi={};function fc(t,e,i,s){this.tag=t,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ie(t,e,i,s){return new fc(t,e,i,s)}function $r(t){return t=t.prototype,!(!t||!t.isReactComponent)}function zn(t,e){var i=t.alternate;return i===null?(i=Ie(t.tag,e,t.key,t.mode),i.elementType=t.elementType,i.type=t.type,i.stateNode=t.stateNode,i.alternate=t,t.alternate=i):(i.pendingProps=e,i.type=t.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=t.flags&65011712,i.childLanes=t.childLanes,i.lanes=t.lanes,i.child=t.child,i.memoizedProps=t.memoizedProps,i.memoizedState=t.memoizedState,i.updateQueue=t.updateQueue,e=t.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},i.sibling=t.sibling,i.index=t.index,i.ref=t.ref,i.refCleanup=t.refCleanup,i}function no(t,e){t.flags&=65011714;var i=t.alternate;return i===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=i.childLanes,t.lanes=i.lanes,t.child=i.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=i.memoizedProps,t.memoizedState=i.memoizedState,t.updateQueue=i.updateQueue,t.type=i.type,e=i.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function ar(t,e,i,s,h,p){var v=0;if(s=t,typeof t=="function")$r(t)&&(v=1);else if(typeof t=="string")v=Cy(t,i,nt.current)?26:t==="html"||t==="head"||t==="body"?27:5;else t:switch(t){case qt:return t=Ie(31,i,e,h),t.elementType=qt,t.lanes=p,t;case P:return Si(i.children,h,p,e);case W:v=8,h|=24;break;case G:return t=Ie(12,i,e,h|2),t.elementType=G,t.lanes=p,t;case _t:return t=Ie(13,i,e,h),t.elementType=_t,t.lanes=p,t;case ht:return t=Ie(19,i,e,h),t.elementType=ht,t.lanes=p,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case B:v=10;break t;case K:v=9;break t;case ot:v=11;break t;case ct:v=14;break t;case Ht:v=16,s=null;break t}v=29,i=Error(l(130,t===null?"null":typeof t,"")),s=null}return e=Ie(v,i,e,h),e.elementType=t,e.type=s,e.lanes=p,e}function Si(t,e,i,s){return t=Ie(7,t,s,e),t.lanes=i,t}function Yr(t,e,i){return t=Ie(6,t,null,e),t.lanes=i,t}function io(t){var e=Ie(18,null,null,0);return e.stateNode=t,e}function ao(t,e,i){return e=Ie(4,t.children!==null?t.children:[],t.key,e),e.lanes=i,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var n=new WeakMap;function r(t,e){if(typeof t=="object"&&t!==null){var i=n.get(t);return i!==void 0?i:(e={value:t,source:e,stack:Oa(e)},n.set(t,e),e)}return{value:t,source:e,stack:Oa(e)}}var c=[],m=0,y=null,S=0,j=[],N=0,Z=null,J=1,st="";function gt(t,e){c[m++]=S,c[m++]=y,y=t,S=e}function jt(t,e,i){j[N++]=J,j[N++]=st,j[N++]=Z,Z=t;var s=J;t=st;var h=32-Ye(s)-1;s&=~(1<<h),i+=1;var p=32-Ye(e)+h;if(30<p){var v=h-h%5;p=(s&(1<<v)-1).toString(32),s>>=v,h-=v,J=1<<32-Ye(e)+h|i<<h|s,st=p+t}else J=1<<p|i<<h|s,st=t}function Oe(t){t.return!==null&&(gt(t,1),jt(t,1,0))}function pe(t){for(;t===y;)y=c[--m],c[m]=null,S=c[--m],c[m]=null;for(;t===Z;)Z=j[--N],j[N]=null,st=j[--N],j[N]=null,J=j[--N],j[N]=null}function Ke(t,e){j[N++]=J,j[N++]=st,j[N++]=Z,J=e.id,st=e.overflow,Z=t}var It=null,Vt=null,kt=!1,ri=null,an=!1,Wr=Error(l(519));function si(t){var e=Error(l(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw rr(r(e,t)),Wr}function ro(t){var e=t.stateNode,i=t.type,s=t.memoizedProps;switch(e[ve]=t,e[Re]=s,i){case"dialog":Bt("cancel",e),Bt("close",e);break;case"iframe":case"object":case"embed":Bt("load",e);break;case"video":case"audio":for(i=0;i<Ao.length;i++)Bt(Ao[i],e);break;case"source":Bt("error",e);break;case"img":case"image":case"link":Bt("error",e),Bt("load",e);break;case"details":Bt("toggle",e);break;case"input":Bt("invalid",e),Pa(e,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0);break;case"select":Bt("invalid",e);break;case"textarea":Bt("invalid",e),Ii(e,s.value,s.defaultValue,s.children)}i=s.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||e.textContent===""+i||s.suppressHydrationWarning===!0||Kp(e.textContent,i)?(s.popover!=null&&(Bt("beforetoggle",e),Bt("toggle",e)),s.onScroll!=null&&Bt("scroll",e),s.onScrollEnd!=null&&Bt("scrollend",e),s.onClick!=null&&(e.onclick=Fe),e=!0):e=!1,e||si(t,!0)}function he(t){for(It=t.return;It;)switch(It.tag){case 5:case 31:case 13:an=!1;return;case 27:case 3:an=!0;return;default:It=It.return}}function qn(t){if(t!==It)return!1;if(!kt)return he(t),kt=!0,!1;var e=t.tag,i;if((i=e!==3&&e!==27)&&((i=e===5)&&(i=t.type,i=!(i!=="form"&&i!=="button")||Ah(t.type,t.memoizedProps)),i=!i),i&&Vt&&si(t),he(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(l(317));Vt=am(t)}else if(e===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(l(317));Vt=am(t)}else e===27?(e=Vt,_a(t.type)?(t=Mh,Mh=null,Vt=t):Vt=e):Vt=It?Ln(t.stateNode.nextSibling):null;return!0}function Ti(){Vt=It=null,kt=!1}function so(){var t=ri;return t!==null&&(ln===null?ln=t:ln.push.apply(ln,t),ri=null),t}function rr(t){ri===null?ri=[t]:ri.push(t)}var sr=O(null),oi=null,Zn=null;function aa(t,e,i){et(sr,e._currentValue),e._currentValue=i}function Ei(t){t._currentValue=sr.current,V(sr)}function pc(t,e,i){for(;t!==null;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===i)break;t=t.return}}function mc(t,e,i,s){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var p=h.dependencies;if(p!==null){var v=h.child;p=p.firstContext;t:for(;p!==null;){var T=p;p=h;for(var A=0;A<e.length;A++)if(T.context===e[A]){p.lanes|=i,T=p.alternate,T!==null&&(T.lanes|=i),pc(p.return,i,t),s||(v=null);break t}p=T.next}}else if(h.tag===18){if(v=h.return,v===null)throw Error(l(341));v.lanes|=i,p=v.alternate,p!==null&&(p.lanes|=i),pc(v,i,t),v=null}else v=h.child;if(v!==null)v.return=h;else for(v=h;v!==null;){if(v===t){v=null;break}if(h=v.sibling,h!==null){h.return=v.return,v=h;break}v=v.return}h=v}}function Kr(t,e,i,s){t=null;for(var h=e,p=!1;h!==null;){if(!p){if((h.flags&524288)!==0)p=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var v=h.alternate;if(v===null)throw Error(l(387));if(v=v.memoizedProps,v!==null){var T=h.type;Le(h.pendingProps.value,v.value)||(t!==null?t.push(T):t=[T])}}else if(h===zt.current){if(v=h.alternate,v===null)throw Error(l(387));v.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(Mo):t=[Mo])}h=h.return}t!==null&&mc(e,t,i,s),e.flags|=262144}function Al(t){for(t=t.firstContext;t!==null;){if(!Le(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function or(t){oi=t,Zn=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Ue(t){return kd(oi,t)}function zl(t,e){return oi===null&&or(t),kd(t,e)}function kd(t,e){var i=e._currentValue;if(e={context:e,memoizedValue:i,next:null},Zn===null){if(t===null)throw Error(l(308));Zn=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else Zn=Zn.next=e;return i}var w_=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(i,s){t.push(s)}};this.abort=function(){e.aborted=!0,t.forEach(function(i){return i()})}},S_=u.unstable_scheduleCallback,T_=u.unstable_NormalPriority,xe={$$typeof:B,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function gc(){return{controller:new w_,data:new Map,refCount:0}}function oo(t){t.refCount--,t.refCount===0&&S_(T_,function(){t.controller.abort()})}var lo=null,_c=0,Xr=0,Qr=null;function E_(t,e){if(lo===null){var i=lo=[];_c=0,Xr=bh(),Qr={status:"pending",value:void 0,then:function(s){i.push(s)}}}return _c++,e.then(Md,Md),e}function Md(){if(--_c===0&&lo!==null){Qr!==null&&(Qr.status="fulfilled");var t=lo;lo=null,Xr=0,Qr=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function C_(t,e){var i=[],s={status:"pending",value:null,reason:null,then:function(h){i.push(h)}};return t.then(function(){s.status="fulfilled",s.value=e;for(var h=0;h<i.length;h++)(0,i[h])(e)},function(h){for(s.status="rejected",s.reason=h,h=0;h<i.length;h++)(0,i[h])(void 0)}),s}var Bd=$.S;$.S=function(t,e){vp=$e(),typeof e=="object"&&e!==null&&typeof e.then=="function"&&E_(t,e),Bd!==null&&Bd(t,e)};var lr=O(null);function yc(){var t=lr.current;return t!==null?t:ie.pooledCache}function Rl(t,e){e===null?et(lr,lr.current):et(lr,e.pool)}function Dd(){var t=yc();return t===null?null:{parent:xe._currentValue,pool:t}}var Jr=Error(l(460)),vc=Error(l(474)),Ll=Error(l(542)),kl={then:function(){}};function Nd(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Pd(t,e,i){switch(i=t[i],i===void 0?t.push(e):i!==e&&(e.then(Fe,Fe),e=i),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,Hd(t),t;default:if(typeof e.status=="string")e.then(Fe,Fe);else{if(t=ie,t!==null&&100<t.shellSuspendCounter)throw Error(l(482));t=e,t.status="pending",t.then(function(s){if(e.status==="pending"){var h=e;h.status="fulfilled",h.value=s}},function(s){if(e.status==="pending"){var h=e;h.status="rejected",h.reason=s}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,Hd(t),t}throw cr=e,Jr}}function ur(t){try{var e=t._init;return e(t._payload)}catch(i){throw i!==null&&typeof i=="object"&&typeof i.then=="function"?(cr=i,Jr):i}}var cr=null;function Ud(){if(cr===null)throw Error(l(459));var t=cr;return cr=null,t}function Hd(t){if(t===Jr||t===Ll)throw Error(l(483))}var Fr=null,uo=0;function Ml(t){var e=uo;return uo+=1,Fr===null&&(Fr=[]),Pd(Fr,t,e)}function co(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function Bl(t,e){throw e.$$typeof===z?Error(l(525)):(t=Object.prototype.toString.call(e),Error(l(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function qd(t){function e(D,M){if(t){var U=D.deletions;U===null?(D.deletions=[M],D.flags|=16):U.push(M)}}function i(D,M){if(!t)return null;for(;M!==null;)e(D,M),M=M.sibling;return null}function s(D){for(var M=new Map;D!==null;)D.key!==null?M.set(D.key,D):M.set(D.index,D),D=D.sibling;return M}function h(D,M){return D=zn(D,M),D.index=0,D.sibling=null,D}function p(D,M,U){return D.index=U,t?(U=D.alternate,U!==null?(U=U.index,U<M?(D.flags|=67108866,M):U):(D.flags|=67108866,M)):(D.flags|=1048576,M)}function v(D){return t&&D.alternate===null&&(D.flags|=67108866),D}function T(D,M,U,Q){return M===null||M.tag!==6?(M=Yr(U,D.mode,Q),M.return=D,M):(M=h(M,U),M.return=D,M)}function A(D,M,U,Q){var yt=U.type;return yt===P?X(D,M,U.props.children,Q,U.key):M!==null&&(M.elementType===yt||typeof yt=="object"&&yt!==null&&yt.$$typeof===Ht&&ur(yt)===M.type)?(M=h(M,U.props),co(M,U),M.return=D,M):(M=ar(U.type,U.key,U.props,null,D.mode,Q),co(M,U),M.return=D,M)}function H(D,M,U,Q){return M===null||M.tag!==4||M.stateNode.containerInfo!==U.containerInfo||M.stateNode.implementation!==U.implementation?(M=ao(U,D.mode,Q),M.return=D,M):(M=h(M,U.children||[]),M.return=D,M)}function X(D,M,U,Q,yt){return M===null||M.tag!==7?(M=Si(U,D.mode,Q,yt),M.return=D,M):(M=h(M,U),M.return=D,M)}function F(D,M,U){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return M=Yr(""+M,D.mode,U),M.return=D,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case R:return U=ar(M.type,M.key,M.props,null,D.mode,U),co(U,M),U.return=D,U;case q:return M=ao(M,D.mode,U),M.return=D,M;case Ht:return M=ur(M),F(D,M,U)}if(De(M)||Ut(M))return M=Si(M,D.mode,U,null),M.return=D,M;if(typeof M.then=="function")return F(D,Ml(M),U);if(M.$$typeof===B)return F(D,zl(D,M),U);Bl(D,M)}return null}function I(D,M,U,Q){var yt=M!==null?M.key:null;if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return yt!==null?null:T(D,M,""+U,Q);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case R:return U.key===yt?A(D,M,U,Q):null;case q:return U.key===yt?H(D,M,U,Q):null;case Ht:return U=ur(U),I(D,M,U,Q)}if(De(U)||Ut(U))return yt!==null?null:X(D,M,U,Q,null);if(typeof U.then=="function")return I(D,M,Ml(U),Q);if(U.$$typeof===B)return I(D,M,zl(D,U),Q);Bl(D,U)}return null}function Y(D,M,U,Q,yt){if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return D=D.get(U)||null,T(M,D,""+Q,yt);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case R:return D=D.get(Q.key===null?U:Q.key)||null,A(M,D,Q,yt);case q:return D=D.get(Q.key===null?U:Q.key)||null,H(M,D,Q,yt);case Ht:return Q=ur(Q),Y(D,M,U,Q,yt)}if(De(Q)||Ut(Q))return D=D.get(U)||null,X(M,D,Q,yt,null);if(typeof Q.then=="function")return Y(D,M,U,Ml(Q),yt);if(Q.$$typeof===B)return Y(D,M,U,zl(M,Q),yt);Bl(M,Q)}return null}function dt(D,M,U,Q){for(var yt=null,Gt=null,ft=M,At=M=0,Pt=null;ft!==null&&At<U.length;At++){ft.index>At?(Pt=ft,ft=null):Pt=ft.sibling;var $t=I(D,ft,U[At],Q);if($t===null){ft===null&&(ft=Pt);break}t&&ft&&$t.alternate===null&&e(D,ft),M=p($t,M,At),Gt===null?yt=$t:Gt.sibling=$t,Gt=$t,ft=Pt}if(At===U.length)return i(D,ft),kt&&gt(D,At),yt;if(ft===null){for(;At<U.length;At++)ft=F(D,U[At],Q),ft!==null&&(M=p(ft,M,At),Gt===null?yt=ft:Gt.sibling=ft,Gt=ft);return kt&&gt(D,At),yt}for(ft=s(ft);At<U.length;At++)Pt=Y(ft,D,At,U[At],Q),Pt!==null&&(t&&Pt.alternate!==null&&ft.delete(Pt.key===null?At:Pt.key),M=p(Pt,M,At),Gt===null?yt=Pt:Gt.sibling=Pt,Gt=Pt);return t&&ft.forEach(function(wa){return e(D,wa)}),kt&&gt(D,At),yt}function bt(D,M,U,Q){if(U==null)throw Error(l(151));for(var yt=null,Gt=null,ft=M,At=M=0,Pt=null,$t=U.next();ft!==null&&!$t.done;At++,$t=U.next()){ft.index>At?(Pt=ft,ft=null):Pt=ft.sibling;var wa=I(D,ft,$t.value,Q);if(wa===null){ft===null&&(ft=Pt);break}t&&ft&&wa.alternate===null&&e(D,ft),M=p(wa,M,At),Gt===null?yt=wa:Gt.sibling=wa,Gt=wa,ft=Pt}if($t.done)return i(D,ft),kt&&gt(D,At),yt;if(ft===null){for(;!$t.done;At++,$t=U.next())$t=F(D,$t.value,Q),$t!==null&&(M=p($t,M,At),Gt===null?yt=$t:Gt.sibling=$t,Gt=$t);return kt&&gt(D,At),yt}for(ft=s(ft);!$t.done;At++,$t=U.next())$t=Y(ft,D,At,$t.value,Q),$t!==null&&(t&&$t.alternate!==null&&ft.delete($t.key===null?At:$t.key),M=p($t,M,At),Gt===null?yt=$t:Gt.sibling=$t,Gt=$t);return t&&ft.forEach(function(Ny){return e(D,Ny)}),kt&&gt(D,At),yt}function ee(D,M,U,Q){if(typeof U=="object"&&U!==null&&U.type===P&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case R:t:{for(var yt=U.key;M!==null;){if(M.key===yt){if(yt=U.type,yt===P){if(M.tag===7){i(D,M.sibling),Q=h(M,U.props.children),Q.return=D,D=Q;break t}}else if(M.elementType===yt||typeof yt=="object"&&yt!==null&&yt.$$typeof===Ht&&ur(yt)===M.type){i(D,M.sibling),Q=h(M,U.props),co(Q,U),Q.return=D,D=Q;break t}i(D,M);break}else e(D,M);M=M.sibling}U.type===P?(Q=Si(U.props.children,D.mode,Q,U.key),Q.return=D,D=Q):(Q=ar(U.type,U.key,U.props,null,D.mode,Q),co(Q,U),Q.return=D,D=Q)}return v(D);case q:t:{for(yt=U.key;M!==null;){if(M.key===yt)if(M.tag===4&&M.stateNode.containerInfo===U.containerInfo&&M.stateNode.implementation===U.implementation){i(D,M.sibling),Q=h(M,U.children||[]),Q.return=D,D=Q;break t}else{i(D,M);break}else e(D,M);M=M.sibling}Q=ao(U,D.mode,Q),Q.return=D,D=Q}return v(D);case Ht:return U=ur(U),ee(D,M,U,Q)}if(De(U))return dt(D,M,U,Q);if(Ut(U)){if(yt=Ut(U),typeof yt!="function")throw Error(l(150));return U=yt.call(U),bt(D,M,U,Q)}if(typeof U.then=="function")return ee(D,M,Ml(U),Q);if(U.$$typeof===B)return ee(D,M,zl(D,U),Q);Bl(D,U)}return typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint"?(U=""+U,M!==null&&M.tag===6?(i(D,M.sibling),Q=h(M,U),Q.return=D,D=Q):(i(D,M),Q=Yr(U,D.mode,Q),Q.return=D,D=Q),v(D)):i(D,M)}return function(D,M,U,Q){try{uo=0;var yt=ee(D,M,U,Q);return Fr=null,yt}catch(ft){if(ft===Jr||ft===Ll)throw ft;var Gt=Ie(29,ft,null,D.mode);return Gt.lanes=Q,Gt.return=D,Gt}finally{}}}var hr=qd(!0),Zd=qd(!1),ra=!1;function bc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function xc(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function sa(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function oa(t,e,i){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,(Yt&2)!==0){var h=s.pending;return h===null?e.next=e:(e.next=h.next,h.next=e),s.pending=e,e=ir(t),ia(t,null,i),e}return ai(t,s,e,i),ir(t)}function ho(t,e,i){if(e=e.updateQueue,e!==null&&(e=e.shared,(i&4194048)!==0)){var s=e.lanes;s&=t.pendingLanes,i|=s,e.lanes=i,nl(t,i)}}function wc(t,e){var i=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,i===s)){var h=null,p=null;if(i=i.firstBaseUpdate,i!==null){do{var v={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};p===null?h=p=v:p=p.next=v,i=i.next}while(i!==null);p===null?h=p=e:p=p.next=e}else h=p=e;i={baseState:s.baseState,firstBaseUpdate:h,lastBaseUpdate:p,shared:s.shared,callbacks:s.callbacks},t.updateQueue=i;return}t=i.lastBaseUpdate,t===null?i.firstBaseUpdate=e:t.next=e,i.lastBaseUpdate=e}var Sc=!1;function fo(){if(Sc){var t=Qr;if(t!==null)throw t}}function po(t,e,i,s){Sc=!1;var h=t.updateQueue;ra=!1;var p=h.firstBaseUpdate,v=h.lastBaseUpdate,T=h.shared.pending;if(T!==null){h.shared.pending=null;var A=T,H=A.next;A.next=null,v===null?p=H:v.next=H,v=A;var X=t.alternate;X!==null&&(X=X.updateQueue,T=X.lastBaseUpdate,T!==v&&(T===null?X.firstBaseUpdate=H:T.next=H,X.lastBaseUpdate=A))}if(p!==null){var F=h.baseState;v=0,X=H=A=null,T=p;do{var I=T.lane&-536870913,Y=I!==T.lane;if(Y?(Nt&I)===I:(s&I)===I){I!==0&&I===Xr&&(Sc=!0),X!==null&&(X=X.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});t:{var dt=t,bt=T;I=e;var ee=i;switch(bt.tag){case 1:if(dt=bt.payload,typeof dt=="function"){F=dt.call(ee,F,I);break t}F=dt;break t;case 3:dt.flags=dt.flags&-65537|128;case 0:if(dt=bt.payload,I=typeof dt=="function"?dt.call(ee,F,I):dt,I==null)break t;F=E({},F,I);break t;case 2:ra=!0}}I=T.callback,I!==null&&(t.flags|=64,Y&&(t.flags|=8192),Y=h.callbacks,Y===null?h.callbacks=[I]:Y.push(I))}else Y={lane:I,tag:T.tag,payload:T.payload,callback:T.callback,next:null},X===null?(H=X=Y,A=F):X=X.next=Y,v|=I;if(T=T.next,T===null){if(T=h.shared.pending,T===null)break;Y=T,T=Y.next,Y.next=null,h.lastBaseUpdate=Y,h.shared.pending=null}}while(!0);X===null&&(A=F),h.baseState=A,h.firstBaseUpdate=H,h.lastBaseUpdate=X,p===null&&(h.shared.lanes=0),da|=v,t.lanes=v,t.memoizedState=F}}function Id(t,e){if(typeof t!="function")throw Error(l(191,t));t.call(e)}function Vd(t,e){var i=t.callbacks;if(i!==null)for(t.callbacks=null,t=0;t<i.length;t++)Id(i[t],e)}var ts=O(null),Dl=O(0);function Gd(t,e){t=Mi,et(Dl,t),et(ts,e),Mi=t|e.baseLanes}function Tc(){et(Dl,Mi),et(ts,ts.current)}function Ec(){Mi=Dl.current,V(ts),V(Dl)}var mn=O(null),Rn=null;function la(t){var e=t.alternate;et(_e,_e.current&1),et(mn,t),Rn===null&&(e===null||ts.current!==null||e.memoizedState!==null)&&(Rn=t)}function Cc(t){et(_e,_e.current),et(mn,t),Rn===null&&(Rn=t)}function $d(t){t.tag===22?(et(_e,_e.current),et(mn,t),Rn===null&&(Rn=t)):ua()}function ua(){et(_e,_e.current),et(mn,mn.current)}function gn(t){V(mn),Rn===t&&(Rn=null),V(_e)}var _e=O(0);function Nl(t){for(var e=t;e!==null;){if(e.tag===13){var i=e.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||Lh(i)||kh(i)))return e}else if(e.tag===19&&(e.memoizedProps.revealOrder==="forwards"||e.memoizedProps.revealOrder==="backwards"||e.memoizedProps.revealOrder==="unstable_legacy-backwards"||e.memoizedProps.revealOrder==="together")){if((e.flags&128)!==0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ci=0,Ot=null,Ft=null,we=null,Pl=!1,es=!1,dr=!1,Ul=0,mo=0,ns=null,O_=0;function me(){throw Error(l(321))}function Oc(t,e){if(e===null)return!1;for(var i=0;i<e.length&&i<t.length;i++)if(!Le(t[i],e[i]))return!1;return!0}function jc(t,e,i,s,h,p){return Ci=p,Ot=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,$.H=t===null||t.memoizedState===null?zf:Ic,dr=!1,p=i(s,h),dr=!1,es&&(p=Wd(e,i,s,h)),Yd(t),p}function Yd(t){$.H=yo;var e=Ft!==null&&Ft.next!==null;if(Ci=0,we=Ft=Ot=null,Pl=!1,mo=0,ns=null,e)throw Error(l(300));t===null||Se||(t=t.dependencies,t!==null&&Al(t)&&(Se=!0))}function Wd(t,e,i,s){Ot=t;var h=0;do{if(es&&(ns=null),mo=0,es=!1,25<=h)throw Error(l(301));if(h+=1,we=Ft=null,t.updateQueue!=null){var p=t.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}$.H=Rf,p=e(i,s)}while(es);return p}function j_(){var t=$.H,e=t.useState()[0];return e=typeof e.then=="function"?go(e):e,t=t.useState()[0],(Ft!==null?Ft.memoizedState:null)!==t&&(Ot.flags|=1024),e}function Ac(){var t=Ul!==0;return Ul=0,t}function zc(t,e,i){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i}function Rc(t){if(Pl){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}Pl=!1}Ci=0,we=Ft=Ot=null,es=!1,mo=Ul=0,ns=null}function Xe(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return we===null?Ot.memoizedState=we=t:we=we.next=t,we}function ye(){if(Ft===null){var t=Ot.alternate;t=t!==null?t.memoizedState:null}else t=Ft.next;var e=we===null?Ot.memoizedState:we.next;if(e!==null)we=e,Ft=t;else{if(t===null)throw Ot.alternate===null?Error(l(467)):Error(l(310));Ft=t,t={memoizedState:Ft.memoizedState,baseState:Ft.baseState,baseQueue:Ft.baseQueue,queue:Ft.queue,next:null},we===null?Ot.memoizedState=we=t:we=we.next=t}return we}function Hl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function go(t){var e=mo;return mo+=1,ns===null&&(ns=[]),t=Pd(ns,t,e),e=Ot,(we===null?e.memoizedState:we.next)===null&&(e=e.alternate,$.H=e===null||e.memoizedState===null?zf:Ic),t}function ql(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return go(t);if(t.$$typeof===B)return Ue(t)}throw Error(l(438,String(t)))}function Lc(t){var e=null,i=Ot.updateQueue;if(i!==null&&(e=i.memoCache),e==null){var s=Ot.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(e={data:s.data.map(function(h){return h.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),i===null&&(i=Hl(),Ot.updateQueue=i),i.memoCache=e,i=e.data[e.index],i===void 0)for(i=e.data[e.index]=Array(t),s=0;s<t;s++)i[s]=wt;return e.index++,i}function Oi(t,e){return typeof e=="function"?e(t):e}function Zl(t){var e=ye();return kc(e,Ft,t)}function kc(t,e,i){var s=t.queue;if(s===null)throw Error(l(311));s.lastRenderedReducer=i;var h=t.baseQueue,p=s.pending;if(p!==null){if(h!==null){var v=h.next;h.next=p.next,p.next=v}e.baseQueue=h=p,s.pending=null}if(p=t.baseState,h===null)t.memoizedState=p;else{e=h.next;var T=v=null,A=null,H=e,X=!1;do{var F=H.lane&-536870913;if(F!==H.lane?(Nt&F)===F:(Ci&F)===F){var I=H.revertLane;if(I===0)A!==null&&(A=A.next={lane:0,revertLane:0,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),F===Xr&&(X=!0);else if((Ci&I)===I){H=H.next,I===Xr&&(X=!0);continue}else F={lane:0,revertLane:H.revertLane,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},A===null?(T=A=F,v=p):A=A.next=F,Ot.lanes|=I,da|=I;F=H.action,dr&&i(p,F),p=H.hasEagerState?H.eagerState:i(p,F)}else I={lane:F,revertLane:H.revertLane,gesture:H.gesture,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},A===null?(T=A=I,v=p):A=A.next=I,Ot.lanes|=F,da|=F;H=H.next}while(H!==null&&H!==e);if(A===null?v=p:A.next=T,!Le(p,t.memoizedState)&&(Se=!0,X&&(i=Qr,i!==null)))throw i;t.memoizedState=p,t.baseState=v,t.baseQueue=A,s.lastRenderedState=p}return h===null&&(s.lanes=0),[t.memoizedState,s.dispatch]}function Mc(t){var e=ye(),i=e.queue;if(i===null)throw Error(l(311));i.lastRenderedReducer=t;var s=i.dispatch,h=i.pending,p=e.memoizedState;if(h!==null){i.pending=null;var v=h=h.next;do p=t(p,v.action),v=v.next;while(v!==h);Le(p,e.memoizedState)||(Se=!0),e.memoizedState=p,e.baseQueue===null&&(e.baseState=p),i.lastRenderedState=p}return[p,s]}function Kd(t,e,i){var s=Ot,h=ye(),p=kt;if(p){if(i===void 0)throw Error(l(407));i=i()}else i=e();var v=!Le((Ft||h).memoizedState,i);if(v&&(h.memoizedState=i,Se=!0),h=h.queue,Nc(Jd.bind(null,s,h,t),[t]),h.getSnapshot!==e||v||we!==null&&we.memoizedState.tag&1){if(s.flags|=2048,is(9,{destroy:void 0},Qd.bind(null,s,h,i,e),null),ie===null)throw Error(l(349));p||(Ci&127)!==0||Xd(s,e,i)}return i}function Xd(t,e,i){t.flags|=16384,t={getSnapshot:e,value:i},e=Ot.updateQueue,e===null?(e=Hl(),Ot.updateQueue=e,e.stores=[t]):(i=e.stores,i===null?e.stores=[t]:i.push(t))}function Qd(t,e,i,s){e.value=i,e.getSnapshot=s,Fd(e)&&tf(t)}function Jd(t,e,i){return i(function(){Fd(e)&&tf(t)})}function Fd(t){var e=t.getSnapshot;t=t.value;try{var i=e();return!Le(t,i)}catch{return!0}}function tf(t){var e=An(t,2);e!==null&&un(e,t,2)}function Bc(t){var e=Xe();if(typeof t=="function"){var i=t;if(t=i(),dr){Mn(!0);try{i()}finally{Mn(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oi,lastRenderedState:t},e}function ef(t,e,i,s){return t.baseState=i,kc(t,Ft,typeof s=="function"?s:Oi)}function A_(t,e,i,s,h){if(Gl(t))throw Error(l(485));if(t=e.action,t!==null){var p={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){p.listeners.push(v)}};$.T!==null?i(!0):p.isTransition=!1,s(p),i=e.pending,i===null?(p.next=e.pending=p,nf(e,p)):(p.next=i.next,e.pending=i.next=p)}}function nf(t,e){var i=e.action,s=e.payload,h=t.state;if(e.isTransition){var p=$.T,v={};$.T=v;try{var T=i(h,s),A=$.S;A!==null&&A(v,T),af(t,e,T)}catch(H){Dc(t,e,H)}finally{p!==null&&v.types!==null&&(p.types=v.types),$.T=p}}else try{p=i(h,s),af(t,e,p)}catch(H){Dc(t,e,H)}}function af(t,e,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(s){rf(t,e,s)},function(s){return Dc(t,e,s)}):rf(t,e,i)}function rf(t,e,i){e.status="fulfilled",e.value=i,sf(e),t.state=i,e=t.pending,e!==null&&(i=e.next,i===e?t.pending=null:(i=i.next,e.next=i,nf(t,i)))}function Dc(t,e,i){var s=t.pending;if(t.pending=null,s!==null){s=s.next;do e.status="rejected",e.reason=i,sf(e),e=e.next;while(e!==s)}t.action=null}function sf(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function of(t,e){return e}function lf(t,e){if(kt){var i=ie.formState;if(i!==null){t:{var s=Ot;if(kt){if(Vt){e:{for(var h=Vt,p=an;h.nodeType!==8;){if(!p){h=null;break e}if(h=Ln(h.nextSibling),h===null){h=null;break e}}p=h.data,h=p==="F!"||p==="F"?h:null}if(h){Vt=Ln(h.nextSibling),s=h.data==="F!";break t}}si(s)}s=!1}s&&(e=i[0])}}return i=Xe(),i.memoizedState=i.baseState=e,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:of,lastRenderedState:e},i.queue=s,i=Of.bind(null,Ot,s),s.dispatch=i,s=Bc(!1),p=Zc.bind(null,Ot,!1,s.queue),s=Xe(),h={state:e,dispatch:null,action:t,pending:null},s.queue=h,i=A_.bind(null,Ot,h,p,i),h.dispatch=i,s.memoizedState=t,[e,i,!1]}function uf(t){var e=ye();return cf(e,Ft,t)}function cf(t,e,i){if(e=kc(t,e,of)[0],t=Zl(Oi)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var s=go(e)}catch(v){throw v===Jr?Ll:v}else s=e;e=ye();var h=e.queue,p=h.dispatch;return i!==e.memoizedState&&(Ot.flags|=2048,is(9,{destroy:void 0},z_.bind(null,h,i),null)),[s,p,t]}function z_(t,e){t.action=e}function hf(t){var e=ye(),i=Ft;if(i!==null)return cf(e,i,t);ye(),e=e.memoizedState,i=ye();var s=i.queue.dispatch;return i.memoizedState=t,[e,s,!1]}function is(t,e,i,s){return t={tag:t,create:i,deps:s,inst:e,next:null},e=Ot.updateQueue,e===null&&(e=Hl(),Ot.updateQueue=e),i=e.lastEffect,i===null?e.lastEffect=t.next=t:(s=i.next,i.next=t,t.next=s,e.lastEffect=t),t}function df(){return ye().memoizedState}function Il(t,e,i,s){var h=Xe();Ot.flags|=t,h.memoizedState=is(1|e,{destroy:void 0},i,s===void 0?null:s)}function Vl(t,e,i,s){var h=ye();s=s===void 0?null:s;var p=h.memoizedState.inst;Ft!==null&&s!==null&&Oc(s,Ft.memoizedState.deps)?h.memoizedState=is(e,p,i,s):(Ot.flags|=t,h.memoizedState=is(1|e,p,i,s))}function ff(t,e){Il(8390656,8,t,e)}function Nc(t,e){Vl(2048,8,t,e)}function R_(t){Ot.flags|=4;var e=Ot.updateQueue;if(e===null)e=Hl(),Ot.updateQueue=e,e.events=[t];else{var i=e.events;i===null?e.events=[t]:i.push(t)}}function pf(t){var e=ye().memoizedState;return R_({ref:e,nextImpl:t}),function(){if((Yt&2)!==0)throw Error(l(440));return e.impl.apply(void 0,arguments)}}function mf(t,e){return Vl(4,2,t,e)}function gf(t,e){return Vl(4,4,t,e)}function _f(t,e){if(typeof e=="function"){t=t();var i=e(t);return function(){typeof i=="function"?i():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function yf(t,e,i){i=i!=null?i.concat([t]):null,Vl(4,4,_f.bind(null,e,t),i)}function Pc(){}function vf(t,e){var i=ye();e=e===void 0?null:e;var s=i.memoizedState;return e!==null&&Oc(e,s[1])?s[0]:(i.memoizedState=[t,e],t)}function bf(t,e){var i=ye();e=e===void 0?null:e;var s=i.memoizedState;if(e!==null&&Oc(e,s[1]))return s[0];if(s=t(),dr){Mn(!0);try{t()}finally{Mn(!1)}}return i.memoizedState=[s,e],s}function Uc(t,e,i){return i===void 0||(Ci&1073741824)!==0&&(Nt&261930)===0?t.memoizedState=e:(t.memoizedState=i,t=xp(),Ot.lanes|=t,da|=t,i)}function xf(t,e,i,s){return Le(i,e)?i:ts.current!==null?(t=Uc(t,i,s),Le(t,e)||(Se=!0),t):(Ci&42)===0||(Ci&1073741824)!==0&&(Nt&261930)===0?(Se=!0,t.memoizedState=i):(t=xp(),Ot.lanes|=t,da|=t,e)}function wf(t,e,i,s,h){var p=at.p;at.p=p!==0&&8>p?p:8;var v=$.T,T={};$.T=T,Zc(t,!1,e,i);try{var A=h(),H=$.S;if(H!==null&&H(T,A),A!==null&&typeof A=="object"&&typeof A.then=="function"){var X=C_(A,s);_o(t,e,X,vn(t))}else _o(t,e,s,vn(t))}catch(F){_o(t,e,{then:function(){},status:"rejected",reason:F},vn())}finally{at.p=p,v!==null&&T.types!==null&&(v.types=T.types),$.T=v}}function L_(){}function Hc(t,e,i,s){if(t.tag!==5)throw Error(l(476));var h=Sf(t).queue;wf(t,h,e,k,i===null?L_:function(){return Tf(t),i(s)})}function Sf(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:k,baseState:k,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oi,lastRenderedState:k},next:null};var i={};return e.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oi,lastRenderedState:i},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function Tf(t){var e=Sf(t);e.next===null&&(e=t.alternate.memoizedState),_o(t,e.next.queue,{},vn())}function qc(){return Ue(Mo)}function Ef(){return ye().memoizedState}function Cf(){return ye().memoizedState}function k_(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var i=vn();t=sa(i);var s=oa(e,t,i);s!==null&&(un(s,e,i),ho(s,e,i)),e={cache:gc()},t.payload=e;return}e=e.return}}function M_(t,e,i){var s=vn();i={lane:s,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},Gl(t)?jf(e,i):(i=eo(t,e,i,s),i!==null&&(un(i,t,s),Af(i,e,s)))}function Of(t,e,i){var s=vn();_o(t,e,i,s)}function _o(t,e,i,s){var h={lane:s,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null};if(Gl(t))jf(e,h);else{var p=t.alternate;if(t.lanes===0&&(p===null||p.lanes===0)&&(p=e.lastRenderedReducer,p!==null))try{var v=e.lastRenderedState,T=p(v,i);if(h.hasEagerState=!0,h.eagerState=T,Le(T,v))return ai(t,e,h,0),ie===null&&nr(),!1}catch{}finally{}if(i=eo(t,e,h,s),i!==null)return un(i,t,s),Af(i,e,s),!0}return!1}function Zc(t,e,i,s){if(s={lane:2,revertLane:bh(),gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},Gl(t)){if(e)throw Error(l(479))}else e=eo(t,i,s,2),e!==null&&un(e,t,2)}function Gl(t){var e=t.alternate;return t===Ot||e!==null&&e===Ot}function jf(t,e){es=Pl=!0;var i=t.pending;i===null?e.next=e:(e.next=i.next,i.next=e),t.pending=e}function Af(t,e,i){if((i&4194048)!==0){var s=e.lanes;s&=t.pendingLanes,i|=s,e.lanes=i,nl(t,i)}}var yo={readContext:Ue,use:ql,useCallback:me,useContext:me,useEffect:me,useImperativeHandle:me,useLayoutEffect:me,useInsertionEffect:me,useMemo:me,useReducer:me,useRef:me,useState:me,useDebugValue:me,useDeferredValue:me,useTransition:me,useSyncExternalStore:me,useId:me,useHostTransitionStatus:me,useFormState:me,useActionState:me,useOptimistic:me,useMemoCache:me,useCacheRefresh:me};yo.useEffectEvent=me;var zf={readContext:Ue,use:ql,useCallback:function(t,e){return Xe().memoizedState=[t,e===void 0?null:e],t},useContext:Ue,useEffect:ff,useImperativeHandle:function(t,e,i){i=i!=null?i.concat([t]):null,Il(4194308,4,_f.bind(null,e,t),i)},useLayoutEffect:function(t,e){return Il(4194308,4,t,e)},useInsertionEffect:function(t,e){Il(4,2,t,e)},useMemo:function(t,e){var i=Xe();e=e===void 0?null:e;var s=t();if(dr){Mn(!0);try{t()}finally{Mn(!1)}}return i.memoizedState=[s,e],s},useReducer:function(t,e,i){var s=Xe();if(i!==void 0){var h=i(e);if(dr){Mn(!0);try{i(e)}finally{Mn(!1)}}}else h=e;return s.memoizedState=s.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},s.queue=t,t=t.dispatch=M_.bind(null,Ot,t),[s.memoizedState,t]},useRef:function(t){var e=Xe();return t={current:t},e.memoizedState=t},useState:function(t){t=Bc(t);var e=t.queue,i=Of.bind(null,Ot,e);return e.dispatch=i,[t.memoizedState,i]},useDebugValue:Pc,useDeferredValue:function(t,e){var i=Xe();return Uc(i,t,e)},useTransition:function(){var t=Bc(!1);return t=wf.bind(null,Ot,t.queue,!0,!1),Xe().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,i){var s=Ot,h=Xe();if(kt){if(i===void 0)throw Error(l(407));i=i()}else{if(i=e(),ie===null)throw Error(l(349));(Nt&127)!==0||Xd(s,e,i)}h.memoizedState=i;var p={value:i,getSnapshot:e};return h.queue=p,ff(Jd.bind(null,s,p,t),[t]),s.flags|=2048,is(9,{destroy:void 0},Qd.bind(null,s,p,i,e),null),i},useId:function(){var t=Xe(),e=ie.identifierPrefix;if(kt){var i=st,s=J;i=(s&~(1<<32-Ye(s)-1)).toString(32)+i,e="_"+e+"R_"+i,i=Ul++,0<i&&(e+="H"+i.toString(32)),e+="_"}else i=O_++,e="_"+e+"r_"+i.toString(32)+"_";return t.memoizedState=e},useHostTransitionStatus:qc,useFormState:lf,useActionState:lf,useOptimistic:function(t){var e=Xe();e.memoizedState=e.baseState=t;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=i,e=Zc.bind(null,Ot,!0,i),i.dispatch=e,[t,e]},useMemoCache:Lc,useCacheRefresh:function(){return Xe().memoizedState=k_.bind(null,Ot)},useEffectEvent:function(t){var e=Xe(),i={impl:t};return e.memoizedState=i,function(){if((Yt&2)!==0)throw Error(l(440));return i.impl.apply(void 0,arguments)}}},Ic={readContext:Ue,use:ql,useCallback:vf,useContext:Ue,useEffect:Nc,useImperativeHandle:yf,useInsertionEffect:mf,useLayoutEffect:gf,useMemo:bf,useReducer:Zl,useRef:df,useState:function(){return Zl(Oi)},useDebugValue:Pc,useDeferredValue:function(t,e){var i=ye();return xf(i,Ft.memoizedState,t,e)},useTransition:function(){var t=Zl(Oi)[0],e=ye().memoizedState;return[typeof t=="boolean"?t:go(t),e]},useSyncExternalStore:Kd,useId:Ef,useHostTransitionStatus:qc,useFormState:uf,useActionState:uf,useOptimistic:function(t,e){var i=ye();return ef(i,Ft,t,e)},useMemoCache:Lc,useCacheRefresh:Cf};Ic.useEffectEvent=pf;var Rf={readContext:Ue,use:ql,useCallback:vf,useContext:Ue,useEffect:Nc,useImperativeHandle:yf,useInsertionEffect:mf,useLayoutEffect:gf,useMemo:bf,useReducer:Mc,useRef:df,useState:function(){return Mc(Oi)},useDebugValue:Pc,useDeferredValue:function(t,e){var i=ye();return Ft===null?Uc(i,t,e):xf(i,Ft.memoizedState,t,e)},useTransition:function(){var t=Mc(Oi)[0],e=ye().memoizedState;return[typeof t=="boolean"?t:go(t),e]},useSyncExternalStore:Kd,useId:Ef,useHostTransitionStatus:qc,useFormState:hf,useActionState:hf,useOptimistic:function(t,e){var i=ye();return Ft!==null?ef(i,Ft,t,e):(i.baseState=t,[t,i.queue.dispatch])},useMemoCache:Lc,useCacheRefresh:Cf};Rf.useEffectEvent=pf;function Vc(t,e,i,s){e=t.memoizedState,i=i(s,e),i=i==null?e:E({},e,i),t.memoizedState=i,t.lanes===0&&(t.updateQueue.baseState=i)}var Gc={enqueueSetState:function(t,e,i){t=t._reactInternals;var s=vn(),h=sa(s);h.payload=e,i!=null&&(h.callback=i),e=oa(t,h,s),e!==null&&(un(e,t,s),ho(e,t,s))},enqueueReplaceState:function(t,e,i){t=t._reactInternals;var s=vn(),h=sa(s);h.tag=1,h.payload=e,i!=null&&(h.callback=i),e=oa(t,h,s),e!==null&&(un(e,t,s),ho(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var i=vn(),s=sa(i);s.tag=2,e!=null&&(s.callback=e),e=oa(t,s,i),e!==null&&(un(e,t,i),ho(e,t,i))}};function Lf(t,e,i,s,h,p,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,p,v):e.prototype&&e.prototype.isPureReactComponent?!Fi(i,s)||!Fi(h,p):!0}function kf(t,e,i,s){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(i,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(i,s),e.state!==t&&Gc.enqueueReplaceState(e,e.state,null)}function fr(t,e){var i=e;if("ref"in e){i={};for(var s in e)s!=="ref"&&(i[s]=e[s])}if(t=t.defaultProps){i===e&&(i=E({},i));for(var h in t)i[h]===void 0&&(i[h]=t[h])}return i}function Mf(t){er(t)}function Bf(t){console.error(t)}function Df(t){er(t)}function $l(t,e){try{var i=t.onUncaughtError;i(e.value,{componentStack:e.stack})}catch(s){setTimeout(function(){throw s})}}function Nf(t,e,i){try{var s=t.onCaughtError;s(i.value,{componentStack:i.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function $c(t,e,i){return i=sa(i),i.tag=3,i.payload={element:null},i.callback=function(){$l(t,e)},i}function Pf(t){return t=sa(t),t.tag=3,t}function Uf(t,e,i,s){var h=i.type.getDerivedStateFromError;if(typeof h=="function"){var p=s.value;t.payload=function(){return h(p)},t.callback=function(){Nf(e,i,s)}}var v=i.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(t.callback=function(){Nf(e,i,s),typeof h!="function"&&(fa===null?fa=new Set([this]):fa.add(this));var T=s.stack;this.componentDidCatch(s.value,{componentStack:T!==null?T:""})})}function B_(t,e,i,s,h){if(i.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(e=i.alternate,e!==null&&Kr(e,i,h,!0),i=mn.current,i!==null){switch(i.tag){case 31:case 13:return Rn===null?au():i.alternate===null&&ge===0&&(ge=3),i.flags&=-257,i.flags|=65536,i.lanes=h,s===kl?i.flags|=16384:(e=i.updateQueue,e===null?i.updateQueue=new Set([s]):e.add(s),_h(t,s,h)),!1;case 22:return i.flags|=65536,s===kl?i.flags|=16384:(e=i.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([s])},i.updateQueue=e):(i=e.retryQueue,i===null?e.retryQueue=new Set([s]):i.add(s)),_h(t,s,h)),!1}throw Error(l(435,i.tag))}return _h(t,s,h),au(),!1}if(kt)return e=mn.current,e!==null?((e.flags&65536)===0&&(e.flags|=256),e.flags|=65536,e.lanes=h,s!==Wr&&(t=Error(l(422),{cause:s}),rr(r(t,i)))):(s!==Wr&&(e=Error(l(423),{cause:s}),rr(r(e,i))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,s=r(s,i),h=$c(t.stateNode,s,h),wc(t,h),ge!==4&&(ge=2)),!1;var p=Error(l(520),{cause:s});if(p=r(p,i),Co===null?Co=[p]:Co.push(p),ge!==4&&(ge=2),e===null)return!0;s=r(s,i),i=e;do{switch(i.tag){case 3:return i.flags|=65536,t=h&-h,i.lanes|=t,t=$c(i.stateNode,s,t),wc(i,t),!1;case 1:if(e=i.type,p=i.stateNode,(i.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(fa===null||!fa.has(p))))return i.flags|=65536,h&=-h,i.lanes|=h,h=Pf(h),Uf(h,t,i,s),wc(i,h),!1}i=i.return}while(i!==null);return!1}var Yc=Error(l(461)),Se=!1;function He(t,e,i,s){e.child=t===null?Zd(e,null,i,s):hr(e,t.child,i,s)}function Hf(t,e,i,s,h){i=i.render;var p=e.ref;if("ref"in s){var v={};for(var T in s)T!=="ref"&&(v[T]=s[T])}else v=s;return or(e),s=jc(t,e,i,v,p,h),T=Ac(),t!==null&&!Se?(zc(t,e,h),ji(t,e,h)):(kt&&T&&Oe(e),e.flags|=1,He(t,e,s,h),e.child)}function qf(t,e,i,s,h){if(t===null){var p=i.type;return typeof p=="function"&&!$r(p)&&p.defaultProps===void 0&&i.compare===null?(e.tag=15,e.type=p,Zf(t,e,p,s,h)):(t=ar(i.type,null,s,e,e.mode,h),t.ref=e.ref,t.return=e,e.child=t)}if(p=t.child,!eh(t,h)){var v=p.memoizedProps;if(i=i.compare,i=i!==null?i:Fi,i(v,s)&&t.ref===e.ref)return ji(t,e,h)}return e.flags|=1,t=zn(p,s),t.ref=e.ref,t.return=e,e.child=t}function Zf(t,e,i,s,h){if(t!==null){var p=t.memoizedProps;if(Fi(p,s)&&t.ref===e.ref)if(Se=!1,e.pendingProps=s=p,eh(t,h))(t.flags&131072)!==0&&(Se=!0);else return e.lanes=t.lanes,ji(t,e,h)}return Wc(t,e,i,s,h)}function If(t,e,i,s){var h=s.children,p=t!==null?t.memoizedState:null;if(t===null&&e.stateNode===null&&(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.mode==="hidden"){if((e.flags&128)!==0){if(p=p!==null?p.baseLanes|i:i,t!==null){for(s=e.child=t.child,h=0;s!==null;)h=h|s.lanes|s.childLanes,s=s.sibling;s=h&~p}else s=0,e.child=null;return Vf(t,e,p,i,s)}if((i&536870912)!==0)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&Rl(e,p!==null?p.cachePool:null),p!==null?Gd(e,p):Tc(),$d(e);else return s=e.lanes=536870912,Vf(t,e,p!==null?p.baseLanes|i:i,i,s)}else p!==null?(Rl(e,p.cachePool),Gd(e,p),ua(),e.memoizedState=null):(t!==null&&Rl(e,null),Tc(),ua());return He(t,e,h,i),e.child}function vo(t,e){return t!==null&&t.tag===22||e.stateNode!==null||(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),e.sibling}function Vf(t,e,i,s,h){var p=yc();return p=p===null?null:{parent:xe._currentValue,pool:p},e.memoizedState={baseLanes:i,cachePool:p},t!==null&&Rl(e,null),Tc(),$d(e),t!==null&&Kr(t,e,s,!0),e.childLanes=h,null}function Yl(t,e){return e=Kl({mode:e.mode,children:e.children},t.mode),e.ref=t.ref,t.child=e,e.return=t,e}function Gf(t,e,i){return hr(e,t.child,null,i),t=Yl(e,e.pendingProps),t.flags|=2,gn(e),e.memoizedState=null,t}function D_(t,e,i){var s=e.pendingProps,h=(e.flags&128)!==0;if(e.flags&=-129,t===null){if(kt){if(s.mode==="hidden")return t=Yl(e,s),e.lanes=536870912,vo(null,t);if(Cc(e),(t=Vt)?(t=im(t,an),t=t!==null&&t.data==="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:Z!==null?{id:J,overflow:st}:null,retryLane:536870912,hydrationErrors:null},i=io(t),i.return=e,e.child=i,It=e,Vt=null)):t=null,t===null)throw si(e);return e.lanes=536870912,null}return Yl(e,s)}var p=t.memoizedState;if(p!==null){var v=p.dehydrated;if(Cc(e),h)if(e.flags&256)e.flags&=-257,e=Gf(t,e,i);else if(e.memoizedState!==null)e.child=t.child,e.flags|=128,e=null;else throw Error(l(558));else if(Se||Kr(t,e,i,!1),h=(i&t.childLanes)!==0,Se||h){if(s=ie,s!==null&&(v=il(s,i),v!==0&&v!==p.retryLane))throw p.retryLane=v,An(t,v),un(s,t,v),Yc;au(),e=Gf(t,e,i)}else t=p.treeContext,Vt=Ln(v.nextSibling),It=e,kt=!0,ri=null,an=!1,t!==null&&Ke(e,t),e=Yl(e,s),e.flags|=4096;return e}return t=zn(t.child,{mode:s.mode,children:s.children}),t.ref=e.ref,e.child=t,t.return=e,t}function Wl(t,e){var i=e.ref;if(i===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(l(284));(t===null||t.ref!==i)&&(e.flags|=4194816)}}function Wc(t,e,i,s,h){return or(e),i=jc(t,e,i,s,void 0,h),s=Ac(),t!==null&&!Se?(zc(t,e,h),ji(t,e,h)):(kt&&s&&Oe(e),e.flags|=1,He(t,e,i,h),e.child)}function $f(t,e,i,s,h,p){return or(e),e.updateQueue=null,i=Wd(e,s,i,h),Yd(t),s=Ac(),t!==null&&!Se?(zc(t,e,p),ji(t,e,p)):(kt&&s&&Oe(e),e.flags|=1,He(t,e,i,p),e.child)}function Yf(t,e,i,s,h){if(or(e),e.stateNode===null){var p=wi,v=i.contextType;typeof v=="object"&&v!==null&&(p=Ue(v)),p=new i(s,p),e.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=Gc,e.stateNode=p,p._reactInternals=e,p=e.stateNode,p.props=s,p.state=e.memoizedState,p.refs={},bc(e),v=i.contextType,p.context=typeof v=="object"&&v!==null?Ue(v):wi,p.state=e.memoizedState,v=i.getDerivedStateFromProps,typeof v=="function"&&(Vc(e,i,v,s),p.state=e.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(v=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),v!==p.state&&Gc.enqueueReplaceState(p,p.state,null),po(e,s,p,h),fo(),p.state=e.memoizedState),typeof p.componentDidMount=="function"&&(e.flags|=4194308),s=!0}else if(t===null){p=e.stateNode;var T=e.memoizedProps,A=fr(i,T);p.props=A;var H=p.context,X=i.contextType;v=wi,typeof X=="object"&&X!==null&&(v=Ue(X));var F=i.getDerivedStateFromProps;X=typeof F=="function"||typeof p.getSnapshotBeforeUpdate=="function",T=e.pendingProps!==T,X||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(T||H!==v)&&kf(e,p,s,v),ra=!1;var I=e.memoizedState;p.state=I,po(e,s,p,h),fo(),H=e.memoizedState,T||I!==H||ra?(typeof F=="function"&&(Vc(e,i,F,s),H=e.memoizedState),(A=ra||Lf(e,i,A,s,I,H,v))?(X||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(e.flags|=4194308)):(typeof p.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=H),p.props=s,p.state=H,p.context=v,s=A):(typeof p.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{p=e.stateNode,xc(t,e),v=e.memoizedProps,X=fr(i,v),p.props=X,F=e.pendingProps,I=p.context,H=i.contextType,A=wi,typeof H=="object"&&H!==null&&(A=Ue(H)),T=i.getDerivedStateFromProps,(H=typeof T=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(v!==F||I!==A)&&kf(e,p,s,A),ra=!1,I=e.memoizedState,p.state=I,po(e,s,p,h),fo();var Y=e.memoizedState;v!==F||I!==Y||ra||t!==null&&t.dependencies!==null&&Al(t.dependencies)?(typeof T=="function"&&(Vc(e,i,T,s),Y=e.memoizedState),(X=ra||Lf(e,i,X,s,I,Y,A)||t!==null&&t.dependencies!==null&&Al(t.dependencies))?(H||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(s,Y,A),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(s,Y,A)),typeof p.componentDidUpdate=="function"&&(e.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof p.componentDidUpdate!="function"||v===t.memoizedProps&&I===t.memoizedState||(e.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&I===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=Y),p.props=s,p.state=Y,p.context=A,s=X):(typeof p.componentDidUpdate!="function"||v===t.memoizedProps&&I===t.memoizedState||(e.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&I===t.memoizedState||(e.flags|=1024),s=!1)}return p=s,Wl(t,e),s=(e.flags&128)!==0,p||s?(p=e.stateNode,i=s&&typeof i.getDerivedStateFromError!="function"?null:p.render(),e.flags|=1,t!==null&&s?(e.child=hr(e,t.child,null,h),e.child=hr(e,null,i,h)):He(t,e,i,h),e.memoizedState=p.state,t=e.child):t=ji(t,e,h),t}function Wf(t,e,i,s){return Ti(),e.flags|=256,He(t,e,i,s),e.child}var Kc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Xc(t){return{baseLanes:t,cachePool:Dd()}}function Qc(t,e,i){return t=t!==null?t.childLanes&~i:0,e&&(t|=yn),t}function Kf(t,e,i){var s=e.pendingProps,h=!1,p=(e.flags&128)!==0,v;if((v=p)||(v=t!==null&&t.memoizedState===null?!1:(_e.current&2)!==0),v&&(h=!0,e.flags&=-129),v=(e.flags&32)!==0,e.flags&=-33,t===null){if(kt){if(h?la(e):ua(),(t=Vt)?(t=im(t,an),t=t!==null&&t.data!=="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:Z!==null?{id:J,overflow:st}:null,retryLane:536870912,hydrationErrors:null},i=io(t),i.return=e,e.child=i,It=e,Vt=null)):t=null,t===null)throw si(e);return kh(t)?e.lanes=32:e.lanes=536870912,null}var T=s.children;return s=s.fallback,h?(ua(),h=e.mode,T=Kl({mode:"hidden",children:T},h),s=Si(s,h,i,null),T.return=e,s.return=e,T.sibling=s,e.child=T,s=e.child,s.memoizedState=Xc(i),s.childLanes=Qc(t,v,i),e.memoizedState=Kc,vo(null,s)):(la(e),Jc(e,T))}var A=t.memoizedState;if(A!==null&&(T=A.dehydrated,T!==null)){if(p)e.flags&256?(la(e),e.flags&=-257,e=Fc(t,e,i)):e.memoizedState!==null?(ua(),e.child=t.child,e.flags|=128,e=null):(ua(),T=s.fallback,h=e.mode,s=Kl({mode:"visible",children:s.children},h),T=Si(T,h,i,null),T.flags|=2,s.return=e,T.return=e,s.sibling=T,e.child=s,hr(e,t.child,null,i),s=e.child,s.memoizedState=Xc(i),s.childLanes=Qc(t,v,i),e.memoizedState=Kc,e=vo(null,s));else if(la(e),kh(T)){if(v=T.nextSibling&&T.nextSibling.dataset,v)var H=v.dgst;v=H,s=Error(l(419)),s.stack="",s.digest=v,rr({value:s,source:null,stack:null}),e=Fc(t,e,i)}else if(Se||Kr(t,e,i,!1),v=(i&t.childLanes)!==0,Se||v){if(v=ie,v!==null&&(s=il(v,i),s!==0&&s!==A.retryLane))throw A.retryLane=s,An(t,s),un(v,t,s),Yc;Lh(T)||au(),e=Fc(t,e,i)}else Lh(T)?(e.flags|=192,e.child=t.child,e=null):(t=A.treeContext,Vt=Ln(T.nextSibling),It=e,kt=!0,ri=null,an=!1,t!==null&&Ke(e,t),e=Jc(e,s.children),e.flags|=4096);return e}return h?(ua(),T=s.fallback,h=e.mode,A=t.child,H=A.sibling,s=zn(A,{mode:"hidden",children:s.children}),s.subtreeFlags=A.subtreeFlags&65011712,H!==null?T=zn(H,T):(T=Si(T,h,i,null),T.flags|=2),T.return=e,s.return=e,s.sibling=T,e.child=s,vo(null,s),s=e.child,T=t.child.memoizedState,T===null?T=Xc(i):(h=T.cachePool,h!==null?(A=xe._currentValue,h=h.parent!==A?{parent:A,pool:A}:h):h=Dd(),T={baseLanes:T.baseLanes|i,cachePool:h}),s.memoizedState=T,s.childLanes=Qc(t,v,i),e.memoizedState=Kc,vo(t.child,s)):(la(e),i=t.child,t=i.sibling,i=zn(i,{mode:"visible",children:s.children}),i.return=e,i.sibling=null,t!==null&&(v=e.deletions,v===null?(e.deletions=[t],e.flags|=16):v.push(t)),e.child=i,e.memoizedState=null,i)}function Jc(t,e){return e=Kl({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function Kl(t,e){return t=Ie(22,t,null,e),t.lanes=0,t}function Fc(t,e,i){return hr(e,t.child,null,i),t=Jc(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Xf(t,e,i){t.lanes|=e;var s=t.alternate;s!==null&&(s.lanes|=e),pc(t.return,e,i)}function th(t,e,i,s,h,p){var v=t.memoizedState;v===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:i,tailMode:h,treeForkCount:p}:(v.isBackwards=e,v.rendering=null,v.renderingStartTime=0,v.last=s,v.tail=i,v.tailMode=h,v.treeForkCount=p)}function Qf(t,e,i){var s=e.pendingProps,h=s.revealOrder,p=s.tail;s=s.children;var v=_e.current,T=(v&2)!==0;if(T?(v=v&1|2,e.flags|=128):v&=1,et(_e,v),He(t,e,s,i),s=kt?S:0,!T&&t!==null&&(t.flags&128)!==0)t:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Xf(t,i,e);else if(t.tag===19)Xf(t,i,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;t.sibling===null;){if(t.return===null||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(h){case"forwards":for(i=e.child,h=null;i!==null;)t=i.alternate,t!==null&&Nl(t)===null&&(h=i),i=i.sibling;i=h,i===null?(h=e.child,e.child=null):(h=i.sibling,i.sibling=null),th(e,!1,h,i,p,s);break;case"backwards":case"unstable_legacy-backwards":for(i=null,h=e.child,e.child=null;h!==null;){if(t=h.alternate,t!==null&&Nl(t)===null){e.child=h;break}t=h.sibling,h.sibling=i,i=h,h=t}th(e,!0,i,null,p,s);break;case"together":th(e,!1,null,null,void 0,s);break;default:e.memoizedState=null}return e.child}function ji(t,e,i){if(t!==null&&(e.dependencies=t.dependencies),da|=e.lanes,(i&e.childLanes)===0)if(t!==null){if(Kr(t,e,i,!1),(i&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(l(153));if(e.child!==null){for(t=e.child,i=zn(t,t.pendingProps),e.child=i,i.return=e;t.sibling!==null;)t=t.sibling,i=i.sibling=zn(t,t.pendingProps),i.return=e;i.sibling=null}return e.child}function eh(t,e){return(t.lanes&e)!==0?!0:(t=t.dependencies,!!(t!==null&&Al(t)))}function N_(t,e,i){switch(e.tag){case 3:oe(e,e.stateNode.containerInfo),aa(e,xe,t.memoizedState.cache),Ti();break;case 27:case 5:ci(e);break;case 4:oe(e,e.stateNode.containerInfo);break;case 10:aa(e,e.type,e.memoizedProps.value);break;case 31:if(e.memoizedState!==null)return e.flags|=128,Cc(e),null;break;case 13:var s=e.memoizedState;if(s!==null)return s.dehydrated!==null?(la(e),e.flags|=128,null):(i&e.child.childLanes)!==0?Kf(t,e,i):(la(e),t=ji(t,e,i),t!==null?t.sibling:null);la(e);break;case 19:var h=(t.flags&128)!==0;if(s=(i&e.childLanes)!==0,s||(Kr(t,e,i,!1),s=(i&e.childLanes)!==0),h){if(s)return Qf(t,e,i);e.flags|=128}if(h=e.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),et(_e,_e.current),s)break;return null;case 22:return e.lanes=0,If(t,e,i,e.pendingProps);case 24:aa(e,xe,t.memoizedState.cache)}return ji(t,e,i)}function Jf(t,e,i){if(t!==null)if(t.memoizedProps!==e.pendingProps)Se=!0;else{if(!eh(t,i)&&(e.flags&128)===0)return Se=!1,N_(t,e,i);Se=(t.flags&131072)!==0}else Se=!1,kt&&(e.flags&1048576)!==0&&jt(e,S,e.index);switch(e.lanes=0,e.tag){case 16:t:{var s=e.pendingProps;if(t=ur(e.elementType),e.type=t,typeof t=="function")$r(t)?(s=fr(t,s),e.tag=1,e=Yf(null,e,t,s,i)):(e.tag=0,e=Wc(null,e,t,s,i));else{if(t!=null){var h=t.$$typeof;if(h===ot){e.tag=11,e=Hf(null,e,t,s,i);break t}else if(h===ct){e.tag=14,e=qf(null,e,t,s,i);break t}}throw e=Kt(t)||t,Error(l(306,e,""))}}return e;case 0:return Wc(t,e,e.type,e.pendingProps,i);case 1:return s=e.type,h=fr(s,e.pendingProps),Yf(t,e,s,h,i);case 3:t:{if(oe(e,e.stateNode.containerInfo),t===null)throw Error(l(387));s=e.pendingProps;var p=e.memoizedState;h=p.element,xc(t,e),po(e,s,null,i);var v=e.memoizedState;if(s=v.cache,aa(e,xe,s),s!==p.cache&&mc(e,[xe],i,!0),fo(),s=v.element,p.isDehydrated)if(p={element:s,isDehydrated:!1,cache:v.cache},e.updateQueue.baseState=p,e.memoizedState=p,e.flags&256){e=Wf(t,e,s,i);break t}else if(s!==h){h=r(Error(l(424)),e),rr(h),e=Wf(t,e,s,i);break t}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Vt=Ln(t.firstChild),It=e,kt=!0,ri=null,an=!0,i=Zd(e,null,s,i),e.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling}else{if(Ti(),s===h){e=ji(t,e,i);break t}He(t,e,s,i)}e=e.child}return e;case 26:return Wl(t,e),t===null?(i=um(e.type,null,e.pendingProps,null))?e.memoizedState=i:kt||(i=e.type,t=e.pendingProps,s=hu(lt.current).createElement(i),s[ve]=e,s[Re]=t,qe(s,i,t),be(s),e.stateNode=s):e.memoizedState=um(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return ci(e),t===null&&kt&&(s=e.stateNode=sm(e.type,e.pendingProps,lt.current),It=e,an=!0,h=Vt,_a(e.type)?(Mh=h,Vt=Ln(s.firstChild)):Vt=h),He(t,e,e.pendingProps.children,i),Wl(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&kt&&((h=s=Vt)&&(s=fy(s,e.type,e.pendingProps,an),s!==null?(e.stateNode=s,It=e,Vt=Ln(s.firstChild),an=!1,h=!0):h=!1),h||si(e)),ci(e),h=e.type,p=e.pendingProps,v=t!==null?t.memoizedProps:null,s=p.children,Ah(h,p)?s=null:v!==null&&Ah(h,v)&&(e.flags|=32),e.memoizedState!==null&&(h=jc(t,e,j_,null,null,i),Mo._currentValue=h),Wl(t,e),He(t,e,s,i),e.child;case 6:return t===null&&kt&&((t=i=Vt)&&(i=py(i,e.pendingProps,an),i!==null?(e.stateNode=i,It=e,Vt=null,t=!0):t=!1),t||si(e)),null;case 13:return Kf(t,e,i);case 4:return oe(e,e.stateNode.containerInfo),s=e.pendingProps,t===null?e.child=hr(e,null,s,i):He(t,e,s,i),e.child;case 11:return Hf(t,e,e.type,e.pendingProps,i);case 7:return He(t,e,e.pendingProps,i),e.child;case 8:return He(t,e,e.pendingProps.children,i),e.child;case 12:return He(t,e,e.pendingProps.children,i),e.child;case 10:return s=e.pendingProps,aa(e,e.type,s.value),He(t,e,s.children,i),e.child;case 9:return h=e.type._context,s=e.pendingProps.children,or(e),h=Ue(h),s=s(h),e.flags|=1,He(t,e,s,i),e.child;case 14:return qf(t,e,e.type,e.pendingProps,i);case 15:return Zf(t,e,e.type,e.pendingProps,i);case 19:return Qf(t,e,i);case 31:return D_(t,e,i);case 22:return If(t,e,i,e.pendingProps);case 24:return or(e),s=Ue(xe),t===null?(h=yc(),h===null&&(h=ie,p=gc(),h.pooledCache=p,p.refCount++,p!==null&&(h.pooledCacheLanes|=i),h=p),e.memoizedState={parent:s,cache:h},bc(e),aa(e,xe,h)):((t.lanes&i)!==0&&(xc(t,e),po(e,null,null,i),fo()),h=t.memoizedState,p=e.memoizedState,h.parent!==s?(h={parent:s,cache:s},e.memoizedState=h,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=h),aa(e,xe,s)):(s=p.cache,aa(e,xe,s),s!==h.cache&&mc(e,[xe],i,!0))),He(t,e,e.pendingProps.children,i),e.child;case 29:throw e.pendingProps}throw Error(l(156,e.tag))}function Ai(t){t.flags|=4}function nh(t,e,i,s,h){if((e=(t.mode&32)!==0)&&(e=!1),e){if(t.flags|=16777216,(h&335544128)===h)if(t.stateNode.complete)t.flags|=8192;else if(Ep())t.flags|=8192;else throw cr=kl,vc}else t.flags&=-16777217}function Ff(t,e){if(e.type!=="stylesheet"||(e.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!pm(e))if(Ep())t.flags|=8192;else throw cr=kl,vc}function Xl(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?tl():536870912,t.lanes|=e,os|=e)}function bo(t,e){if(!kt)switch(t.tailMode){case"hidden":e=t.tail;for(var i=null;e!==null;)e.alternate!==null&&(i=e),e=e.sibling;i===null?t.tail=null:i.sibling=null;break;case"collapsed":i=t.tail;for(var s=null;i!==null;)i.alternate!==null&&(s=i),i=i.sibling;s===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function se(t){var e=t.alternate!==null&&t.alternate.child===t.child,i=0,s=0;if(e)for(var h=t.child;h!==null;)i|=h.lanes|h.childLanes,s|=h.subtreeFlags&65011712,s|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)i|=h.lanes|h.childLanes,s|=h.subtreeFlags,s|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=s,t.childLanes=i,e}function P_(t,e,i){var s=e.pendingProps;switch(pe(e),e.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return se(e),null;case 1:return se(e),null;case 3:return i=e.stateNode,s=null,t!==null&&(s=t.memoizedState.cache),e.memoizedState.cache!==s&&(e.flags|=2048),Ei(xe),le(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(qn(e)?Ai(e):t===null||t.memoizedState.isDehydrated&&(e.flags&256)===0||(e.flags|=1024,so())),se(e),null;case 26:var h=e.type,p=e.memoizedState;return t===null?(Ai(e),p!==null?(se(e),Ff(e,p)):(se(e),nh(e,h,null,s,i))):p?p!==t.memoizedState?(Ai(e),se(e),Ff(e,p)):(se(e),e.flags&=-16777217):(t=t.memoizedProps,t!==s&&Ai(e),se(e),nh(e,h,t,s,i)),null;case 27:if(Pi(e),i=lt.current,h=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==s&&Ai(e);else{if(!s){if(e.stateNode===null)throw Error(l(166));return se(e),null}t=nt.current,qn(e)?ro(e):(t=sm(h,s,i),e.stateNode=t,Ai(e))}return se(e),null;case 5:if(Pi(e),h=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==s&&Ai(e);else{if(!s){if(e.stateNode===null)throw Error(l(166));return se(e),null}if(p=nt.current,qn(e))ro(e);else{var v=hu(lt.current);switch(p){case 1:p=v.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:p=v.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":p=v.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":p=v.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":p=v.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof s.is=="string"?v.createElement("select",{is:s.is}):v.createElement("select"),s.multiple?p.multiple=!0:s.size&&(p.size=s.size);break;default:p=typeof s.is=="string"?v.createElement(h,{is:s.is}):v.createElement(h)}}p[ve]=e,p[Re]=s;t:for(v=e.child;v!==null;){if(v.tag===5||v.tag===6)p.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===e)break t;for(;v.sibling===null;){if(v.return===null||v.return===e)break t;v=v.return}v.sibling.return=v.return,v=v.sibling}e.stateNode=p;t:switch(qe(p,h,s),h){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break t;case"img":s=!0;break t;default:s=!1}s&&Ai(e)}}return se(e),nh(e,e.type,t===null?null:t.memoizedProps,e.pendingProps,i),null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==s&&Ai(e);else{if(typeof s!="string"&&e.stateNode===null)throw Error(l(166));if(t=lt.current,qn(e)){if(t=e.stateNode,i=e.memoizedProps,s=null,h=It,h!==null)switch(h.tag){case 27:case 5:s=h.memoizedProps}t[ve]=e,t=!!(t.nodeValue===i||s!==null&&s.suppressHydrationWarning===!0||Kp(t.nodeValue,i)),t||si(e,!0)}else t=hu(t).createTextNode(s),t[ve]=e,e.stateNode=t}return se(e),null;case 31:if(i=e.memoizedState,t===null||t.memoizedState!==null){if(s=qn(e),i!==null){if(t===null){if(!s)throw Error(l(318));if(t=e.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(l(557));t[ve]=e}else Ti(),(e.flags&128)===0&&(e.memoizedState=null),e.flags|=4;se(e),t=!1}else i=so(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=i),t=!0;if(!t)return e.flags&256?(gn(e),e):(gn(e),null);if((e.flags&128)!==0)throw Error(l(558))}return se(e),null;case 13:if(s=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=qn(e),s!==null&&s.dehydrated!==null){if(t===null){if(!h)throw Error(l(318));if(h=e.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(l(317));h[ve]=e}else Ti(),(e.flags&128)===0&&(e.memoizedState=null),e.flags|=4;se(e),h=!1}else h=so(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return e.flags&256?(gn(e),e):(gn(e),null)}return gn(e),(e.flags&128)!==0?(e.lanes=i,e):(i=s!==null,t=t!==null&&t.memoizedState!==null,i&&(s=e.child,h=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(h=s.alternate.memoizedState.cachePool.pool),p=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(p=s.memoizedState.cachePool.pool),p!==h&&(s.flags|=2048)),i!==t&&i&&(e.child.flags|=8192),Xl(e,e.updateQueue),se(e),null);case 4:return le(),t===null&&Th(e.stateNode.containerInfo),se(e),null;case 10:return Ei(e.type),se(e),null;case 19:if(V(_e),s=e.memoizedState,s===null)return se(e),null;if(h=(e.flags&128)!==0,p=s.rendering,p===null)if(h)bo(s,!1);else{if(ge!==0||t!==null&&(t.flags&128)!==0)for(t=e.child;t!==null;){if(p=Nl(t),p!==null){for(e.flags|=128,bo(s,!1),t=p.updateQueue,e.updateQueue=t,Xl(e,t),e.subtreeFlags=0,t=i,i=e.child;i!==null;)no(i,t),i=i.sibling;return et(_e,_e.current&1|2),kt&&gt(e,s.treeForkCount),e.child}t=t.sibling}s.tail!==null&&$e()>eu&&(e.flags|=128,h=!0,bo(s,!1),e.lanes=4194304)}else{if(!h)if(t=Nl(p),t!==null){if(e.flags|=128,h=!0,t=t.updateQueue,e.updateQueue=t,Xl(e,t),bo(s,!0),s.tail===null&&s.tailMode==="hidden"&&!p.alternate&&!kt)return se(e),null}else 2*$e()-s.renderingStartTime>eu&&i!==536870912&&(e.flags|=128,h=!0,bo(s,!1),e.lanes=4194304);s.isBackwards?(p.sibling=e.child,e.child=p):(t=s.last,t!==null?t.sibling=p:e.child=p,s.last=p)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=$e(),t.sibling=null,i=_e.current,et(_e,h?i&1|2:i&1),kt&&gt(e,s.treeForkCount),t):(se(e),null);case 22:case 23:return gn(e),Ec(),s=e.memoizedState!==null,t!==null?t.memoizedState!==null!==s&&(e.flags|=8192):s&&(e.flags|=8192),s?(i&536870912)!==0&&(e.flags&128)===0&&(se(e),e.subtreeFlags&6&&(e.flags|=8192)):se(e),i=e.updateQueue,i!==null&&Xl(e,i.retryQueue),i=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),s=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),s!==i&&(e.flags|=2048),t!==null&&V(lr),null;case 24:return i=null,t!==null&&(i=t.memoizedState.cache),e.memoizedState.cache!==i&&(e.flags|=2048),Ei(xe),se(e),null;case 25:return null;case 30:return null}throw Error(l(156,e.tag))}function U_(t,e){switch(pe(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ei(xe),le(),t=e.flags,(t&65536)!==0&&(t&128)===0?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return Pi(e),null;case 31:if(e.memoizedState!==null){if(gn(e),e.alternate===null)throw Error(l(340));Ti()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 13:if(gn(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(l(340));Ti()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return V(_e),null;case 4:return le(),null;case 10:return Ei(e.type),null;case 22:case 23:return gn(e),Ec(),t!==null&&V(lr),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return Ei(xe),null;case 25:return null;default:return null}}function tp(t,e){switch(pe(e),e.tag){case 3:Ei(xe),le();break;case 26:case 27:case 5:Pi(e);break;case 4:le();break;case 31:e.memoizedState!==null&&gn(e);break;case 13:gn(e);break;case 19:V(_e);break;case 10:Ei(e.type);break;case 22:case 23:gn(e),Ec(),t!==null&&V(lr);break;case 24:Ei(xe)}}function xo(t,e){try{var i=e.updateQueue,s=i!==null?i.lastEffect:null;if(s!==null){var h=s.next;i=h;do{if((i.tag&t)===t){s=void 0;var p=i.create,v=i.inst;s=p(),v.destroy=s}i=i.next}while(i!==h)}}catch(T){Qt(e,e.return,T)}}function ca(t,e,i){try{var s=e.updateQueue,h=s!==null?s.lastEffect:null;if(h!==null){var p=h.next;s=p;do{if((s.tag&t)===t){var v=s.inst,T=v.destroy;if(T!==void 0){v.destroy=void 0,h=e;var A=i,H=T;try{H()}catch(X){Qt(h,A,X)}}}s=s.next}while(s!==p)}}catch(X){Qt(e,e.return,X)}}function ep(t){var e=t.updateQueue;if(e!==null){var i=t.stateNode;try{Vd(e,i)}catch(s){Qt(t,t.return,s)}}}function np(t,e,i){i.props=fr(t.type,t.memoizedProps),i.state=t.memoizedState;try{i.componentWillUnmount()}catch(s){Qt(t,e,s)}}function wo(t,e){try{var i=t.ref;if(i!==null){switch(t.tag){case 26:case 27:case 5:var s=t.stateNode;break;case 30:s=t.stateNode;break;default:s=t.stateNode}typeof i=="function"?t.refCleanup=i(s):i.current=s}}catch(h){Qt(t,e,h)}}function li(t,e){var i=t.ref,s=t.refCleanup;if(i!==null)if(typeof s=="function")try{s()}catch(h){Qt(t,e,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(h){Qt(t,e,h)}else i.current=null}function ip(t){var e=t.type,i=t.memoizedProps,s=t.stateNode;try{t:switch(e){case"button":case"input":case"select":case"textarea":i.autoFocus&&s.focus();break t;case"img":i.src?s.src=i.src:i.srcSet&&(s.srcset=i.srcSet)}}catch(h){Qt(t,t.return,h)}}function ih(t,e,i){try{var s=t.stateNode;oy(s,t.type,i,e),s[Re]=e}catch(h){Qt(t,t.return,h)}}function ap(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&_a(t.type)||t.tag===4}function ah(t){t:for(;;){for(;t.sibling===null;){if(t.return===null||ap(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&_a(t.type)||t.flags&2||t.child===null||t.tag===4)continue t;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function rh(t,e,i){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(t,e):(e=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,e.appendChild(t),i=i._reactRootContainer,i!=null||e.onclick!==null||(e.onclick=Fe));else if(s!==4&&(s===27&&_a(t.type)&&(i=t.stateNode,e=null),t=t.child,t!==null))for(rh(t,e,i),t=t.sibling;t!==null;)rh(t,e,i),t=t.sibling}function Ql(t,e,i){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?i.insertBefore(t,e):i.appendChild(t);else if(s!==4&&(s===27&&_a(t.type)&&(i=t.stateNode),t=t.child,t!==null))for(Ql(t,e,i),t=t.sibling;t!==null;)Ql(t,e,i),t=t.sibling}function rp(t){var e=t.stateNode,i=t.memoizedProps;try{for(var s=t.type,h=e.attributes;h.length;)e.removeAttributeNode(h[0]);qe(e,s,i),e[ve]=t,e[Re]=i}catch(p){Qt(t,t.return,p)}}var zi=!1,Te=!1,sh=!1,sp=typeof WeakSet=="function"?WeakSet:Set,Me=null;function H_(t,e){if(t=t.containerInfo,Oh=yu,t=Qa(t),ti(t)){if("selectionStart"in t)var i={start:t.selectionStart,end:t.selectionEnd};else t:{i=(i=t.ownerDocument)&&i.defaultView||window;var s=i.getSelection&&i.getSelection();if(s&&s.rangeCount!==0){i=s.anchorNode;var h=s.anchorOffset,p=s.focusNode;s=s.focusOffset;try{i.nodeType,p.nodeType}catch{i=null;break t}var v=0,T=-1,A=-1,H=0,X=0,F=t,I=null;e:for(;;){for(var Y;F!==i||h!==0&&F.nodeType!==3||(T=v+h),F!==p||s!==0&&F.nodeType!==3||(A=v+s),F.nodeType===3&&(v+=F.nodeValue.length),(Y=F.firstChild)!==null;)I=F,F=Y;for(;;){if(F===t)break e;if(I===i&&++H===h&&(T=v),I===p&&++X===s&&(A=v),(Y=F.nextSibling)!==null)break;F=I,I=F.parentNode}F=Y}i=T===-1||A===-1?null:{start:T,end:A}}else i=null}i=i||{start:0,end:0}}else i=null;for(jh={focusedElem:t,selectionRange:i},yu=!1,Me=e;Me!==null;)if(e=Me,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Me=t;else for(;Me!==null;){switch(e=Me,p=e.alternate,t=e.flags,e.tag){case 0:if((t&4)!==0&&(t=e.updateQueue,t=t!==null?t.events:null,t!==null))for(i=0;i<t.length;i++)h=t[i],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&p!==null){t=void 0,i=e,h=p.memoizedProps,p=p.memoizedState,s=i.stateNode;try{var dt=fr(i.type,h);t=s.getSnapshotBeforeUpdate(dt,p),s.__reactInternalSnapshotBeforeUpdate=t}catch(bt){Qt(i,i.return,bt)}}break;case 3:if((t&1024)!==0){if(t=e.stateNode.containerInfo,i=t.nodeType,i===9)Rh(t);else if(i===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Rh(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(l(163))}if(t=e.sibling,t!==null){t.return=e.return,Me=t;break}Me=e.return}}function op(t,e,i){var s=i.flags;switch(i.tag){case 0:case 11:case 15:Li(t,i),s&4&&xo(5,i);break;case 1:if(Li(t,i),s&4)if(t=i.stateNode,e===null)try{t.componentDidMount()}catch(v){Qt(i,i.return,v)}else{var h=fr(i.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(h,e,t.__reactInternalSnapshotBeforeUpdate)}catch(v){Qt(i,i.return,v)}}s&64&&ep(i),s&512&&wo(i,i.return);break;case 3:if(Li(t,i),s&64&&(t=i.updateQueue,t!==null)){if(e=null,i.child!==null)switch(i.child.tag){case 27:case 5:e=i.child.stateNode;break;case 1:e=i.child.stateNode}try{Vd(t,e)}catch(v){Qt(i,i.return,v)}}break;case 27:e===null&&s&4&&rp(i);case 26:case 5:Li(t,i),e===null&&s&4&&ip(i),s&512&&wo(i,i.return);break;case 12:Li(t,i);break;case 31:Li(t,i),s&4&&cp(t,i);break;case 13:Li(t,i),s&4&&hp(t,i),s&64&&(t=i.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(i=K_.bind(null,i),my(t,i))));break;case 22:if(s=i.memoizedState!==null||zi,!s){e=e!==null&&e.memoizedState!==null||Te,h=zi;var p=Te;zi=s,(Te=e)&&!p?ki(t,i,(i.subtreeFlags&8772)!==0):Li(t,i),zi=h,Te=p}break;case 30:break;default:Li(t,i)}}function lp(t){var e=t.alternate;e!==null&&(t.alternate=null,lp(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&Ps(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var ce=null,rn=!1;function Ri(t,e,i){for(i=i.child;i!==null;)up(t,e,i),i=i.sibling}function up(t,e,i){if(Ne&&typeof Ne.onCommitFiberUnmount=="function")try{Ne.onCommitFiberUnmount(Ui,i)}catch{}switch(i.tag){case 26:Te||li(i,e),Ri(t,e,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:Te||li(i,e);var s=ce,h=rn;_a(i.type)&&(ce=i.stateNode,rn=!1),Ri(t,e,i),Ro(i.stateNode),ce=s,rn=h;break;case 5:Te||li(i,e);case 6:if(s=ce,h=rn,ce=null,Ri(t,e,i),ce=s,rn=h,ce!==null)if(rn)try{(ce.nodeType===9?ce.body:ce.nodeName==="HTML"?ce.ownerDocument.body:ce).removeChild(i.stateNode)}catch(p){Qt(i,e,p)}else try{ce.removeChild(i.stateNode)}catch(p){Qt(i,e,p)}break;case 18:ce!==null&&(rn?(t=ce,em(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,i.stateNode),ms(t)):em(ce,i.stateNode));break;case 4:s=ce,h=rn,ce=i.stateNode.containerInfo,rn=!0,Ri(t,e,i),ce=s,rn=h;break;case 0:case 11:case 14:case 15:ca(2,i,e),Te||ca(4,i,e),Ri(t,e,i);break;case 1:Te||(li(i,e),s=i.stateNode,typeof s.componentWillUnmount=="function"&&np(i,e,s)),Ri(t,e,i);break;case 21:Ri(t,e,i);break;case 22:Te=(s=Te)||i.memoizedState!==null,Ri(t,e,i),Te=s;break;default:Ri(t,e,i)}}function cp(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{ms(t)}catch(i){Qt(e,e.return,i)}}}function hp(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{ms(t)}catch(i){Qt(e,e.return,i)}}function q_(t){switch(t.tag){case 31:case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new sp),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new sp),e;default:throw Error(l(435,t.tag))}}function Jl(t,e){var i=q_(t);e.forEach(function(s){if(!i.has(s)){i.add(s);var h=X_.bind(null,t,s);s.then(h,h)}})}function sn(t,e){var i=e.deletions;if(i!==null)for(var s=0;s<i.length;s++){var h=i[s],p=t,v=e,T=v;t:for(;T!==null;){switch(T.tag){case 27:if(_a(T.type)){ce=T.stateNode,rn=!1;break t}break;case 5:ce=T.stateNode,rn=!1;break t;case 3:case 4:ce=T.stateNode.containerInfo,rn=!0;break t}T=T.return}if(ce===null)throw Error(l(160));up(p,v,h),ce=null,rn=!1,p=h.alternate,p!==null&&(p.return=null),h.return=null}if(e.subtreeFlags&13886)for(e=e.child;e!==null;)dp(e,t),e=e.sibling}var In=null;function dp(t,e){var i=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:sn(e,t),on(t),s&4&&(ca(3,t,t.return),xo(3,t),ca(5,t,t.return));break;case 1:sn(e,t),on(t),s&512&&(Te||i===null||li(i,i.return)),s&64&&zi&&(t=t.updateQueue,t!==null&&(s=t.callbacks,s!==null&&(i=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=i===null?s:i.concat(s))));break;case 26:var h=In;if(sn(e,t),on(t),s&512&&(Te||i===null||li(i,i.return)),s&4){var p=i!==null?i.memoizedState:null;if(s=t.memoizedState,i===null)if(s===null)if(t.stateNode===null){t:{s=t.type,i=t.memoizedProps,h=h.ownerDocument||h;e:switch(s){case"title":p=h.getElementsByTagName("title")[0],(!p||p[Ba]||p[ve]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=h.createElement(s),h.head.insertBefore(p,h.querySelector("head > title"))),qe(p,s,i),p[ve]=t,be(p),s=p;break t;case"link":var v=dm("link","href",h).get(s+(i.href||""));if(v){for(var T=0;T<v.length;T++)if(p=v[T],p.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&p.getAttribute("rel")===(i.rel==null?null:i.rel)&&p.getAttribute("title")===(i.title==null?null:i.title)&&p.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){v.splice(T,1);break e}}p=h.createElement(s),qe(p,s,i),h.head.appendChild(p);break;case"meta":if(v=dm("meta","content",h).get(s+(i.content||""))){for(T=0;T<v.length;T++)if(p=v[T],p.getAttribute("content")===(i.content==null?null:""+i.content)&&p.getAttribute("name")===(i.name==null?null:i.name)&&p.getAttribute("property")===(i.property==null?null:i.property)&&p.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&p.getAttribute("charset")===(i.charSet==null?null:i.charSet)){v.splice(T,1);break e}}p=h.createElement(s),qe(p,s,i),h.head.appendChild(p);break;default:throw Error(l(468,s))}p[ve]=t,be(p),s=p}t.stateNode=s}else fm(h,t.type,t.stateNode);else t.stateNode=hm(h,s,t.memoizedProps);else p!==s?(p===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):p.count--,s===null?fm(h,t.type,t.stateNode):hm(h,s,t.memoizedProps)):s===null&&t.stateNode!==null&&ih(t,t.memoizedProps,i.memoizedProps)}break;case 27:sn(e,t),on(t),s&512&&(Te||i===null||li(i,i.return)),i!==null&&s&4&&ih(t,t.memoizedProps,i.memoizedProps);break;case 5:if(sn(e,t),on(t),s&512&&(Te||i===null||li(i,i.return)),t.flags&32){h=t.stateNode;try{Sn(h,"")}catch(dt){Qt(t,t.return,dt)}}s&4&&t.stateNode!=null&&(h=t.memoizedProps,ih(t,h,i!==null?i.memoizedProps:h)),s&1024&&(sh=!0);break;case 6:if(sn(e,t),on(t),s&4){if(t.stateNode===null)throw Error(l(162));s=t.memoizedProps,i=t.stateNode;try{i.nodeValue=s}catch(dt){Qt(t,t.return,dt)}}break;case 3:if(pu=null,h=In,In=du(e.containerInfo),sn(e,t),In=h,on(t),s&4&&i!==null&&i.memoizedState.isDehydrated)try{ms(e.containerInfo)}catch(dt){Qt(t,t.return,dt)}sh&&(sh=!1,fp(t));break;case 4:s=In,In=du(t.stateNode.containerInfo),sn(e,t),on(t),In=s;break;case 12:sn(e,t),on(t);break;case 31:sn(e,t),on(t),s&4&&(s=t.updateQueue,s!==null&&(t.updateQueue=null,Jl(t,s)));break;case 13:sn(e,t),on(t),t.child.flags&8192&&t.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(tu=$e()),s&4&&(s=t.updateQueue,s!==null&&(t.updateQueue=null,Jl(t,s)));break;case 22:h=t.memoizedState!==null;var A=i!==null&&i.memoizedState!==null,H=zi,X=Te;if(zi=H||h,Te=X||A,sn(e,t),Te=X,zi=H,on(t),s&8192)t:for(e=t.stateNode,e._visibility=h?e._visibility&-2:e._visibility|1,h&&(i===null||A||zi||Te||pr(t)),i=null,e=t;;){if(e.tag===5||e.tag===26){if(i===null){A=i=e;try{if(p=A.stateNode,h)v=p.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{T=A.stateNode;var F=A.memoizedProps.style,I=F!=null&&F.hasOwnProperty("display")?F.display:null;T.style.display=I==null||typeof I=="boolean"?"":(""+I).trim()}}catch(dt){Qt(A,A.return,dt)}}}else if(e.tag===6){if(i===null){A=e;try{A.stateNode.nodeValue=h?"":A.memoizedProps}catch(dt){Qt(A,A.return,dt)}}}else if(e.tag===18){if(i===null){A=e;try{var Y=A.stateNode;h?nm(Y,!0):nm(A.stateNode,!1)}catch(dt){Qt(A,A.return,dt)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break t;for(;e.sibling===null;){if(e.return===null||e.return===t)break t;i===e&&(i=null),e=e.return}i===e&&(i=null),e.sibling.return=e.return,e=e.sibling}s&4&&(s=t.updateQueue,s!==null&&(i=s.retryQueue,i!==null&&(s.retryQueue=null,Jl(t,i))));break;case 19:sn(e,t),on(t),s&4&&(s=t.updateQueue,s!==null&&(t.updateQueue=null,Jl(t,s)));break;case 30:break;case 21:break;default:sn(e,t),on(t)}}function on(t){var e=t.flags;if(e&2){try{for(var i,s=t.return;s!==null;){if(ap(s)){i=s;break}s=s.return}if(i==null)throw Error(l(160));switch(i.tag){case 27:var h=i.stateNode,p=ah(t);Ql(t,p,h);break;case 5:var v=i.stateNode;i.flags&32&&(Sn(v,""),i.flags&=-33);var T=ah(t);Ql(t,T,v);break;case 3:case 4:var A=i.stateNode.containerInfo,H=ah(t);rh(t,H,A);break;default:throw Error(l(161))}}catch(X){Qt(t,t.return,X)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function fp(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;fp(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function Li(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)op(t,e.alternate,e),e=e.sibling}function pr(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:ca(4,e,e.return),pr(e);break;case 1:li(e,e.return);var i=e.stateNode;typeof i.componentWillUnmount=="function"&&np(e,e.return,i),pr(e);break;case 27:Ro(e.stateNode);case 26:case 5:li(e,e.return),pr(e);break;case 22:e.memoizedState===null&&pr(e);break;case 30:pr(e);break;default:pr(e)}t=t.sibling}}function ki(t,e,i){for(i=i&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var s=e.alternate,h=t,p=e,v=p.flags;switch(p.tag){case 0:case 11:case 15:ki(h,p,i),xo(4,p);break;case 1:if(ki(h,p,i),s=p,h=s.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(H){Qt(s,s.return,H)}if(s=p,h=s.updateQueue,h!==null){var T=s.stateNode;try{var A=h.shared.hiddenCallbacks;if(A!==null)for(h.shared.hiddenCallbacks=null,h=0;h<A.length;h++)Id(A[h],T)}catch(H){Qt(s,s.return,H)}}i&&v&64&&ep(p),wo(p,p.return);break;case 27:rp(p);case 26:case 5:ki(h,p,i),i&&s===null&&v&4&&ip(p),wo(p,p.return);break;case 12:ki(h,p,i);break;case 31:ki(h,p,i),i&&v&4&&cp(h,p);break;case 13:ki(h,p,i),i&&v&4&&hp(h,p);break;case 22:p.memoizedState===null&&ki(h,p,i),wo(p,p.return);break;case 30:break;default:ki(h,p,i)}e=e.sibling}}function oh(t,e){var i=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==i&&(t!=null&&t.refCount++,i!=null&&oo(i))}function lh(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&oo(t))}function Vn(t,e,i,s){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)pp(t,e,i,s),e=e.sibling}function pp(t,e,i,s){var h=e.flags;switch(e.tag){case 0:case 11:case 15:Vn(t,e,i,s),h&2048&&xo(9,e);break;case 1:Vn(t,e,i,s);break;case 3:Vn(t,e,i,s),h&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&oo(t)));break;case 12:if(h&2048){Vn(t,e,i,s),t=e.stateNode;try{var p=e.memoizedProps,v=p.id,T=p.onPostCommit;typeof T=="function"&&T(v,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(A){Qt(e,e.return,A)}}else Vn(t,e,i,s);break;case 31:Vn(t,e,i,s);break;case 13:Vn(t,e,i,s);break;case 23:break;case 22:p=e.stateNode,v=e.alternate,e.memoizedState!==null?p._visibility&2?Vn(t,e,i,s):So(t,e):p._visibility&2?Vn(t,e,i,s):(p._visibility|=2,as(t,e,i,s,(e.subtreeFlags&10256)!==0||!1)),h&2048&&oh(v,e);break;case 24:Vn(t,e,i,s),h&2048&&lh(e.alternate,e);break;default:Vn(t,e,i,s)}}function as(t,e,i,s,h){for(h=h&&((e.subtreeFlags&10256)!==0||!1),e=e.child;e!==null;){var p=t,v=e,T=i,A=s,H=v.flags;switch(v.tag){case 0:case 11:case 15:as(p,v,T,A,h),xo(8,v);break;case 23:break;case 22:var X=v.stateNode;v.memoizedState!==null?X._visibility&2?as(p,v,T,A,h):So(p,v):(X._visibility|=2,as(p,v,T,A,h)),h&&H&2048&&oh(v.alternate,v);break;case 24:as(p,v,T,A,h),h&&H&2048&&lh(v.alternate,v);break;default:as(p,v,T,A,h)}e=e.sibling}}function So(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var i=t,s=e,h=s.flags;switch(s.tag){case 22:So(i,s),h&2048&&oh(s.alternate,s);break;case 24:So(i,s),h&2048&&lh(s.alternate,s);break;default:So(i,s)}e=e.sibling}}var To=8192;function rs(t,e,i){if(t.subtreeFlags&To)for(t=t.child;t!==null;)mp(t,e,i),t=t.sibling}function mp(t,e,i){switch(t.tag){case 26:rs(t,e,i),t.flags&To&&t.memoizedState!==null&&Oy(i,In,t.memoizedState,t.memoizedProps);break;case 5:rs(t,e,i);break;case 3:case 4:var s=In;In=du(t.stateNode.containerInfo),rs(t,e,i),In=s;break;case 22:t.memoizedState===null&&(s=t.alternate,s!==null&&s.memoizedState!==null?(s=To,To=16777216,rs(t,e,i),To=s):rs(t,e,i));break;default:rs(t,e,i)}}function gp(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function Eo(t){var e=t.deletions;if((t.flags&16)!==0){if(e!==null)for(var i=0;i<e.length;i++){var s=e[i];Me=s,yp(s,t)}gp(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)_p(t),t=t.sibling}function _p(t){switch(t.tag){case 0:case 11:case 15:Eo(t),t.flags&2048&&ca(9,t,t.return);break;case 3:Eo(t);break;case 12:Eo(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,Fl(t)):Eo(t);break;default:Eo(t)}}function Fl(t){var e=t.deletions;if((t.flags&16)!==0){if(e!==null)for(var i=0;i<e.length;i++){var s=e[i];Me=s,yp(s,t)}gp(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:ca(8,e,e.return),Fl(e);break;case 22:i=e.stateNode,i._visibility&2&&(i._visibility&=-3,Fl(e));break;default:Fl(e)}t=t.sibling}}function yp(t,e){for(;Me!==null;){var i=Me;switch(i.tag){case 0:case 11:case 15:ca(8,i,e);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var s=i.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:oo(i.memoizedState.cache)}if(s=i.child,s!==null)s.return=i,Me=s;else t:for(i=t;Me!==null;){s=Me;var h=s.sibling,p=s.return;if(lp(s),s===i){Me=null;break t}if(h!==null){h.return=p,Me=h;break t}Me=p}}}var Z_={getCacheForType:function(t){var e=Ue(xe),i=e.data.get(t);return i===void 0&&(i=t(),e.data.set(t,i)),i},cacheSignal:function(){return Ue(xe).controller.signal}},I_=typeof WeakMap=="function"?WeakMap:Map,Yt=0,ie=null,Mt=null,Nt=0,Xt=0,_n=null,ha=!1,ss=!1,uh=!1,Mi=0,ge=0,da=0,mr=0,ch=0,yn=0,os=0,Co=null,ln=null,hh=!1,tu=0,vp=0,eu=1/0,nu=null,fa=null,je=0,pa=null,ls=null,Bi=0,dh=0,fh=null,bp=null,Oo=0,ph=null;function vn(){return(Yt&2)!==0&&Nt!==0?Nt&-Nt:$.T!==null?bh():Ds()}function xp(){if(yn===0)if((Nt&536870912)===0||kt){var t=La;La<<=1,(La&3932160)===0&&(La=262144),yn=t}else yn=536870912;return t=mn.current,t!==null&&(t.flags|=32),yn}function un(t,e,i){(t===ie&&(Xt===2||Xt===9)||t.cancelPendingCommit!==null)&&(us(t,0),ma(t,Nt,yn,!1)),pi(t,i),((Yt&2)===0||t!==ie)&&(t===ie&&((Yt&2)===0&&(mr|=i),ge===4&&ma(t,Nt,yn,!1)),ui(t))}function wp(t,e,i){if((Yt&6)!==0)throw Error(l(327));var s=!i&&(e&127)===0&&(e&t.expiredLanes)===0||Ma(t,e),h=s?$_(t,e):gh(t,e,!0),p=s;do{if(h===0){ss&&!s&&ma(t,e,0,!1);break}else{if(i=t.current.alternate,p&&!V_(i)){h=gh(t,e,!1),p=!1;continue}if(h===2){if(p=e,t.errorRecoveryDisabledLanes&p)var v=0;else v=t.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){e=v;t:{var T=t;h=Co;var A=T.current.memoizedState.isDehydrated;if(A&&(us(T,v).flags|=256),v=gh(T,v,!1),v!==2){if(uh&&!A){T.errorRecoveryDisabledLanes|=p,mr|=p,h=4;break t}p=ln,ln=h,p!==null&&(ln===null?ln=p:ln.push.apply(ln,p))}h=v}if(p=!1,h!==2)continue}}if(h===1){us(t,0),ma(t,e,0,!0);break}t:{switch(s=t,p=h,p){case 0:case 1:throw Error(l(345));case 4:if((e&4194048)!==e)break;case 6:ma(s,e,yn,!ha);break t;case 2:ln=null;break;case 3:case 5:break;default:throw Error(l(329))}if((e&62914560)===e&&(h=tu+300-$e(),10<h)){if(ma(s,e,yn,!ha),Ar(s,0,!0)!==0)break t;Bi=e,s.timeoutHandle=Fp(Sp.bind(null,s,i,ln,nu,hh,e,yn,mr,os,ha,p,"Throttled",-0,0),h);break t}Sp(s,i,ln,nu,hh,e,yn,mr,os,ha,p,null,-0,0)}}break}while(!0);ui(t)}function Sp(t,e,i,s,h,p,v,T,A,H,X,F,I,Y){if(t.timeoutHandle=-1,F=e.subtreeFlags,F&8192||(F&16785408)===16785408){F={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Fe},mp(e,p,F);var dt=(p&62914560)===p?tu-$e():(p&4194048)===p?vp-$e():0;if(dt=jy(F,dt),dt!==null){Bi=p,t.cancelPendingCommit=dt(Rp.bind(null,t,e,p,i,s,h,v,T,A,X,F,null,I,Y)),ma(t,p,v,!H);return}}Rp(t,e,p,i,s,h,v,T,A)}function V_(t){for(var e=t;;){var i=e.tag;if((i===0||i===11||i===15)&&e.flags&16384&&(i=e.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var s=0;s<i.length;s++){var h=i[s],p=h.getSnapshot;h=h.value;try{if(!Le(p(),h))return!1}catch{return!1}}if(i=e.child,e.subtreeFlags&16384&&i!==null)i.return=e,e=i;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ma(t,e,i,s){e&=~ch,e&=~mr,t.suspendedLanes|=e,t.pingedLanes&=~e,s&&(t.warmLanes|=e),s=t.expirationTimes;for(var h=e;0<h;){var p=31-Ye(h),v=1<<p;s[p]=-1,h&=~v}i!==0&&el(t,i,e)}function iu(){return(Yt&6)===0?(jo(0),!1):!0}function mh(){if(Mt!==null){if(Xt===0)var t=Mt.return;else t=Mt,Zn=oi=null,Rc(t),Fr=null,uo=0,t=Mt;for(;t!==null;)tp(t.alternate,t),t=t.return;Mt=null}}function us(t,e){var i=t.timeoutHandle;i!==-1&&(t.timeoutHandle=-1,cy(i)),i=t.cancelPendingCommit,i!==null&&(t.cancelPendingCommit=null,i()),Bi=0,mh(),ie=t,Mt=i=zn(t.current,null),Nt=e,Xt=0,_n=null,ha=!1,ss=Ma(t,e),uh=!1,os=yn=ch=mr=da=ge=0,ln=Co=null,hh=!1,(e&8)!==0&&(e|=e&32);var s=t.entangledLanes;if(s!==0)for(t=t.entanglements,s&=e;0<s;){var h=31-Ye(s),p=1<<h;e|=t[h],s&=~p}return Mi=e,nr(),i}function Tp(t,e){Ot=null,$.H=yo,e===Jr||e===Ll?(e=Ud(),Xt=3):e===vc?(e=Ud(),Xt=4):Xt=e===Yc?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,_n=e,Mt===null&&(ge=1,$l(t,r(e,t.current)))}function Ep(){var t=mn.current;return t===null?!0:(Nt&4194048)===Nt?Rn===null:(Nt&62914560)===Nt||(Nt&536870912)!==0?t===Rn:!1}function Cp(){var t=$.H;return $.H=yo,t===null?yo:t}function Op(){var t=$.A;return $.A=Z_,t}function au(){ge=4,ha||(Nt&4194048)!==Nt&&mn.current!==null||(ss=!0),(da&134217727)===0&&(mr&134217727)===0||ie===null||ma(ie,Nt,yn,!1)}function gh(t,e,i){var s=Yt;Yt|=2;var h=Cp(),p=Op();(ie!==t||Nt!==e)&&(nu=null,us(t,e)),e=!1;var v=ge;t:do try{if(Xt!==0&&Mt!==null){var T=Mt,A=_n;switch(Xt){case 8:mh(),v=6;break t;case 3:case 2:case 9:case 6:mn.current===null&&(e=!0);var H=Xt;if(Xt=0,_n=null,cs(t,T,A,H),i&&ss){v=0;break t}break;default:H=Xt,Xt=0,_n=null,cs(t,T,A,H)}}G_(),v=ge;break}catch(X){Tp(t,X)}while(!0);return e&&t.shellSuspendCounter++,Zn=oi=null,Yt=s,$.H=h,$.A=p,Mt===null&&(ie=null,Nt=0,nr()),v}function G_(){for(;Mt!==null;)jp(Mt)}function $_(t,e){var i=Yt;Yt|=2;var s=Cp(),h=Op();ie!==t||Nt!==e?(nu=null,eu=$e()+500,us(t,e)):ss=Ma(t,e);t:do try{if(Xt!==0&&Mt!==null){e=Mt;var p=_n;e:switch(Xt){case 1:Xt=0,_n=null,cs(t,e,p,1);break;case 2:case 9:if(Nd(p)){Xt=0,_n=null,Ap(e);break}e=function(){Xt!==2&&Xt!==9||ie!==t||(Xt=7),ui(t)},p.then(e,e);break t;case 3:Xt=7;break t;case 4:Xt=5;break t;case 7:Nd(p)?(Xt=0,_n=null,Ap(e)):(Xt=0,_n=null,cs(t,e,p,7));break;case 5:var v=null;switch(Mt.tag){case 26:v=Mt.memoizedState;case 5:case 27:var T=Mt;if(v?pm(v):T.stateNode.complete){Xt=0,_n=null;var A=T.sibling;if(A!==null)Mt=A;else{var H=T.return;H!==null?(Mt=H,ru(H)):Mt=null}break e}}Xt=0,_n=null,cs(t,e,p,5);break;case 6:Xt=0,_n=null,cs(t,e,p,6);break;case 8:mh(),ge=6;break t;default:throw Error(l(462))}}Y_();break}catch(X){Tp(t,X)}while(!0);return Zn=oi=null,$.H=s,$.A=h,Yt=i,Mt!==null?0:(ie=null,Nt=0,nr(),ge)}function Y_(){for(;Mt!==null&&!Qo();)jp(Mt)}function jp(t){var e=Jf(t.alternate,t,Mi);t.memoizedProps=t.pendingProps,e===null?ru(t):Mt=e}function Ap(t){var e=t,i=e.alternate;switch(e.tag){case 15:case 0:e=$f(i,e,e.pendingProps,e.type,void 0,Nt);break;case 11:e=$f(i,e,e.pendingProps,e.type.render,e.ref,Nt);break;case 5:Rc(e);default:tp(i,e),e=Mt=no(e,Mi),e=Jf(i,e,Mi)}t.memoizedProps=t.pendingProps,e===null?ru(t):Mt=e}function cs(t,e,i,s){Zn=oi=null,Rc(e),Fr=null,uo=0;var h=e.return;try{if(B_(t,h,e,i,Nt)){ge=1,$l(t,r(i,t.current)),Mt=null;return}}catch(p){if(h!==null)throw Mt=h,p;ge=1,$l(t,r(i,t.current)),Mt=null;return}e.flags&32768?(kt||s===1?t=!0:ss||(Nt&536870912)!==0?t=!1:(ha=t=!0,(s===2||s===9||s===3||s===6)&&(s=mn.current,s!==null&&s.tag===13&&(s.flags|=16384))),zp(e,t)):ru(e)}function ru(t){var e=t;do{if((e.flags&32768)!==0){zp(e,ha);return}t=e.return;var i=P_(e.alternate,e,Mi);if(i!==null){Mt=i;return}if(e=e.sibling,e!==null){Mt=e;return}Mt=e=t}while(e!==null);ge===0&&(ge=5)}function zp(t,e){do{var i=U_(t.alternate,t);if(i!==null){i.flags&=32767,Mt=i;return}if(i=t.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!e&&(t=t.sibling,t!==null)){Mt=t;return}Mt=t=i}while(t!==null);ge=6,Mt=null}function Rp(t,e,i,s,h,p,v,T,A){t.cancelPendingCommit=null;do su();while(je!==0);if((Yt&6)!==0)throw Error(l(327));if(e!==null){if(e===t.current)throw Error(l(177));if(p=e.lanes|e.childLanes,p|=Gr,Ju(t,i,p,v,T,A),t===ie&&(Mt=ie=null,Nt=0),ls=e,pa=t,Bi=i,dh=p,fh=h,bp=s,(e.subtreeFlags&10256)!==0||(e.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,Q_(Aa,function(){return Dp(),null})):(t.callbackNode=null,t.callbackPriority=0),s=(e.flags&13878)!==0,(e.subtreeFlags&13878)!==0||s){s=$.T,$.T=null,h=at.p,at.p=2,v=Yt,Yt|=4;try{H_(t,e,i)}finally{Yt=v,at.p=h,$.T=s}}je=1,Lp(),kp(),Mp()}}function Lp(){if(je===1){je=0;var t=pa,e=ls,i=(e.flags&13878)!==0;if((e.subtreeFlags&13878)!==0||i){i=$.T,$.T=null;var s=at.p;at.p=2;var h=Yt;Yt|=4;try{dp(e,t);var p=jh,v=Qa(t.containerInfo),T=p.focusedElem,A=p.selectionRange;if(v!==T&&T&&T.ownerDocument&&qr(T.ownerDocument.documentElement,T)){if(A!==null&&ti(T)){var H=A.start,X=A.end;if(X===void 0&&(X=H),"selectionStart"in T)T.selectionStart=H,T.selectionEnd=Math.min(X,T.value.length);else{var F=T.ownerDocument||document,I=F&&F.defaultView||window;if(I.getSelection){var Y=I.getSelection(),dt=T.textContent.length,bt=Math.min(A.start,dt),ee=A.end===void 0?bt:Math.min(A.end,dt);!Y.extend&&bt>ee&&(v=ee,ee=bt,bt=v);var D=Xa(T,bt),M=Xa(T,ee);if(D&&M&&(Y.rangeCount!==1||Y.anchorNode!==D.node||Y.anchorOffset!==D.offset||Y.focusNode!==M.node||Y.focusOffset!==M.offset)){var U=F.createRange();U.setStart(D.node,D.offset),Y.removeAllRanges(),bt>ee?(Y.addRange(U),Y.extend(M.node,M.offset)):(U.setEnd(M.node,M.offset),Y.addRange(U))}}}}for(F=[],Y=T;Y=Y.parentNode;)Y.nodeType===1&&F.push({element:Y,left:Y.scrollLeft,top:Y.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<F.length;T++){var Q=F[T];Q.element.scrollLeft=Q.left,Q.element.scrollTop=Q.top}}yu=!!Oh,jh=Oh=null}finally{Yt=h,at.p=s,$.T=i}}t.current=e,je=2}}function kp(){if(je===2){je=0;var t=pa,e=ls,i=(e.flags&8772)!==0;if((e.subtreeFlags&8772)!==0||i){i=$.T,$.T=null;var s=at.p;at.p=2;var h=Yt;Yt|=4;try{op(t,e.alternate,e)}finally{Yt=h,at.p=s,$.T=i}}je=3}}function Mp(){if(je===4||je===3){je=0,Jo();var t=pa,e=ls,i=Bi,s=bp;(e.subtreeFlags&10256)!==0||(e.flags&10256)!==0?je=5:(je=0,ls=pa=null,Bp(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(fa=null),mt(i),e=e.stateNode,Ne&&typeof Ne.onCommitFiberRoot=="function")try{Ne.onCommitFiberRoot(Ui,e,void 0,(e.current.flags&128)===128)}catch{}if(s!==null){e=$.T,h=at.p,at.p=2,$.T=null;try{for(var p=t.onRecoverableError,v=0;v<s.length;v++){var T=s[v];p(T.value,{componentStack:T.stack})}}finally{$.T=e,at.p=h}}(Bi&3)!==0&&su(),ui(t),h=t.pendingLanes,(i&261930)!==0&&(h&42)!==0?t===ph?Oo++:(Oo=0,ph=t):Oo=0,jo(0)}}function Bp(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,oo(e)))}function su(){return Lp(),kp(),Mp(),Dp()}function Dp(){if(je!==5)return!1;var t=pa,e=dh;dh=0;var i=mt(Bi),s=$.T,h=at.p;try{at.p=32>i?32:i,$.T=null,i=fh,fh=null;var p=pa,v=Bi;if(je=0,ls=pa=null,Bi=0,(Yt&6)!==0)throw Error(l(331));var T=Yt;if(Yt|=4,_p(p.current),pp(p,p.current,v,i),Yt=T,jo(0,!1),Ne&&typeof Ne.onPostCommitFiberRoot=="function")try{Ne.onPostCommitFiberRoot(Ui,p)}catch{}return!0}finally{at.p=h,$.T=s,Bp(t,e)}}function Np(t,e,i){e=r(i,e),e=$c(t.stateNode,e,2),t=oa(t,e,2),t!==null&&(pi(t,2),ui(t))}function Qt(t,e,i){if(t.tag===3)Np(t,t,i);else for(;e!==null;){if(e.tag===3){Np(e,t,i);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(fa===null||!fa.has(s))){t=r(i,t),i=Pf(2),s=oa(e,i,2),s!==null&&(Uf(i,s,e,t),pi(s,2),ui(s));break}}e=e.return}}function _h(t,e,i){var s=t.pingCache;if(s===null){s=t.pingCache=new I_;var h=new Set;s.set(e,h)}else h=s.get(e),h===void 0&&(h=new Set,s.set(e,h));h.has(i)||(uh=!0,h.add(i),t=W_.bind(null,t,e,i),e.then(t,t))}function W_(t,e,i){var s=t.pingCache;s!==null&&s.delete(e),t.pingedLanes|=t.suspendedLanes&i,t.warmLanes&=~i,ie===t&&(Nt&i)===i&&(ge===4||ge===3&&(Nt&62914560)===Nt&&300>$e()-tu?(Yt&2)===0&&us(t,0):ch|=i,os===Nt&&(os=0)),ui(t)}function Pp(t,e){e===0&&(e=tl()),t=An(t,e),t!==null&&(pi(t,e),ui(t))}function K_(t){var e=t.memoizedState,i=0;e!==null&&(i=e.retryLane),Pp(t,i)}function X_(t,e){var i=0;switch(t.tag){case 31:case 13:var s=t.stateNode,h=t.memoizedState;h!==null&&(i=h.retryLane);break;case 19:s=t.stateNode;break;case 22:s=t.stateNode._retryCache;break;default:throw Error(l(314))}s!==null&&s.delete(e),Pp(t,i)}function Q_(t,e){return Or(t,e)}var ou=null,hs=null,yh=!1,lu=!1,vh=!1,ga=0;function ui(t){t!==hs&&t.next===null&&(hs===null?ou=hs=t:hs=hs.next=t),lu=!0,yh||(yh=!0,F_())}function jo(t,e){if(!vh&&lu){vh=!0;do for(var i=!1,s=ou;s!==null;){if(t!==0){var h=s.pendingLanes;if(h===0)var p=0;else{var v=s.suspendedLanes,T=s.pingedLanes;p=(1<<31-Ye(42|t)+1)-1,p&=h&~(v&~T),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(i=!0,Zp(s,p))}else p=Nt,p=Ar(s,s===ie?p:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),(p&3)===0||Ma(s,p)||(i=!0,Zp(s,p));s=s.next}while(i);vh=!1}}function J_(){Up()}function Up(){lu=yh=!1;var t=0;ga!==0&&uy()&&(t=ga);for(var e=$e(),i=null,s=ou;s!==null;){var h=s.next,p=Hp(s,e);p===0?(s.next=null,i===null?ou=h:i.next=h,h===null&&(hs=i)):(i=s,(t!==0||(p&3)!==0)&&(lu=!0)),s=h}je!==0&&je!==5||jo(t),ga!==0&&(ga=0)}function Hp(t,e){for(var i=t.suspendedLanes,s=t.pingedLanes,h=t.expirationTimes,p=t.pendingLanes&-62914561;0<p;){var v=31-Ye(p),T=1<<v,A=h[v];A===-1?((T&i)===0||(T&s)!==0)&&(h[v]=Qu(T,e)):A<=e&&(t.expiredLanes|=T),p&=~T}if(e=ie,i=Nt,i=Ar(t,t===e?i:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),s=t.callbackNode,i===0||t===e&&(Xt===2||Xt===9)||t.cancelPendingCommit!==null)return s!==null&&s!==null&&ja(s),t.callbackNode=null,t.callbackPriority=0;if((i&3)===0||Ma(t,i)){if(e=i&-i,e===t.callbackPriority)return e;switch(s!==null&&ja(s),mt(i)){case 2:case 8:i=ks;break;case 32:i=Aa;break;case 268435456:i=Ms;break;default:i=Aa}return s=qp.bind(null,t),i=Or(i,s),t.callbackPriority=e,t.callbackNode=i,e}return s!==null&&s!==null&&ja(s),t.callbackPriority=2,t.callbackNode=null,2}function qp(t,e){if(je!==0&&je!==5)return t.callbackNode=null,t.callbackPriority=0,null;var i=t.callbackNode;if(su()&&t.callbackNode!==i)return null;var s=Nt;return s=Ar(t,t===ie?s:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),s===0?null:(wp(t,s,e),Hp(t,$e()),t.callbackNode!=null&&t.callbackNode===i?qp.bind(null,t):null)}function Zp(t,e){if(su())return null;wp(t,e,!0)}function F_(){hy(function(){(Yt&6)!==0?Or(jr,J_):Up()})}function bh(){if(ga===0){var t=Xr;t===0&&(t=Ra,Ra<<=1,(Ra&261888)===0&&(Ra=256)),ga=t}return ga}function Ip(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Gi(""+t)}function Vp(t,e){var i=e.ownerDocument.createElement("input");return i.name=e.name,i.value=e.value,t.id&&i.setAttribute("form",t.id),e.parentNode.insertBefore(i,e),t=new FormData(t),i.parentNode.removeChild(i),t}function ty(t,e,i,s,h){if(e==="submit"&&i&&i.stateNode===h){var p=Ip((h[Re]||null).action),v=s.submitter;v&&(e=(e=v[Re]||null)?Ip(e.formAction):v.getAttribute("formAction"),e!==null&&(p=e,v=null));var T=new Mr("action","action",null,s,h);t.push({event:T,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(ga!==0){var A=v?Vp(h,v):new FormData(h);Hc(i,{pending:!0,data:A,method:h.method,action:p},null,A)}}else typeof p=="function"&&(T.preventDefault(),A=v?Vp(h,v):new FormData(h),Hc(i,{pending:!0,data:A,method:h.method,action:p},p,A))},currentTarget:h}]})}}for(var xh=0;xh<ii.length;xh++){var wh=ii[xh],ey=wh.toLowerCase(),ny=wh[0].toUpperCase()+wh.slice(1);en(ey,"on"+ny)}en(Fa,"onAnimationEnd"),en(Cl,"onAnimationIteration"),en(tr,"onAnimationStart"),en("dblclick","onDoubleClick"),en("focusin","onFocus"),en("focusout","onBlur"),en(hc,"onTransitionRun"),en(Ol,"onTransitionStart"),en(dc,"onTransitionCancel"),en(na,"onTransitionEnd"),Xn("onMouseEnter",["mouseout","mouseover"]),Xn("onMouseLeave",["mouseout","mouseover"]),Xn("onPointerEnter",["pointerout","pointerover"]),Xn("onPointerLeave",["pointerout","pointerover"]),_i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),_i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),_i("onBeforeInput",["compositionend","keypress","textInput","paste"]),_i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),_i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),_i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ao="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),iy=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ao));function Gp(t,e){e=(e&4)!==0;for(var i=0;i<t.length;i++){var s=t[i],h=s.event;s=s.listeners;t:{var p=void 0;if(e)for(var v=s.length-1;0<=v;v--){var T=s[v],A=T.instance,H=T.currentTarget;if(T=T.listener,A!==p&&h.isPropagationStopped())break t;p=T,h.currentTarget=H;try{p(h)}catch(X){er(X)}h.currentTarget=null,p=A}else for(v=0;v<s.length;v++){if(T=s[v],A=T.instance,H=T.currentTarget,T=T.listener,A!==p&&h.isPropagationStopped())break t;p=T,h.currentTarget=H;try{p(h)}catch(X){er(X)}h.currentTarget=null,p=A}}}}function Bt(t,e){var i=e[Wn];i===void 0&&(i=e[Wn]=new Set);var s=t+"__bubble";i.has(s)||($p(e,t,2,!1),i.add(s))}function Sh(t,e,i){var s=0;e&&(s|=4),$p(i,t,s,e)}var uu="_reactListening"+Math.random().toString(36).slice(2);function Th(t){if(!t[uu]){t[uu]=!0,sl.forEach(function(i){i!=="selectionchange"&&(iy.has(i)||Sh(i,!1,t),Sh(i,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[uu]||(e[uu]=!0,Sh("selectionchange",!1,e))}}function $p(t,e,i,s){switch(xm(e)){case 2:var h=Ry;break;case 8:h=Ly;break;default:h=Uh}i=h.bind(null,e,i,t),h=void 0,!qa||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(h=!0),s?h!==void 0?t.addEventListener(e,i,{capture:!0,passive:h}):t.addEventListener(e,i,!0):h!==void 0?t.addEventListener(e,i,{passive:h}):t.addEventListener(e,i,!1)}function Eh(t,e,i,s,h){var p=s;if((e&1)===0&&(e&2)===0&&s!==null)t:for(;;){if(s===null)return;var v=s.tag;if(v===3||v===4){var T=s.stateNode.containerInfo;if(T===h)break;if(v===4)for(v=s.return;v!==null;){var A=v.tag;if((A===3||A===4)&&v.stateNode.containerInfo===h)return;v=v.return}for(;T!==null;){if(v=gi(T),v===null)return;if(A=v.tag,A===5||A===6||A===26||A===27){s=p=v;continue t}T=T.parentNode}}s=s.return}Gs(function(){var H=p,X=Ha(i),F=[];t:{var I=jl.get(t);if(I!==void 0){var Y=Mr,dt=t;switch(t){case"keypress":if(Za(i)===0)break t;case"keydown":case"keyup":Y=pl;break;case"focusin":dt="focus",Y=Ws;break;case"focusout":dt="blur",Y=Ws;break;case"beforeblur":case"afterblur":Y=Ws;break;case"click":if(i.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Y=ul;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Y=tc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Y=rc;break;case Fa:case Cl:case tr:Y=Ks;break;case na:Y=_l;break;case"scroll":case"scrollend":Y=Dt;break;case"wheel":Y=xi;break;case"copy":case"cut":case"paste":Y=En;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Y=ml;break;case"toggle":case"beforetoggle":Y=Ga}var bt=(e&4)!==0,ee=!bt&&(t==="scroll"||t==="scrollend"),D=bt?I!==null?I+"Capture":null:I;bt=[];for(var M=H,U;M!==null;){var Q=M;if(U=Q.stateNode,Q=Q.tag,Q!==5&&Q!==26&&Q!==27||U===null||D===null||(Q=vi(M,D),Q!=null&&bt.push(zo(M,Q,U))),ee)break;M=M.return}0<bt.length&&(I=new Y(I,dt,null,i,X),F.push({event:I,listeners:bt}))}}if((e&7)===0){t:{if(I=t==="mouseover"||t==="pointerover",Y=t==="mouseout"||t==="pointerout",I&&i!==kr&&(dt=i.relatedTarget||i.fromElement)&&(gi(dt)||dt[mi]))break t;if((Y||I)&&(I=X.window===X?X:(I=X.ownerDocument)?I.defaultView||I.parentWindow:window,Y?(dt=i.relatedTarget||i.toElement,Y=H,dt=dt?gi(dt):null,dt!==null&&(ee=f(dt),bt=dt.tag,dt!==ee||bt!==5&&bt!==27&&bt!==6)&&(dt=null)):(Y=null,dt=H),Y!==dt)){if(bt=ul,Q="onMouseLeave",D="onMouseEnter",M="mouse",(t==="pointerout"||t==="pointerover")&&(bt=ml,Q="onPointerLeave",D="onPointerEnter",M="pointer"),ee=Y==null?I:Kn(Y),U=dt==null?I:Kn(dt),I=new bt(Q,M+"leave",Y,i,X),I.target=ee,I.relatedTarget=U,Q=null,gi(X)===H&&(bt=new bt(D,M+"enter",dt,i,X),bt.target=U,bt.relatedTarget=ee,Q=bt),ee=Q,Y&&dt)e:{for(bt=ay,D=Y,M=dt,U=0,Q=D;Q;Q=bt(Q))U++;Q=0;for(var yt=M;yt;yt=bt(yt))Q++;for(;0<U-Q;)D=bt(D),U--;for(;0<Q-U;)M=bt(M),Q--;for(;U--;){if(D===M||M!==null&&D===M.alternate){bt=D;break e}D=bt(D),M=bt(M)}bt=null}else bt=null;Y!==null&&Yp(F,I,Y,bt,!1),dt!==null&&ee!==null&&Yp(F,ee,dt,bt,!0)}}t:{if(I=H?Kn(H):window,Y=I.nodeName&&I.nodeName.toLowerCase(),Y==="select"||Y==="input"&&I.type==="file")var Gt=Ka;else if(Cn(I))if(xl)Gt=cc;else{Gt=uc;var ft=Un}else Y=I.nodeName,!Y||Y.toLowerCase()!=="input"||I.type!=="checkbox"&&I.type!=="radio"?H&&Ua(H.elementType)&&(Gt=Ka):Gt=Ji;if(Gt&&(Gt=Gt(t,H))){bl(F,Gt,i,X);break t}ft&&ft(t,I,H),t==="focusout"&&H&&I.type==="number"&&H.memoizedProps.value!=null&&Dn(I,"number",I.value)}switch(ft=H?Kn(H):window,t){case"focusin":(Cn(ft)||ft.contentEditable==="true")&&(ei=ft,Ir=H,Ja=null);break;case"focusout":Ja=Ir=ei=null;break;case"mousedown":ta=!0;break;case"contextmenu":case"mouseup":case"dragend":ta=!1,Tl(F,i,X);break;case"selectionchange":if(Zr)break;case"keydown":case"keyup":Tl(F,i,X)}var At;if(Dr)t:{switch(t){case"compositionstart":var Pt="onCompositionStart";break t;case"compositionend":Pt="onCompositionEnd";break t;case"compositionupdate":Pt="onCompositionUpdate";break t}Pt=void 0}else Ki?vl(t,i)&&(Pt="onCompositionEnd"):t==="keydown"&&i.keyCode===229&&(Pt="onCompositionStart");Pt&&(Nr&&i.locale!=="ko"&&(Ki||Pt!=="onCompositionStart"?Pt==="onCompositionEnd"&&Ki&&(At=Jn()):(Tn=X,bi="value"in Tn?Tn.value:Tn.textContent,Ki=!0)),ft=cu(H,Pt),0<ft.length&&(Pt=new Xs(Pt,t,null,i,X),F.push({event:Pt,listeners:ft}),At?Pt.data=At:(At=to(i),At!==null&&(Pt.data=At)))),(At=oc?pn(t,i):Xi(t,i))&&(Pt=cu(H,"onBeforeInput"),0<Pt.length&&(ft=new Xs("onBeforeInput","beforeinput",null,i,X),F.push({event:ft,listeners:Pt}),ft.data=At)),ty(F,t,H,i,X)}Gp(F,e)})}function zo(t,e,i){return{instance:t,listener:e,currentTarget:i}}function cu(t,e){for(var i=e+"Capture",s=[];t!==null;){var h=t,p=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||p===null||(h=vi(t,i),h!=null&&s.unshift(zo(t,h,p)),h=vi(t,e),h!=null&&s.push(zo(t,h,p))),t.tag===3)return s;t=t.return}return[]}function ay(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Yp(t,e,i,s,h){for(var p=e._reactName,v=[];i!==null&&i!==s;){var T=i,A=T.alternate,H=T.stateNode;if(T=T.tag,A!==null&&A===s)break;T!==5&&T!==26&&T!==27||H===null||(A=H,h?(H=vi(i,p),H!=null&&v.unshift(zo(i,H,A))):h||(H=vi(i,p),H!=null&&v.push(zo(i,H,A)))),i=i.return}v.length!==0&&t.push({event:e,listeners:v})}var ry=/\r\n?/g,sy=/\u0000|\uFFFD/g;function Wp(t){return(typeof t=="string"?t:""+t).replace(ry,`
`).replace(sy,"")}function Kp(t,e){return e=Wp(e),Wp(t)===e}function te(t,e,i,s,h,p){switch(i){case"children":typeof s=="string"?e==="body"||e==="textarea"&&s===""||Sn(t,s):(typeof s=="number"||typeof s=="bigint")&&e!=="body"&&Sn(t,""+s);break;case"className":Jt(t,"class",s);break;case"tabIndex":Jt(t,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":Jt(t,i,s);break;case"style":Rr(t,s,p);break;case"data":if(e!=="object"){Jt(t,"data",s);break}case"src":case"href":if(s===""&&(e!=="a"||i!=="href")){t.removeAttribute(i);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){t.removeAttribute(i);break}s=Gi(""+s),t.setAttribute(i,s);break;case"action":case"formAction":if(typeof s=="function"){t.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(i==="formAction"?(e!=="input"&&te(t,e,"name",h.name,h,null),te(t,e,"formEncType",h.formEncType,h,null),te(t,e,"formMethod",h.formMethod,h,null),te(t,e,"formTarget",h.formTarget,h,null)):(te(t,e,"encType",h.encType,h,null),te(t,e,"method",h.method,h,null),te(t,e,"target",h.target,h,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){t.removeAttribute(i);break}s=Gi(""+s),t.setAttribute(i,s);break;case"onClick":s!=null&&(t.onclick=Fe);break;case"onScroll":s!=null&&Bt("scroll",t);break;case"onScrollEnd":s!=null&&Bt("scrollend",t);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(l(61));if(i=s.__html,i!=null){if(h.children!=null)throw Error(l(60));t.innerHTML=i}}break;case"multiple":t.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":t.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){t.removeAttribute("xlink:href");break}i=Gi(""+s),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?t.setAttribute(i,""+s):t.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?t.setAttribute(i,""):t.removeAttribute(i);break;case"capture":case"download":s===!0?t.setAttribute(i,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?t.setAttribute(i,s):t.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?t.setAttribute(i,s):t.removeAttribute(i);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?t.removeAttribute(i):t.setAttribute(i,s);break;case"popover":Bt("beforetoggle",t),Bt("toggle",t),Lt(t,"popover",s);break;case"xlinkActuate":Je(t,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":Je(t,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":Je(t,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":Je(t,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":Je(t,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":Je(t,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":Je(t,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":Je(t,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":Je(t,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":Lt(t,"is",s);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=Lr.get(i)||i,Lt(t,i,s))}}function Ch(t,e,i,s,h,p){switch(i){case"style":Rr(t,s,p);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(l(61));if(i=s.__html,i!=null){if(h.children!=null)throw Error(l(60));t.innerHTML=i}}break;case"children":typeof s=="string"?Sn(t,s):(typeof s=="number"||typeof s=="bigint")&&Sn(t,""+s);break;case"onScroll":s!=null&&Bt("scroll",t);break;case"onScrollEnd":s!=null&&Bt("scrollend",t);break;case"onClick":s!=null&&(t.onclick=Fe);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ol.hasOwnProperty(i))t:{if(i[0]==="o"&&i[1]==="n"&&(h=i.endsWith("Capture"),e=i.slice(2,h?i.length-7:void 0),p=t[Re]||null,p=p!=null?p[i]:null,typeof p=="function"&&t.removeEventListener(e,p,h),typeof s=="function")){typeof p!="function"&&p!==null&&(i in t?t[i]=null:t.hasAttribute(i)&&t.removeAttribute(i)),t.addEventListener(e,s,h);break t}i in t?t[i]=s:s===!0?t.setAttribute(i,""):Lt(t,i,s)}}}function qe(t,e,i){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Bt("error",t),Bt("load",t);var s=!1,h=!1,p;for(p in i)if(i.hasOwnProperty(p)){var v=i[p];if(v!=null)switch(p){case"src":s=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(l(137,e));default:te(t,e,p,v,i,null)}}h&&te(t,e,"srcSet",i.srcSet,i,null),s&&te(t,e,"src",i.src,i,null);return;case"input":Bt("invalid",t);var T=p=v=h=null,A=null,H=null;for(s in i)if(i.hasOwnProperty(s)){var X=i[s];if(X!=null)switch(s){case"name":h=X;break;case"type":v=X;break;case"checked":A=X;break;case"defaultChecked":H=X;break;case"value":p=X;break;case"defaultValue":T=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(l(137,e));break;default:te(t,e,s,X,i,null)}}Pa(t,p,T,A,H,v,h,!1);return;case"select":Bt("invalid",t),s=v=p=null;for(h in i)if(i.hasOwnProperty(h)&&(T=i[h],T!=null))switch(h){case"value":p=T;break;case"defaultValue":v=T;break;case"multiple":s=T;default:te(t,e,h,T,i,null)}e=p,i=v,t.multiple=!!s,e!=null?ne(t,!!s,e,!1):i!=null&&ne(t,!!s,i,!0);return;case"textarea":Bt("invalid",t),p=h=s=null;for(v in i)if(i.hasOwnProperty(v)&&(T=i[v],T!=null))switch(v){case"value":s=T;break;case"defaultValue":h=T;break;case"children":p=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(l(91));break;default:te(t,e,v,T,i,null)}Ii(t,s,h,p);return;case"option":for(A in i)if(i.hasOwnProperty(A)&&(s=i[A],s!=null))switch(A){case"selected":t.selected=s&&typeof s!="function"&&typeof s!="symbol";break;default:te(t,e,A,s,i,null)}return;case"dialog":Bt("beforetoggle",t),Bt("toggle",t),Bt("cancel",t),Bt("close",t);break;case"iframe":case"object":Bt("load",t);break;case"video":case"audio":for(s=0;s<Ao.length;s++)Bt(Ao[s],t);break;case"image":Bt("error",t),Bt("load",t);break;case"details":Bt("toggle",t);break;case"embed":case"source":case"link":Bt("error",t),Bt("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(H in i)if(i.hasOwnProperty(H)&&(s=i[H],s!=null))switch(H){case"children":case"dangerouslySetInnerHTML":throw Error(l(137,e));default:te(t,e,H,s,i,null)}return;default:if(Ua(e)){for(X in i)i.hasOwnProperty(X)&&(s=i[X],s!==void 0&&Ch(t,e,X,s,i,void 0));return}}for(T in i)i.hasOwnProperty(T)&&(s=i[T],s!=null&&te(t,e,T,s,i,null))}function oy(t,e,i,s){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,p=null,v=null,T=null,A=null,H=null,X=null;for(Y in i){var F=i[Y];if(i.hasOwnProperty(Y)&&F!=null)switch(Y){case"checked":break;case"value":break;case"defaultValue":A=F;default:s.hasOwnProperty(Y)||te(t,e,Y,null,s,F)}}for(var I in s){var Y=s[I];if(F=i[I],s.hasOwnProperty(I)&&(Y!=null||F!=null))switch(I){case"type":p=Y;break;case"name":h=Y;break;case"checked":H=Y;break;case"defaultChecked":X=Y;break;case"value":v=Y;break;case"defaultValue":T=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(l(137,e));break;default:Y!==F&&te(t,e,I,Y,s,F)}}Zs(t,v,T,A,H,X,p,h);return;case"select":Y=v=T=I=null;for(p in i)if(A=i[p],i.hasOwnProperty(p)&&A!=null)switch(p){case"value":break;case"multiple":Y=A;default:s.hasOwnProperty(p)||te(t,e,p,null,s,A)}for(h in s)if(p=s[h],A=i[h],s.hasOwnProperty(h)&&(p!=null||A!=null))switch(h){case"value":I=p;break;case"defaultValue":T=p;break;case"multiple":v=p;default:p!==A&&te(t,e,h,p,s,A)}e=T,i=v,s=Y,I!=null?ne(t,!!i,I,!1):!!s!=!!i&&(e!=null?ne(t,!!i,e,!0):ne(t,!!i,i?[]:"",!1));return;case"textarea":Y=I=null;for(T in i)if(h=i[T],i.hasOwnProperty(T)&&h!=null&&!s.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:te(t,e,T,null,s,h)}for(v in s)if(h=s[v],p=i[v],s.hasOwnProperty(v)&&(h!=null||p!=null))switch(v){case"value":I=h;break;case"defaultValue":Y=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(l(91));break;default:h!==p&&te(t,e,v,h,s,p)}Qn(t,I,Y);return;case"option":for(var dt in i)if(I=i[dt],i.hasOwnProperty(dt)&&I!=null&&!s.hasOwnProperty(dt))switch(dt){case"selected":t.selected=!1;break;default:te(t,e,dt,null,s,I)}for(A in s)if(I=s[A],Y=i[A],s.hasOwnProperty(A)&&I!==Y&&(I!=null||Y!=null))switch(A){case"selected":t.selected=I&&typeof I!="function"&&typeof I!="symbol";break;default:te(t,e,A,I,s,Y)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var bt in i)I=i[bt],i.hasOwnProperty(bt)&&I!=null&&!s.hasOwnProperty(bt)&&te(t,e,bt,null,s,I);for(H in s)if(I=s[H],Y=i[H],s.hasOwnProperty(H)&&I!==Y&&(I!=null||Y!=null))switch(H){case"children":case"dangerouslySetInnerHTML":if(I!=null)throw Error(l(137,e));break;default:te(t,e,H,I,s,Y)}return;default:if(Ua(e)){for(var ee in i)I=i[ee],i.hasOwnProperty(ee)&&I!==void 0&&!s.hasOwnProperty(ee)&&Ch(t,e,ee,void 0,s,I);for(X in s)I=s[X],Y=i[X],!s.hasOwnProperty(X)||I===Y||I===void 0&&Y===void 0||Ch(t,e,X,I,s,Y);return}}for(var D in i)I=i[D],i.hasOwnProperty(D)&&I!=null&&!s.hasOwnProperty(D)&&te(t,e,D,null,s,I);for(F in s)I=s[F],Y=i[F],!s.hasOwnProperty(F)||I===Y||I==null&&Y==null||te(t,e,F,I,s,Y)}function Xp(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function ly(){if(typeof performance.getEntriesByType=="function"){for(var t=0,e=0,i=performance.getEntriesByType("resource"),s=0;s<i.length;s++){var h=i[s],p=h.transferSize,v=h.initiatorType,T=h.duration;if(p&&T&&Xp(v)){for(v=0,T=h.responseEnd,s+=1;s<i.length;s++){var A=i[s],H=A.startTime;if(H>T)break;var X=A.transferSize,F=A.initiatorType;X&&Xp(F)&&(A=A.responseEnd,v+=X*(A<T?1:(T-H)/(A-H)))}if(--s,e+=8*(p+v)/(h.duration/1e3),t++,10<t)break}}if(0<t)return e/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Oh=null,jh=null;function hu(t){return t.nodeType===9?t:t.ownerDocument}function Qp(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Jp(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function Ah(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var zh=null;function uy(){var t=window.event;return t&&t.type==="popstate"?t===zh?!1:(zh=t,!0):(zh=null,!1)}var Fp=typeof setTimeout=="function"?setTimeout:void 0,cy=typeof clearTimeout=="function"?clearTimeout:void 0,tm=typeof Promise=="function"?Promise:void 0,hy=typeof queueMicrotask=="function"?queueMicrotask:typeof tm<"u"?function(t){return tm.resolve(null).then(t).catch(dy)}:Fp;function dy(t){setTimeout(function(){throw t})}function _a(t){return t==="head"}function em(t,e){var i=e,s=0;do{var h=i.nextSibling;if(t.removeChild(i),h&&h.nodeType===8)if(i=h.data,i==="/$"||i==="/&"){if(s===0){t.removeChild(h),ms(e);return}s--}else if(i==="$"||i==="$?"||i==="$~"||i==="$!"||i==="&")s++;else if(i==="html")Ro(t.ownerDocument.documentElement);else if(i==="head"){i=t.ownerDocument.head,Ro(i);for(var p=i.firstChild;p;){var v=p.nextSibling,T=p.nodeName;p[Ba]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&p.rel.toLowerCase()==="stylesheet"||i.removeChild(p),p=v}}else i==="body"&&Ro(t.ownerDocument.body);i=h}while(i);ms(e)}function nm(t,e){var i=t;t=0;do{var s=i.nextSibling;if(i.nodeType===1?e?(i._stashedDisplay=i.style.display,i.style.display="none"):(i.style.display=i._stashedDisplay||"",i.getAttribute("style")===""&&i.removeAttribute("style")):i.nodeType===3&&(e?(i._stashedText=i.nodeValue,i.nodeValue=""):i.nodeValue=i._stashedText||""),s&&s.nodeType===8)if(i=s.data,i==="/$"){if(t===0)break;t--}else i!=="$"&&i!=="$?"&&i!=="$~"&&i!=="$!"||t++;i=s}while(i)}function Rh(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var i=e;switch(e=e.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":Rh(i),Ps(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}t.removeChild(i)}}function fy(t,e,i,s){for(;t.nodeType===1;){var h=i;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!s&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(s){if(!t[Ba])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(p=t.getAttribute("rel"),p==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(p!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(p=t.getAttribute("src"),(p!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&p&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var p=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===p)return t}else return t;if(t=Ln(t.nextSibling),t===null)break}return null}function py(t,e,i){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!i||(t=Ln(t.nextSibling),t===null))return null;return t}function im(t,e){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!e||(t=Ln(t.nextSibling),t===null))return null;return t}function Lh(t){return t.data==="$?"||t.data==="$~"}function kh(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function my(t,e){var i=t.ownerDocument;if(t.data==="$~")t._reactRetry=e;else if(t.data!=="$?"||i.readyState!=="loading")e();else{var s=function(){e(),i.removeEventListener("DOMContentLoaded",s)};i.addEventListener("DOMContentLoaded",s),t._reactRetry=s}}function Ln(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="$~"||e==="&"||e==="F!"||e==="F")break;if(e==="/$"||e==="/&")return null}}return t}var Mh=null;function am(t){t=t.nextSibling;for(var e=0;t;){if(t.nodeType===8){var i=t.data;if(i==="/$"||i==="/&"){if(e===0)return Ln(t.nextSibling);e--}else i!=="$"&&i!=="$!"&&i!=="$?"&&i!=="$~"&&i!=="&"||e++}t=t.nextSibling}return null}function rm(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var i=t.data;if(i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"){if(e===0)return t;e--}else i!=="/$"&&i!=="/&"||e++}t=t.previousSibling}return null}function sm(t,e,i){switch(e=hu(i),t){case"html":if(t=e.documentElement,!t)throw Error(l(452));return t;case"head":if(t=e.head,!t)throw Error(l(453));return t;case"body":if(t=e.body,!t)throw Error(l(454));return t;default:throw Error(l(451))}}function Ro(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);Ps(t)}var kn=new Map,om=new Set;function du(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Di=at.d;at.d={f:gy,r:_y,D:yy,C:vy,L:by,m:xy,X:Sy,S:wy,M:Ty};function gy(){var t=Di.f(),e=iu();return t||e}function _y(t){var e=Hi(t);e!==null&&e.tag===5&&e.type==="form"?Tf(e):Di.r(t)}var ds=typeof document>"u"?null:document;function lm(t,e,i){var s=ds;if(s&&typeof e=="string"&&e){var h=re(e);h='link[rel="'+t+'"][href="'+h+'"]',typeof i=="string"&&(h+='[crossorigin="'+i+'"]'),om.has(h)||(om.add(h),t={rel:t,crossOrigin:i,href:e},s.querySelector(h)===null&&(e=s.createElement("link"),qe(e,"link",t),be(e),s.head.appendChild(e)))}}function yy(t){Di.D(t),lm("dns-prefetch",t,null)}function vy(t,e){Di.C(t,e),lm("preconnect",t,e)}function by(t,e,i){Di.L(t,e,i);var s=ds;if(s&&t&&e){var h='link[rel="preload"][as="'+re(e)+'"]';e==="image"&&i&&i.imageSrcSet?(h+='[imagesrcset="'+re(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(h+='[imagesizes="'+re(i.imageSizes)+'"]')):h+='[href="'+re(t)+'"]';var p=h;switch(e){case"style":p=fs(t);break;case"script":p=ps(t)}kn.has(p)||(t=E({rel:"preload",href:e==="image"&&i&&i.imageSrcSet?void 0:t,as:e},i),kn.set(p,t),s.querySelector(h)!==null||e==="style"&&s.querySelector(Lo(p))||e==="script"&&s.querySelector(ko(p))||(e=s.createElement("link"),qe(e,"link",t),be(e),s.head.appendChild(e)))}}function xy(t,e){Di.m(t,e);var i=ds;if(i&&t){var s=e&&typeof e.as=="string"?e.as:"script",h='link[rel="modulepreload"][as="'+re(s)+'"][href="'+re(t)+'"]',p=h;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=ps(t)}if(!kn.has(p)&&(t=E({rel:"modulepreload",href:t},e),kn.set(p,t),i.querySelector(h)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(ko(p)))return}s=i.createElement("link"),qe(s,"link",t),be(s),i.head.appendChild(s)}}}function wy(t,e,i){Di.S(t,e,i);var s=ds;if(s&&t){var h=qi(s).hoistableStyles,p=fs(t);e=e||"default";var v=h.get(p);if(!v){var T={loading:0,preload:null};if(v=s.querySelector(Lo(p)))T.loading=5;else{t=E({rel:"stylesheet",href:t,"data-precedence":e},i),(i=kn.get(p))&&Bh(t,i);var A=v=s.createElement("link");be(A),qe(A,"link",t),A._p=new Promise(function(H,X){A.onload=H,A.onerror=X}),A.addEventListener("load",function(){T.loading|=1}),A.addEventListener("error",function(){T.loading|=2}),T.loading|=4,fu(v,e,s)}v={type:"stylesheet",instance:v,count:1,state:T},h.set(p,v)}}}function Sy(t,e){Di.X(t,e);var i=ds;if(i&&t){var s=qi(i).hoistableScripts,h=ps(t),p=s.get(h);p||(p=i.querySelector(ko(h)),p||(t=E({src:t,async:!0},e),(e=kn.get(h))&&Dh(t,e),p=i.createElement("script"),be(p),qe(p,"link",t),i.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},s.set(h,p))}}function Ty(t,e){Di.M(t,e);var i=ds;if(i&&t){var s=qi(i).hoistableScripts,h=ps(t),p=s.get(h);p||(p=i.querySelector(ko(h)),p||(t=E({src:t,async:!0,type:"module"},e),(e=kn.get(h))&&Dh(t,e),p=i.createElement("script"),be(p),qe(p,"link",t),i.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},s.set(h,p))}}function um(t,e,i,s){var h=(h=lt.current)?du(h):null;if(!h)throw Error(l(446));switch(t){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(e=fs(i.href),i=qi(h).hoistableStyles,s=i.get(e),s||(s={type:"style",instance:null,count:0,state:null},i.set(e,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){t=fs(i.href);var p=qi(h).hoistableStyles,v=p.get(t);if(v||(h=h.ownerDocument||h,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(t,v),(p=h.querySelector(Lo(t)))&&!p._p&&(v.instance=p,v.state.loading=5),kn.has(t)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},kn.set(t,i),p||Ey(h,t,i,v.state))),e&&s===null)throw Error(l(528,""));return v}if(e&&s!==null)throw Error(l(529,""));return null;case"script":return e=i.async,i=i.src,typeof i=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=ps(i),i=qi(h).hoistableScripts,s=i.get(e),s||(s={type:"script",instance:null,count:0,state:null},i.set(e,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(l(444,t))}}function fs(t){return'href="'+re(t)+'"'}function Lo(t){return'link[rel="stylesheet"]['+t+"]"}function cm(t){return E({},t,{"data-precedence":t.precedence,precedence:null})}function Ey(t,e,i,s){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?s.loading=1:(e=t.createElement("link"),s.preload=e,e.addEventListener("load",function(){return s.loading|=1}),e.addEventListener("error",function(){return s.loading|=2}),qe(e,"link",i),be(e),t.head.appendChild(e))}function ps(t){return'[src="'+re(t)+'"]'}function ko(t){return"script[async]"+t}function hm(t,e,i){if(e.count++,e.instance===null)switch(e.type){case"style":var s=t.querySelector('style[data-href~="'+re(i.href)+'"]');if(s)return e.instance=s,be(s),s;var h=E({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return s=(t.ownerDocument||t).createElement("style"),be(s),qe(s,"style",h),fu(s,i.precedence,t),e.instance=s;case"stylesheet":h=fs(i.href);var p=t.querySelector(Lo(h));if(p)return e.state.loading|=4,e.instance=p,be(p),p;s=cm(i),(h=kn.get(h))&&Bh(s,h),p=(t.ownerDocument||t).createElement("link"),be(p);var v=p;return v._p=new Promise(function(T,A){v.onload=T,v.onerror=A}),qe(p,"link",s),e.state.loading|=4,fu(p,i.precedence,t),e.instance=p;case"script":return p=ps(i.src),(h=t.querySelector(ko(p)))?(e.instance=h,be(h),h):(s=i,(h=kn.get(p))&&(s=E({},i),Dh(s,h)),t=t.ownerDocument||t,h=t.createElement("script"),be(h),qe(h,"link",s),t.head.appendChild(h),e.instance=h);case"void":return null;default:throw Error(l(443,e.type))}else e.type==="stylesheet"&&(e.state.loading&4)===0&&(s=e.instance,e.state.loading|=4,fu(s,i.precedence,t));return e.instance}function fu(t,e,i){for(var s=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=s.length?s[s.length-1]:null,p=h,v=0;v<s.length;v++){var T=s[v];if(T.dataset.precedence===e)p=T;else if(p!==h)break}p?p.parentNode.insertBefore(t,p.nextSibling):(e=i.nodeType===9?i.head:i,e.insertBefore(t,e.firstChild))}function Bh(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function Dh(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var pu=null;function dm(t,e,i){if(pu===null){var s=new Map,h=pu=new Map;h.set(i,s)}else h=pu,s=h.get(i),s||(s=new Map,h.set(i,s));if(s.has(t))return s;for(s.set(t,null),i=i.getElementsByTagName(t),h=0;h<i.length;h++){var p=i[h];if(!(p[Ba]||p[ve]||t==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var v=p.getAttribute(e)||"";v=t+v;var T=s.get(v);T?T.push(p):s.set(v,[p])}}return s}function fm(t,e,i){t=t.ownerDocument||t,t.head.insertBefore(i,e==="title"?t.querySelector("head > title"):null)}function Cy(t,e,i){if(i===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function pm(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function Oy(t,e,i,s){if(i.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var h=fs(s.href),p=e.querySelector(Lo(h));if(p){e=p._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(t.count++,t=mu.bind(t),e.then(t,t)),i.state.loading|=4,i.instance=p,be(p);return}p=e.ownerDocument||e,s=cm(s),(h=kn.get(h))&&Bh(s,h),p=p.createElement("link"),be(p);var v=p;v._p=new Promise(function(T,A){v.onload=T,v.onerror=A}),qe(p,"link",s),i.instance=p}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(i,e),(e=i.state.preload)&&(i.state.loading&3)===0&&(t.count++,i=mu.bind(t),e.addEventListener("load",i),e.addEventListener("error",i))}}var Nh=0;function jy(t,e){return t.stylesheets&&t.count===0&&_u(t,t.stylesheets),0<t.count||0<t.imgCount?function(i){var s=setTimeout(function(){if(t.stylesheets&&_u(t,t.stylesheets),t.unsuspend){var p=t.unsuspend;t.unsuspend=null,p()}},6e4+e);0<t.imgBytes&&Nh===0&&(Nh=62500*ly());var h=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&_u(t,t.stylesheets),t.unsuspend)){var p=t.unsuspend;t.unsuspend=null,p()}},(t.imgBytes>Nh?50:800)+e);return t.unsuspend=i,function(){t.unsuspend=null,clearTimeout(s),clearTimeout(h)}}:null}function mu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)_u(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var gu=null;function _u(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,gu=new Map,e.forEach(Ay,t),gu=null,mu.call(t))}function Ay(t,e){if(!(e.state.loading&4)){var i=gu.get(t);if(i)var s=i.get(null);else{i=new Map,gu.set(t,i);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<h.length;p++){var v=h[p];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(i.set(v.dataset.precedence,v),s=v)}s&&i.set(null,s)}h=e.instance,v=h.getAttribute("data-precedence"),p=i.get(v)||s,p===s&&i.set(null,h),i.set(v,h),this.count++,s=mu.bind(this),h.addEventListener("load",s),h.addEventListener("error",s),p?p.parentNode.insertBefore(h,p.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),e.state.loading|=4}}var Mo={$$typeof:B,Provider:null,Consumer:null,_currentValue:k,_currentValue2:k,_threadCount:0};function zy(t,e,i,s,h,p,v,T,A){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Bs(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bs(0),this.hiddenUpdates=Bs(null),this.identifierPrefix=s,this.onUncaughtError=h,this.onCaughtError=p,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=A,this.incompleteTransitions=new Map}function mm(t,e,i,s,h,p,v,T,A,H,X,F){return t=new zy(t,e,i,v,A,H,X,F,T),e=1,p===!0&&(e|=24),p=Ie(3,null,null,e),t.current=p,p.stateNode=t,e=gc(),e.refCount++,t.pooledCache=e,e.refCount++,p.memoizedState={element:s,isDehydrated:i,cache:e},bc(p),t}function gm(t){return t?(t=wi,t):wi}function _m(t,e,i,s,h,p){h=gm(h),s.context===null?s.context=h:s.pendingContext=h,s=sa(e),s.payload={element:i},p=p===void 0?null:p,p!==null&&(s.callback=p),i=oa(t,s,e),i!==null&&(un(i,t,e),ho(i,t,e))}function ym(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var i=t.retryLane;t.retryLane=i!==0&&i<e?i:e}}function Ph(t,e){ym(t,e),(t=t.alternate)&&ym(t,e)}function vm(t){if(t.tag===13||t.tag===31){var e=An(t,67108864);e!==null&&un(e,t,67108864),Ph(t,67108864)}}function bm(t){if(t.tag===13||t.tag===31){var e=vn();e=Qe(e);var i=An(t,e);i!==null&&un(i,t,e),Ph(t,e)}}var yu=!0;function Ry(t,e,i,s){var h=$.T;$.T=null;var p=at.p;try{at.p=2,Uh(t,e,i,s)}finally{at.p=p,$.T=h}}function Ly(t,e,i,s){var h=$.T;$.T=null;var p=at.p;try{at.p=8,Uh(t,e,i,s)}finally{at.p=p,$.T=h}}function Uh(t,e,i,s){if(yu){var h=Hh(s);if(h===null)Eh(t,e,s,vu,i),wm(t,s);else if(My(h,t,e,i,s))s.stopPropagation();else if(wm(t,s),e&4&&-1<ky.indexOf(t)){for(;h!==null;){var p=Hi(h);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var v=fi(p.pendingLanes);if(v!==0){var T=p;for(T.pendingLanes|=2,T.entangledLanes|=2;v;){var A=1<<31-Ye(v);T.entanglements[1]|=A,v&=~A}ui(p),(Yt&6)===0&&(eu=$e()+500,jo(0))}}break;case 31:case 13:T=An(p,2),T!==null&&un(T,p,2),iu(),Ph(p,2)}if(p=Hh(s),p===null&&Eh(t,e,s,vu,i),p===h)break;h=p}h!==null&&s.stopPropagation()}else Eh(t,e,s,null,i)}}function Hh(t){return t=Ha(t),qh(t)}var vu=null;function qh(t){if(vu=null,t=gi(t),t!==null){var e=f(t);if(e===null)t=null;else{var i=e.tag;if(i===13){if(t=g(e),t!==null)return t;t=null}else if(i===31){if(t=b(e),t!==null)return t;t=null}else if(i===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return vu=t,null}function xm(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch($u()){case jr:return 2;case ks:return 8;case Aa:case Yu:return 32;case Ms:return 268435456;default:return 32}default:return 32}}var Zh=!1,ya=null,va=null,ba=null,Bo=new Map,Do=new Map,xa=[],ky="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function wm(t,e){switch(t){case"focusin":case"focusout":ya=null;break;case"dragenter":case"dragleave":va=null;break;case"mouseover":case"mouseout":ba=null;break;case"pointerover":case"pointerout":Bo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Do.delete(e.pointerId)}}function No(t,e,i,s,h,p){return t===null||t.nativeEvent!==p?(t={blockedOn:e,domEventName:i,eventSystemFlags:s,nativeEvent:p,targetContainers:[h]},e!==null&&(e=Hi(e),e!==null&&vm(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,h!==null&&e.indexOf(h)===-1&&e.push(h),t)}function My(t,e,i,s,h){switch(e){case"focusin":return ya=No(ya,t,e,i,s,h),!0;case"dragenter":return va=No(va,t,e,i,s,h),!0;case"mouseover":return ba=No(ba,t,e,i,s,h),!0;case"pointerover":var p=h.pointerId;return Bo.set(p,No(Bo.get(p)||null,t,e,i,s,h)),!0;case"gotpointercapture":return p=h.pointerId,Do.set(p,No(Do.get(p)||null,t,e,i,s,h)),!0}return!1}function Sm(t){var e=gi(t.target);if(e!==null){var i=f(e);if(i!==null){if(e=i.tag,e===13){if(e=g(i),e!==null){t.blockedOn=e,Ns(t.priority,function(){bm(i)});return}}else if(e===31){if(e=b(i),e!==null){t.blockedOn=e,Ns(t.priority,function(){bm(i)});return}}else if(e===3&&i.stateNode.current.memoizedState.isDehydrated){t.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}t.blockedOn=null}function bu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var i=Hh(t.nativeEvent);if(i===null){i=t.nativeEvent;var s=new i.constructor(i.type,i);kr=s,i.target.dispatchEvent(s),kr=null}else return e=Hi(i),e!==null&&vm(e),t.blockedOn=i,!1;e.shift()}return!0}function Tm(t,e,i){bu(t)&&i.delete(e)}function By(){Zh=!1,ya!==null&&bu(ya)&&(ya=null),va!==null&&bu(va)&&(va=null),ba!==null&&bu(ba)&&(ba=null),Bo.forEach(Tm),Do.forEach(Tm)}function xu(t,e){t.blockedOn===e&&(t.blockedOn=null,Zh||(Zh=!0,u.unstable_scheduleCallback(u.unstable_NormalPriority,By)))}var wu=null;function Em(t){wu!==t&&(wu=t,u.unstable_scheduleCallback(u.unstable_NormalPriority,function(){wu===t&&(wu=null);for(var e=0;e<t.length;e+=3){var i=t[e],s=t[e+1],h=t[e+2];if(typeof s!="function"){if(qh(s||i)===null)continue;break}var p=Hi(i);p!==null&&(t.splice(e,3),e-=3,Hc(p,{pending:!0,data:h,method:i.method,action:s},s,h))}}))}function ms(t){function e(A){return xu(A,t)}ya!==null&&xu(ya,t),va!==null&&xu(va,t),ba!==null&&xu(ba,t),Bo.forEach(e),Do.forEach(e);for(var i=0;i<xa.length;i++){var s=xa[i];s.blockedOn===t&&(s.blockedOn=null)}for(;0<xa.length&&(i=xa[0],i.blockedOn===null);)Sm(i),i.blockedOn===null&&xa.shift();if(i=(t.ownerDocument||t).$$reactFormReplay,i!=null)for(s=0;s<i.length;s+=3){var h=i[s],p=i[s+1],v=h[Re]||null;if(typeof p=="function")v||Em(i);else if(v){var T=null;if(p&&p.hasAttribute("formAction")){if(h=p,v=p[Re]||null)T=v.formAction;else if(qh(h)!==null)continue}else T=v.action;typeof T=="function"?i[s+1]=T:(i.splice(s,3),s-=3),Em(i)}}}function Cm(){function t(p){p.canIntercept&&p.info==="react-transition"&&p.intercept({handler:function(){return new Promise(function(v){return h=v})},focusReset:"manual",scroll:"manual"})}function e(){h!==null&&(h(),h=null),s||setTimeout(i,20)}function i(){if(!s&&!navigation.transition){var p=navigation.currentEntry;p&&p.url!=null&&navigation.navigate(p.url,{state:p.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var s=!1,h=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",e),navigation.addEventListener("navigateerror",e),setTimeout(i,100),function(){s=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",e),navigation.removeEventListener("navigateerror",e),h!==null&&(h(),h=null)}}}function Ih(t){this._internalRoot=t}Su.prototype.render=Ih.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(l(409));var i=e.current,s=vn();_m(i,s,t,e,null,null)},Su.prototype.unmount=Ih.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;_m(t.current,2,null,t,null,null),iu(),e[mi]=null}};function Su(t){this._internalRoot=t}Su.prototype.unstable_scheduleHydration=function(t){if(t){var e=Ds();t={blockedOn:null,target:t,priority:e};for(var i=0;i<xa.length&&e!==0&&e<xa[i].priority;i++);xa.splice(i,0,t),i===0&&Sm(t)}};var Om=a.version;if(Om!=="19.2.0")throw Error(l(527,Om,"19.2.0"));at.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(l(188)):(t=Object.keys(t).join(","),Error(l(268,t)));return t=x(e),t=t!==null?C(t):null,t=t===null?null:t.stateNode,t};var Dy={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Tu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Tu.isDisabled&&Tu.supportsFiber)try{Ui=Tu.inject(Dy),Ne=Tu}catch{}}return Uo.createRoot=function(t,e){if(!d(t))throw Error(l(299));var i=!1,s="",h=Mf,p=Bf,v=Df;return e!=null&&(e.unstable_strictMode===!0&&(i=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onUncaughtError!==void 0&&(h=e.onUncaughtError),e.onCaughtError!==void 0&&(p=e.onCaughtError),e.onRecoverableError!==void 0&&(v=e.onRecoverableError)),e=mm(t,1,!1,null,null,i,s,null,h,p,v,Cm),t[mi]=e.current,Th(t),new Ih(e)},Uo.hydrateRoot=function(t,e,i){if(!d(t))throw Error(l(299));var s=!1,h="",p=Mf,v=Bf,T=Df,A=null;return i!=null&&(i.unstable_strictMode===!0&&(s=!0),i.identifierPrefix!==void 0&&(h=i.identifierPrefix),i.onUncaughtError!==void 0&&(p=i.onUncaughtError),i.onCaughtError!==void 0&&(v=i.onCaughtError),i.onRecoverableError!==void 0&&(T=i.onRecoverableError),i.formState!==void 0&&(A=i.formState)),e=mm(t,1,!0,e,i??null,s,h,A,p,v,T,Cm),e.context=gm(null),i=e.current,s=vn(),s=Qe(s),h=sa(s),h.callback=null,oa(i,h,s),i=s,e.current.lanes=i,pi(e,i),ui(e),t[mi]=e.current,Th(t),new Su(e)},Uo.version="19.2.0",Uo}var Nm;function Gy(){if(Nm)return $h.exports;Nm=1;function u(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(u)}catch(a){console.error(a)}}return u(),$h.exports=Vy(),$h.exports}var $y=Gy();const Yy=Uu($y);var sd=function(u,a){return sd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,l){o.__proto__=l}||function(o,l){for(var d in l)Object.prototype.hasOwnProperty.call(l,d)&&(o[d]=l[d])},sd(u,a)};function vg(u,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");sd(u,a);function o(){this.constructor=u}u.prototype=a===null?Object.create(a):(o.prototype=a.prototype,new o)}var Mu=function(){return Mu=Object.assign||function(a){for(var o,l=1,d=arguments.length;l<d;l++){o=arguments[l];for(var f in o)Object.prototype.hasOwnProperty.call(o,f)&&(a[f]=o[f])}return a},Mu.apply(this,arguments)};function Os(u,a){var o={};for(var l in u)Object.prototype.hasOwnProperty.call(u,l)&&a.indexOf(l)<0&&(o[l]=u[l]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,l=Object.getOwnPropertySymbols(u);d<l.length;d++)a.indexOf(l[d])<0&&Object.prototype.propertyIsEnumerable.call(u,l[d])&&(o[l[d]]=u[l[d]]);return o}function bg(u,a,o,l){var d=arguments.length,f=d<3?a:l===null?l=Object.getOwnPropertyDescriptor(a,o):l,g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(u,a,o,l);else for(var b=u.length-1;b>=0;b--)(g=u[b])&&(f=(d<3?g(f):d>3?g(a,o,f):g(a,o))||f);return d>3&&f&&Object.defineProperty(a,o,f),f}function xg(u,a){return function(o,l){a(o,l,u)}}function wg(u,a,o,l,d,f){function g(G){if(G!==void 0&&typeof G!="function")throw new TypeError("Function expected");return G}for(var b=l.kind,w=b==="getter"?"get":b==="setter"?"set":"value",x=!a&&u?l.static?u:u.prototype:null,C=a||(x?Object.getOwnPropertyDescriptor(x,l.name):{}),E,z=!1,R=o.length-1;R>=0;R--){var q={};for(var P in l)q[P]=P==="access"?{}:l[P];for(var P in l.access)q.access[P]=l.access[P];q.addInitializer=function(G){if(z)throw new TypeError("Cannot add initializers after decoration has completed");f.push(g(G||null))};var W=(0,o[R])(b==="accessor"?{get:C.get,set:C.set}:C[w],q);if(b==="accessor"){if(W===void 0)continue;if(W===null||typeof W!="object")throw new TypeError("Object expected");(E=g(W.get))&&(C.get=E),(E=g(W.set))&&(C.set=E),(E=g(W.init))&&d.unshift(E)}else(E=g(W))&&(b==="field"?d.unshift(E):C[w]=E)}x&&Object.defineProperty(x,l.name,C),z=!0}function Sg(u,a,o){for(var l=arguments.length>2,d=0;d<a.length;d++)o=l?a[d].call(u,o):a[d].call(u);return l?o:void 0}function Tg(u){return typeof u=="symbol"?u:"".concat(u)}function Eg(u,a,o){return typeof a=="symbol"&&(a=a.description?"[".concat(a.description,"]"):""),Object.defineProperty(u,"name",{configurable:!0,value:o?"".concat(o," ",a):a})}function Cg(u,a){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(u,a)}function pt(u,a,o,l){function d(f){return f instanceof o?f:new o(function(g){g(f)})}return new(o||(o=Promise))(function(f,g){function b(C){try{x(l.next(C))}catch(E){g(E)}}function w(C){try{x(l.throw(C))}catch(E){g(E)}}function x(C){C.done?f(C.value):d(C.value).then(b,w)}x((l=l.apply(u,a||[])).next())})}function Og(u,a){var o={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},l,d,f,g=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return g.next=b(0),g.throw=b(1),g.return=b(2),typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function b(x){return function(C){return w([x,C])}}function w(x){if(l)throw new TypeError("Generator is already executing.");for(;g&&(g=0,x[0]&&(o=0)),o;)try{if(l=1,d&&(f=x[0]&2?d.return:x[0]?d.throw||((f=d.return)&&f.call(d),0):d.next)&&!(f=f.call(d,x[1])).done)return f;switch(d=0,f&&(x=[x[0]&2,f.value]),x[0]){case 0:case 1:f=x;break;case 4:return o.label++,{value:x[1],done:!1};case 5:o.label++,d=x[1],x=[0];continue;case 7:x=o.ops.pop(),o.trys.pop();continue;default:if(f=o.trys,!(f=f.length>0&&f[f.length-1])&&(x[0]===6||x[0]===2)){o=0;continue}if(x[0]===3&&(!f||x[1]>f[0]&&x[1]<f[3])){o.label=x[1];break}if(x[0]===6&&o.label<f[1]){o.label=f[1],f=x;break}if(f&&o.label<f[2]){o.label=f[2],o.ops.push(x);break}f[2]&&o.ops.pop(),o.trys.pop();continue}x=a.call(u,o)}catch(C){x=[6,C],d=0}finally{l=f=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}}var Hu=Object.create?(function(u,a,o,l){l===void 0&&(l=o);var d=Object.getOwnPropertyDescriptor(a,o);(!d||("get"in d?!a.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(u,l,d)}):(function(u,a,o,l){l===void 0&&(l=o),u[l]=a[o]});function jg(u,a){for(var o in u)o!=="default"&&!Object.prototype.hasOwnProperty.call(a,o)&&Hu(a,u,o)}function Bu(u){var a=typeof Symbol=="function"&&Symbol.iterator,o=a&&u[a],l=0;if(o)return o.call(u);if(u&&typeof u.length=="number")return{next:function(){return u&&l>=u.length&&(u=void 0),{value:u&&u[l++],done:!u}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")}function bd(u,a){var o=typeof Symbol=="function"&&u[Symbol.iterator];if(!o)return u;var l=o.call(u),d,f=[],g;try{for(;(a===void 0||a-- >0)&&!(d=l.next()).done;)f.push(d.value)}catch(b){g={error:b}}finally{try{d&&!d.done&&(o=l.return)&&o.call(l)}finally{if(g)throw g.error}}return f}function Ag(){for(var u=[],a=0;a<arguments.length;a++)u=u.concat(bd(arguments[a]));return u}function zg(){for(var u=0,a=0,o=arguments.length;a<o;a++)u+=arguments[a].length;for(var l=Array(u),d=0,a=0;a<o;a++)for(var f=arguments[a],g=0,b=f.length;g<b;g++,d++)l[d]=f[g];return l}function Rg(u,a,o){if(o||arguments.length===2)for(var l=0,d=a.length,f;l<d;l++)(f||!(l in a))&&(f||(f=Array.prototype.slice.call(a,0,l)),f[l]=a[l]);return u.concat(f||Array.prototype.slice.call(a))}function Es(u){return this instanceof Es?(this.v=u,this):new Es(u)}function Lg(u,a,o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var l=o.apply(u,a||[]),d,f=[];return d=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),b("next"),b("throw"),b("return",g),d[Symbol.asyncIterator]=function(){return this},d;function g(R){return function(q){return Promise.resolve(q).then(R,E)}}function b(R,q){l[R]&&(d[R]=function(P){return new Promise(function(W,G){f.push([R,P,W,G])>1||w(R,P)})},q&&(d[R]=q(d[R])))}function w(R,q){try{x(l[R](q))}catch(P){z(f[0][3],P)}}function x(R){R.value instanceof Es?Promise.resolve(R.value.v).then(C,E):z(f[0][2],R)}function C(R){w("next",R)}function E(R){w("throw",R)}function z(R,q){R(q),f.shift(),f.length&&w(f[0][0],f[0][1])}}function kg(u){var a,o;return a={},l("next"),l("throw",function(d){throw d}),l("return"),a[Symbol.iterator]=function(){return this},a;function l(d,f){a[d]=u[d]?function(g){return(o=!o)?{value:Es(u[d](g)),done:!1}:f?f(g):g}:f}}function Mg(u){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=u[Symbol.asyncIterator],o;return a?a.call(u):(u=typeof Bu=="function"?Bu(u):u[Symbol.iterator](),o={},l("next"),l("throw"),l("return"),o[Symbol.asyncIterator]=function(){return this},o);function l(f){o[f]=u[f]&&function(g){return new Promise(function(b,w){g=u[f](g),d(b,w,g.done,g.value)})}}function d(f,g,b,w){Promise.resolve(w).then(function(x){f({value:x,done:b})},g)}}function Bg(u,a){return Object.defineProperty?Object.defineProperty(u,"raw",{value:a}):u.raw=a,u}var Wy=Object.create?(function(u,a){Object.defineProperty(u,"default",{enumerable:!0,value:a})}):function(u,a){u.default=a},od=function(u){return od=Object.getOwnPropertyNames||function(a){var o=[];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(o[o.length]=l);return o},od(u)};function Dg(u){if(u&&u.__esModule)return u;var a={};if(u!=null)for(var o=od(u),l=0;l<o.length;l++)o[l]!=="default"&&Hu(a,u,o[l]);return Wy(a,u),a}function Ng(u){return u&&u.__esModule?u:{default:u}}function Pg(u,a,o,l){if(o==="a"&&!l)throw new TypeError("Private accessor was defined without a getter");if(typeof a=="function"?u!==a||!l:!a.has(u))throw new TypeError("Cannot read private member from an object whose class did not declare it");return o==="m"?l:o==="a"?l.call(u):l?l.value:a.get(u)}function Ug(u,a,o,l,d){if(l==="m")throw new TypeError("Private method is not writable");if(l==="a"&&!d)throw new TypeError("Private accessor was defined without a setter");if(typeof a=="function"?u!==a||!d:!a.has(u))throw new TypeError("Cannot write private member to an object whose class did not declare it");return l==="a"?d.call(u,o):d?d.value=o:a.set(u,o),o}function Hg(u,a){if(a===null||typeof a!="object"&&typeof a!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof u=="function"?a===u:u.has(a)}function qg(u,a,o){if(a!=null){if(typeof a!="object"&&typeof a!="function")throw new TypeError("Object expected.");var l,d;if(o){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");l=a[Symbol.asyncDispose]}if(l===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");l=a[Symbol.dispose],o&&(d=l)}if(typeof l!="function")throw new TypeError("Object not disposable.");d&&(l=function(){try{d.call(this)}catch(f){return Promise.reject(f)}}),u.stack.push({value:a,dispose:l,async:o})}else o&&u.stack.push({async:!0});return a}var Ky=typeof SuppressedError=="function"?SuppressedError:function(u,a,o){var l=new Error(o);return l.name="SuppressedError",l.error=u,l.suppressed=a,l};function Zg(u){function a(f){u.error=u.hasError?new Ky(f,u.error,"An error was suppressed during disposal."):f,u.hasError=!0}var o,l=0;function d(){for(;o=u.stack.pop();)try{if(!o.async&&l===1)return l=0,u.stack.push(o),Promise.resolve().then(d);if(o.dispose){var f=o.dispose.call(o.value);if(o.async)return l|=2,Promise.resolve(f).then(d,function(g){return a(g),d()})}else l|=1}catch(g){a(g)}if(l===1)return u.hasError?Promise.reject(u.error):Promise.resolve();if(u.hasError)throw u.error}return d()}function Ig(u,a){return typeof u=="string"&&/^\.\.?\//.test(u)?u.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(o,l,d,f,g){return l?a?".jsx":".js":d&&(!f||!g)?o:d+f+"."+g.toLowerCase()+"js"}):u}const Xy={__extends:vg,__assign:Mu,__rest:Os,__decorate:bg,__param:xg,__esDecorate:wg,__runInitializers:Sg,__propKey:Tg,__setFunctionName:Eg,__metadata:Cg,__awaiter:pt,__generator:Og,__createBinding:Hu,__exportStar:jg,__values:Bu,__read:bd,__spread:Ag,__spreadArrays:zg,__spreadArray:Rg,__await:Es,__asyncGenerator:Lg,__asyncDelegator:kg,__asyncValues:Mg,__makeTemplateObject:Bg,__importStar:Dg,__importDefault:Ng,__classPrivateFieldGet:Pg,__classPrivateFieldSet:Ug,__classPrivateFieldIn:Hg,__addDisposableResource:qg,__disposeResources:Zg,__rewriteRelativeImportExtension:Ig},Qy=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:qg,get __assign(){return Mu},__asyncDelegator:kg,__asyncGenerator:Lg,__asyncValues:Mg,__await:Es,__awaiter:pt,__classPrivateFieldGet:Pg,__classPrivateFieldIn:Hg,__classPrivateFieldSet:Ug,__createBinding:Hu,__decorate:bg,__disposeResources:Zg,__esDecorate:wg,__exportStar:jg,__extends:vg,__generator:Og,__importDefault:Ng,__importStar:Dg,__makeTemplateObject:Bg,__metadata:Cg,__param:xg,__propKey:Tg,__read:bd,__rest:Os,__rewriteRelativeImportExtension:Ig,__runInitializers:Sg,__setFunctionName:Eg,__spread:Ag,__spreadArray:Rg,__spreadArrays:zg,__values:Bu,default:Xy},Symbol.toStringTag,{value:"Module"})),Jy="modulepreload",Fy=function(u){return"/"+u},Pm={},js=function(a,o,l){let d=Promise.resolve();if(o&&o.length>0){let x=function(C){return Promise.all(C.map(E=>Promise.resolve(E).then(z=>({status:"fulfilled",value:z}),z=>({status:"rejected",reason:z}))))};var g=x;document.getElementsByTagName("link");const b=document.querySelector("meta[property=csp-nonce]"),w=b?.nonce||b?.getAttribute("nonce");d=x(o.map(C=>{if(C=Fy(C),C in Pm)return;Pm[C]=!0;const E=C.endsWith(".css"),z=E?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${C}"]${z}`))return;const R=document.createElement("link");if(R.rel=E?"stylesheet":Jy,E||(R.as="script"),R.crossOrigin="",R.href=C,w&&R.setAttribute("nonce",w),document.head.appendChild(R),E)return new Promise((q,P)=>{R.addEventListener("load",q),R.addEventListener("error",()=>P(new Error(`Unable to preload CSS for ${C}`)))})}))}function f(b){const w=new Event("vite:preloadError",{cancelable:!0});if(w.payload=b,window.dispatchEvent(w),!w.defaultPrevented)throw b}return d.then(b=>{for(const w of b||[])w.status==="rejected"&&f(w.reason);return a().catch(f)})},tv=u=>{let a;return u?a=u:typeof fetch>"u"?a=(...o)=>js(async()=>{const{default:l}=await Promise.resolve().then(()=>Sr);return{default:l}},void 0).then(({default:l})=>l(...o)):a=fetch,(...o)=>a(...o)};class xd extends Error{constructor(a,o="FunctionsError",l){super(a),this.name=o,this.context=l}}class Um extends xd{constructor(a){super("Failed to send a request to the Edge Function","FunctionsFetchError",a)}}class Hm extends xd{constructor(a){super("Relay Error invoking the Edge Function","FunctionsRelayError",a)}}class qm extends xd{constructor(a){super("Edge Function returned a non-2xx status code","FunctionsHttpError",a)}}var ld;(function(u){u.Any="any",u.ApNortheast1="ap-northeast-1",u.ApNortheast2="ap-northeast-2",u.ApSouth1="ap-south-1",u.ApSoutheast1="ap-southeast-1",u.ApSoutheast2="ap-southeast-2",u.CaCentral1="ca-central-1",u.EuCentral1="eu-central-1",u.EuWest1="eu-west-1",u.EuWest2="eu-west-2",u.EuWest3="eu-west-3",u.SaEast1="sa-east-1",u.UsEast1="us-east-1",u.UsWest1="us-west-1",u.UsWest2="us-west-2"})(ld||(ld={}));class ev{constructor(a,{headers:o={},customFetch:l,region:d=ld.Any}={}){this.url=a,this.headers=o,this.region=d,this.fetch=tv(l)}setAuth(a){this.headers.Authorization=`Bearer ${a}`}invoke(a){return pt(this,arguments,void 0,function*(o,l={}){var d;try{const{headers:f,method:g,body:b,signal:w}=l;let x={},{region:C}=l;C||(C=this.region);const E=new URL(`${this.url}/${o}`);C&&C!=="any"&&(x["x-region"]=C,E.searchParams.set("forceFunctionRegion",C));let z;b&&(f&&!Object.prototype.hasOwnProperty.call(f,"Content-Type")||!f)?typeof Blob<"u"&&b instanceof Blob||b instanceof ArrayBuffer?(x["Content-Type"]="application/octet-stream",z=b):typeof b=="string"?(x["Content-Type"]="text/plain",z=b):typeof FormData<"u"&&b instanceof FormData?z=b:(x["Content-Type"]="application/json",z=JSON.stringify(b)):z=b;const R=yield this.fetch(E.toString(),{method:g||"POST",headers:Object.assign(Object.assign(Object.assign({},x),this.headers),f),body:z,signal:w}).catch(G=>{throw G.name==="AbortError"?G:new Um(G)}),q=R.headers.get("x-relay-error");if(q&&q==="true")throw new Hm(R);if(!R.ok)throw new qm(R);let P=((d=R.headers.get("Content-Type"))!==null&&d!==void 0?d:"text/plain").split(";")[0].trim(),W;return P==="application/json"?W=yield R.json():P==="application/octet-stream"||P==="application/pdf"?W=yield R.blob():P==="text/event-stream"?W=R:P==="multipart/form-data"?W=yield R.formData():W=yield R.text(),{data:W,error:null,response:R}}catch(f){return f instanceof Error&&f.name==="AbortError"?{data:null,error:new Um(f)}:{data:null,error:f,response:f instanceof qm||f instanceof Hm?f.context:void 0}}})}}var Ge={};const As=_g(Qy);var Eu={},Cu={},Ou={},ju={},Au={},nv=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Cs=nv();const iv=Cs.fetch,Vg=Cs.fetch.bind(Cs),Gg=Cs.Headers,av=Cs.Request,rv=Cs.Response,Sr=Object.freeze(Object.defineProperty({__proto__:null,Headers:Gg,Request:av,Response:rv,default:Vg,fetch:iv},Symbol.toStringTag,{value:"Module"})),sv=_g(Sr);var zu={},Zm;function $g(){if(Zm)return zu;Zm=1,Object.defineProperty(zu,"__esModule",{value:!0});class u extends Error{constructor(o){super(o.message),this.name="PostgrestError",this.details=o.details,this.hint=o.hint,this.code=o.code}}return zu.default=u,zu}var Im;function Yg(){if(Im)return Au;Im=1,Object.defineProperty(Au,"__esModule",{value:!0});const u=As,a=u.__importDefault(sv),o=u.__importDefault($g());class l{constructor(f){var g,b;this.shouldThrowOnError=!1,this.method=f.method,this.url=f.url,this.headers=new Headers(f.headers),this.schema=f.schema,this.body=f.body,this.shouldThrowOnError=(g=f.shouldThrowOnError)!==null&&g!==void 0?g:!1,this.signal=f.signal,this.isMaybeSingle=(b=f.isMaybeSingle)!==null&&b!==void 0?b:!1,f.fetch?this.fetch=f.fetch:typeof fetch>"u"?this.fetch=a.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(f,g){return this.headers=new Headers(this.headers),this.headers.set(f,g),this}then(f,g){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const b=this.fetch;let w=b(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async x=>{var C,E,z,R;let q=null,P=null,W=null,G=x.status,K=x.statusText;if(x.ok){if(this.method!=="HEAD"){const ht=await x.text();ht===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((C=this.headers.get("Accept"))===null||C===void 0)&&C.includes("application/vnd.pgrst.plan+text"))?P=ht:P=JSON.parse(ht))}const ot=(E=this.headers.get("Prefer"))===null||E===void 0?void 0:E.match(/count=(exact|planned|estimated)/),_t=(z=x.headers.get("content-range"))===null||z===void 0?void 0:z.split("/");ot&&_t&&_t.length>1&&(W=parseInt(_t[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(P)&&(P.length>1?(q={code:"PGRST116",details:`Results contain ${P.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},P=null,W=null,G=406,K="Not Acceptable"):P.length===1?P=P[0]:P=null)}else{const ot=await x.text();try{q=JSON.parse(ot),Array.isArray(q)&&x.status===404&&(P=[],q=null,G=200,K="OK")}catch{x.status===404&&ot===""?(G=204,K="No Content"):q={message:ot}}if(q&&this.isMaybeSingle&&(!((R=q?.details)===null||R===void 0)&&R.includes("0 rows"))&&(q=null,G=200,K="OK"),q&&this.shouldThrowOnError)throw new o.default(q)}return{error:q,data:P,count:W,status:G,statusText:K}});return this.shouldThrowOnError||(w=w.catch(x=>{var C,E,z;return{error:{message:`${(C=x?.name)!==null&&C!==void 0?C:"FetchError"}: ${x?.message}`,details:`${(E=x?.stack)!==null&&E!==void 0?E:""}`,hint:"",code:`${(z=x?.code)!==null&&z!==void 0?z:""}`},data:null,count:null,status:0,statusText:""}})),w.then(f,g)}returns(){return this}overrideTypes(){return this}}return Au.default=l,Au}var Vm;function Wg(){if(Vm)return ju;Vm=1,Object.defineProperty(ju,"__esModule",{value:!0});const a=As.__importDefault(Yg());class o extends a.default{select(d){let f=!1;const g=(d??"*").split("").map(b=>/\s/.test(b)&&!f?"":(b==='"'&&(f=!f),b)).join("");return this.url.searchParams.set("select",g),this.headers.append("Prefer","return=representation"),this}order(d,{ascending:f=!0,nullsFirst:g,foreignTable:b,referencedTable:w=b}={}){const x=w?`${w}.order`:"order",C=this.url.searchParams.get(x);return this.url.searchParams.set(x,`${C?`${C},`:""}${d}.${f?"asc":"desc"}${g===void 0?"":g?".nullsfirst":".nullslast"}`),this}limit(d,{foreignTable:f,referencedTable:g=f}={}){const b=typeof g>"u"?"limit":`${g}.limit`;return this.url.searchParams.set(b,`${d}`),this}range(d,f,{foreignTable:g,referencedTable:b=g}={}){const w=typeof b>"u"?"offset":`${b}.offset`,x=typeof b>"u"?"limit":`${b}.limit`;return this.url.searchParams.set(w,`${d}`),this.url.searchParams.set(x,`${f-d+1}`),this}abortSignal(d){return this.signal=d,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:d=!1,verbose:f=!1,settings:g=!1,buffers:b=!1,wal:w=!1,format:x="text"}={}){var C;const E=[d?"analyze":null,f?"verbose":null,g?"settings":null,b?"buffers":null,w?"wal":null].filter(Boolean).join("|"),z=(C=this.headers.get("Accept"))!==null&&C!==void 0?C:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${x}; for="${z}"; options=${E};`),x==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(d){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${d}`),this}}return ju.default=o,ju}var Gm;function wd(){if(Gm)return Ou;Gm=1,Object.defineProperty(Ou,"__esModule",{value:!0});const a=As.__importDefault(Wg());class o extends a.default{eq(d,f){return this.url.searchParams.append(d,`eq.${f}`),this}neq(d,f){return this.url.searchParams.append(d,`neq.${f}`),this}gt(d,f){return this.url.searchParams.append(d,`gt.${f}`),this}gte(d,f){return this.url.searchParams.append(d,`gte.${f}`),this}lt(d,f){return this.url.searchParams.append(d,`lt.${f}`),this}lte(d,f){return this.url.searchParams.append(d,`lte.${f}`),this}like(d,f){return this.url.searchParams.append(d,`like.${f}`),this}likeAllOf(d,f){return this.url.searchParams.append(d,`like(all).{${f.join(",")}}`),this}likeAnyOf(d,f){return this.url.searchParams.append(d,`like(any).{${f.join(",")}}`),this}ilike(d,f){return this.url.searchParams.append(d,`ilike.${f}`),this}ilikeAllOf(d,f){return this.url.searchParams.append(d,`ilike(all).{${f.join(",")}}`),this}ilikeAnyOf(d,f){return this.url.searchParams.append(d,`ilike(any).{${f.join(",")}}`),this}is(d,f){return this.url.searchParams.append(d,`is.${f}`),this}in(d,f){const g=Array.from(new Set(f)).map(b=>typeof b=="string"&&new RegExp("[,()]").test(b)?`"${b}"`:`${b}`).join(",");return this.url.searchParams.append(d,`in.(${g})`),this}contains(d,f){return typeof f=="string"?this.url.searchParams.append(d,`cs.${f}`):Array.isArray(f)?this.url.searchParams.append(d,`cs.{${f.join(",")}}`):this.url.searchParams.append(d,`cs.${JSON.stringify(f)}`),this}containedBy(d,f){return typeof f=="string"?this.url.searchParams.append(d,`cd.${f}`):Array.isArray(f)?this.url.searchParams.append(d,`cd.{${f.join(",")}}`):this.url.searchParams.append(d,`cd.${JSON.stringify(f)}`),this}rangeGt(d,f){return this.url.searchParams.append(d,`sr.${f}`),this}rangeGte(d,f){return this.url.searchParams.append(d,`nxl.${f}`),this}rangeLt(d,f){return this.url.searchParams.append(d,`sl.${f}`),this}rangeLte(d,f){return this.url.searchParams.append(d,`nxr.${f}`),this}rangeAdjacent(d,f){return this.url.searchParams.append(d,`adj.${f}`),this}overlaps(d,f){return typeof f=="string"?this.url.searchParams.append(d,`ov.${f}`):this.url.searchParams.append(d,`ov.{${f.join(",")}}`),this}textSearch(d,f,{config:g,type:b}={}){let w="";b==="plain"?w="pl":b==="phrase"?w="ph":b==="websearch"&&(w="w");const x=g===void 0?"":`(${g})`;return this.url.searchParams.append(d,`${w}fts${x}.${f}`),this}match(d){return Object.entries(d).forEach(([f,g])=>{this.url.searchParams.append(f,`eq.${g}`)}),this}not(d,f,g){return this.url.searchParams.append(d,`not.${f}.${g}`),this}or(d,{foreignTable:f,referencedTable:g=f}={}){const b=g?`${g}.or`:"or";return this.url.searchParams.append(b,`(${d})`),this}filter(d,f,g){return this.url.searchParams.append(d,`${f}.${g}`),this}}return Ou.default=o,Ou}var $m;function Kg(){if($m)return Cu;$m=1,Object.defineProperty(Cu,"__esModule",{value:!0});const a=As.__importDefault(wd());class o{constructor(d,{headers:f={},schema:g,fetch:b}){this.url=d,this.headers=new Headers(f),this.schema=g,this.fetch=b}select(d,f){const{head:g=!1,count:b}=f??{},w=g?"HEAD":"GET";let x=!1;const C=(d??"*").split("").map(E=>/\s/.test(E)&&!x?"":(E==='"'&&(x=!x),E)).join("");return this.url.searchParams.set("select",C),b&&this.headers.append("Prefer",`count=${b}`),new a.default({method:w,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(d,{count:f,defaultToNull:g=!0}={}){var b;const w="POST";if(f&&this.headers.append("Prefer",`count=${f}`),g||this.headers.append("Prefer","missing=default"),Array.isArray(d)){const x=d.reduce((C,E)=>C.concat(Object.keys(E)),[]);if(x.length>0){const C=[...new Set(x)].map(E=>`"${E}"`);this.url.searchParams.set("columns",C.join(","))}}return new a.default({method:w,url:this.url,headers:this.headers,schema:this.schema,body:d,fetch:(b=this.fetch)!==null&&b!==void 0?b:fetch})}upsert(d,{onConflict:f,ignoreDuplicates:g=!1,count:b,defaultToNull:w=!0}={}){var x;const C="POST";if(this.headers.append("Prefer",`resolution=${g?"ignore":"merge"}-duplicates`),f!==void 0&&this.url.searchParams.set("on_conflict",f),b&&this.headers.append("Prefer",`count=${b}`),w||this.headers.append("Prefer","missing=default"),Array.isArray(d)){const E=d.reduce((z,R)=>z.concat(Object.keys(R)),[]);if(E.length>0){const z=[...new Set(E)].map(R=>`"${R}"`);this.url.searchParams.set("columns",z.join(","))}}return new a.default({method:C,url:this.url,headers:this.headers,schema:this.schema,body:d,fetch:(x=this.fetch)!==null&&x!==void 0?x:fetch})}update(d,{count:f}={}){var g;const b="PATCH";return f&&this.headers.append("Prefer",`count=${f}`),new a.default({method:b,url:this.url,headers:this.headers,schema:this.schema,body:d,fetch:(g=this.fetch)!==null&&g!==void 0?g:fetch})}delete({count:d}={}){var f;const g="DELETE";return d&&this.headers.append("Prefer",`count=${d}`),new a.default({method:g,url:this.url,headers:this.headers,schema:this.schema,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}}return Cu.default=o,Cu}var Ym;function ov(){if(Ym)return Eu;Ym=1,Object.defineProperty(Eu,"__esModule",{value:!0});const u=As,a=u.__importDefault(Kg()),o=u.__importDefault(wd());class l{constructor(f,{headers:g={},schema:b,fetch:w}={}){this.url=f,this.headers=new Headers(g),this.schemaName=b,this.fetch=w}from(f){const g=new URL(`${this.url}/${f}`);return new a.default(g,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(f){return new l(this.url,{headers:this.headers,schema:f,fetch:this.fetch})}rpc(f,g={},{head:b=!1,get:w=!1,count:x}={}){var C;let E;const z=new URL(`${this.url}/rpc/${f}`);let R;b||w?(E=b?"HEAD":"GET",Object.entries(g).filter(([P,W])=>W!==void 0).map(([P,W])=>[P,Array.isArray(W)?`{${W.join(",")}}`:`${W}`]).forEach(([P,W])=>{z.searchParams.append(P,W)})):(E="POST",R=g);const q=new Headers(this.headers);return x&&q.set("Prefer",`count=${x}`),new o.default({method:E,url:z,headers:q,schema:this.schemaName,body:R,fetch:(C=this.fetch)!==null&&C!==void 0?C:fetch})}}return Eu.default=l,Eu}var Wm;function lv(){if(Wm)return Ge;Wm=1,Object.defineProperty(Ge,"__esModule",{value:!0}),Ge.PostgrestError=Ge.PostgrestBuilder=Ge.PostgrestTransformBuilder=Ge.PostgrestFilterBuilder=Ge.PostgrestQueryBuilder=Ge.PostgrestClient=void 0;const u=As,a=u.__importDefault(ov());Ge.PostgrestClient=a.default;const o=u.__importDefault(Kg());Ge.PostgrestQueryBuilder=o.default;const l=u.__importDefault(wd());Ge.PostgrestFilterBuilder=l.default;const d=u.__importDefault(Wg());Ge.PostgrestTransformBuilder=d.default;const f=u.__importDefault(Yg());Ge.PostgrestBuilder=f.default;const g=u.__importDefault($g());return Ge.PostgrestError=g.default,Ge.default={PostgrestClient:a.default,PostgrestQueryBuilder:o.default,PostgrestFilterBuilder:l.default,PostgrestTransformBuilder:d.default,PostgrestBuilder:f.default,PostgrestError:g.default},Ge}var uv=lv();const cv=Uu(uv),{PostgrestClient:hv,PostgrestQueryBuilder:xx,PostgrestFilterBuilder:wx,PostgrestTransformBuilder:Sx,PostgrestBuilder:Tx,PostgrestError:Ex}=cv;class dv{static detectEnvironment(){var a;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((a=navigator.userAgent)===null||a===void 0)&&a.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const o=process.versions;if(o&&o.node){const l=o.node,d=parseInt(l.replace(/^v/,"").split(".")[0]);return d>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${d} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${d} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const a=this.detectEnvironment();if(a.constructor)return a.constructor;let o=a.error||"WebSocket not supported in this environment.";throw a.workaround&&(o+=`

Suggested solution: ${a.workaround}`),new Error(o)}static createWebSocket(a,o){const l=this.getWebSocketConstructor();return new l(a,o)}static isWebSocketSupported(){try{const a=this.detectEnvironment();return a.type==="native"||a.type==="ws"}catch{return!1}}}const fv="2.76.1",pv=`realtime-js/${fv}`,mv="1.0.0",ud=1e4,gv=1e3,_v=100;var Zo;(function(u){u[u.connecting=0]="connecting",u[u.open=1]="open",u[u.closing=2]="closing",u[u.closed=3]="closed"})(Zo||(Zo={}));var Ae;(function(u){u.closed="closed",u.errored="errored",u.joined="joined",u.joining="joining",u.leaving="leaving"})(Ae||(Ae={}));var Yn;(function(u){u.close="phx_close",u.error="phx_error",u.join="phx_join",u.reply="phx_reply",u.leave="phx_leave",u.access_token="access_token"})(Yn||(Yn={}));var cd;(function(u){u.websocket="websocket"})(cd||(cd={}));var vr;(function(u){u.Connecting="connecting",u.Open="open",u.Closing="closing",u.Closed="closed"})(vr||(vr={}));class yv{constructor(){this.HEADER_LENGTH=1}decode(a,o){return a.constructor===ArrayBuffer?o(this._binaryDecode(a)):o(typeof a=="string"?JSON.parse(a):{})}_binaryDecode(a){const o=new DataView(a),l=new TextDecoder;return this._decodeBroadcast(a,o,l)}_decodeBroadcast(a,o,l){const d=o.getUint8(1),f=o.getUint8(2);let g=this.HEADER_LENGTH+2;const b=l.decode(a.slice(g,g+d));g=g+d;const w=l.decode(a.slice(g,g+f));g=g+f;const x=JSON.parse(l.decode(a.slice(g,a.byteLength)));return{ref:null,topic:b,event:w,payload:x}}}class Xg{constructor(a,o){this.callback=a,this.timerCalc=o,this.timer=void 0,this.tries=0,this.callback=a,this.timerCalc=o}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ae;(function(u){u.abstime="abstime",u.bool="bool",u.date="date",u.daterange="daterange",u.float4="float4",u.float8="float8",u.int2="int2",u.int4="int4",u.int4range="int4range",u.int8="int8",u.int8range="int8range",u.json="json",u.jsonb="jsonb",u.money="money",u.numeric="numeric",u.oid="oid",u.reltime="reltime",u.text="text",u.time="time",u.timestamp="timestamp",u.timestamptz="timestamptz",u.timetz="timetz",u.tsrange="tsrange",u.tstzrange="tstzrange"})(ae||(ae={}));const Km=(u,a,o={})=>{var l;const d=(l=o.skipTypes)!==null&&l!==void 0?l:[];return a?Object.keys(a).reduce((f,g)=>(f[g]=vv(g,u,a,d),f),{}):{}},vv=(u,a,o,l)=>{const d=a.find(b=>b.name===u),f=d?.type,g=o[u];return f&&!l.includes(f)?Qg(f,g):hd(g)},Qg=(u,a)=>{if(u.charAt(0)==="_"){const o=u.slice(1,u.length);return Sv(a,o)}switch(u){case ae.bool:return bv(a);case ae.float4:case ae.float8:case ae.int2:case ae.int4:case ae.int8:case ae.numeric:case ae.oid:return xv(a);case ae.json:case ae.jsonb:return wv(a);case ae.timestamp:return Tv(a);case ae.abstime:case ae.date:case ae.daterange:case ae.int4range:case ae.int8range:case ae.money:case ae.reltime:case ae.text:case ae.time:case ae.timestamptz:case ae.timetz:case ae.tsrange:case ae.tstzrange:return hd(a);default:return hd(a)}},hd=u=>u,bv=u=>{switch(u){case"t":return!0;case"f":return!1;default:return u}},xv=u=>{if(typeof u=="string"){const a=parseFloat(u);if(!Number.isNaN(a))return a}return u},wv=u=>{if(typeof u=="string")try{return JSON.parse(u)}catch(a){return console.log(`JSON parse error: ${a}`),u}return u},Sv=(u,a)=>{if(typeof u!="string")return u;const o=u.length-1,l=u[o];if(u[0]==="{"&&l==="}"){let f;const g=u.slice(1,o);try{f=JSON.parse("["+g+"]")}catch{f=g?g.split(","):[]}return f.map(b=>Qg(a,b))}return u},Tv=u=>typeof u=="string"?u.replace(" ","T"):u,Jg=u=>{const a=new URL(u);return a.protocol=a.protocol.replace(/^ws/i,"http"),a.pathname=a.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),a.pathname===""||a.pathname==="/"?a.pathname="/api/broadcast":a.pathname=a.pathname+"/api/broadcast",a.href};class Xh{constructor(a,o,l={},d=ud){this.channel=a,this.event=o,this.payload=l,this.timeout=d,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(a){this.timeout=a,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(a){this.payload=Object.assign(Object.assign({},this.payload),a)}receive(a,o){var l;return this._hasReceived(a)&&o((l=this.receivedResp)===null||l===void 0?void 0:l.response),this.recHooks.push({status:a,callback:o}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const a=o=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=o,this._matchReceive(o)};this.channel._on(this.refEvent,{},a),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(a,o){this.refEvent&&this.channel._trigger(this.refEvent,{status:a,response:o})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:a,response:o}){this.recHooks.filter(l=>l.status===a).forEach(l=>l.callback(o))}_hasReceived(a){return this.receivedResp&&this.receivedResp.status===a}}var Xm;(function(u){u.SYNC="sync",u.JOIN="join",u.LEAVE="leave"})(Xm||(Xm={}));class Io{constructor(a,o){this.channel=a,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const l=o?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(l.state,{},d=>{const{onJoin:f,onLeave:g,onSync:b}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Io.syncState(this.state,d,f,g),this.pendingDiffs.forEach(w=>{this.state=Io.syncDiff(this.state,w,f,g)}),this.pendingDiffs=[],b()}),this.channel._on(l.diff,{},d=>{const{onJoin:f,onLeave:g,onSync:b}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(d):(this.state=Io.syncDiff(this.state,d,f,g),b())}),this.onJoin((d,f,g)=>{this.channel._trigger("presence",{event:"join",key:d,currentPresences:f,newPresences:g})}),this.onLeave((d,f,g)=>{this.channel._trigger("presence",{event:"leave",key:d,currentPresences:f,leftPresences:g})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(a,o,l,d){const f=this.cloneDeep(a),g=this.transformState(o),b={},w={};return this.map(f,(x,C)=>{g[x]||(w[x]=C)}),this.map(g,(x,C)=>{const E=f[x];if(E){const z=C.map(W=>W.presence_ref),R=E.map(W=>W.presence_ref),q=C.filter(W=>R.indexOf(W.presence_ref)<0),P=E.filter(W=>z.indexOf(W.presence_ref)<0);q.length>0&&(b[x]=q),P.length>0&&(w[x]=P)}else b[x]=C}),this.syncDiff(f,{joins:b,leaves:w},l,d)}static syncDiff(a,o,l,d){const{joins:f,leaves:g}={joins:this.transformState(o.joins),leaves:this.transformState(o.leaves)};return l||(l=()=>{}),d||(d=()=>{}),this.map(f,(b,w)=>{var x;const C=(x=a[b])!==null&&x!==void 0?x:[];if(a[b]=this.cloneDeep(w),C.length>0){const E=a[b].map(R=>R.presence_ref),z=C.filter(R=>E.indexOf(R.presence_ref)<0);a[b].unshift(...z)}l(b,C,w)}),this.map(g,(b,w)=>{let x=a[b];if(!x)return;const C=w.map(E=>E.presence_ref);x=x.filter(E=>C.indexOf(E.presence_ref)<0),a[b]=x,d(b,x,w),x.length===0&&delete a[b]}),a}static map(a,o){return Object.getOwnPropertyNames(a).map(l=>o(l,a[l]))}static transformState(a){return a=this.cloneDeep(a),Object.getOwnPropertyNames(a).reduce((o,l)=>{const d=a[l];return"metas"in d?o[l]=d.metas.map(f=>(f.presence_ref=f.phx_ref,delete f.phx_ref,delete f.phx_ref_prev,f)):o[l]=d,o},{})}static cloneDeep(a){return JSON.parse(JSON.stringify(a))}onJoin(a){this.caller.onJoin=a}onLeave(a){this.caller.onLeave=a}onSync(a){this.caller.onSync=a}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Qm;(function(u){u.ALL="*",u.INSERT="INSERT",u.UPDATE="UPDATE",u.DELETE="DELETE"})(Qm||(Qm={}));var Vo;(function(u){u.BROADCAST="broadcast",u.PRESENCE="presence",u.POSTGRES_CHANGES="postgres_changes",u.SYSTEM="system"})(Vo||(Vo={}));var Ni;(function(u){u.SUBSCRIBED="SUBSCRIBED",u.TIMED_OUT="TIMED_OUT",u.CLOSED="CLOSED",u.CHANNEL_ERROR="CHANNEL_ERROR"})(Ni||(Ni={}));class Sd{constructor(a,o={config:{}},l){var d,f;if(this.topic=a,this.params=o,this.socket=l,this.bindings={},this.state=Ae.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=a.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},o.config),this.timeout=this.socket.timeout,this.joinPush=new Xh(this,Yn.join,this.params,this.timeout),this.rejoinTimer=new Xg(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ae.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(g=>g.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ae.closed,this.socket._remove(this)}),this._onError(g=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,g),this.state=Ae.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ae.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",g=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,g),this.state=Ae.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Yn.reply,{},(g,b)=>{this._trigger(this._replyEventName(b),g)}),this.presence=new Io(this),this.broadcastEndpointURL=Jg(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((f=(d=this.params.config)===null||d===void 0?void 0:d.broadcast)===null||f===void 0)&&f.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(a,o=this.timeout){var l,d,f;if(this.socket.isConnected()||this.socket.connect(),this.state==Ae.closed){const{config:{broadcast:g,presence:b,private:w}}=this.params,x=(d=(l=this.bindings.postgres_changes)===null||l===void 0?void 0:l.map(R=>R.filter))!==null&&d!==void 0?d:[],C=!!this.bindings[Vo.PRESENCE]&&this.bindings[Vo.PRESENCE].length>0||((f=this.params.config.presence)===null||f===void 0?void 0:f.enabled)===!0,E={},z={broadcast:g,presence:Object.assign(Object.assign({},b),{enabled:C}),postgres_changes:x,private:w};this.socket.accessTokenValue&&(E.access_token=this.socket.accessTokenValue),this._onError(R=>a?.(Ni.CHANNEL_ERROR,R)),this._onClose(()=>a?.(Ni.CLOSED)),this.updateJoinPayload(Object.assign({config:z},E)),this.joinedOnce=!0,this._rejoin(o),this.joinPush.receive("ok",async({postgres_changes:R})=>{var q;if(this.socket.setAuth(),R===void 0){a?.(Ni.SUBSCRIBED);return}else{const P=this.bindings.postgres_changes,W=(q=P?.length)!==null&&q!==void 0?q:0,G=[];for(let K=0;K<W;K++){const B=P[K],{filter:{event:ot,schema:_t,table:ht,filter:ct}}=B,Ht=R&&R[K];if(Ht&&Ht.event===ot&&Ht.schema===_t&&Ht.table===ht&&Ht.filter===ct)G.push(Object.assign(Object.assign({},B),{id:Ht.id}));else{this.unsubscribe(),this.state=Ae.errored,a?.(Ni.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=G,a&&a(Ni.SUBSCRIBED);return}}).receive("error",R=>{this.state=Ae.errored,a?.(Ni.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(R).join(", ")||"error")))}).receive("timeout",()=>{a?.(Ni.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(a,o={}){return await this.send({type:"presence",event:"track",payload:a},o.timeout||this.timeout)}async untrack(a={}){return await this.send({type:"presence",event:"untrack"},a)}on(a,o,l){return this.state===Ae.joined&&a===Vo.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(a,o,l)}async httpSend(a,o,l={}){var d;const f=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(o==null)return Promise.reject("Payload is required for httpSend()");const g={method:"POST",headers:{Authorization:f,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:o,private:this.private}]})},b=await this._fetchWithTimeout(this.broadcastEndpointURL,g,(d=l.timeout)!==null&&d!==void 0?d:this.timeout);if(b.status===202)return{success:!0};let w=b.statusText;try{const x=await b.json();w=x.error||x.message||w}catch{}return Promise.reject(new Error(w))}async send(a,o={}){var l,d;if(!this._canPush()&&a.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:f,payload:g}=a,w={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:f,payload:g,private:this.private}]})};try{const x=await this._fetchWithTimeout(this.broadcastEndpointURL,w,(l=o.timeout)!==null&&l!==void 0?l:this.timeout);return await((d=x.body)===null||d===void 0?void 0:d.cancel()),x.ok?"ok":"error"}catch(x){return x.name==="AbortError"?"timed out":"error"}}else return new Promise(f=>{var g,b,w;const x=this._push(a.type,a,o.timeout||this.timeout);a.type==="broadcast"&&!(!((w=(b=(g=this.params)===null||g===void 0?void 0:g.config)===null||b===void 0?void 0:b.broadcast)===null||w===void 0)&&w.ack)&&f("ok"),x.receive("ok",()=>f("ok")),x.receive("error",()=>f("error")),x.receive("timeout",()=>f("timed out"))})}updateJoinPayload(a){this.joinPush.updatePayload(a)}unsubscribe(a=this.timeout){this.state=Ae.leaving;const o=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Yn.close,"leave",this._joinRef())};this.joinPush.destroy();let l=null;return new Promise(d=>{l=new Xh(this,Yn.leave,{},a),l.receive("ok",()=>{o(),d("ok")}).receive("timeout",()=>{o(),d("timed out")}).receive("error",()=>{d("error")}),l.send(),this._canPush()||l.trigger("ok",{})}).finally(()=>{l?.destroy()})}teardown(){this.pushBuffer.forEach(a=>a.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ae.closed,this.bindings={}}async _fetchWithTimeout(a,o,l){const d=new AbortController,f=setTimeout(()=>d.abort(),l),g=await this.socket.fetch(a,Object.assign(Object.assign({},o),{signal:d.signal}));return clearTimeout(f),g}_push(a,o,l=this.timeout){if(!this.joinedOnce)throw`tried to push '${a}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let d=new Xh(this,a,o,l);return this._canPush()?d.send():this._addToPushBuffer(d),d}_addToPushBuffer(a){if(a.startTimeout(),this.pushBuffer.push(a),this.pushBuffer.length>_v){const o=this.pushBuffer.shift();o&&(o.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${o.event}`,o.payload))}}_onMessage(a,o,l){return o}_isMember(a){return this.topic===a}_joinRef(){return this.joinPush.ref}_trigger(a,o,l){var d,f;const g=a.toLocaleLowerCase(),{close:b,error:w,leave:x,join:C}=Yn;if(l&&[b,w,x,C].indexOf(g)>=0&&l!==this._joinRef())return;let z=this._onMessage(g,o,l);if(o&&!z)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(g)?(d=this.bindings.postgres_changes)===null||d===void 0||d.filter(R=>{var q,P,W;return((q=R.filter)===null||q===void 0?void 0:q.event)==="*"||((W=(P=R.filter)===null||P===void 0?void 0:P.event)===null||W===void 0?void 0:W.toLocaleLowerCase())===g}).map(R=>R.callback(z,l)):(f=this.bindings[g])===null||f===void 0||f.filter(R=>{var q,P,W,G,K,B;if(["broadcast","presence","postgres_changes"].includes(g))if("id"in R){const ot=R.id,_t=(q=R.filter)===null||q===void 0?void 0:q.event;return ot&&((P=o.ids)===null||P===void 0?void 0:P.includes(ot))&&(_t==="*"||_t?.toLocaleLowerCase()===((W=o.data)===null||W===void 0?void 0:W.type.toLocaleLowerCase()))}else{const ot=(K=(G=R?.filter)===null||G===void 0?void 0:G.event)===null||K===void 0?void 0:K.toLocaleLowerCase();return ot==="*"||ot===((B=o?.event)===null||B===void 0?void 0:B.toLocaleLowerCase())}else return R.type.toLocaleLowerCase()===g}).map(R=>{if(typeof z=="object"&&"ids"in z){const q=z.data,{schema:P,table:W,commit_timestamp:G,type:K,errors:B}=q;z=Object.assign(Object.assign({},{schema:P,table:W,commit_timestamp:G,eventType:K,new:{},old:{},errors:B}),this._getPayloadRecords(q))}R.callback(z,l)})}_isClosed(){return this.state===Ae.closed}_isJoined(){return this.state===Ae.joined}_isJoining(){return this.state===Ae.joining}_isLeaving(){return this.state===Ae.leaving}_replyEventName(a){return`chan_reply_${a}`}_on(a,o,l){const d=a.toLocaleLowerCase(),f={type:d,filter:o,callback:l};return this.bindings[d]?this.bindings[d].push(f):this.bindings[d]=[f],this}_off(a,o){const l=a.toLocaleLowerCase();return this.bindings[l]&&(this.bindings[l]=this.bindings[l].filter(d=>{var f;return!(((f=d.type)===null||f===void 0?void 0:f.toLocaleLowerCase())===l&&Sd.isEqual(d.filter,o))})),this}static isEqual(a,o){if(Object.keys(a).length!==Object.keys(o).length)return!1;for(const l in a)if(a[l]!==o[l])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(a){this._on(Yn.close,{},a)}_onError(a){this._on(Yn.error,{},o=>a(o))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(a=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ae.joining,this.joinPush.resend(a))}_getPayloadRecords(a){const o={new:{},old:{}};return(a.type==="INSERT"||a.type==="UPDATE")&&(o.new=Km(a.columns,a.record)),(a.type==="UPDATE"||a.type==="DELETE")&&(o.old=Km(a.columns,a.old_record)),o}}const Qh=()=>{},Ru={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Ev=[1e3,2e3,5e3,1e4],Cv=1e4,Ov=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class jv{constructor(a,o){var l;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=ud,this.transport=null,this.heartbeatIntervalMs=Ru.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Qh,this.ref=0,this.reconnectTimer=null,this.logger=Qh,this.conn=null,this.sendBuffer=[],this.serializer=new yv,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=d=>{let f;return d?f=d:typeof fetch>"u"?f=(...g)=>js(async()=>{const{default:b}=await Promise.resolve().then(()=>Sr);return{default:b}},void 0).then(({default:b})=>b(...g)).catch(b=>{throw new Error(`Failed to load @supabase/node-fetch: ${b.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):f=fetch,(...g)=>f(...g)},!(!((l=o?.params)===null||l===void 0)&&l.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=o.params.apikey,this.endPoint=`${a}/${cd.websocket}`,this.httpEndpoint=Jg(a),this._initializeOptions(o),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(o?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=dv.createWebSocket(this.endpointURL())}catch(a){this._setConnectionState("disconnected");const o=a.message;throw o.includes("Node.js")?new Error(`${o}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${o}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:mv}))}disconnect(a,o){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const l=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(l),this._setConnectionState("disconnected")},a?this.conn.close(a,o??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(a){const o=await a.unsubscribe();return this.channels.length===0&&this.disconnect(),o}async removeAllChannels(){const a=await Promise.all(this.channels.map(o=>o.unsubscribe()));return this.channels=[],this.disconnect(),a}log(a,o,l){this.logger(a,o,l)}connectionState(){switch(this.conn&&this.conn.readyState){case Zo.connecting:return vr.Connecting;case Zo.open:return vr.Open;case Zo.closing:return vr.Closing;default:return vr.Closed}}isConnected(){return this.connectionState()===vr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(a,o={config:{}}){const l=`realtime:${a}`,d=this.getChannels().find(f=>f.topic===l);if(d)return d;{const f=new Sd(`realtime:${a}`,o,this);return this.channels.push(f),f}}push(a){const{topic:o,event:l,payload:d,ref:f}=a,g=()=>{this.encode(a,b=>{var w;(w=this.conn)===null||w===void 0||w.send(b)})};this.log("push",`${o} ${l} (${f})`,d),this.isConnected()?g():this.sendBuffer.push(g)}async setAuth(a=null){this._authPromise=this._performAuth(a);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var a;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(o){this.log("error","error in heartbeat callback",o)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(o){this.log("error","error in heartbeat callback",o)}this._wasManualDisconnect=!1,(a=this.conn)===null||a===void 0||a.close(gv,"heartbeat timeout"),setTimeout(()=>{var o;this.isConnected()||(o=this.reconnectTimer)===null||o===void 0||o.scheduleTimeout()},Ru.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(o){this.log("error","error in heartbeat callback",o)}this._setAuthSafely("heartbeat")}onHeartbeat(a){this.heartbeatCallback=a}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(a=>a()),this.sendBuffer=[])}_makeRef(){let a=this.ref+1;return a===this.ref?this.ref=0:this.ref=a,this.ref.toString()}_leaveOpenTopic(a){let o=this.channels.find(l=>l.topic===a&&(l._isJoined()||l._isJoining()));o&&(this.log("transport",`leaving duplicate topic "${a}"`),o.unsubscribe())}_remove(a){this.channels=this.channels.filter(o=>o.topic!==a.topic)}_onConnMessage(a){this.decode(a.data,o=>{if(o.topic==="phoenix"&&o.event==="phx_reply")try{this.heartbeatCallback(o.payload.status==="ok"?"ok":"error")}catch(x){this.log("error","error in heartbeat callback",x)}o.ref&&o.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:l,event:d,payload:f,ref:g}=o,b=g?`(${g})`:"",w=f.status||"";this.log("receive",`${w} ${l} ${d} ${b}`.trim(),f),this.channels.filter(x=>x._isMember(l)).forEach(x=>x._trigger(d,f,g)),this._triggerStateCallbacks("message",o)})}_clearTimer(a){var o;a==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):a==="reconnect"&&((o=this.reconnectTimer)===null||o===void 0||o.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=a=>this._onConnError(a),this.conn.onmessage=a=>this._onConnMessage(a),this.conn.onclose=a=>this._onConnClose(a))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(a=>a.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const a=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(a),this.workerRef.onerror=o=>{this.log("worker","worker error",o.message),this.workerRef.terminate()},this.workerRef.onmessage=o=>{o.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(a){var o;this._setConnectionState("disconnected"),this.log("transport","close",a),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(o=this.reconnectTimer)===null||o===void 0||o.scheduleTimeout(),this._triggerStateCallbacks("close",a)}_onConnError(a){this._setConnectionState("disconnected"),this.log("transport",`${a}`),this._triggerChanError(),this._triggerStateCallbacks("error",a)}_triggerChanError(){this.channels.forEach(a=>a._trigger(Yn.error))}_appendParams(a,o){if(Object.keys(o).length===0)return a;const l=a.match(/\?/)?"&":"?",d=new URLSearchParams(o);return`${a}${l}${d}`}_workerObjectUrl(a){let o;if(a)o=a;else{const l=new Blob([Ov],{type:"application/javascript"});o=URL.createObjectURL(l)}return o}_setConnectionState(a,o=!1){this._connectionState=a,a==="connecting"?this._wasManualDisconnect=!1:a==="disconnecting"&&(this._wasManualDisconnect=o)}async _performAuth(a=null){let o;a?o=a:this.accessToken?o=await this.accessToken():o=this.accessTokenValue,this.accessTokenValue!=o&&(this.accessTokenValue=o,this.channels.forEach(l=>{const d={access_token:o,version:pv};o&&l.updateJoinPayload(d),l.joinedOnce&&l._isJoined()&&l._push(Yn.access_token,{access_token:o})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(a="general"){this.setAuth().catch(o=>{this.log("error",`error setting auth in ${a}`,o)})}_triggerStateCallbacks(a,o){try{this.stateChangeCallbacks[a].forEach(l=>{try{l(o)}catch(d){this.log("error",`error in ${a} callback`,d)}})}catch(l){this.log("error",`error triggering ${a} callbacks`,l)}}_setupReconnectionTimer(){this.reconnectTimer=new Xg(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Ru.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(a){var o,l,d,f,g,b,w,x,C;if(this.transport=(o=a?.transport)!==null&&o!==void 0?o:null,this.timeout=(l=a?.timeout)!==null&&l!==void 0?l:ud,this.heartbeatIntervalMs=(d=a?.heartbeatIntervalMs)!==null&&d!==void 0?d:Ru.HEARTBEAT_INTERVAL,this.worker=(f=a?.worker)!==null&&f!==void 0?f:!1,this.accessToken=(g=a?.accessToken)!==null&&g!==void 0?g:null,this.heartbeatCallback=(b=a?.heartbeatCallback)!==null&&b!==void 0?b:Qh,a?.params&&(this.params=a.params),a?.logger&&(this.logger=a.logger),(a?.logLevel||a?.log_level)&&(this.logLevel=a.logLevel||a.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(w=a?.reconnectAfterMs)!==null&&w!==void 0?w:(E=>Ev[E-1]||Cv),this.encode=(x=a?.encode)!==null&&x!==void 0?x:((E,z)=>z(JSON.stringify(E))),this.decode=(C=a?.decode)!==null&&C!==void 0?C:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=a?.workerUrl}}}class Td extends Error{constructor(a){super(a),this.__isStorageError=!0,this.name="StorageError"}}function de(u){return typeof u=="object"&&u!==null&&"__isStorageError"in u}class Av extends Td{constructor(a,o,l){super(a),this.name="StorageApiError",this.status=o,this.statusCode=l}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class dd extends Td{constructor(a,o){super(a),this.name="StorageUnknownError",this.originalError=o}}const Ed=u=>{let a;return u?a=u:typeof fetch>"u"?a=(...o)=>js(async()=>{const{default:l}=await Promise.resolve().then(()=>Sr);return{default:l}},void 0).then(({default:l})=>l(...o)):a=fetch,(...o)=>a(...o)},zv=()=>pt(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield js(()=>Promise.resolve().then(()=>Sr),void 0)).Response:Response}),fd=u=>{if(Array.isArray(u))return u.map(o=>fd(o));if(typeof u=="function"||u!==Object(u))return u;const a={};return Object.entries(u).forEach(([o,l])=>{const d=o.replace(/([-_][a-z])/gi,f=>f.toUpperCase().replace(/[-_]/g,""));a[d]=fd(l)}),a},Rv=u=>{if(typeof u!="object"||u===null)return!1;const a=Object.getPrototypeOf(u);return(a===null||a===Object.prototype||Object.getPrototypeOf(a)===null)&&!(Symbol.toStringTag in u)&&!(Symbol.iterator in u)},Jh=u=>u.msg||u.message||u.error_description||u.error||JSON.stringify(u),Lv=(u,a,o)=>pt(void 0,void 0,void 0,function*(){const l=yield zv();u instanceof l&&!o?.noResolveJson?u.json().then(d=>{const f=u.status||500,g=d?.statusCode||f+"";a(new Av(Jh(d),f,g))}).catch(d=>{a(new dd(Jh(d),d))}):a(new dd(Jh(u),u))}),kv=(u,a,o,l)=>{const d={method:u,headers:a?.headers||{}};return u==="GET"||!l?d:(Rv(l)?(d.headers=Object.assign({"Content-Type":"application/json"},a?.headers),d.body=JSON.stringify(l)):d.body=l,a?.duplex&&(d.duplex=a.duplex),Object.assign(Object.assign({},d),o))};function Wo(u,a,o,l,d,f){return pt(this,void 0,void 0,function*(){return new Promise((g,b)=>{u(o,kv(a,l,d,f)).then(w=>{if(!w.ok)throw w;return l?.noResolveJson?w:w.json()}).then(w=>g(w)).catch(w=>Lv(w,b,l))})})}function Go(u,a,o,l){return pt(this,void 0,void 0,function*(){return Wo(u,"GET",a,o,l)})}function $n(u,a,o,l,d){return pt(this,void 0,void 0,function*(){return Wo(u,"POST",a,l,d,o)})}function pd(u,a,o,l,d){return pt(this,void 0,void 0,function*(){return Wo(u,"PUT",a,l,d,o)})}function Mv(u,a,o,l){return pt(this,void 0,void 0,function*(){return Wo(u,"HEAD",a,Object.assign(Object.assign({},o),{noResolveJson:!0}),l)})}function Cd(u,a,o,l,d){return pt(this,void 0,void 0,function*(){return Wo(u,"DELETE",a,l,d,o)})}class Bv{constructor(a,o){this.downloadFn=a,this.shouldThrowOnError=o}then(a,o){return this.execute().then(a,o)}execute(){return pt(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(de(a))return{data:null,error:a};throw a}})}}var Fg;class Dv{constructor(a,o){this.downloadFn=a,this.shouldThrowOnError=o,this[Fg]="BlobDownloadBuilder",this.promise=null}asStream(){return new Bv(this.downloadFn,this.shouldThrowOnError)}then(a,o){return this.getPromise().then(a,o)}catch(a){return this.getPromise().catch(a)}finally(a){return this.getPromise().finally(a)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return pt(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(de(a))return{data:null,error:a};throw a}})}}Fg=Symbol.toStringTag;const Nv={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Jm={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Pv{constructor(a,o={},l,d){this.shouldThrowOnError=!1,this.url=a,this.headers=o,this.bucketId=l,this.fetch=Ed(d)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(a,o,l,d){return pt(this,void 0,void 0,function*(){try{let f;const g=Object.assign(Object.assign({},Jm),d);let b=Object.assign(Object.assign({},this.headers),a==="POST"&&{"x-upsert":String(g.upsert)});const w=g.metadata;typeof Blob<"u"&&l instanceof Blob?(f=new FormData,f.append("cacheControl",g.cacheControl),w&&f.append("metadata",this.encodeMetadata(w)),f.append("",l)):typeof FormData<"u"&&l instanceof FormData?(f=l,f.append("cacheControl",g.cacheControl),w&&f.append("metadata",this.encodeMetadata(w))):(f=l,b["cache-control"]=`max-age=${g.cacheControl}`,b["content-type"]=g.contentType,w&&(b["x-metadata"]=this.toBase64(this.encodeMetadata(w)))),d?.headers&&(b=Object.assign(Object.assign({},b),d.headers));const x=this._removeEmptyFolders(o),C=this._getFinalPath(x),E=yield(a=="PUT"?pd:$n)(this.fetch,`${this.url}/object/${C}`,f,Object.assign({headers:b},g?.duplex?{duplex:g.duplex}:{}));return{data:{path:x,id:E.Id,fullPath:E.Key},error:null}}catch(f){if(this.shouldThrowOnError)throw f;if(de(f))return{data:null,error:f};throw f}})}upload(a,o,l){return pt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",a,o,l)})}uploadToSignedUrl(a,o,l,d){return pt(this,void 0,void 0,function*(){const f=this._removeEmptyFolders(a),g=this._getFinalPath(f),b=new URL(this.url+`/object/upload/sign/${g}`);b.searchParams.set("token",o);try{let w;const x=Object.assign({upsert:Jm.upsert},d),C=Object.assign(Object.assign({},this.headers),{"x-upsert":String(x.upsert)});typeof Blob<"u"&&l instanceof Blob?(w=new FormData,w.append("cacheControl",x.cacheControl),w.append("",l)):typeof FormData<"u"&&l instanceof FormData?(w=l,w.append("cacheControl",x.cacheControl)):(w=l,C["cache-control"]=`max-age=${x.cacheControl}`,C["content-type"]=x.contentType);const E=yield pd(this.fetch,b.toString(),w,{headers:C});return{data:{path:f,fullPath:E.Key},error:null}}catch(w){if(this.shouldThrowOnError)throw w;if(de(w))return{data:null,error:w};throw w}})}createSignedUploadUrl(a,o){return pt(this,void 0,void 0,function*(){try{let l=this._getFinalPath(a);const d=Object.assign({},this.headers);o?.upsert&&(d["x-upsert"]="true");const f=yield $n(this.fetch,`${this.url}/object/upload/sign/${l}`,{},{headers:d}),g=new URL(this.url+f.url),b=g.searchParams.get("token");if(!b)throw new Td("No token returned by API");return{data:{signedUrl:g.toString(),path:a,token:b},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(de(l))return{data:null,error:l};throw l}})}update(a,o,l){return pt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",a,o,l)})}move(a,o,l){return pt(this,void 0,void 0,function*(){try{return{data:yield $n(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:a,destinationKey:o,destinationBucket:l?.destinationBucket},{headers:this.headers}),error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(de(d))return{data:null,error:d};throw d}})}copy(a,o,l){return pt(this,void 0,void 0,function*(){try{return{data:{path:(yield $n(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:a,destinationKey:o,destinationBucket:l?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(de(d))return{data:null,error:d};throw d}})}createSignedUrl(a,o,l){return pt(this,void 0,void 0,function*(){try{let d=this._getFinalPath(a),f=yield $n(this.fetch,`${this.url}/object/sign/${d}`,Object.assign({expiresIn:o},l?.transform?{transform:l.transform}:{}),{headers:this.headers});const g=l?.download?`&download=${l.download===!0?"":l.download}`:"";return f={signedUrl:encodeURI(`${this.url}${f.signedURL}${g}`)},{data:f,error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(de(d))return{data:null,error:d};throw d}})}createSignedUrls(a,o,l){return pt(this,void 0,void 0,function*(){try{const d=yield $n(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:o,paths:a},{headers:this.headers}),f=l?.download?`&download=${l.download===!0?"":l.download}`:"";return{data:d.map(g=>Object.assign(Object.assign({},g),{signedUrl:g.signedURL?encodeURI(`${this.url}${g.signedURL}${f}`):null})),error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(de(d))return{data:null,error:d};throw d}})}download(a,o){const d=typeof o?.transform<"u"?"render/image/authenticated":"object",f=this.transformOptsToQueryString(o?.transform||{}),g=f?`?${f}`:"",b=this._getFinalPath(a),w=()=>Go(this.fetch,`${this.url}/${d}/${b}${g}`,{headers:this.headers,noResolveJson:!0});return new Dv(w,this.shouldThrowOnError)}info(a){return pt(this,void 0,void 0,function*(){const o=this._getFinalPath(a);try{const l=yield Go(this.fetch,`${this.url}/object/info/${o}`,{headers:this.headers});return{data:fd(l),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(de(l))return{data:null,error:l};throw l}})}exists(a){return pt(this,void 0,void 0,function*(){const o=this._getFinalPath(a);try{return yield Mv(this.fetch,`${this.url}/object/${o}`,{headers:this.headers}),{data:!0,error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(de(l)&&l instanceof dd){const d=l.originalError;if([400,404].includes(d?.status))return{data:!1,error:l}}throw l}})}getPublicUrl(a,o){const l=this._getFinalPath(a),d=[],f=o?.download?`download=${o.download===!0?"":o.download}`:"";f!==""&&d.push(f);const b=typeof o?.transform<"u"?"render/image":"object",w=this.transformOptsToQueryString(o?.transform||{});w!==""&&d.push(w);let x=d.join("&");return x!==""&&(x=`?${x}`),{data:{publicUrl:encodeURI(`${this.url}/${b}/public/${l}${x}`)}}}remove(a){return pt(this,void 0,void 0,function*(){try{return{data:yield Cd(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:a},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(de(o))return{data:null,error:o};throw o}})}list(a,o,l){return pt(this,void 0,void 0,function*(){try{const d=Object.assign(Object.assign(Object.assign({},Nv),o),{prefix:a||""});return{data:yield $n(this.fetch,`${this.url}/object/list/${this.bucketId}`,d,{headers:this.headers},l),error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(de(d))return{data:null,error:d};throw d}})}listV2(a,o){return pt(this,void 0,void 0,function*(){try{const l=Object.assign({},a);return{data:yield $n(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,l,{headers:this.headers},o),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(de(l))return{data:null,error:l};throw l}})}encodeMetadata(a){return JSON.stringify(a)}toBase64(a){return typeof Buffer<"u"?Buffer.from(a).toString("base64"):btoa(a)}_getFinalPath(a){return`${this.bucketId}/${a.replace(/^\/+/,"")}`}_removeEmptyFolders(a){return a.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(a){const o=[];return a.width&&o.push(`width=${a.width}`),a.height&&o.push(`height=${a.height}`),a.resize&&o.push(`resize=${a.resize}`),a.format&&o.push(`format=${a.format}`),a.quality&&o.push(`quality=${a.quality}`),o.join("&")}}const t_="2.76.1",e_={"X-Client-Info":`storage-js/${t_}`};class Uv{constructor(a,o={},l,d){this.shouldThrowOnError=!1;const f=new URL(a);d?.useNewHostname&&/supabase\.(co|in|red)$/.test(f.hostname)&&!f.hostname.includes("storage.supabase.")&&(f.hostname=f.hostname.replace("supabase.","storage.supabase.")),this.url=f.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},e_),o),this.fetch=Ed(l)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return pt(this,void 0,void 0,function*(){try{return{data:yield Go(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(de(a))return{data:null,error:a};throw a}})}getBucket(a){return pt(this,void 0,void 0,function*(){try{return{data:yield Go(this.fetch,`${this.url}/bucket/${a}`,{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(de(o))return{data:null,error:o};throw o}})}createBucket(a){return pt(this,arguments,void 0,function*(o,l={public:!1}){try{return{data:yield $n(this.fetch,`${this.url}/bucket`,{id:o,name:o,type:l.type,public:l.public,file_size_limit:l.fileSizeLimit,allowed_mime_types:l.allowedMimeTypes},{headers:this.headers}),error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(de(d))return{data:null,error:d};throw d}})}updateBucket(a,o){return pt(this,void 0,void 0,function*(){try{return{data:yield pd(this.fetch,`${this.url}/bucket/${a}`,{id:a,name:a,public:o.public,file_size_limit:o.fileSizeLimit,allowed_mime_types:o.allowedMimeTypes},{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(de(l))return{data:null,error:l};throw l}})}emptyBucket(a){return pt(this,void 0,void 0,function*(){try{return{data:yield $n(this.fetch,`${this.url}/bucket/${a}/empty`,{},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(de(o))return{data:null,error:o};throw o}})}deleteBucket(a){return pt(this,void 0,void 0,function*(){try{return{data:yield Cd(this.fetch,`${this.url}/bucket/${a}`,{},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(de(o))return{data:null,error:o};throw o}})}}class Hv{constructor(a,o={},l){this.shouldThrowOnError=!1,this.url=a.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},e_),o),this.fetch=Ed(l)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(a){return pt(this,void 0,void 0,function*(){try{return{data:yield $n(this.fetch,`${this.url}/bucket`,{name:a},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(de(o))return{data:null,error:o};throw o}})}listBuckets(a){return pt(this,void 0,void 0,function*(){try{const o=new URLSearchParams;a?.limit!==void 0&&o.set("limit",a.limit.toString()),a?.offset!==void 0&&o.set("offset",a.offset.toString()),a?.sortColumn&&o.set("sortColumn",a.sortColumn),a?.sortOrder&&o.set("sortOrder",a.sortOrder),a?.search&&o.set("search",a.search);const l=o.toString(),d=l?`${this.url}/bucket?${l}`:`${this.url}/bucket`,f=yield Go(this.fetch,d,{headers:this.headers});return{data:Array.isArray(f)?f.filter(b=>b.type==="ANALYTICS"):[],error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(de(o))return{data:null,error:o};throw o}})}deleteBucket(a){return pt(this,void 0,void 0,function*(){try{return{data:yield Cd(this.fetch,`${this.url}/bucket/${a}`,{},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(de(o))return{data:null,error:o};throw o}})}}const Od={"X-Client-Info":`storage-js/${t_}`,"Content-Type":"application/json"};class n_ extends Error{constructor(a){super(a),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function xn(u){return typeof u=="object"&&u!==null&&"__isStorageVectorsError"in u}class Fh extends n_{constructor(a,o,l){super(a),this.name="StorageVectorsApiError",this.status=o,this.statusCode=l}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class qv extends n_{constructor(a,o){super(a),this.name="StorageVectorsUnknownError",this.originalError=o}}var Fm;(function(u){u.InternalError="InternalError",u.S3VectorConflictException="S3VectorConflictException",u.S3VectorNotFoundException="S3VectorNotFoundException",u.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",u.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",u.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(Fm||(Fm={}));const jd=u=>{let a;return u?a=u:typeof fetch>"u"?a=(...o)=>js(async()=>{const{default:l}=await Promise.resolve().then(()=>Sr);return{default:l}},void 0).then(({default:l})=>l(...o)):a=fetch,(...o)=>a(...o)},Zv=u=>{if(typeof u!="object"||u===null)return!1;const a=Object.getPrototypeOf(u);return(a===null||a===Object.prototype||Object.getPrototypeOf(a)===null)&&!(Symbol.toStringTag in u)&&!(Symbol.iterator in u)},tg=u=>u.msg||u.message||u.error_description||u.error||JSON.stringify(u),Iv=(u,a,o)=>pt(void 0,void 0,void 0,function*(){if(u&&typeof u=="object"&&"status"in u&&"ok"in u&&typeof u.status=="number"&&!o?.noResolveJson){const d=u.status||500,f=u;if(typeof f.json=="function")f.json().then(g=>{const b=g?.statusCode||g?.code||d+"";a(new Fh(tg(g),d,b))}).catch(()=>{const g=d+"",b=f.statusText||`HTTP ${d} error`;a(new Fh(b,d,g))});else{const g=d+"",b=f.statusText||`HTTP ${d} error`;a(new Fh(b,d,g))}}else a(new qv(tg(u),u))}),Vv=(u,a,o,l)=>{const d={method:u,headers:a?.headers||{}};return l?(Zv(l)?(d.headers=Object.assign({"Content-Type":"application/json"},a?.headers),d.body=JSON.stringify(l)):d.body=l,Object.assign(Object.assign({},d),o)):d};function Gv(u,a,o,l,d,f){return pt(this,void 0,void 0,function*(){return new Promise((g,b)=>{u(o,Vv(a,l,d,f)).then(w=>{if(!w.ok)throw w;if(l?.noResolveJson)return w;const x=w.headers.get("content-type");return!x||!x.includes("application/json")?{}:w.json()}).then(w=>g(w)).catch(w=>Iv(w,b,l))})})}function wn(u,a,o,l,d){return pt(this,void 0,void 0,function*(){return Gv(u,"POST",a,l,d,o)})}class $v{constructor(a,o={},l){this.shouldThrowOnError=!1,this.url=a.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Od),o),this.fetch=jd(l)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(a){return pt(this,void 0,void 0,function*(){try{return{data:(yield wn(this.fetch,`${this.url}/CreateIndex`,a,{headers:this.headers}))||{},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(xn(o))return{data:null,error:o};throw o}})}getIndex(a,o){return pt(this,void 0,void 0,function*(){try{return{data:yield wn(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:a,indexName:o},{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(xn(l))return{data:null,error:l};throw l}})}listIndexes(a){return pt(this,void 0,void 0,function*(){try{return{data:yield wn(this.fetch,`${this.url}/ListIndexes`,a,{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(xn(o))return{data:null,error:o};throw o}})}deleteIndex(a,o){return pt(this,void 0,void 0,function*(){try{return{data:(yield wn(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:a,indexName:o},{headers:this.headers}))||{},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(xn(l))return{data:null,error:l};throw l}})}}class Yv{constructor(a,o={},l){this.shouldThrowOnError=!1,this.url=a.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Od),o),this.fetch=jd(l)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(a){return pt(this,void 0,void 0,function*(){try{if(a.vectors.length<1||a.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield wn(this.fetch,`${this.url}/PutVectors`,a,{headers:this.headers}))||{},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(xn(o))return{data:null,error:o};throw o}})}getVectors(a){return pt(this,void 0,void 0,function*(){try{return{data:yield wn(this.fetch,`${this.url}/GetVectors`,a,{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(xn(o))return{data:null,error:o};throw o}})}listVectors(a){return pt(this,void 0,void 0,function*(){try{if(a.segmentCount!==void 0){if(a.segmentCount<1||a.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(a.segmentIndex!==void 0&&(a.segmentIndex<0||a.segmentIndex>=a.segmentCount))throw new Error(`segmentIndex must be between 0 and ${a.segmentCount-1}`)}return{data:yield wn(this.fetch,`${this.url}/ListVectors`,a,{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(xn(o))return{data:null,error:o};throw o}})}queryVectors(a){return pt(this,void 0,void 0,function*(){try{return{data:yield wn(this.fetch,`${this.url}/QueryVectors`,a,{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(xn(o))return{data:null,error:o};throw o}})}deleteVectors(a){return pt(this,void 0,void 0,function*(){try{if(a.keys.length<1||a.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield wn(this.fetch,`${this.url}/DeleteVectors`,a,{headers:this.headers}))||{},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(xn(o))return{data:null,error:o};throw o}})}}class Wv{constructor(a,o={},l){this.shouldThrowOnError=!1,this.url=a.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Od),o),this.fetch=jd(l)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(a){return pt(this,void 0,void 0,function*(){try{return{data:(yield wn(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:a},{headers:this.headers}))||{},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(xn(o))return{data:null,error:o};throw o}})}getBucket(a){return pt(this,void 0,void 0,function*(){try{return{data:yield wn(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:a},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(xn(o))return{data:null,error:o};throw o}})}listBuckets(){return pt(this,arguments,void 0,function*(a={}){try{return{data:yield wn(this.fetch,`${this.url}/ListVectorBuckets`,a,{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(xn(o))return{data:null,error:o};throw o}})}deleteBucket(a){return pt(this,void 0,void 0,function*(){try{return{data:(yield wn(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:a},{headers:this.headers}))||{},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(xn(o))return{data:null,error:o};throw o}})}}class Kv extends Wv{constructor(a,o={}){super(a,o.headers||{},o.fetch)}from(a){return new Xv(this.url,this.headers,a,this.fetch)}}class Xv extends $v{constructor(a,o,l,d){super(a,o,d),this.vectorBucketName=l}createIndex(a){const o=Object.create(null,{createIndex:{get:()=>super.createIndex}});return pt(this,void 0,void 0,function*(){return o.createIndex.call(this,Object.assign(Object.assign({},a),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const a=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return pt(this,arguments,void 0,function*(o={}){return a.listIndexes.call(this,Object.assign(Object.assign({},o),{vectorBucketName:this.vectorBucketName}))})}getIndex(a){const o=Object.create(null,{getIndex:{get:()=>super.getIndex}});return pt(this,void 0,void 0,function*(){return o.getIndex.call(this,this.vectorBucketName,a)})}deleteIndex(a){const o=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return pt(this,void 0,void 0,function*(){return o.deleteIndex.call(this,this.vectorBucketName,a)})}index(a){return new Qv(this.url,this.headers,this.vectorBucketName,a,this.fetch)}}class Qv extends Yv{constructor(a,o,l,d,f){super(a,o,f),this.vectorBucketName=l,this.indexName=d}putVectors(a){const o=Object.create(null,{putVectors:{get:()=>super.putVectors}});return pt(this,void 0,void 0,function*(){return o.putVectors.call(this,Object.assign(Object.assign({},a),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(a){const o=Object.create(null,{getVectors:{get:()=>super.getVectors}});return pt(this,void 0,void 0,function*(){return o.getVectors.call(this,Object.assign(Object.assign({},a),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const a=Object.create(null,{listVectors:{get:()=>super.listVectors}});return pt(this,arguments,void 0,function*(o={}){return a.listVectors.call(this,Object.assign(Object.assign({},o),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(a){const o=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return pt(this,void 0,void 0,function*(){return o.queryVectors.call(this,Object.assign(Object.assign({},a),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(a){const o=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return pt(this,void 0,void 0,function*(){return o.deleteVectors.call(this,Object.assign(Object.assign({},a),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class Jv extends Uv{constructor(a,o={},l,d){super(a,o,l,d)}from(a){return new Pv(this.url,this.headers,a,this.fetch)}get vectors(){return new Kv(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Hv(this.url+"/iceberg",this.headers,this.fetch)}}const Fv="2.76.1";let Ho="";typeof Deno<"u"?Ho="deno":typeof document<"u"?Ho="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ho="react-native":Ho="node";const t0={"X-Client-Info":`supabase-js-${Ho}/${Fv}`},e0={headers:t0},n0={schema:"public"},i0={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},a0={},r0=u=>{let a;return u?a=u:typeof fetch>"u"?a=Vg:a=fetch,(...o)=>a(...o)},s0=()=>typeof Headers>"u"?Gg:Headers,o0=(u,a,o)=>{const l=r0(o),d=s0();return async(f,g)=>{var b;const w=(b=await a())!==null&&b!==void 0?b:u;let x=new d(g?.headers);return x.has("apikey")||x.set("apikey",u),x.has("Authorization")||x.set("Authorization",`Bearer ${w}`),l(f,Object.assign(Object.assign({},g),{headers:x}))}};function l0(u){return u.endsWith("/")?u:u+"/"}function u0(u,a){var o,l;const{db:d,auth:f,realtime:g,global:b}=u,{db:w,auth:x,realtime:C,global:E}=a,z={db:Object.assign(Object.assign({},w),d),auth:Object.assign(Object.assign({},x),f),realtime:Object.assign(Object.assign({},C),g),storage:{},global:Object.assign(Object.assign(Object.assign({},E),b),{headers:Object.assign(Object.assign({},(o=E?.headers)!==null&&o!==void 0?o:{}),(l=b?.headers)!==null&&l!==void 0?l:{})}),accessToken:async()=>""};return u.accessToken?z.accessToken=u.accessToken:delete z.accessToken,z}function c0(u){const a=u?.trim();if(!a)throw new Error("supabaseUrl is required.");if(!a.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(l0(a))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const i_="2.76.1",xs=30*1e3,md=3,td=md*xs,h0="http://localhost:9999",d0="supabase.auth.token",f0={"X-Client-Info":`gotrue-js/${i_}`},gd="X-Supabase-Api-Version",a_={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},p0=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,m0=600*1e3;class $o extends Error{constructor(a,o,l){super(a),this.__isAuthError=!0,this.name="AuthError",this.status=o,this.code=l}}function vt(u){return typeof u=="object"&&u!==null&&"__isAuthError"in u}class g0 extends $o{constructor(a,o,l){super(a,o,l),this.name="AuthApiError",this.status=o,this.code=l}}function _0(u){return vt(u)&&u.name==="AuthApiError"}class br extends $o{constructor(a,o){super(a),this.name="AuthUnknownError",this.originalError=o}}class Ca extends $o{constructor(a,o,l,d){super(a,l,d),this.name=o,this.status=l}}class Ta extends Ca{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function y0(u){return vt(u)&&u.name==="AuthSessionMissingError"}class gs extends Ca{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Lu extends Ca{constructor(a){super(a,"AuthInvalidCredentialsError",400,void 0)}}class ku extends Ca{constructor(a,o=null){super(a,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=o}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function v0(u){return vt(u)&&u.name==="AuthImplicitGrantRedirectError"}class eg extends Ca{constructor(a,o=null){super(a,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=o}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class _d extends Ca{constructor(a,o){super(a,"AuthRetryableFetchError",o,void 0)}}function ed(u){return vt(u)&&u.name==="AuthRetryableFetchError"}class ng extends Ca{constructor(a,o,l){super(a,"AuthWeakPasswordError",o,"weak_password"),this.reasons=l}}class yd extends Ca{constructor(a){super(a,"AuthInvalidJwtError",400,"invalid_jwt")}}const Du="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),ig=` 	
\r=`.split(""),b0=(()=>{const u=new Array(128);for(let a=0;a<u.length;a+=1)u[a]=-1;for(let a=0;a<ig.length;a+=1)u[ig[a].charCodeAt(0)]=-2;for(let a=0;a<Du.length;a+=1)u[Du[a].charCodeAt(0)]=a;return u})();function ag(u,a,o){if(u!==null)for(a.queue=a.queue<<8|u,a.queuedBits+=8;a.queuedBits>=6;){const l=a.queue>>a.queuedBits-6&63;o(Du[l]),a.queuedBits-=6}else if(a.queuedBits>0)for(a.queue=a.queue<<6-a.queuedBits,a.queuedBits=6;a.queuedBits>=6;){const l=a.queue>>a.queuedBits-6&63;o(Du[l]),a.queuedBits-=6}}function r_(u,a,o){const l=b0[u];if(l>-1)for(a.queue=a.queue<<6|l,a.queuedBits+=6;a.queuedBits>=8;)o(a.queue>>a.queuedBits-8&255),a.queuedBits-=8;else{if(l===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(u)}"`)}}function rg(u){const a=[],o=g=>{a.push(String.fromCodePoint(g))},l={utf8seq:0,codepoint:0},d={queue:0,queuedBits:0},f=g=>{S0(g,l,o)};for(let g=0;g<u.length;g+=1)r_(u.charCodeAt(g),d,f);return a.join("")}function x0(u,a){if(u<=127){a(u);return}else if(u<=2047){a(192|u>>6),a(128|u&63);return}else if(u<=65535){a(224|u>>12),a(128|u>>6&63),a(128|u&63);return}else if(u<=1114111){a(240|u>>18),a(128|u>>12&63),a(128|u>>6&63),a(128|u&63);return}throw new Error(`Unrecognized Unicode codepoint: ${u.toString(16)}`)}function w0(u,a){for(let o=0;o<u.length;o+=1){let l=u.charCodeAt(o);if(l>55295&&l<=56319){const d=(l-55296)*1024&65535;l=(u.charCodeAt(o+1)-56320&65535|d)+65536,o+=1}x0(l,a)}}function S0(u,a,o){if(a.utf8seq===0){if(u<=127){o(u);return}for(let l=1;l<6;l+=1)if((u>>7-l&1)===0){a.utf8seq=l;break}if(a.utf8seq===2)a.codepoint=u&31;else if(a.utf8seq===3)a.codepoint=u&15;else if(a.utf8seq===4)a.codepoint=u&7;else throw new Error("Invalid UTF-8 sequence");a.utf8seq-=1}else if(a.utf8seq>0){if(u<=127)throw new Error("Invalid UTF-8 sequence");a.codepoint=a.codepoint<<6|u&63,a.utf8seq-=1,a.utf8seq===0&&o(a.codepoint)}}function Ss(u){const a=[],o={queue:0,queuedBits:0},l=d=>{a.push(d)};for(let d=0;d<u.length;d+=1)r_(u.charCodeAt(d),o,l);return new Uint8Array(a)}function T0(u){const a=[];return w0(u,o=>a.push(o)),new Uint8Array(a)}function xr(u){const a=[],o={queue:0,queuedBits:0},l=d=>{a.push(d)};return u.forEach(d=>ag(d,o,l)),ag(null,o,l),a.join("")}function E0(u){return Math.round(Date.now()/1e3)+u}function C0(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(u){const a=Math.random()*16|0;return(u=="x"?a:a&3|8).toString(16)})}const bn=()=>typeof window<"u"&&typeof document<"u",gr={tested:!1,writable:!1},s_=()=>{if(!bn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(gr.tested)return gr.writable;const u=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(u,u),globalThis.localStorage.removeItem(u),gr.tested=!0,gr.writable=!0}catch{gr.tested=!0,gr.writable=!1}return gr.writable};function O0(u){const a={},o=new URL(u);if(o.hash&&o.hash[0]==="#")try{new URLSearchParams(o.hash.substring(1)).forEach((d,f)=>{a[f]=d})}catch{}return o.searchParams.forEach((l,d)=>{a[d]=l}),a}const o_=u=>{let a;return u?a=u:typeof fetch>"u"?a=(...o)=>js(async()=>{const{default:l}=await Promise.resolve().then(()=>Sr);return{default:l}},void 0).then(({default:l})=>l(...o)):a=fetch,(...o)=>a(...o)},j0=u=>typeof u=="object"&&u!==null&&"status"in u&&"ok"in u&&"json"in u&&typeof u.json=="function",ws=async(u,a,o)=>{await u.setItem(a,JSON.stringify(o))},_r=async(u,a)=>{const o=await u.getItem(a);if(!o)return null;try{return JSON.parse(o)}catch{return o}},Sa=async(u,a)=>{await u.removeItem(a)};class qu{constructor(){this.promise=new qu.promiseConstructor((a,o)=>{this.resolve=a,this.reject=o})}}qu.promiseConstructor=Promise;function nd(u){const a=u.split(".");if(a.length!==3)throw new yd("Invalid JWT structure");for(let l=0;l<a.length;l++)if(!p0.test(a[l]))throw new yd("JWT not in base64url format");return{header:JSON.parse(rg(a[0])),payload:JSON.parse(rg(a[1])),signature:Ss(a[2]),raw:{header:a[0],payload:a[1]}}}async function A0(u){return await new Promise(a=>{setTimeout(()=>a(null),u)})}function z0(u,a){return new Promise((l,d)=>{(async()=>{for(let f=0;f<1/0;f++)try{const g=await u(f);if(!a(f,null,g)){l(g);return}}catch(g){if(!a(f,g)){d(g);return}}})()})}function R0(u){return("0"+u.toString(16)).substr(-2)}function L0(){const a=new Uint32Array(56);if(typeof crypto>"u"){const o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",l=o.length;let d="";for(let f=0;f<56;f++)d+=o.charAt(Math.floor(Math.random()*l));return d}return crypto.getRandomValues(a),Array.from(a,R0).join("")}async function k0(u){const o=new TextEncoder().encode(u),l=await crypto.subtle.digest("SHA-256",o),d=new Uint8Array(l);return Array.from(d).map(f=>String.fromCharCode(f)).join("")}async function M0(u){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),u;const o=await k0(u);return btoa(o).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function _s(u,a,o=!1){const l=L0();let d=l;o&&(d+="/PASSWORD_RECOVERY"),await ws(u,`${a}-code-verifier`,d);const f=await M0(l);return[f,l===f?"plain":"s256"]}const B0=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function D0(u){const a=u.headers.get(gd);if(!a||!a.match(B0))return null;try{return new Date(`${a}T00:00:00.0Z`)}catch{return null}}function N0(u){if(!u)throw new Error("Missing exp claim");const a=Math.floor(Date.now()/1e3);if(u<=a)throw new Error("JWT has expired")}function P0(u){switch(u){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const U0=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ys(u){if(!U0.test(u))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function id(){const u={};return new Proxy(u,{get:(a,o)=>{if(o==="__isUserNotAvailableProxy")return!0;if(typeof o=="symbol"){const l=o.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${o}" property of the session object is not supported. Please use getUser() instead.`)},set:(a,o)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${o}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(a,o)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${o}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function sg(u){return JSON.parse(JSON.stringify(u))}const yr=u=>u.msg||u.message||u.error_description||u.error||JSON.stringify(u),H0=[502,503,504];async function og(u){var a;if(!j0(u))throw new _d(yr(u),0);if(H0.includes(u.status))throw new _d(yr(u),u.status);let o;try{o=await u.json()}catch(f){throw new br(yr(f),f)}let l;const d=D0(u);if(d&&d.getTime()>=a_["2024-01-01"].timestamp&&typeof o=="object"&&o&&typeof o.code=="string"?l=o.code:typeof o=="object"&&o&&typeof o.error_code=="string"&&(l=o.error_code),l){if(l==="weak_password")throw new ng(yr(o),u.status,((a=o.weak_password)===null||a===void 0?void 0:a.reasons)||[]);if(l==="session_not_found")throw new Ta}else if(typeof o=="object"&&o&&typeof o.weak_password=="object"&&o.weak_password&&Array.isArray(o.weak_password.reasons)&&o.weak_password.reasons.length&&o.weak_password.reasons.reduce((f,g)=>f&&typeof g=="string",!0))throw new ng(yr(o),u.status,o.weak_password.reasons);throw new g0(yr(o),u.status||500,l)}const q0=(u,a,o,l)=>{const d={method:u,headers:a?.headers||{}};return u==="GET"?d:(d.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},a?.headers),d.body=JSON.stringify(l),Object.assign(Object.assign({},d),o))};async function Et(u,a,o,l){var d;const f=Object.assign({},l?.headers);f[gd]||(f[gd]=a_["2024-01-01"].name),l?.jwt&&(f.Authorization=`Bearer ${l.jwt}`);const g=(d=l?.query)!==null&&d!==void 0?d:{};l?.redirectTo&&(g.redirect_to=l.redirectTo);const b=Object.keys(g).length?"?"+new URLSearchParams(g).toString():"",w=await Z0(u,a,o+b,{headers:f,noResolveJson:l?.noResolveJson},{},l?.body);return l?.xform?l?.xform(w):{data:Object.assign({},w),error:null}}async function Z0(u,a,o,l,d,f){const g=q0(a,l,d,f);let b;try{b=await u(o,Object.assign({},g))}catch(w){throw console.error(w),new _d(yr(w),0)}if(b.ok||await og(b),l?.noResolveJson)return b;try{return await b.json()}catch(w){await og(w)}}function Gn(u){var a;let o=null;G0(u)&&(o=Object.assign({},u),u.expires_at||(o.expires_at=E0(u.expires_in)));const l=(a=u.user)!==null&&a!==void 0?a:u;return{data:{session:o,user:l},error:null}}function lg(u){const a=Gn(u);return!a.error&&u.weak_password&&typeof u.weak_password=="object"&&Array.isArray(u.weak_password.reasons)&&u.weak_password.reasons.length&&u.weak_password.message&&typeof u.weak_password.message=="string"&&u.weak_password.reasons.reduce((o,l)=>o&&typeof l=="string",!0)&&(a.data.weak_password=u.weak_password),a}function Ea(u){var a;return{data:{user:(a=u.user)!==null&&a!==void 0?a:u},error:null}}function I0(u){return{data:u,error:null}}function V0(u){const{action_link:a,email_otp:o,hashed_token:l,redirect_to:d,verification_type:f}=u,g=Os(u,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),b={action_link:a,email_otp:o,hashed_token:l,redirect_to:d,verification_type:f},w=Object.assign({},g);return{data:{properties:b,user:w},error:null}}function ug(u){return u}function G0(u){return u.access_token&&u.refresh_token&&u.expires_in}const ad=["global","local","others"];class $0{constructor({url:a="",headers:o={},fetch:l}){this.url=a,this.headers=o,this.fetch=o_(l),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(a,o=ad[0]){if(ad.indexOf(o)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ad.join(", ")}`);try{return await Et(this.fetch,"POST",`${this.url}/logout?scope=${o}`,{headers:this.headers,jwt:a,noResolveJson:!0}),{data:null,error:null}}catch(l){if(vt(l))return{data:null,error:l};throw l}}async inviteUserByEmail(a,o={}){try{return await Et(this.fetch,"POST",`${this.url}/invite`,{body:{email:a,data:o.data},headers:this.headers,redirectTo:o.redirectTo,xform:Ea})}catch(l){if(vt(l))return{data:{user:null},error:l};throw l}}async generateLink(a){try{const{options:o}=a,l=Os(a,["options"]),d=Object.assign(Object.assign({},l),o);return"newEmail"in l&&(d.new_email=l?.newEmail,delete d.newEmail),await Et(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:d,headers:this.headers,xform:V0,redirectTo:o?.redirectTo})}catch(o){if(vt(o))return{data:{properties:null,user:null},error:o};throw o}}async createUser(a){try{return await Et(this.fetch,"POST",`${this.url}/admin/users`,{body:a,headers:this.headers,xform:Ea})}catch(o){if(vt(o))return{data:{user:null},error:o};throw o}}async listUsers(a){var o,l,d,f,g,b,w;try{const x={nextPage:null,lastPage:0,total:0},C=await Et(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(l=(o=a?.page)===null||o===void 0?void 0:o.toString())!==null&&l!==void 0?l:"",per_page:(f=(d=a?.perPage)===null||d===void 0?void 0:d.toString())!==null&&f!==void 0?f:""},xform:ug});if(C.error)throw C.error;const E=await C.json(),z=(g=C.headers.get("x-total-count"))!==null&&g!==void 0?g:0,R=(w=(b=C.headers.get("link"))===null||b===void 0?void 0:b.split(","))!==null&&w!==void 0?w:[];return R.length>0&&(R.forEach(q=>{const P=parseInt(q.split(";")[0].split("=")[1].substring(0,1)),W=JSON.parse(q.split(";")[1].split("=")[1]);x[`${W}Page`]=P}),x.total=parseInt(z)),{data:Object.assign(Object.assign({},E),x),error:null}}catch(x){if(vt(x))return{data:{users:[]},error:x};throw x}}async getUserById(a){ys(a);try{return await Et(this.fetch,"GET",`${this.url}/admin/users/${a}`,{headers:this.headers,xform:Ea})}catch(o){if(vt(o))return{data:{user:null},error:o};throw o}}async updateUserById(a,o){ys(a);try{return await Et(this.fetch,"PUT",`${this.url}/admin/users/${a}`,{body:o,headers:this.headers,xform:Ea})}catch(l){if(vt(l))return{data:{user:null},error:l};throw l}}async deleteUser(a,o=!1){ys(a);try{return await Et(this.fetch,"DELETE",`${this.url}/admin/users/${a}`,{headers:this.headers,body:{should_soft_delete:o},xform:Ea})}catch(l){if(vt(l))return{data:{user:null},error:l};throw l}}async _listFactors(a){ys(a.userId);try{const{data:o,error:l}=await Et(this.fetch,"GET",`${this.url}/admin/users/${a.userId}/factors`,{headers:this.headers,xform:d=>({data:{factors:d},error:null})});return{data:o,error:l}}catch(o){if(vt(o))return{data:null,error:o};throw o}}async _deleteFactor(a){ys(a.userId),ys(a.id);try{return{data:await Et(this.fetch,"DELETE",`${this.url}/admin/users/${a.userId}/factors/${a.id}`,{headers:this.headers}),error:null}}catch(o){if(vt(o))return{data:null,error:o};throw o}}async _listOAuthClients(a){var o,l,d,f,g,b,w;try{const x={nextPage:null,lastPage:0,total:0},C=await Et(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(l=(o=a?.page)===null||o===void 0?void 0:o.toString())!==null&&l!==void 0?l:"",per_page:(f=(d=a?.perPage)===null||d===void 0?void 0:d.toString())!==null&&f!==void 0?f:""},xform:ug});if(C.error)throw C.error;const E=await C.json(),z=(g=C.headers.get("x-total-count"))!==null&&g!==void 0?g:0,R=(w=(b=C.headers.get("link"))===null||b===void 0?void 0:b.split(","))!==null&&w!==void 0?w:[];return R.length>0&&(R.forEach(q=>{const P=parseInt(q.split(";")[0].split("=")[1].substring(0,1)),W=JSON.parse(q.split(";")[1].split("=")[1]);x[`${W}Page`]=P}),x.total=parseInt(z)),{data:Object.assign(Object.assign({},E),x),error:null}}catch(x){if(vt(x))return{data:{clients:[]},error:x};throw x}}async _createOAuthClient(a){try{return await Et(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:a,headers:this.headers,xform:o=>({data:o,error:null})})}catch(o){if(vt(o))return{data:null,error:o};throw o}}async _getOAuthClient(a){try{return await Et(this.fetch,"GET",`${this.url}/admin/oauth/clients/${a}`,{headers:this.headers,xform:o=>({data:o,error:null})})}catch(o){if(vt(o))return{data:null,error:o};throw o}}async _deleteOAuthClient(a){try{return await Et(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${a}`,{headers:this.headers,xform:o=>({data:o,error:null})})}catch(o){if(vt(o))return{data:null,error:o};throw o}}async _regenerateOAuthClientSecret(a){try{return await Et(this.fetch,"POST",`${this.url}/admin/oauth/clients/${a}/regenerate_secret`,{headers:this.headers,xform:o=>({data:o,error:null})})}catch(o){if(vt(o))return{data:null,error:o};throw o}}}function cg(u={}){return{getItem:a=>u[a]||null,setItem:(a,o)=>{u[a]=o},removeItem:a=>{delete u[a]}}}const vs={debug:!!(globalThis&&s_()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class l_ extends Error{constructor(a){super(a),this.isAcquireTimeout=!0}}class Y0 extends l_{}async function W0(u,a,o){vs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",u,a);const l=new globalThis.AbortController;return a>0&&setTimeout(()=>{l.abort(),vs.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",u)},a),await Promise.resolve().then(()=>globalThis.navigator.locks.request(u,a===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:l.signal},async d=>{if(d){vs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",u,d.name);try{return await o()}finally{vs.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",u,d.name)}}else{if(a===0)throw vs.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",u),new Y0(`Acquiring an exclusive Navigator LockManager lock "${u}" immediately failed`);if(vs.debug)try{const f=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(f,null,"  "))}catch(f){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",f)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await o()}}))}function K0(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function u_(u){if(!/^0x[a-fA-F0-9]{40}$/.test(u))throw new Error(`@supabase/auth-js: Address "${u}" is invalid.`);return u.toLowerCase()}function X0(u){return parseInt(u,16)}function Q0(u){const a=new TextEncoder().encode(u);return"0x"+Array.from(a,l=>l.toString(16).padStart(2,"0")).join("")}function J0(u){var a;const{chainId:o,domain:l,expirationTime:d,issuedAt:f=new Date,nonce:g,notBefore:b,requestId:w,resources:x,scheme:C,uri:E,version:z}=u;{if(!Number.isInteger(o))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${o}`);if(!l)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(g&&g.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${g}`);if(!E)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(z!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${z}`);if(!((a=u.statement)===null||a===void 0)&&a.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${u.statement}`)}const R=u_(u.address),q=C?`${C}://${l}`:l,P=u.statement?`${u.statement}
`:"",W=`${q} wants you to sign in with your Ethereum account:
${R}

${P}`;let G=`URI: ${E}
Version: ${z}
Chain ID: ${o}${g?`
Nonce: ${g}`:""}
Issued At: ${f.toISOString()}`;if(d&&(G+=`
Expiration Time: ${d.toISOString()}`),b&&(G+=`
Not Before: ${b.toISOString()}`),w&&(G+=`
Request ID: ${w}`),x){let K=`
Resources:`;for(const B of x){if(!B||typeof B!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${B}`);K+=`
- ${B}`}G+=K}return`${W}
${G}`}class Ee extends Error{constructor({message:a,code:o,cause:l,name:d}){var f;super(a,{cause:l}),this.__isWebAuthnError=!0,this.name=(f=d??(l instanceof Error?l.name:void 0))!==null&&f!==void 0?f:"Unknown Error",this.code=o}}class Nu extends Ee{constructor(a,o){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:o,message:a}),this.name="WebAuthnUnknownError",this.originalError=o}}function F0({error:u,options:a}){var o,l,d;const{publicKey:f}=a;if(!f)throw Error("options was missing required publicKey property");if(u.name==="AbortError"){if(a.signal instanceof AbortSignal)return new Ee({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:u})}else if(u.name==="ConstraintError"){if(((o=f.authenticatorSelection)===null||o===void 0?void 0:o.requireResidentKey)===!0)return new Ee({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:u});if(a.mediation==="conditional"&&((l=f.authenticatorSelection)===null||l===void 0?void 0:l.userVerification)==="required")return new Ee({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:u});if(((d=f.authenticatorSelection)===null||d===void 0?void 0:d.userVerification)==="required")return new Ee({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:u})}else{if(u.name==="InvalidStateError")return new Ee({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:u});if(u.name==="NotAllowedError")return new Ee({message:u.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:u});if(u.name==="NotSupportedError")return f.pubKeyCredParams.filter(b=>b.type==="public-key").length===0?new Ee({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:u}):new Ee({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:u});if(u.name==="SecurityError"){const g=window.location.hostname;if(c_(g)){if(f.rp.id!==g)return new Ee({message:`The RP ID "${f.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:u})}else return new Ee({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:u})}else if(u.name==="TypeError"){if(f.user.id.byteLength<1||f.user.id.byteLength>64)return new Ee({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:u})}else if(u.name==="UnknownError")return new Ee({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:u})}return new Ee({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:u})}function tb({error:u,options:a}){const{publicKey:o}=a;if(!o)throw Error("options was missing required publicKey property");if(u.name==="AbortError"){if(a.signal instanceof AbortSignal)return new Ee({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:u})}else{if(u.name==="NotAllowedError")return new Ee({message:u.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:u});if(u.name==="SecurityError"){const l=window.location.hostname;if(c_(l)){if(o.rpId!==l)return new Ee({message:`The RP ID "${o.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:u})}else return new Ee({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:u})}else if(u.name==="UnknownError")return new Ee({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:u})}return new Ee({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:u})}class eb{createNewAbortSignal(){if(this.controller){const o=new Error("Cancelling existing WebAuthn API call for new one");o.name="AbortError",this.controller.abort(o)}const a=new AbortController;return this.controller=a,a.signal}cancelCeremony(){if(this.controller){const a=new Error("Manually cancelling existing WebAuthn API call");a.name="AbortError",this.controller.abort(a),this.controller=void 0}}}const nb=new eb;function ib(u){if(!u)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(u);const{challenge:a,user:o,excludeCredentials:l}=u,d=Os(u,["challenge","user","excludeCredentials"]),f=Ss(a).buffer,g=Object.assign(Object.assign({},o),{id:Ss(o.id).buffer}),b=Object.assign(Object.assign({},d),{challenge:f,user:g});if(l&&l.length>0){b.excludeCredentials=new Array(l.length);for(let w=0;w<l.length;w++){const x=l[w];b.excludeCredentials[w]=Object.assign(Object.assign({},x),{id:Ss(x.id).buffer,type:x.type||"public-key",transports:x.transports})}}return b}function ab(u){if(!u)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(u);const{challenge:a,allowCredentials:o}=u,l=Os(u,["challenge","allowCredentials"]),d=Ss(a).buffer,f=Object.assign(Object.assign({},l),{challenge:d});if(o&&o.length>0){f.allowCredentials=new Array(o.length);for(let g=0;g<o.length;g++){const b=o[g];f.allowCredentials[g]=Object.assign(Object.assign({},b),{id:Ss(b.id).buffer,type:b.type||"public-key",transports:b.transports})}}return f}function rb(u){var a;if("toJSON"in u&&typeof u.toJSON=="function")return u.toJSON();const o=u;return{id:u.id,rawId:u.id,response:{attestationObject:xr(new Uint8Array(u.response.attestationObject)),clientDataJSON:xr(new Uint8Array(u.response.clientDataJSON))},type:"public-key",clientExtensionResults:u.getClientExtensionResults(),authenticatorAttachment:(a=o.authenticatorAttachment)!==null&&a!==void 0?a:void 0}}function sb(u){var a;if("toJSON"in u&&typeof u.toJSON=="function")return u.toJSON();const o=u,l=u.getClientExtensionResults(),d=u.response;return{id:u.id,rawId:u.id,response:{authenticatorData:xr(new Uint8Array(d.authenticatorData)),clientDataJSON:xr(new Uint8Array(d.clientDataJSON)),signature:xr(new Uint8Array(d.signature)),userHandle:d.userHandle?xr(new Uint8Array(d.userHandle)):void 0},type:"public-key",clientExtensionResults:l,authenticatorAttachment:(a=o.authenticatorAttachment)!==null&&a!==void 0?a:void 0}}function c_(u){return u==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(u)}function hg(){var u,a;return!!(bn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((u=navigator?.credentials)===null||u===void 0?void 0:u.create)=="function"&&typeof((a=navigator?.credentials)===null||a===void 0?void 0:a.get)=="function")}async function ob(u){try{const a=await navigator.credentials.create(u);return a?a instanceof PublicKeyCredential?{data:a,error:null}:{data:null,error:new Nu("Browser returned unexpected credential type",a)}:{data:null,error:new Nu("Empty credential response",a)}}catch(a){return{data:null,error:F0({error:a,options:u})}}}async function lb(u){try{const a=await navigator.credentials.get(u);return a?a instanceof PublicKeyCredential?{data:a,error:null}:{data:null,error:new Nu("Browser returned unexpected credential type",a)}:{data:null,error:new Nu("Empty credential response",a)}}catch(a){return{data:null,error:tb({error:a,options:u})}}}const ub={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},cb={userVerification:"preferred",hints:["security-key"]};function Pu(...u){const a=d=>d!==null&&typeof d=="object"&&!Array.isArray(d),o=d=>d instanceof ArrayBuffer||ArrayBuffer.isView(d),l={};for(const d of u)if(d)for(const f in d){const g=d[f];if(g!==void 0)if(Array.isArray(g))l[f]=g;else if(o(g))l[f]=g;else if(a(g)){const b=l[f];a(b)?l[f]=Pu(b,g):l[f]=Pu(g)}else l[f]=g}return l}function hb(u,a){return Pu(ub,u,a||{})}function db(u,a){return Pu(cb,u,a||{})}class fb{constructor(a){this.client=a,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(a){return this.client.mfa.enroll(Object.assign(Object.assign({},a),{factorType:"webauthn"}))}async _challenge({factorId:a,webauthn:o,friendlyName:l,signal:d},f){try{const{data:g,error:b}=await this.client.mfa.challenge({factorId:a,webauthn:o});if(!g)return{data:null,error:b};const w=d??nb.createNewAbortSignal();if(g.webauthn.type==="create"){const{user:x}=g.webauthn.credential_options.publicKey;x.name||(x.name=`${x.id}:${l}`),x.displayName||(x.displayName=x.name)}switch(g.webauthn.type){case"create":{const x=hb(g.webauthn.credential_options.publicKey,f?.create),{data:C,error:E}=await ob({publicKey:x,signal:w});return C?{data:{factorId:a,challengeId:g.id,webauthn:{type:g.webauthn.type,credential_response:C}},error:null}:{data:null,error:E}}case"request":{const x=db(g.webauthn.credential_options.publicKey,f?.request),{data:C,error:E}=await lb(Object.assign(Object.assign({},g.webauthn.credential_options),{publicKey:x,signal:w}));return C?{data:{factorId:a,challengeId:g.id,webauthn:{type:g.webauthn.type,credential_response:C}},error:null}:{data:null,error:E}}}}catch(g){return vt(g)?{data:null,error:g}:{data:null,error:new br("Unexpected error in challenge",g)}}}async _verify({challengeId:a,factorId:o,webauthn:l}){return this.client.mfa.verify({factorId:o,challengeId:a,webauthn:l})}async _authenticate({factorId:a,webauthn:{rpId:o=typeof window<"u"?window.location.hostname:void 0,rpOrigins:l=typeof window<"u"?[window.location.origin]:void 0,signal:d}},f){if(!o)return{data:null,error:new $o("rpId is required for WebAuthn authentication")};try{if(!hg())return{data:null,error:new br("Browser does not support WebAuthn",null)};const{data:g,error:b}=await this.challenge({factorId:a,webauthn:{rpId:o,rpOrigins:l},signal:d},{request:f});if(!g)return{data:null,error:b};const{webauthn:w}=g;return this._verify({factorId:a,challengeId:g.challengeId,webauthn:{type:w.type,rpId:o,rpOrigins:l,credential_response:w.credential_response}})}catch(g){return vt(g)?{data:null,error:g}:{data:null,error:new br("Unexpected error in authenticate",g)}}}async _register({friendlyName:a,rpId:o=typeof window<"u"?window.location.hostname:void 0,rpOrigins:l=typeof window<"u"?[window.location.origin]:void 0,signal:d},f){if(!o)return{data:null,error:new $o("rpId is required for WebAuthn registration")};try{if(!hg())return{data:null,error:new br("Browser does not support WebAuthn",null)};const{data:g,error:b}=await this._enroll({friendlyName:a});if(!g)return await this.client.mfa.listFactors().then(C=>{var E;return(E=C.data)===null||E===void 0?void 0:E.all.find(z=>z.factor_type==="webauthn"&&z.friendly_name===a&&z.status!=="unverified")}).then(C=>C?this.client.mfa.unenroll({factorId:C?.id}):void 0),{data:null,error:b};const{data:w,error:x}=await this._challenge({factorId:g.id,friendlyName:g.friendly_name,webauthn:{rpId:o,rpOrigins:l},signal:d},{create:f});return w?this._verify({factorId:g.id,challengeId:w.challengeId,webauthn:{rpId:o,rpOrigins:l,type:w.webauthn.type,credential_response:w.webauthn.credential_response}}):{data:null,error:x}}catch(g){return vt(g)?{data:null,error:g}:{data:null,error:new br("Unexpected error in register",g)}}}}K0();const pb={url:h0,storageKey:d0,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:f0,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function dg(u,a,o){return await o()}const bs={};class Yo{get jwks(){var a,o;return(o=(a=bs[this.storageKey])===null||a===void 0?void 0:a.jwks)!==null&&o!==void 0?o:{keys:[]}}set jwks(a){bs[this.storageKey]=Object.assign(Object.assign({},bs[this.storageKey]),{jwks:a})}get jwks_cached_at(){var a,o;return(o=(a=bs[this.storageKey])===null||a===void 0?void 0:a.cachedAt)!==null&&o!==void 0?o:Number.MIN_SAFE_INTEGER}set jwks_cached_at(a){bs[this.storageKey]=Object.assign(Object.assign({},bs[this.storageKey]),{cachedAt:a})}constructor(a){var o,l;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Yo.nextInstanceID,Yo.nextInstanceID+=1,this.instanceID>0&&bn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const d=Object.assign(Object.assign({},pb),a);if(this.logDebugMessages=!!d.debug,typeof d.debug=="function"&&(this.logger=d.debug),this.persistSession=d.persistSession,this.storageKey=d.storageKey,this.autoRefreshToken=d.autoRefreshToken,this.admin=new $0({url:d.url,headers:d.headers,fetch:d.fetch}),this.url=d.url,this.headers=d.headers,this.fetch=o_(d.fetch),this.lock=d.lock||dg,this.detectSessionInUrl=d.detectSessionInUrl,this.flowType=d.flowType,this.hasCustomAuthorizationHeader=d.hasCustomAuthorizationHeader,d.lock?this.lock=d.lock:bn()&&(!((o=globalThis?.navigator)===null||o===void 0)&&o.locks)?this.lock=W0:this.lock=dg,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new fb(this)},this.persistSession?(d.storage?this.storage=d.storage:s_()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=cg(this.memoryStorage)),d.userStorage&&(this.userStorage=d.userStorage)):(this.memoryStorage={},this.storage=cg(this.memoryStorage)),bn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(f){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",f)}(l=this.broadcastChannel)===null||l===void 0||l.addEventListener("message",async f=>{this._debug("received broadcast notification from other tab or client",f),await this._notifyAllSubscribers(f.data.event,f.data.session,!1)})}this.initialize()}_debug(...a){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${i_}) ${new Date().toISOString()}`,...a),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var a;try{const o=O0(window.location.href);let l="none";if(this._isImplicitGrantCallback(o)?l="implicit":await this._isPKCECallback(o)&&(l="pkce"),bn()&&this.detectSessionInUrl&&l!=="none"){const{data:d,error:f}=await this._getSessionFromURL(o,l);if(f){if(this._debug("#_initialize()","error detecting session from URL",f),v0(f)){const w=(a=f.details)===null||a===void 0?void 0:a.code;if(w==="identity_already_exists"||w==="identity_not_found"||w==="single_identity_not_deletable")return{error:f}}return await this._removeSession(),{error:f}}const{session:g,redirectType:b}=d;return this._debug("#_initialize()","detected session in URL",g,"redirect type",b),await this._saveSession(g),setTimeout(async()=>{b==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",g):await this._notifyAllSubscribers("SIGNED_IN",g)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(o){return vt(o)?{error:o}:{error:new br("Unexpected error during initialization",o)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(a){var o,l,d;try{const f=await Et(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(l=(o=a?.options)===null||o===void 0?void 0:o.data)!==null&&l!==void 0?l:{},gotrue_meta_security:{captcha_token:(d=a?.options)===null||d===void 0?void 0:d.captchaToken}},xform:Gn}),{data:g,error:b}=f;if(b||!g)return{data:{user:null,session:null},error:b};const w=g.session,x=g.user;return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",w)),{data:{user:x,session:w},error:null}}catch(f){if(vt(f))return{data:{user:null,session:null},error:f};throw f}}async signUp(a){var o,l,d;try{let f;if("email"in a){const{email:C,password:E,options:z}=a;let R=null,q=null;this.flowType==="pkce"&&([R,q]=await _s(this.storage,this.storageKey)),f=await Et(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:z?.emailRedirectTo,body:{email:C,password:E,data:(o=z?.data)!==null&&o!==void 0?o:{},gotrue_meta_security:{captcha_token:z?.captchaToken},code_challenge:R,code_challenge_method:q},xform:Gn})}else if("phone"in a){const{phone:C,password:E,options:z}=a;f=await Et(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:C,password:E,data:(l=z?.data)!==null&&l!==void 0?l:{},channel:(d=z?.channel)!==null&&d!==void 0?d:"sms",gotrue_meta_security:{captcha_token:z?.captchaToken}},xform:Gn})}else throw new Lu("You must provide either an email or phone number and a password");const{data:g,error:b}=f;if(b||!g)return{data:{user:null,session:null},error:b};const w=g.session,x=g.user;return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",w)),{data:{user:x,session:w},error:null}}catch(f){if(vt(f))return{data:{user:null,session:null},error:f};throw f}}async signInWithPassword(a){try{let o;if("email"in a){const{email:f,password:g,options:b}=a;o=await Et(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:f,password:g,gotrue_meta_security:{captcha_token:b?.captchaToken}},xform:lg})}else if("phone"in a){const{phone:f,password:g,options:b}=a;o=await Et(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:f,password:g,gotrue_meta_security:{captcha_token:b?.captchaToken}},xform:lg})}else throw new Lu("You must provide either an email or phone number and a password");const{data:l,error:d}=o;return d?{data:{user:null,session:null},error:d}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new gs}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:Object.assign({user:l.user,session:l.session},l.weak_password?{weakPassword:l.weak_password}:null),error:d})}catch(o){if(vt(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithOAuth(a){var o,l,d,f;return await this._handleProviderSignIn(a.provider,{redirectTo:(o=a.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=a.options)===null||l===void 0?void 0:l.scopes,queryParams:(d=a.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:(f=a.options)===null||f===void 0?void 0:f.skipBrowserRedirect})}async exchangeCodeForSession(a){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(a))}async signInWithWeb3(a){const{chain:o}=a;switch(o){case"ethereum":return await this.signInWithEthereum(a);case"solana":return await this.signInWithSolana(a);default:throw new Error(`@supabase/auth-js: Unsupported chain "${o}"`)}}async signInWithEthereum(a){var o,l,d,f,g,b,w,x,C,E,z;let R,q;if("message"in a)R=a.message,q=a.signature;else{const{chain:P,wallet:W,statement:G,options:K}=a;let B;if(bn())if(typeof W=="object")B=W;else{const qt=window;if("ethereum"in qt&&typeof qt.ethereum=="object"&&"request"in qt.ethereum&&typeof qt.ethereum.request=="function")B=qt.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof W!="object"||!K?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");B=W}const ot=new URL((o=K?.url)!==null&&o!==void 0?o:window.location.href),_t=await B.request({method:"eth_requestAccounts"}).then(qt=>qt).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!_t||_t.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const ht=u_(_t[0]);let ct=(l=K?.signInWithEthereum)===null||l===void 0?void 0:l.chainId;if(!ct){const qt=await B.request({method:"eth_chainId"});ct=X0(qt)}const Ht={domain:ot.host,address:ht,statement:G,uri:ot.href,version:"1",chainId:ct,nonce:(d=K?.signInWithEthereum)===null||d===void 0?void 0:d.nonce,issuedAt:(g=(f=K?.signInWithEthereum)===null||f===void 0?void 0:f.issuedAt)!==null&&g!==void 0?g:new Date,expirationTime:(b=K?.signInWithEthereum)===null||b===void 0?void 0:b.expirationTime,notBefore:(w=K?.signInWithEthereum)===null||w===void 0?void 0:w.notBefore,requestId:(x=K?.signInWithEthereum)===null||x===void 0?void 0:x.requestId,resources:(C=K?.signInWithEthereum)===null||C===void 0?void 0:C.resources};R=J0(Ht),q=await B.request({method:"personal_sign",params:[Q0(R),ht]})}try{const{data:P,error:W}=await Et(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:R,signature:q},!((E=a.options)===null||E===void 0)&&E.captchaToken?{gotrue_meta_security:{captcha_token:(z=a.options)===null||z===void 0?void 0:z.captchaToken}}:null),xform:Gn});if(W)throw W;return!P||!P.session||!P.user?{data:{user:null,session:null},error:new gs}:(P.session&&(await this._saveSession(P.session),await this._notifyAllSubscribers("SIGNED_IN",P.session)),{data:Object.assign({},P),error:W})}catch(P){if(vt(P))return{data:{user:null,session:null},error:P};throw P}}async signInWithSolana(a){var o,l,d,f,g,b,w,x,C,E,z,R;let q,P;if("message"in a)q=a.message,P=a.signature;else{const{chain:W,wallet:G,statement:K,options:B}=a;let ot;if(bn())if(typeof G=="object")ot=G;else{const ht=window;if("solana"in ht&&typeof ht.solana=="object"&&("signIn"in ht.solana&&typeof ht.solana.signIn=="function"||"signMessage"in ht.solana&&typeof ht.solana.signMessage=="function"))ot=ht.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof G!="object"||!B?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");ot=G}const _t=new URL((o=B?.url)!==null&&o!==void 0?o:window.location.href);if("signIn"in ot&&ot.signIn){const ht=await ot.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},B?.signInWithSolana),{version:"1",domain:_t.host,uri:_t.href}),K?{statement:K}:null));let ct;if(Array.isArray(ht)&&ht[0]&&typeof ht[0]=="object")ct=ht[0];else if(ht&&typeof ht=="object"&&"signedMessage"in ht&&"signature"in ht)ct=ht;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in ct&&"signature"in ct&&(typeof ct.signedMessage=="string"||ct.signedMessage instanceof Uint8Array)&&ct.signature instanceof Uint8Array)q=typeof ct.signedMessage=="string"?ct.signedMessage:new TextDecoder().decode(ct.signedMessage),P=ct.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in ot)||typeof ot.signMessage!="function"||!("publicKey"in ot)||typeof ot!="object"||!ot.publicKey||!("toBase58"in ot.publicKey)||typeof ot.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");q=[`${_t.host} wants you to sign in with your Solana account:`,ot.publicKey.toBase58(),...K?["",K,""]:[""],"Version: 1",`URI: ${_t.href}`,`Issued At: ${(d=(l=B?.signInWithSolana)===null||l===void 0?void 0:l.issuedAt)!==null&&d!==void 0?d:new Date().toISOString()}`,...!((f=B?.signInWithSolana)===null||f===void 0)&&f.notBefore?[`Not Before: ${B.signInWithSolana.notBefore}`]:[],...!((g=B?.signInWithSolana)===null||g===void 0)&&g.expirationTime?[`Expiration Time: ${B.signInWithSolana.expirationTime}`]:[],...!((b=B?.signInWithSolana)===null||b===void 0)&&b.chainId?[`Chain ID: ${B.signInWithSolana.chainId}`]:[],...!((w=B?.signInWithSolana)===null||w===void 0)&&w.nonce?[`Nonce: ${B.signInWithSolana.nonce}`]:[],...!((x=B?.signInWithSolana)===null||x===void 0)&&x.requestId?[`Request ID: ${B.signInWithSolana.requestId}`]:[],...!((E=(C=B?.signInWithSolana)===null||C===void 0?void 0:C.resources)===null||E===void 0)&&E.length?["Resources",...B.signInWithSolana.resources.map(ct=>`- ${ct}`)]:[]].join(`
`);const ht=await ot.signMessage(new TextEncoder().encode(q),"utf8");if(!ht||!(ht instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");P=ht}}try{const{data:W,error:G}=await Et(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:q,signature:xr(P)},!((z=a.options)===null||z===void 0)&&z.captchaToken?{gotrue_meta_security:{captcha_token:(R=a.options)===null||R===void 0?void 0:R.captchaToken}}:null),xform:Gn});if(G)throw G;return!W||!W.session||!W.user?{data:{user:null,session:null},error:new gs}:(W.session&&(await this._saveSession(W.session),await this._notifyAllSubscribers("SIGNED_IN",W.session)),{data:Object.assign({},W),error:G})}catch(W){if(vt(W))return{data:{user:null,session:null},error:W};throw W}}async _exchangeCodeForSession(a){const o=await _r(this.storage,`${this.storageKey}-code-verifier`),[l,d]=(o??"").split("/");try{const{data:f,error:g}=await Et(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:a,code_verifier:l},xform:Gn});if(await Sa(this.storage,`${this.storageKey}-code-verifier`),g)throw g;return!f||!f.session||!f.user?{data:{user:null,session:null,redirectType:null},error:new gs}:(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",f.session)),{data:Object.assign(Object.assign({},f),{redirectType:d??null}),error:g})}catch(f){if(vt(f))return{data:{user:null,session:null,redirectType:null},error:f};throw f}}async signInWithIdToken(a){try{const{options:o,provider:l,token:d,access_token:f,nonce:g}=a,b=await Et(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:l,id_token:d,access_token:f,nonce:g,gotrue_meta_security:{captcha_token:o?.captchaToken}},xform:Gn}),{data:w,error:x}=b;return x?{data:{user:null,session:null},error:x}:!w||!w.session||!w.user?{data:{user:null,session:null},error:new gs}:(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),{data:w,error:x})}catch(o){if(vt(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithOtp(a){var o,l,d,f,g;try{if("email"in a){const{email:b,options:w}=a;let x=null,C=null;this.flowType==="pkce"&&([x,C]=await _s(this.storage,this.storageKey));const{error:E}=await Et(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:b,data:(o=w?.data)!==null&&o!==void 0?o:{},create_user:(l=w?.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:w?.captchaToken},code_challenge:x,code_challenge_method:C},redirectTo:w?.emailRedirectTo});return{data:{user:null,session:null},error:E}}if("phone"in a){const{phone:b,options:w}=a,{data:x,error:C}=await Et(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:b,data:(d=w?.data)!==null&&d!==void 0?d:{},create_user:(f=w?.shouldCreateUser)!==null&&f!==void 0?f:!0,gotrue_meta_security:{captcha_token:w?.captchaToken},channel:(g=w?.channel)!==null&&g!==void 0?g:"sms"}});return{data:{user:null,session:null,messageId:x?.message_id},error:C}}throw new Lu("You must provide either an email or phone number.")}catch(b){if(vt(b))return{data:{user:null,session:null},error:b};throw b}}async verifyOtp(a){var o,l;try{let d,f;"options"in a&&(d=(o=a.options)===null||o===void 0?void 0:o.redirectTo,f=(l=a.options)===null||l===void 0?void 0:l.captchaToken);const{data:g,error:b}=await Et(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},a),{gotrue_meta_security:{captcha_token:f}}),redirectTo:d,xform:Gn});if(b)throw b;if(!g)throw new Error("An error occurred on token verification.");const w=g.session,x=g.user;return w?.access_token&&(await this._saveSession(w),await this._notifyAllSubscribers(a.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",w)),{data:{user:x,session:w},error:null}}catch(d){if(vt(d))return{data:{user:null,session:null},error:d};throw d}}async signInWithSSO(a){var o,l,d;try{let f=null,g=null;return this.flowType==="pkce"&&([f,g]=await _s(this.storage,this.storageKey)),await Et(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in a?{provider_id:a.providerId}:null),"domain"in a?{domain:a.domain}:null),{redirect_to:(l=(o=a.options)===null||o===void 0?void 0:o.redirectTo)!==null&&l!==void 0?l:void 0}),!((d=a?.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:a.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:f,code_challenge_method:g}),headers:this.headers,xform:I0})}catch(f){if(vt(f))return{data:null,error:f};throw f}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async a=>{const{data:{session:o},error:l}=a;if(l)throw l;if(!o)throw new Ta;const{error:d}=await Et(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:o.access_token});return{data:{user:null,session:null},error:d}})}catch(a){if(vt(a))return{data:{user:null,session:null},error:a};throw a}}async resend(a){try{const o=`${this.url}/resend`;if("email"in a){const{email:l,type:d,options:f}=a,{error:g}=await Et(this.fetch,"POST",o,{headers:this.headers,body:{email:l,type:d,gotrue_meta_security:{captcha_token:f?.captchaToken}},redirectTo:f?.emailRedirectTo});return{data:{user:null,session:null},error:g}}else if("phone"in a){const{phone:l,type:d,options:f}=a,{data:g,error:b}=await Et(this.fetch,"POST",o,{headers:this.headers,body:{phone:l,type:d,gotrue_meta_security:{captcha_token:f?.captchaToken}}});return{data:{user:null,session:null,messageId:g?.message_id},error:b}}throw new Lu("You must provide either an email or phone number and a type")}catch(o){if(vt(o))return{data:{user:null,session:null},error:o};throw o}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async o=>o))}async _acquireLock(a,o){this._debug("#_acquireLock","begin",a);try{if(this.lockAcquired){const l=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),d=(async()=>(await l,await o()))();return this.pendingInLock.push((async()=>{try{await d}catch{}})()),d}return await this.lock(`lock:${this.storageKey}`,a,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const l=o();for(this.pendingInLock.push((async()=>{try{await l}catch{}})()),await l;this.pendingInLock.length;){const d=[...this.pendingInLock];await Promise.all(d),this.pendingInLock.splice(0,d.length)}return await l}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(a){this._debug("#_useSession","begin");try{const o=await this.__loadSession();return await a(o)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let a=null;const o=await _r(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",o),o!==null&&(this._isValidSession(o)?a=o:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!a)return{data:{session:null},error:null};const l=a.expires_at?a.expires_at*1e3-Date.now()<td:!1;if(this._debug("#__loadSession()",`session has${l?"":" not"} expired`,"expires_at",a.expires_at),!l){if(this.userStorage){const g=await _r(this.userStorage,this.storageKey+"-user");g?.user?a.user=g.user:a.user=id()}if(this.storage.isServer&&a.user){let g=this.suppressGetSessionWarning;a=new Proxy(a,{get:(w,x,C)=>(!g&&x==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),g=!0,this.suppressGetSessionWarning=!0),Reflect.get(w,x,C))})}return{data:{session:a},error:null}}const{data:d,error:f}=await this._callRefreshToken(a.refresh_token);return f?{data:{session:null},error:f}:{data:{session:d},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(a){return a?await this._getUser(a):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(a){try{return a?await Et(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:a,xform:Ea}):await this._useSession(async o=>{var l,d,f;const{data:g,error:b}=o;if(b)throw b;return!(!((l=g.session)===null||l===void 0)&&l.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ta}:await Et(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(f=(d=g.session)===null||d===void 0?void 0:d.access_token)!==null&&f!==void 0?f:void 0,xform:Ea})})}catch(o){if(vt(o))return y0(o)&&(await this._removeSession(),await Sa(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:o};throw o}}async updateUser(a,o={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(a,o))}async _updateUser(a,o={}){try{return await this._useSession(async l=>{const{data:d,error:f}=l;if(f)throw f;if(!d.session)throw new Ta;const g=d.session;let b=null,w=null;this.flowType==="pkce"&&a.email!=null&&([b,w]=await _s(this.storage,this.storageKey));const{data:x,error:C}=await Et(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:o?.emailRedirectTo,body:Object.assign(Object.assign({},a),{code_challenge:b,code_challenge_method:w}),jwt:g.access_token,xform:Ea});if(C)throw C;return g.user=x.user,await this._saveSession(g),await this._notifyAllSubscribers("USER_UPDATED",g),{data:{user:g.user},error:null}})}catch(l){if(vt(l))return{data:{user:null},error:l};throw l}}async setSession(a){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(a))}async _setSession(a){try{if(!a.access_token||!a.refresh_token)throw new Ta;const o=Date.now()/1e3;let l=o,d=!0,f=null;const{payload:g}=nd(a.access_token);if(g.exp&&(l=g.exp,d=l<=o),d){const{data:b,error:w}=await this._callRefreshToken(a.refresh_token);if(w)return{data:{user:null,session:null},error:w};if(!b)return{data:{user:null,session:null},error:null};f=b}else{const{data:b,error:w}=await this._getUser(a.access_token);if(w)throw w;f={access_token:a.access_token,refresh_token:a.refresh_token,user:b.user,token_type:"bearer",expires_in:l-o,expires_at:l},await this._saveSession(f),await this._notifyAllSubscribers("SIGNED_IN",f)}return{data:{user:f.user,session:f},error:null}}catch(o){if(vt(o))return{data:{session:null,user:null},error:o};throw o}}async refreshSession(a){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(a))}async _refreshSession(a){try{return await this._useSession(async o=>{var l;if(!a){const{data:g,error:b}=o;if(b)throw b;a=(l=g.session)!==null&&l!==void 0?l:void 0}if(!a?.refresh_token)throw new Ta;const{data:d,error:f}=await this._callRefreshToken(a.refresh_token);return f?{data:{user:null,session:null},error:f}:d?{data:{user:d.user,session:d},error:null}:{data:{user:null,session:null},error:null}})}catch(o){if(vt(o))return{data:{user:null,session:null},error:o};throw o}}async _getSessionFromURL(a,o){try{if(!bn())throw new ku("No browser detected.");if(a.error||a.error_description||a.error_code)throw new ku(a.error_description||"Error in URL with unspecified error_description",{error:a.error||"unspecified_error",code:a.error_code||"unspecified_code"});switch(o){case"implicit":if(this.flowType==="pkce")throw new eg("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ku("Not a valid implicit grant flow url.");break;default:}if(o==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!a.code)throw new eg("No code detected.");const{data:K,error:B}=await this._exchangeCodeForSession(a.code);if(B)throw B;const ot=new URL(window.location.href);return ot.searchParams.delete("code"),window.history.replaceState(window.history.state,"",ot.toString()),{data:{session:K.session,redirectType:null},error:null}}const{provider_token:l,provider_refresh_token:d,access_token:f,refresh_token:g,expires_in:b,expires_at:w,token_type:x}=a;if(!f||!b||!g||!x)throw new ku("No session defined in URL");const C=Math.round(Date.now()/1e3),E=parseInt(b);let z=C+E;w&&(z=parseInt(w));const R=z-C;R*1e3<=xs&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${R}s, should have been closer to ${E}s`);const q=z-E;C-q>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",q,z,C):C-q<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",q,z,C);const{data:P,error:W}=await this._getUser(f);if(W)throw W;const G={provider_token:l,provider_refresh_token:d,access_token:f,expires_in:E,expires_at:z,refresh_token:g,token_type:x,user:P.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:G,redirectType:a.type},error:null}}catch(l){if(vt(l))return{data:{session:null,redirectType:null},error:l};throw l}}_isImplicitGrantCallback(a){return!!(a.access_token||a.error_description)}async _isPKCECallback(a){const o=await _r(this.storage,`${this.storageKey}-code-verifier`);return!!(a.code&&o)}async signOut(a={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(a))}async _signOut({scope:a}={scope:"global"}){return await this._useSession(async o=>{var l;const{data:d,error:f}=o;if(f)return{error:f};const g=(l=d.session)===null||l===void 0?void 0:l.access_token;if(g){const{error:b}=await this.admin.signOut(g,a);if(b&&!(_0(b)&&(b.status===404||b.status===401||b.status===403)))return{error:b}}return a!=="others"&&(await this._removeSession(),await Sa(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(a){const o=C0(),l={id:o,callback:a,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",o),this.stateChangeEmitters.delete(o)}};return this._debug("#onAuthStateChange()","registered callback with id",o),this.stateChangeEmitters.set(o,l),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(o)})))(),{data:{subscription:l}}}async _emitInitialSession(a){return await this._useSession(async o=>{var l,d;try{const{data:{session:f},error:g}=o;if(g)throw g;await((l=this.stateChangeEmitters.get(a))===null||l===void 0?void 0:l.callback("INITIAL_SESSION",f)),this._debug("INITIAL_SESSION","callback id",a,"session",f)}catch(f){await((d=this.stateChangeEmitters.get(a))===null||d===void 0?void 0:d.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",a,"error",f),console.error(f)}})}async resetPasswordForEmail(a,o={}){let l=null,d=null;this.flowType==="pkce"&&([l,d]=await _s(this.storage,this.storageKey,!0));try{return await Et(this.fetch,"POST",`${this.url}/recover`,{body:{email:a,code_challenge:l,code_challenge_method:d,gotrue_meta_security:{captcha_token:o.captchaToken}},headers:this.headers,redirectTo:o.redirectTo})}catch(f){if(vt(f))return{data:null,error:f};throw f}}async getUserIdentities(){var a;try{const{data:o,error:l}=await this.getUser();if(l)throw l;return{data:{identities:(a=o.user.identities)!==null&&a!==void 0?a:[]},error:null}}catch(o){if(vt(o))return{data:null,error:o};throw o}}async linkIdentity(a){return"token"in a?this.linkIdentityIdToken(a):this.linkIdentityOAuth(a)}async linkIdentityOAuth(a){var o;try{const{data:l,error:d}=await this._useSession(async f=>{var g,b,w,x,C;const{data:E,error:z}=f;if(z)throw z;const R=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,a.provider,{redirectTo:(g=a.options)===null||g===void 0?void 0:g.redirectTo,scopes:(b=a.options)===null||b===void 0?void 0:b.scopes,queryParams:(w=a.options)===null||w===void 0?void 0:w.queryParams,skipBrowserRedirect:!0});return await Et(this.fetch,"GET",R,{headers:this.headers,jwt:(C=(x=E.session)===null||x===void 0?void 0:x.access_token)!==null&&C!==void 0?C:void 0})});if(d)throw d;return bn()&&!(!((o=a.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(l?.url),{data:{provider:a.provider,url:l?.url},error:null}}catch(l){if(vt(l))return{data:{provider:a.provider,url:null},error:l};throw l}}async linkIdentityIdToken(a){return await this._useSession(async o=>{var l;try{const{error:d,data:{session:f}}=o;if(d)throw d;const{options:g,provider:b,token:w,access_token:x,nonce:C}=a,E=await Et(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(l=f?.access_token)!==null&&l!==void 0?l:void 0,body:{provider:b,id_token:w,access_token:x,nonce:C,link_identity:!0,gotrue_meta_security:{captcha_token:g?.captchaToken}},xform:Gn}),{data:z,error:R}=E;return R?{data:{user:null,session:null},error:R}:!z||!z.session||!z.user?{data:{user:null,session:null},error:new gs}:(z.session&&(await this._saveSession(z.session),await this._notifyAllSubscribers("USER_UPDATED",z.session)),{data:z,error:R})}catch(d){if(vt(d))return{data:{user:null,session:null},error:d};throw d}})}async unlinkIdentity(a){try{return await this._useSession(async o=>{var l,d;const{data:f,error:g}=o;if(g)throw g;return await Et(this.fetch,"DELETE",`${this.url}/user/identities/${a.identity_id}`,{headers:this.headers,jwt:(d=(l=f.session)===null||l===void 0?void 0:l.access_token)!==null&&d!==void 0?d:void 0})})}catch(o){if(vt(o))return{data:null,error:o};throw o}}async _refreshAccessToken(a){const o=`#_refreshAccessToken(${a.substring(0,5)}...)`;this._debug(o,"begin");try{const l=Date.now();return await z0(async d=>(d>0&&await A0(200*Math.pow(2,d-1)),this._debug(o,"refreshing attempt",d),await Et(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:a},headers:this.headers,xform:Gn})),(d,f)=>{const g=200*Math.pow(2,d);return f&&ed(f)&&Date.now()+g-l<xs})}catch(l){if(this._debug(o,"error",l),vt(l))return{data:{session:null,user:null},error:l};throw l}finally{this._debug(o,"end")}}_isValidSession(a){return typeof a=="object"&&a!==null&&"access_token"in a&&"refresh_token"in a&&"expires_at"in a}async _handleProviderSignIn(a,o){const l=await this._getUrlForProvider(`${this.url}/authorize`,a,{redirectTo:o.redirectTo,scopes:o.scopes,queryParams:o.queryParams});return this._debug("#_handleProviderSignIn()","provider",a,"options",o,"url",l),bn()&&!o.skipBrowserRedirect&&window.location.assign(l),{data:{provider:a,url:l},error:null}}async _recoverAndRefresh(){var a,o;const l="#_recoverAndRefresh()";this._debug(l,"begin");try{const d=await _r(this.storage,this.storageKey);if(d&&this.userStorage){let g=await _r(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!g&&(g={user:d.user},await ws(this.userStorage,this.storageKey+"-user",g)),d.user=(a=g?.user)!==null&&a!==void 0?a:id()}else if(d&&!d.user&&!d.user){const g=await _r(this.storage,this.storageKey+"-user");g&&g?.user?(d.user=g.user,await Sa(this.storage,this.storageKey+"-user"),await ws(this.storage,this.storageKey,d)):d.user=id()}if(this._debug(l,"session from storage",d),!this._isValidSession(d)){this._debug(l,"session is not valid"),d!==null&&await this._removeSession();return}const f=((o=d.expires_at)!==null&&o!==void 0?o:1/0)*1e3-Date.now()<td;if(this._debug(l,`session has${f?"":" not"} expired with margin of ${td}s`),f){if(this.autoRefreshToken&&d.refresh_token){const{error:g}=await this._callRefreshToken(d.refresh_token);g&&(console.error(g),ed(g)||(this._debug(l,"refresh failed with a non-retryable error, removing the session",g),await this._removeSession()))}}else if(d.user&&d.user.__isUserNotAvailableProxy===!0)try{const{data:g,error:b}=await this._getUser(d.access_token);!b&&g?.user?(d.user=g.user,await this._saveSession(d),await this._notifyAllSubscribers("SIGNED_IN",d)):this._debug(l,"could not get user data, skipping SIGNED_IN notification")}catch(g){console.error("Error getting user data:",g),this._debug(l,"error getting user data, skipping SIGNED_IN notification",g)}else await this._notifyAllSubscribers("SIGNED_IN",d)}catch(d){this._debug(l,"error",d),console.error(d);return}finally{this._debug(l,"end")}}async _callRefreshToken(a){var o,l;if(!a)throw new Ta;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const d=`#_callRefreshToken(${a.substring(0,5)}...)`;this._debug(d,"begin");try{this.refreshingDeferred=new qu;const{data:f,error:g}=await this._refreshAccessToken(a);if(g)throw g;if(!f.session)throw new Ta;await this._saveSession(f.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",f.session);const b={data:f.session,error:null};return this.refreshingDeferred.resolve(b),b}catch(f){if(this._debug(d,"error",f),vt(f)){const g={data:null,error:f};return ed(f)||await this._removeSession(),(o=this.refreshingDeferred)===null||o===void 0||o.resolve(g),g}throw(l=this.refreshingDeferred)===null||l===void 0||l.reject(f),f}finally{this.refreshingDeferred=null,this._debug(d,"end")}}async _notifyAllSubscribers(a,o,l=!0){const d=`#_notifyAllSubscribers(${a})`;this._debug(d,"begin",o,`broadcast = ${l}`);try{this.broadcastChannel&&l&&this.broadcastChannel.postMessage({event:a,session:o});const f=[],g=Array.from(this.stateChangeEmitters.values()).map(async b=>{try{await b.callback(a,o)}catch(w){f.push(w)}});if(await Promise.all(g),f.length>0){for(let b=0;b<f.length;b+=1)console.error(f[b]);throw f[0]}}finally{this._debug(d,"end")}}async _saveSession(a){this._debug("#_saveSession()",a),this.suppressGetSessionWarning=!0;const o=Object.assign({},a),l=o.user&&o.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!l&&o.user&&await ws(this.userStorage,this.storageKey+"-user",{user:o.user});const d=Object.assign({},o);delete d.user;const f=sg(d);await ws(this.storage,this.storageKey,f)}else{const d=sg(o);await ws(this.storage,this.storageKey,d)}}async _removeSession(){this._debug("#_removeSession()"),await Sa(this.storage,this.storageKey),await Sa(this.storage,this.storageKey+"-code-verifier"),await Sa(this.storage,this.storageKey+"-user"),this.userStorage&&await Sa(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const a=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{a&&bn()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",a)}catch(o){console.error("removing visibilitychange callback failed",o)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const a=setInterval(()=>this._autoRefreshTokenTick(),xs);this.autoRefreshTicker=a,a&&typeof a=="object"&&typeof a.unref=="function"?a.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(a),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const a=this.autoRefreshTicker;this.autoRefreshTicker=null,a&&clearInterval(a)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const a=Date.now();try{return await this._useSession(async o=>{const{data:{session:l}}=o;if(!l||!l.refresh_token||!l.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const d=Math.floor((l.expires_at*1e3-a)/xs);this._debug("#_autoRefreshTokenTick()",`access token expires in ${d} ticks, a tick lasts ${xs}ms, refresh threshold is ${md} ticks`),d<=md&&await this._callRefreshToken(l.refresh_token)})}catch(o){console.error("Auto refresh tick failed with error. This is likely a transient error.",o)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(a){if(a.isAcquireTimeout||a instanceof l_)this._debug("auto refresh token tick lock not available");else throw a}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!bn()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(a){console.error("_handleVisibilityChange",a)}}async _onVisibilityChanged(a){const o=`#_onVisibilityChanged(${a})`;this._debug(o,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),a||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(o,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(a,o,l){const d=[`provider=${encodeURIComponent(o)}`];if(l?.redirectTo&&d.push(`redirect_to=${encodeURIComponent(l.redirectTo)}`),l?.scopes&&d.push(`scopes=${encodeURIComponent(l.scopes)}`),this.flowType==="pkce"){const[f,g]=await _s(this.storage,this.storageKey),b=new URLSearchParams({code_challenge:`${encodeURIComponent(f)}`,code_challenge_method:`${encodeURIComponent(g)}`});d.push(b.toString())}if(l?.queryParams){const f=new URLSearchParams(l.queryParams);d.push(f.toString())}return l?.skipBrowserRedirect&&d.push(`skip_http_redirect=${l.skipBrowserRedirect}`),`${a}?${d.join("&")}`}async _unenroll(a){try{return await this._useSession(async o=>{var l;const{data:d,error:f}=o;return f?{data:null,error:f}:await Et(this.fetch,"DELETE",`${this.url}/factors/${a.factorId}`,{headers:this.headers,jwt:(l=d?.session)===null||l===void 0?void 0:l.access_token})})}catch(o){if(vt(o))return{data:null,error:o};throw o}}async _enroll(a){try{return await this._useSession(async o=>{var l,d;const{data:f,error:g}=o;if(g)return{data:null,error:g};const b=Object.assign({friendly_name:a.friendlyName,factor_type:a.factorType},a.factorType==="phone"?{phone:a.phone}:a.factorType==="totp"?{issuer:a.issuer}:{}),{data:w,error:x}=await Et(this.fetch,"POST",`${this.url}/factors`,{body:b,headers:this.headers,jwt:(l=f?.session)===null||l===void 0?void 0:l.access_token});return x?{data:null,error:x}:(a.factorType==="totp"&&w.type==="totp"&&(!((d=w?.totp)===null||d===void 0)&&d.qr_code)&&(w.totp.qr_code=`data:image/svg+xml;utf-8,${w.totp.qr_code}`),{data:w,error:null})})}catch(o){if(vt(o))return{data:null,error:o};throw o}}async _verify(a){return this._acquireLock(-1,async()=>{try{return await this._useSession(async o=>{var l;const{data:d,error:f}=o;if(f)return{data:null,error:f};const g=Object.assign({challenge_id:a.challengeId},"webauthn"in a?{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_response:a.webauthn.type==="create"?rb(a.webauthn.credential_response):sb(a.webauthn.credential_response)})}:{code:a.code}),{data:b,error:w}=await Et(this.fetch,"POST",`${this.url}/factors/${a.factorId}/verify`,{body:g,headers:this.headers,jwt:(l=d?.session)===null||l===void 0?void 0:l.access_token});return w?{data:null,error:w}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+b.expires_in},b)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",b),{data:b,error:w})})}catch(o){if(vt(o))return{data:null,error:o};throw o}})}async _challenge(a){return this._acquireLock(-1,async()=>{try{return await this._useSession(async o=>{var l;const{data:d,error:f}=o;if(f)return{data:null,error:f};const g=await Et(this.fetch,"POST",`${this.url}/factors/${a.factorId}/challenge`,{body:a,headers:this.headers,jwt:(l=d?.session)===null||l===void 0?void 0:l.access_token});if(g.error)return g;const{data:b}=g;if(b.type!=="webauthn")return{data:b,error:null};switch(b.webauthn.type){case"create":return{data:Object.assign(Object.assign({},b),{webauthn:Object.assign(Object.assign({},b.webauthn),{credential_options:Object.assign(Object.assign({},b.webauthn.credential_options),{publicKey:ib(b.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},b),{webauthn:Object.assign(Object.assign({},b.webauthn),{credential_options:Object.assign(Object.assign({},b.webauthn.credential_options),{publicKey:ab(b.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(o){if(vt(o))return{data:null,error:o};throw o}})}async _challengeAndVerify(a){const{data:o,error:l}=await this._challenge({factorId:a.factorId});return l?{data:null,error:l}:await this._verify({factorId:a.factorId,challengeId:o.id,code:a.code})}async _listFactors(){var a;const{data:{user:o},error:l}=await this.getUser();if(l)return{data:null,error:l};const d={all:[],phone:[],totp:[],webauthn:[]};for(const f of(a=o?.factors)!==null&&a!==void 0?a:[])d.all.push(f),f.status==="verified"&&d[f.factor_type].push(f);return{data:d,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async a=>{var o,l;const{data:{session:d},error:f}=a;if(f)return{data:null,error:f};if(!d)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:g}=nd(d.access_token);let b=null;g.aal&&(b=g.aal);let w=b;((l=(o=d.user.factors)===null||o===void 0?void 0:o.filter(E=>E.status==="verified"))!==null&&l!==void 0?l:[]).length>0&&(w="aal2");const C=g.amr||[];return{data:{currentLevel:b,nextLevel:w,currentAuthenticationMethods:C},error:null}}))}async fetchJwk(a,o={keys:[]}){let l=o.keys.find(b=>b.kid===a);if(l)return l;const d=Date.now();if(l=this.jwks.keys.find(b=>b.kid===a),l&&this.jwks_cached_at+m0>d)return l;const{data:f,error:g}=await Et(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(g)throw g;return!f.keys||f.keys.length===0||(this.jwks=f,this.jwks_cached_at=d,l=f.keys.find(b=>b.kid===a),!l)?null:l}async getClaims(a,o={}){try{let l=a;if(!l){const{data:R,error:q}=await this.getSession();if(q||!R.session)return{data:null,error:q};l=R.session.access_token}const{header:d,payload:f,signature:g,raw:{header:b,payload:w}}=nd(l);o?.allowExpired||N0(f.exp);const x=!d.alg||d.alg.startsWith("HS")||!d.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(d.kid,o?.keys?{keys:o.keys}:o?.jwks);if(!x){const{error:R}=await this.getUser(l);if(R)throw R;return{data:{claims:f,header:d,signature:g},error:null}}const C=P0(d.alg),E=await crypto.subtle.importKey("jwk",x,C,!0,["verify"]);if(!await crypto.subtle.verify(C,E,g,T0(`${b}.${w}`)))throw new yd("Invalid JWT signature");return{data:{claims:f,header:d,signature:g},error:null}}catch(l){if(vt(l))return{data:null,error:l};throw l}}}Yo.nextInstanceID=0;const mb=Yo;class gb extends mb{constructor(a){super(a)}}class _b{constructor(a,o,l){var d,f,g;this.supabaseUrl=a,this.supabaseKey=o;const b=c0(a);if(!o)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",b),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",b),this.storageUrl=new URL("storage/v1",b),this.functionsUrl=new URL("functions/v1",b);const w=`sb-${b.hostname.split(".")[0]}-auth-token`,x={db:n0,realtime:a0,auth:Object.assign(Object.assign({},i0),{storageKey:w}),global:e0},C=u0(l??{},x);this.storageKey=(d=C.auth.storageKey)!==null&&d!==void 0?d:"",this.headers=(f=C.global.headers)!==null&&f!==void 0?f:{},C.accessToken?(this.accessToken=C.accessToken,this.auth=new Proxy({},{get:(E,z)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(z)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((g=C.auth)!==null&&g!==void 0?g:{},this.headers,C.global.fetch),this.fetch=o0(o,this._getAccessToken.bind(this),C.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},C.realtime)),this.rest=new hv(new URL("rest/v1",b).href,{headers:this.headers,schema:C.db.schema,fetch:this.fetch}),this.storage=new Jv(this.storageUrl.href,this.headers,this.fetch,l?.storage),C.accessToken||this._listenForAuthEvents()}get functions(){return new ev(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(a){return this.rest.from(a)}schema(a){return this.rest.schema(a)}rpc(a,o={},l={head:!1,get:!1,count:void 0}){return this.rest.rpc(a,o,l)}channel(a,o={config:{}}){return this.realtime.channel(a,o)}getChannels(){return this.realtime.getChannels()}removeChannel(a){return this.realtime.removeChannel(a)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var a,o;if(this.accessToken)return await this.accessToken();const{data:l}=await this.auth.getSession();return(o=(a=l.session)===null||a===void 0?void 0:a.access_token)!==null&&o!==void 0?o:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:a,persistSession:o,detectSessionInUrl:l,storage:d,userStorage:f,storageKey:g,flowType:b,lock:w,debug:x},C,E){const z={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new gb({url:this.authUrl.href,headers:Object.assign(Object.assign({},z),C),storageKey:g,autoRefreshToken:a,persistSession:o,detectSessionInUrl:l,storage:d,userStorage:f,flowType:b,lock:w,debug:x,fetch:E,hasCustomAuthorizationHeader:Object.keys(this.headers).some(R=>R.toLowerCase()==="authorization")})}_initRealtimeClient(a){return new jv(this.realtimeUrl.href,Object.assign(Object.assign({},a),{params:Object.assign({apikey:this.supabaseKey},a?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((o,l)=>{this._handleTokenChanged(o,"CLIENT",l?.access_token)})}_handleTokenChanged(a,o,l){(a==="TOKEN_REFRESHED"||a==="SIGNED_IN")&&this.changedAccessToken!==l?(this.changedAccessToken=l,this.realtime.setAuth(l)):a==="SIGNED_OUT"&&(this.realtime.setAuth(),o=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const yb=(u,a,o)=>new _b(u,a,o);function vb(){if(typeof window<"u"||typeof process>"u")return!1;const u=process.version;if(u==null)return!1;const a=u.match(/^v(\d+)\./);return a?parseInt(a[1],10)<=18:!1}vb()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const bb="https://nqwejzbayquzsvcodunl.supabase.co",xb="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5xd2VqemJheXF1enN2Y29kdW5sIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTgzOTA0MjAsImV4cCI6MjA3Mzk2NjQyMH0.01yifC-tfEbBHD5u315fpb_nZrqMZCbma_UrMacMb78",Zt=yb(bb,xb);class wb{async signUp(a,o,l){return Zt.auth.signUp({email:a,password:o,options:{data:{username:l,reputation:0,language:"en",onboarding_completed:!1,onboarding_step:0}}})}async signIn(a,o){return Zt.auth.signInWithPassword({email:a,password:o})}async signOut(){return Zt.auth.signOut()}async getCurrentUser(){const{data:{user:a}}=await Zt.auth.getUser();return a}async getSession(){return Zt.auth.getSession()}async createUserProfile(a,o){const{data:l,error:d}=await Zt.from("users").insert([{user_id:a,...o,reputation:0,language:"en",onboarding_completed:!1,onboarding_step:0}]).select().single();return{data:l,error:d}}async getUserProfile(a){const{data:o,error:l}=await Zt.from("users").select("*").eq("user_id",a).maybeSingle();return{data:o,error:l}}async updateUserProfile(a,o){const{data:l,error:d}=await Zt.from("users").update(o).eq("user_id",a).select().single();return{data:l,error:d}}async completeOnboarding(a,o){const l={first_name:o.firstName,last_name:o.lastName,phone:o.phone,location:o.location,interests:o.interests,language:o.language,onboarding_completed:!0,onboarding_step:4,profile_completed_at:new Date().toISOString()};return this.updateUserProfile(a,l)}async updateOnboardingStep(a,o){return this.updateUserProfile(a,{onboarding_step:o})}async syncUserWithProfile(a){try{const{data:o,error:l}=await this.getUserProfile(a.id);if(l&&l.code!=="PGRST116")return console.error("Error fetching user profile:",l),null;if(o)return{id:a.id,email:a.email,...o};{const d={username:a.user_metadata?.username||a.email?.split("@")[0]||"User",email:a.email,reputation:0,language:"en",onboarding_completed:!1,onboarding_step:0},{data:f,error:g}=await this.createUserProfile(a.id,d);return g?(console.error("Error creating user profile:",g),null):{id:a.id,email:a.email,...f}}}catch(o){return console.error("Error syncing user with profile:",o),null}}onAuthStateChange(a){return Zt.auth.onAuthStateChange((o,l)=>{a(l?.user||null)})}async resetPassword(a){return Zt.auth.resetPasswordForEmail(a)}async updatePassword(a){return Zt.auth.updateUser({password:a})}async getUserReports(a){return Zt.from("reports").select("upvotes, downvotes").eq("user_id",a)}async getUserRecentReports(a,o=5){return Zt.from("reports").select("*").eq("user_id",a).order("created_at",{ascending:!1}).limit(o)}async getAllUsersByReputation(){return Zt.from("users").select("user_id, reputation").order("reputation",{ascending:!1})}async getUserReportsCount(a){return Zt.from("reports").select("id",{count:"exact"}).eq("user_id",a)}async getUserVote(a,o){return Zt.from("votes").select("vote_type").eq("user_id",a).eq("report_id",o).maybeSingle()}async addVote(a,o,l){return Zt.from("votes").insert([{user_id:a,report_id:o,vote_type:l}])}async removeVote(a,o){return Zt.from("votes").delete().eq("user_id",a).eq("report_id",o)}async updateVote(a,o,l){return Zt.from("votes").update({vote_type:l}).eq("user_id",a).eq("report_id",o)}async getNearbyReports(a=10){return Zt.from("reports").select("*").order("created_at",{ascending:!1}).limit(a)}async deleteAccount(a){const{error:o}=await Zt.from("users").delete().eq("user_id",a);if(o)return console.error("Error deleting user profile:",o),{error:o};const{error:l}=await Zt.from("votes").delete().eq("user_id",a);l&&console.error("Error deleting user votes:",l);const{error:d}=await Zt.from("reports").delete().eq("user_id",a);d&&console.error("Error deleting user reports:",d);const{error:f}=await Zt.auth.admin.deleteUser(a);return f?(console.error("Error deleting auth user:",f),{error:f}):{error:null}}}const cn=new wb,h_=it.createContext(void 0),Sb=({children:u})=>{const[a,o]=it.useState({user:null,isAuthenticated:!1,isLoading:!0,onboardingCompleted:!1});it.useEffect(()=>{l();const{data:{subscription:E}}=cn.onAuthStateChange(async z=>{if(z){const R=await cn.syncUserWithProfile(z);R&&o({user:R,isAuthenticated:!0,isLoading:!1,onboardingCompleted:R.onboarding_completed||!1})}else o({user:null,isAuthenticated:!1,isLoading:!1,onboardingCompleted:!1})});return()=>{E.unsubscribe()}},[]);const l=async()=>{try{const{data:{session:E}}=await cn.getSession();if(E?.user){const z=await cn.syncUserWithProfile(E.user);z&&o({user:z,isAuthenticated:!0,isLoading:!1,onboardingCompleted:z.onboarding_completed||!1})}else o(z=>({...z,isLoading:!1}))}catch(E){console.error("Error checking auth state:",E),o(z=>({...z,isLoading:!1}))}},C={...a,signIn:async(E,z)=>{try{return o(q=>({...q,isLoading:!0})),await cn.signIn(E,z)}catch(R){throw o(q=>({...q,isLoading:!1})),R}},signUp:async(E,z,R)=>{try{return o(P=>({...P,isLoading:!0})),await cn.signUp(E,z,R)}catch(q){throw o(P=>({...P,isLoading:!1})),q}},signOut:async()=>{try{await cn.signOut(),o({user:null,isAuthenticated:!1,isLoading:!1,onboardingCompleted:!1})}catch(E){throw console.error("Error signing out:",E),E}},updateProfile:async E=>{if(!a.user)throw new Error("No user logged in");try{const z=await cn.updateUserProfile(a.user.id,E);return z.data&&o(R=>({...R,user:{...R.user,...z.data},onboardingCompleted:z.data.onboarding_completed||R.onboardingCompleted})),z}catch(z){throw console.error("Error updating profile:",z),z}},refreshProfile:async()=>{if(a.user)try{const{data:{session:E}}=await cn.getSession();if(E?.user){const z=await cn.syncUserWithProfile(E.user);z&&o(R=>({...R,user:z,onboardingCompleted:z.onboarding_completed||!1}))}}catch(E){console.error("Error refreshing profile:",E)}},checkOnboardingStatus:()=>a.onboardingCompleted};return _.jsx(h_.Provider,{value:C,children:u})},Ko=()=>{const u=it.useContext(h_);if(u===void 0)throw new Error("useAuth must be used within an AuthProvider");return u};function d_(u,a){const o=it.useRef(a);it.useEffect(function(){a!==o.current&&u.attributionControl!=null&&(o.current!=null&&u.attributionControl.removeAttribution(o.current),a!=null&&u.attributionControl.addAttribution(a)),o.current=a},[u,a])}function Tb(u,a,o){a.center!==o.center&&u.setLatLng(a.center),a.radius!=null&&a.radius!==o.radius&&u.setRadius(a.radius)}var Eb=yg();const Cb=1;function Ob(u){return Object.freeze({__version:Cb,map:u})}function f_(u,a){return Object.freeze({...u,...a})}const Ad=it.createContext(null);function Zu(){const u=it.use(Ad);if(u==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return u}function p_(u){function a(o,l){const{instance:d,context:f}=u(o).current;it.useImperativeHandle(l,()=>d);const{children:g}=o;return g==null?null:Ts.createElement(Ad,{value:f},g)}return it.forwardRef(a)}function jb(u){function a(o,l){const[d,f]=it.useState(!1),{instance:g}=u(o,f).current;it.useImperativeHandle(l,()=>g),it.useEffect(function(){d&&g.update()},[g,d,o.children]);const b=g._contentNode;return b?Eb.createPortal(o.children,b):null}return it.forwardRef(a)}function Ab(u){function a(o,l){const{instance:d}=u(o).current;return it.useImperativeHandle(l,()=>d),null}return it.forwardRef(a)}function zd(u,a){const o=it.useRef(void 0);it.useEffect(function(){return a!=null&&u.instance.on(a),o.current=a,function(){o.current!=null&&u.instance.off(o.current),o.current=null}},[u,a])}function Iu(u,a){const o=u.pane??a.pane;return o?{...u,pane:o}:u}function zb(u,a){return function(l,d){const f=Zu(),g=u(Iu(l,f),f);return d_(f.map,l.attribution),zd(g.current,l.eventHandlers),a(g.current,f,l,d),g}}var qo={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var Rb=qo.exports,fg;function Lb(){return fg||(fg=1,(function(u,a){(function(o,l){l(a)})(Rb,(function(o){var l="1.9.4";function d(n){var r,c,m,y;for(c=1,m=arguments.length;c<m;c++){y=arguments[c];for(r in y)n[r]=y[r]}return n}var f=Object.create||(function(){function n(){}return function(r){return n.prototype=r,new n}})();function g(n,r){var c=Array.prototype.slice;if(n.bind)return n.bind.apply(n,c.call(arguments,1));var m=c.call(arguments,2);return function(){return n.apply(r,m.length?m.concat(c.call(arguments)):arguments)}}var b=0;function w(n){return"_leaflet_id"in n||(n._leaflet_id=++b),n._leaflet_id}function x(n,r,c){var m,y,S,j;return j=function(){m=!1,y&&(S.apply(c,y),y=!1)},S=function(){m?y=arguments:(n.apply(c,arguments),setTimeout(j,r),m=!0)},S}function C(n,r,c){var m=r[1],y=r[0],S=m-y;return n===m&&c?n:((n-y)%S+S)%S+y}function E(){return!1}function z(n,r){if(r===!1)return n;var c=Math.pow(10,r===void 0?6:r);return Math.round(n*c)/c}function R(n){return n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")}function q(n){return R(n).split(/\s+/)}function P(n,r){Object.prototype.hasOwnProperty.call(n,"options")||(n.options=n.options?f(n.options):{});for(var c in r)n.options[c]=r[c];return n.options}function W(n,r,c){var m=[];for(var y in n)m.push(encodeURIComponent(c?y.toUpperCase():y)+"="+encodeURIComponent(n[y]));return(!r||r.indexOf("?")===-1?"?":"&")+m.join("&")}var G=/\{ *([\w_ -]+) *\}/g;function K(n,r){return n.replace(G,function(c,m){var y=r[m];if(y===void 0)throw new Error("No value provided for variable "+c);return typeof y=="function"&&(y=y(r)),y})}var B=Array.isArray||function(n){return Object.prototype.toString.call(n)==="[object Array]"};function ot(n,r){for(var c=0;c<n.length;c++)if(n[c]===r)return c;return-1}var _t="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function ht(n){return window["webkit"+n]||window["moz"+n]||window["ms"+n]}var ct=0;function Ht(n){var r=+new Date,c=Math.max(0,16-(r-ct));return ct=r+c,window.setTimeout(n,c)}var qt=window.requestAnimationFrame||ht("RequestAnimationFrame")||Ht,wt=window.cancelAnimationFrame||ht("CancelAnimationFrame")||ht("CancelRequestAnimationFrame")||function(n){window.clearTimeout(n)};function Ct(n,r,c){if(c&&qt===Ht)n.call(r);else return qt.call(window,g(n,r))}function Ut(n){n&&wt.call(window,n)}var ze={__proto__:null,extend:d,create:f,bind:g,get lastId(){return b},stamp:w,throttle:x,wrapNum:C,falseFn:E,formatNum:z,trim:R,splitWords:q,setOptions:P,getParamString:W,template:K,isArray:B,indexOf:ot,emptyImageUrl:_t,requestFn:qt,cancelFn:wt,requestAnimFrame:Ct,cancelAnimFrame:Ut};function Kt(){}Kt.extend=function(n){var r=function(){P(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},c=r.__super__=this.prototype,m=f(c);m.constructor=r,r.prototype=m;for(var y in this)Object.prototype.hasOwnProperty.call(this,y)&&y!=="prototype"&&y!=="__super__"&&(r[y]=this[y]);return n.statics&&d(r,n.statics),n.includes&&(De(n.includes),d.apply(null,[m].concat(n.includes))),d(m,n),delete m.statics,delete m.includes,m.options&&(m.options=c.options?f(c.options):{},d(m.options,n.options)),m._initHooks=[],m.callInitHooks=function(){if(!this._initHooksCalled){c.callInitHooks&&c.callInitHooks.call(this),this._initHooksCalled=!0;for(var S=0,j=m._initHooks.length;S<j;S++)m._initHooks[S].call(this)}},r},Kt.include=function(n){var r=this.prototype.options;return d(this.prototype,n),n.options&&(this.prototype.options=r,this.mergeOptions(n.options)),this},Kt.mergeOptions=function(n){return d(this.prototype.options,n),this},Kt.addInitHook=function(n){var r=Array.prototype.slice.call(arguments,1),c=typeof n=="function"?n:function(){this[n].apply(this,r)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(c),this};function De(n){if(!(typeof L>"u"||!L||!L.Mixin)){n=B(n)?n:[n];for(var r=0;r<n.length;r++)n[r]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var $={on:function(n,r,c){if(typeof n=="object")for(var m in n)this._on(m,n[m],r);else{n=q(n);for(var y=0,S=n.length;y<S;y++)this._on(n[y],r,c)}return this},off:function(n,r,c){if(!arguments.length)delete this._events;else if(typeof n=="object")for(var m in n)this._off(m,n[m],r);else{n=q(n);for(var y=arguments.length===1,S=0,j=n.length;S<j;S++)y?this._off(n[S]):this._off(n[S],r,c)}return this},_on:function(n,r,c,m){if(typeof r!="function"){console.warn("wrong listener type: "+typeof r);return}if(this._listens(n,r,c)===!1){c===this&&(c=void 0);var y={fn:r,ctx:c};m&&(y.once=!0),this._events=this._events||{},this._events[n]=this._events[n]||[],this._events[n].push(y)}},_off:function(n,r,c){var m,y,S;if(this._events&&(m=this._events[n],!!m)){if(arguments.length===1){if(this._firingCount)for(y=0,S=m.length;y<S;y++)m[y].fn=E;delete this._events[n];return}if(typeof r!="function"){console.warn("wrong listener type: "+typeof r);return}var j=this._listens(n,r,c);if(j!==!1){var N=m[j];this._firingCount&&(N.fn=E,this._events[n]=m=m.slice()),m.splice(j,1)}}},fire:function(n,r,c){if(!this.listens(n,c))return this;var m=d({},r,{type:n,target:this,sourceTarget:r&&r.sourceTarget||this});if(this._events){var y=this._events[n];if(y){this._firingCount=this._firingCount+1||1;for(var S=0,j=y.length;S<j;S++){var N=y[S],Z=N.fn;N.once&&this.off(n,Z,N.ctx),Z.call(N.ctx||this,m)}this._firingCount--}}return c&&this._propagateEvent(m),this},listens:function(n,r,c,m){typeof n!="string"&&console.warn('"string" type argument expected');var y=r;typeof r!="function"&&(m=!!r,y=void 0,c=void 0);var S=this._events&&this._events[n];if(S&&S.length&&this._listens(n,y,c)!==!1)return!0;if(m){for(var j in this._eventParents)if(this._eventParents[j].listens(n,r,c,m))return!0}return!1},_listens:function(n,r,c){if(!this._events)return!1;var m=this._events[n]||[];if(!r)return!!m.length;c===this&&(c=void 0);for(var y=0,S=m.length;y<S;y++)if(m[y].fn===r&&m[y].ctx===c)return y;return!1},once:function(n,r,c){if(typeof n=="object")for(var m in n)this._on(m,n[m],r,!0);else{n=q(n);for(var y=0,S=n.length;y<S;y++)this._on(n[y],r,c,!0)}return this},addEventParent:function(n){return this._eventParents=this._eventParents||{},this._eventParents[w(n)]=n,this},removeEventParent:function(n){return this._eventParents&&delete this._eventParents[w(n)],this},_propagateEvent:function(n){for(var r in this._eventParents)this._eventParents[r].fire(n.type,d({layer:n.target,propagatedFrom:n.target},n),!0)}};$.addEventListener=$.on,$.removeEventListener=$.clearAllEventListeners=$.off,$.addOneTimeEventListener=$.once,$.fireEvent=$.fire,$.hasEventListeners=$.listens;var at=Kt.extend($);function k(n,r,c){this.x=c?Math.round(n):n,this.y=c?Math.round(r):r}var rt=Math.trunc||function(n){return n>0?Math.floor(n):Math.ceil(n)};k.prototype={clone:function(){return new k(this.x,this.y)},add:function(n){return this.clone()._add(tt(n))},_add:function(n){return this.x+=n.x,this.y+=n.y,this},subtract:function(n){return this.clone()._subtract(tt(n))},_subtract:function(n){return this.x-=n.x,this.y-=n.y,this},divideBy:function(n){return this.clone()._divideBy(n)},_divideBy:function(n){return this.x/=n,this.y/=n,this},multiplyBy:function(n){return this.clone()._multiplyBy(n)},_multiplyBy:function(n){return this.x*=n,this.y*=n,this},scaleBy:function(n){return new k(this.x*n.x,this.y*n.y)},unscaleBy:function(n){return new k(this.x/n.x,this.y/n.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=rt(this.x),this.y=rt(this.y),this},distanceTo:function(n){n=tt(n);var r=n.x-this.x,c=n.y-this.y;return Math.sqrt(r*r+c*c)},equals:function(n){return n=tt(n),n.x===this.x&&n.y===this.y},contains:function(n){return n=tt(n),Math.abs(n.x)<=Math.abs(this.x)&&Math.abs(n.y)<=Math.abs(this.y)},toString:function(){return"Point("+z(this.x)+", "+z(this.y)+")"}};function tt(n,r,c){return n instanceof k?n:B(n)?new k(n[0],n[1]):n==null?n:typeof n=="object"&&"x"in n&&"y"in n?new k(n.x,n.y):new k(n,r,c)}function O(n,r){if(n)for(var c=r?[n,r]:n,m=0,y=c.length;m<y;m++)this.extend(c[m])}O.prototype={extend:function(n){var r,c;if(!n)return this;if(n instanceof k||typeof n[0]=="number"||"x"in n)r=c=tt(n);else if(n=V(n),r=n.min,c=n.max,!r||!c)return this;return!this.min&&!this.max?(this.min=r.clone(),this.max=c.clone()):(this.min.x=Math.min(r.x,this.min.x),this.max.x=Math.max(c.x,this.max.x),this.min.y=Math.min(r.y,this.min.y),this.max.y=Math.max(c.y,this.max.y)),this},getCenter:function(n){return tt((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,n)},getBottomLeft:function(){return tt(this.min.x,this.max.y)},getTopRight:function(){return tt(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(n){var r,c;return typeof n[0]=="number"||n instanceof k?n=tt(n):n=V(n),n instanceof O?(r=n.min,c=n.max):r=c=n,r.x>=this.min.x&&c.x<=this.max.x&&r.y>=this.min.y&&c.y<=this.max.y},intersects:function(n){n=V(n);var r=this.min,c=this.max,m=n.min,y=n.max,S=y.x>=r.x&&m.x<=c.x,j=y.y>=r.y&&m.y<=c.y;return S&&j},overlaps:function(n){n=V(n);var r=this.min,c=this.max,m=n.min,y=n.max,S=y.x>r.x&&m.x<c.x,j=y.y>r.y&&m.y<c.y;return S&&j},isValid:function(){return!!(this.min&&this.max)},pad:function(n){var r=this.min,c=this.max,m=Math.abs(r.x-c.x)*n,y=Math.abs(r.y-c.y)*n;return V(tt(r.x-m,r.y-y),tt(c.x+m,c.y+y))},equals:function(n){return n?(n=V(n),this.min.equals(n.getTopLeft())&&this.max.equals(n.getBottomRight())):!1}};function V(n,r){return!n||n instanceof O?n:new O(n,r)}function et(n,r){if(n)for(var c=r?[n,r]:n,m=0,y=c.length;m<y;m++)this.extend(c[m])}et.prototype={extend:function(n){var r=this._southWest,c=this._northEast,m,y;if(n instanceof ut)m=n,y=n;else if(n instanceof et){if(m=n._southWest,y=n._northEast,!m||!y)return this}else return n?this.extend(lt(n)||nt(n)):this;return!r&&!c?(this._southWest=new ut(m.lat,m.lng),this._northEast=new ut(y.lat,y.lng)):(r.lat=Math.min(m.lat,r.lat),r.lng=Math.min(m.lng,r.lng),c.lat=Math.max(y.lat,c.lat),c.lng=Math.max(y.lng,c.lng)),this},pad:function(n){var r=this._southWest,c=this._northEast,m=Math.abs(r.lat-c.lat)*n,y=Math.abs(r.lng-c.lng)*n;return new et(new ut(r.lat-m,r.lng-y),new ut(c.lat+m,c.lng+y))},getCenter:function(){return new ut((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ut(this.getNorth(),this.getWest())},getSouthEast:function(){return new ut(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(n){typeof n[0]=="number"||n instanceof ut||"lat"in n?n=lt(n):n=nt(n);var r=this._southWest,c=this._northEast,m,y;return n instanceof et?(m=n.getSouthWest(),y=n.getNorthEast()):m=y=n,m.lat>=r.lat&&y.lat<=c.lat&&m.lng>=r.lng&&y.lng<=c.lng},intersects:function(n){n=nt(n);var r=this._southWest,c=this._northEast,m=n.getSouthWest(),y=n.getNorthEast(),S=y.lat>=r.lat&&m.lat<=c.lat,j=y.lng>=r.lng&&m.lng<=c.lng;return S&&j},overlaps:function(n){n=nt(n);var r=this._southWest,c=this._northEast,m=n.getSouthWest(),y=n.getNorthEast(),S=y.lat>r.lat&&m.lat<c.lat,j=y.lng>r.lng&&m.lng<c.lng;return S&&j},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(n,r){return n?(n=nt(n),this._southWest.equals(n.getSouthWest(),r)&&this._northEast.equals(n.getNorthEast(),r)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function nt(n,r){return n instanceof et?n:new et(n,r)}function ut(n,r,c){if(isNaN(n)||isNaN(r))throw new Error("Invalid LatLng object: ("+n+", "+r+")");this.lat=+n,this.lng=+r,c!==void 0&&(this.alt=+c)}ut.prototype={equals:function(n,r){if(!n)return!1;n=lt(n);var c=Math.max(Math.abs(this.lat-n.lat),Math.abs(this.lng-n.lng));return c<=(r===void 0?1e-9:r)},toString:function(n){return"LatLng("+z(this.lat,n)+", "+z(this.lng,n)+")"},distanceTo:function(n){return oe.distance(this,lt(n))},wrap:function(){return oe.wrapLatLng(this)},toBounds:function(n){var r=180*n/40075017,c=r/Math.cos(Math.PI/180*this.lat);return nt([this.lat-r,this.lng-c],[this.lat+r,this.lng+c])},clone:function(){return new ut(this.lat,this.lng,this.alt)}};function lt(n,r,c){return n instanceof ut?n:B(n)&&typeof n[0]!="object"?n.length===3?new ut(n[0],n[1],n[2]):n.length===2?new ut(n[0],n[1]):null:n==null?n:typeof n=="object"&&"lat"in n?new ut(n.lat,"lng"in n?n.lng:n.lon,n.alt):r===void 0?null:new ut(n,r,c)}var zt={latLngToPoint:function(n,r){var c=this.projection.project(n),m=this.scale(r);return this.transformation._transform(c,m)},pointToLatLng:function(n,r){var c=this.scale(r),m=this.transformation.untransform(n,c);return this.projection.unproject(m)},project:function(n){return this.projection.project(n)},unproject:function(n){return this.projection.unproject(n)},scale:function(n){return 256*Math.pow(2,n)},zoom:function(n){return Math.log(n/256)/Math.LN2},getProjectedBounds:function(n){if(this.infinite)return null;var r=this.projection.bounds,c=this.scale(n),m=this.transformation.transform(r.min,c),y=this.transformation.transform(r.max,c);return new O(m,y)},infinite:!1,wrapLatLng:function(n){var r=this.wrapLng?C(n.lng,this.wrapLng,!0):n.lng,c=this.wrapLat?C(n.lat,this.wrapLat,!0):n.lat,m=n.alt;return new ut(c,r,m)},wrapLatLngBounds:function(n){var r=n.getCenter(),c=this.wrapLatLng(r),m=r.lat-c.lat,y=r.lng-c.lng;if(m===0&&y===0)return n;var S=n.getSouthWest(),j=n.getNorthEast(),N=new ut(S.lat-m,S.lng-y),Z=new ut(j.lat-m,j.lng-y);return new et(N,Z)}},oe=d({},zt,{wrapLng:[-180,180],R:6371e3,distance:function(n,r){var c=Math.PI/180,m=n.lat*c,y=r.lat*c,S=Math.sin((r.lat-n.lat)*c/2),j=Math.sin((r.lng-n.lng)*c/2),N=S*S+Math.cos(m)*Math.cos(y)*j*j,Z=2*Math.atan2(Math.sqrt(N),Math.sqrt(1-N));return this.R*Z}}),le=6378137,ci={R:le,MAX_LATITUDE:85.0511287798,project:function(n){var r=Math.PI/180,c=this.MAX_LATITUDE,m=Math.max(Math.min(c,n.lat),-c),y=Math.sin(m*r);return new k(this.R*n.lng*r,this.R*Math.log((1+y)/(1-y))/2)},unproject:function(n){var r=180/Math.PI;return new ut((2*Math.atan(Math.exp(n.y/this.R))-Math.PI/2)*r,n.x*r/this.R)},bounds:(function(){var n=le*Math.PI;return new O([-n,-n],[n,n])})()};function Pi(n,r,c,m){if(B(n)){this._a=n[0],this._b=n[1],this._c=n[2],this._d=n[3];return}this._a=n,this._b=r,this._c=c,this._d=m}Pi.prototype={transform:function(n,r){return this._transform(n.clone(),r)},_transform:function(n,r){return r=r||1,n.x=r*(this._a*n.x+this._b),n.y=r*(this._c*n.y+this._d),n},untransform:function(n,r){return r=r||1,new k((n.x/r-this._b)/this._a,(n.y/r-this._d)/this._c)}};function hi(n,r,c,m){return new Pi(n,r,c,m)}var Tr=d({},oe,{code:"EPSG:3857",projection:ci,transformation:(function(){var n=.5/(Math.PI*ci.R);return hi(n,.5,-n,.5)})()}),di=d({},Tr,{code:"EPSG:900913"});function Er(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function Cr(n,r){var c="",m,y,S,j,N,Z;for(m=0,S=n.length;m<S;m++){for(N=n[m],y=0,j=N.length;y<j;y++)Z=N[y],c+=(y?"L":"M")+Z.x+" "+Z.y;c+=r?mt.svg?"z":"x":""}return c||"M0 0"}var Rs=document.documentElement.style,Oa="ActiveXObject"in window,Ls=Oa&&!document.addEventListener,Or="msLaunchUri"in navigator&&!("documentMode"in document),ja=Qe("webkit"),Qo=Qe("android"),Jo=Qe("android 2")||Qe("android 3"),$e=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),$u=Qo&&Qe("Google")&&$e<537&&!("AudioNode"in window),jr=!!window.opera,ks=!Or&&Qe("chrome"),Aa=Qe("gecko")&&!ja&&!jr&&!Oa,Yu=!ks&&Qe("safari"),Ms=Qe("phantom"),Fo="OTransition"in Rs,Wu=navigator.platform.indexOf("Win")===0,Ui=Oa&&"transition"in Rs,Ne="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Jo,Mn="MozPerspective"in Rs,Ye=!window.L_DISABLE_3D&&(Ui||Ne||Mn)&&!Fo&&!Ms,za=typeof orientation<"u"||Qe("mobile"),Ku=za&&ja,Xu=za&&Ne,Ra=!window.PointerEvent&&window.MSPointerEvent,La=!!(window.PointerEvent||Ra),ka="ontouchstart"in window||!!window.TouchEvent,fi=!window.L_NO_TOUCH&&(ka||La),Ar=za&&jr,Ma=za&&Aa,Qu=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,tl=(function(){var n=!1;try{var r=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("testPassiveEventSupport",E,r),window.removeEventListener("testPassiveEventSupport",E,r)}catch{}return n})(),Bs=(function(){return!!document.createElement("canvas").getContext})(),pi=!!(document.createElementNS&&Er("svg").createSVGRect),Ju=!!pi&&(function(){var n=document.createElement("div");return n.innerHTML="<svg/>",(n.firstChild&&n.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),el=!pi&&(function(){try{var n=document.createElement("div");n.innerHTML='<v:shape adj="1"/>';var r=n.firstChild;return r.style.behavior="url(#default#VML)",r&&typeof r.adj=="object"}catch{return!1}})(),nl=navigator.platform.indexOf("Mac")===0,il=navigator.platform.indexOf("Linux")===0;function Qe(n){return navigator.userAgent.toLowerCase().indexOf(n)>=0}var mt={ie:Oa,ielt9:Ls,edge:Or,webkit:ja,android:Qo,android23:Jo,androidStock:$u,opera:jr,chrome:ks,gecko:Aa,safari:Yu,phantom:Ms,opera12:Fo,win:Wu,ie3d:Ui,webkit3d:Ne,gecko3d:Mn,any3d:Ye,mobile:za,mobileWebkit:Ku,mobileWebkit3d:Xu,msPointer:Ra,pointer:La,touch:fi,touchNative:ka,mobileOpera:Ar,mobileGecko:Ma,retina:Qu,passiveEvents:tl,canvas:Bs,svg:pi,vml:el,inlineSvg:Ju,mac:nl,linux:il},Ds=mt.msPointer?"MSPointerDown":"pointerdown",Ns=mt.msPointer?"MSPointerMove":"pointermove",Bn=mt.msPointer?"MSPointerUp":"pointerup",ve=mt.msPointer?"MSPointerCancel":"pointercancel",Re={touchstart:Ds,touchmove:Ns,touchend:Bn,touchcancel:ve},mi={touchstart:qi,touchmove:Kn,touchend:Kn,touchcancel:Kn},Wn={},al=!1;function Fu(n,r,c){return r==="touchstart"&&Hi(),mi[r]?(c=mi[r].bind(this,c),n.addEventListener(Re[r],c,!1),c):(console.warn("wrong event specified:",r),E)}function rl(n,r,c){if(!Re[r]){console.warn("wrong event specified:",r);return}n.removeEventListener(Re[r],c,!1)}function Ba(n){Wn[n.pointerId]=n}function Ps(n){Wn[n.pointerId]&&(Wn[n.pointerId]=n)}function gi(n){delete Wn[n.pointerId]}function Hi(){al||(document.addEventListener(Ds,Ba,!0),document.addEventListener(Ns,Ps,!0),document.addEventListener(Bn,gi,!0),document.addEventListener(ve,gi,!0),al=!0)}function Kn(n,r){if(r.pointerType!==(r.MSPOINTER_TYPE_MOUSE||"mouse")){r.touches=[];for(var c in Wn)r.touches.push(Wn[c]);r.changedTouches=[r],n(r)}}function qi(n,r){r.MSPOINTER_TYPE_TOUCH&&r.pointerType===r.MSPOINTER_TYPE_TOUCH&&fe(r),Kn(n,r)}function be(n){var r={},c,m;for(m in n)c=n[m],r[m]=c&&c.bind?c.bind(n):c;return n=r,r.type="dblclick",r.detail=2,r.isTrusted=!1,r._simulated=!0,r}var sl=200;function ol(n,r){n.addEventListener("dblclick",r);var c=0,m;function y(S){if(S.detail!==1){m=S.detail;return}if(!(S.pointerType==="mouse"||S.sourceCapabilities&&!S.sourceCapabilities.firesTouchEvents)){var j=Za(S);if(!(j.some(function(Z){return Z instanceof HTMLLabelElement&&Z.attributes.for})&&!j.some(function(Z){return Z instanceof HTMLInputElement||Z instanceof HTMLSelectElement}))){var N=Date.now();N-c<=sl?(m++,m===2&&r(be(S))):m=1,c=N}}}return n.addEventListener("click",y),{dblclick:r,simDblclick:y}}function _i(n,r){n.removeEventListener("dblclick",r.dblclick),n.removeEventListener("click",r.simDblclick)}var Xn=Pa(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Da=Pa(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Us=Da==="webkitTransition"||Da==="OTransition"?Da+"End":"transitionend";function Hs(n){return typeof n=="string"?document.getElementById(n):n}function Na(n,r){var c=n.style[r]||n.currentStyle&&n.currentStyle[r];if((!c||c==="auto")&&document.defaultView){var m=document.defaultView.getComputedStyle(n,null);c=m?m[r]:null}return c==="auto"?null:c}function Lt(n,r,c){var m=document.createElement(n);return m.className=r||"",c&&c.appendChild(m),m}function Jt(n){var r=n.parentNode;r&&r.removeChild(n)}function Je(n){for(;n.firstChild;)n.removeChild(n.firstChild)}function Ce(n){var r=n.parentNode;r&&r.lastChild!==n&&r.appendChild(n)}function yi(n){var r=n.parentNode;r&&r.firstChild!==n&&r.insertBefore(n,r.firstChild)}function qs(n,r){if(n.classList!==void 0)return n.classList.contains(r);var c=zr(n);return c.length>0&&new RegExp("(^|\\s)"+r+"(\\s|$)").test(c)}function St(n,r){if(n.classList!==void 0)for(var c=q(r),m=0,y=c.length;m<y;m++)n.classList.add(c[m]);else if(!qs(n,r)){var S=zr(n);Zi(n,(S?S+" ":"")+r)}}function ue(n,r){n.classList!==void 0?n.classList.remove(r):Zi(n,R((" "+zr(n)+" ").replace(" "+r+" "," ")))}function Zi(n,r){n.className.baseVal===void 0?n.className=r:n.className.baseVal=r}function zr(n){return n.correspondingElement&&(n=n.correspondingElement),n.className.baseVal===void 0?n.className:n.className.baseVal}function re(n,r){"opacity"in n.style?n.style.opacity=r:"filter"in n.style&&Zs(n,r)}function Zs(n,r){var c=!1,m="DXImageTransform.Microsoft.Alpha";try{c=n.filters.item(m)}catch{if(r===1)return}r=Math.round(r*100),c?(c.Enabled=r!==100,c.Opacity=r):n.style.filter+=" progid:"+m+"(opacity="+r+")"}function Pa(n){for(var r=document.documentElement.style,c=0;c<n.length;c++)if(n[c]in r)return n[c];return!1}function Dn(n,r,c){var m=r||new k(0,0);n.style[Xn]=(mt.ie3d?"translate("+m.x+"px,"+m.y+"px)":"translate3d("+m.x+"px,"+m.y+"px,0)")+(c?" scale("+c+")":"")}function ne(n,r){n._leaflet_pos=r,mt.any3d?Dn(n,r):(n.style.left=r.x+"px",n.style.top=r.y+"px")}function Qn(n){return n._leaflet_pos||new k(0,0)}var Ii,Sn,Is;if("onselectstart"in document)Ii=function(){xt(window,"selectstart",fe)},Sn=function(){Wt(window,"selectstart",fe)};else{var Vi=Pa(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Ii=function(){if(Vi){var n=document.documentElement.style;Is=n[Vi],n[Vi]="none"}},Sn=function(){Vi&&(document.documentElement.style[Vi]=Is,Is=void 0)}}function Rr(){xt(window,"dragstart",fe)}function Ua(){Wt(window,"dragstart",fe)}var Lr,Vs;function Gi(n){for(;n.tabIndex===-1;)n=n.parentNode;n.style&&(Fe(),Lr=n,Vs=n.style.outlineStyle,n.style.outlineStyle="none",xt(window,"keydown",Fe))}function Fe(){Lr&&(Lr.style.outlineStyle=Vs,Lr=void 0,Vs=void 0,Wt(window,"keydown",Fe))}function kr(n){do n=n.parentNode;while((!n.offsetWidth||!n.offsetHeight)&&n!==document.body);return n}function Ha(n){var r=n.getBoundingClientRect();return{x:r.width/n.offsetWidth||1,y:r.height/n.offsetHeight||1,boundingClientRect:r}}var $i={__proto__:null,TRANSFORM:Xn,TRANSITION:Da,TRANSITION_END:Us,get:Hs,getStyle:Na,create:Lt,remove:Jt,empty:Je,toFront:Ce,toBack:yi,hasClass:qs,addClass:St,removeClass:ue,setClass:Zi,getClass:zr,setOpacity:re,testProp:Pa,setTransform:Dn,setPosition:ne,getPosition:Qn,get disableTextSelection(){return Ii},get enableTextSelection(){return Sn},disableImageDrag:Rr,enableImageDrag:Ua,preventOutline:Gi,restoreOutline:Fe,getSizedParentNode:kr,getScale:Ha};function xt(n,r,c,m){if(r&&typeof r=="object")for(var y in r)dn(n,y,r[y],c);else{r=q(r);for(var S=0,j=r.length;S<j;S++)dn(n,r[S],c,m)}return this}var hn="_leaflet_events";function Wt(n,r,c,m){if(arguments.length===1)Gs(n),delete n[hn];else if(r&&typeof r=="object")for(var y in r)qa(n,y,r[y],c);else if(r=q(r),arguments.length===2)Gs(n,function(N){return ot(r,N)!==-1});else for(var S=0,j=r.length;S<j;S++)qa(n,r[S],c,m);return this}function Gs(n,r){for(var c in n[hn]){var m=c.split(/\d/)[0];(!r||r(m))&&qa(n,m,null,null,c)}}var vi={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function dn(n,r,c,m){var y=r+w(c)+(m?"_"+w(m):"");if(n[hn]&&n[hn][y])return this;var S=function(N){return c.call(m||n,N||window.event)},j=S;!mt.touchNative&&mt.pointer&&r.indexOf("touch")===0?S=Fu(n,r,S):mt.touch&&r==="dblclick"?S=ol(n,S):"addEventListener"in n?r==="touchstart"||r==="touchmove"||r==="wheel"||r==="mousewheel"?n.addEventListener(vi[r]||r,S,mt.passiveEvents?{passive:!1}:!1):r==="mouseenter"||r==="mouseleave"?(S=function(N){N=N||window.event,Nn(n,N)&&j(N)},n.addEventListener(vi[r],S,!1)):n.addEventListener(r,j,!1):n.attachEvent("on"+r,S),n[hn]=n[hn]||{},n[hn][y]=S}function qa(n,r,c,m,y){y=y||r+w(c)+(m?"_"+w(m):"");var S=n[hn]&&n[hn][y];if(!S)return this;!mt.touchNative&&mt.pointer&&r.indexOf("touch")===0?rl(n,r,S):mt.touch&&r==="dblclick"?_i(n,S):"removeEventListener"in n?n.removeEventListener(vi[r]||r,S,!1):n.detachEvent("on"+r,S),n[hn][y]=null}function fn(n){return n.stopPropagation?n.stopPropagation():n.originalEvent?n.originalEvent._stopped=!0:n.cancelBubble=!0,this}function Tn(n){return dn(n,"wheel",fn),this}function bi(n){return xt(n,"mousedown touchstart dblclick contextmenu",fn),n._leaflet_disable_click=!0,this}function fe(n){return n.preventDefault?n.preventDefault():n.returnValue=!1,this}function Jn(n){return fe(n),fn(n),this}function Za(n){if(n.composedPath)return n.composedPath();for(var r=[],c=n.target;c;)r.push(c),c=c.parentNode;return r}function Ia(n,r){if(!r)return new k(n.clientX,n.clientY);var c=Ha(r),m=c.boundingClientRect;return new k((n.clientX-m.left)/c.x-r.clientLeft,(n.clientY-m.top)/c.y-r.clientTop)}var ll=mt.linux&&mt.chrome?window.devicePixelRatio:mt.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Pe(n){return mt.edge?n.wheelDeltaY/2:n.deltaY&&n.deltaMode===0?-n.deltaY/ll:n.deltaY&&n.deltaMode===1?-n.deltaY*20:n.deltaY&&n.deltaMode===2?-n.deltaY*60:n.deltaX||n.deltaZ?0:n.wheelDelta?(n.wheelDeltaY||n.wheelDelta)/2:n.detail&&Math.abs(n.detail)<32765?-n.detail*20:n.detail?n.detail/-32765*60:0}function Nn(n,r){var c=r.relatedTarget;if(!c)return!0;try{for(;c&&c!==n;)c=c.parentNode}catch{return!1}return c!==n}var Mr={__proto__:null,on:xt,off:Wt,stopPropagation:fn,disableScrollPropagation:Tn,disableClickPropagation:bi,preventDefault:fe,stop:Jn,getPropagationPath:Za,getMousePosition:Ia,getWheelDelta:Pe,isExternalTarget:Nn,addListener:xt,removeListener:Wt},Yi=at.extend({run:function(n,r,c,m){this.stop(),this._el=n,this._inProgress=!0,this._duration=c||.25,this._easeOutPower=1/Math.max(m||.5,.2),this._startPos=Qn(n),this._offset=r.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=Ct(this._animate,this),this._step()},_step:function(n){var r=+new Date-this._startTime,c=this._duration*1e3;r<c?this._runFrame(this._easeOut(r/c),n):(this._runFrame(1),this._complete())},_runFrame:function(n,r){var c=this._startPos.add(this._offset.multiplyBy(n));r&&c._round(),ne(this._el,c),this.fire("step")},_complete:function(){Ut(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(n){return 1-Math.pow(1-n,this._easeOutPower)}}),Dt=at.extend({options:{crs:Tr,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(n,r){r=P(this,r),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(n),this._initLayout(),this._onResize=g(this._onResize,this),this._initEvents(),r.maxBounds&&this.setMaxBounds(r.maxBounds),r.zoom!==void 0&&(this._zoom=this._limitZoom(r.zoom)),r.center&&r.zoom!==void 0&&this.setView(lt(r.center),r.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Da&&mt.any3d&&!mt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),xt(this._proxy,Us,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(n,r,c){if(r=r===void 0?this._zoom:this._limitZoom(r),n=this._limitCenter(lt(n),r,this.options.maxBounds),c=c||{},this._stop(),this._loaded&&!c.reset&&c!==!0){c.animate!==void 0&&(c.zoom=d({animate:c.animate},c.zoom),c.pan=d({animate:c.animate,duration:c.duration},c.pan));var m=this._zoom!==r?this._tryAnimatedZoom&&this._tryAnimatedZoom(n,r,c.zoom):this._tryAnimatedPan(n,c.pan);if(m)return clearTimeout(this._sizeTimer),this}return this._resetView(n,r,c.pan&&c.pan.noMoveStart),this},setZoom:function(n,r){return this._loaded?this.setView(this.getCenter(),n,{zoom:r}):(this._zoom=n,this)},zoomIn:function(n,r){return n=n||(mt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+n,r)},zoomOut:function(n,r){return n=n||(mt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-n,r)},setZoomAround:function(n,r,c){var m=this.getZoomScale(r),y=this.getSize().divideBy(2),S=n instanceof k?n:this.latLngToContainerPoint(n),j=S.subtract(y).multiplyBy(1-1/m),N=this.containerPointToLatLng(y.add(j));return this.setView(N,r,{zoom:c})},_getBoundsCenterZoom:function(n,r){r=r||{},n=n.getBounds?n.getBounds():nt(n);var c=tt(r.paddingTopLeft||r.padding||[0,0]),m=tt(r.paddingBottomRight||r.padding||[0,0]),y=this.getBoundsZoom(n,!1,c.add(m));if(y=typeof r.maxZoom=="number"?Math.min(r.maxZoom,y):y,y===1/0)return{center:n.getCenter(),zoom:y};var S=m.subtract(c).divideBy(2),j=this.project(n.getSouthWest(),y),N=this.project(n.getNorthEast(),y),Z=this.unproject(j.add(N).divideBy(2).add(S),y);return{center:Z,zoom:y}},fitBounds:function(n,r){if(n=nt(n),!n.isValid())throw new Error("Bounds are not valid.");var c=this._getBoundsCenterZoom(n,r);return this.setView(c.center,c.zoom,r)},fitWorld:function(n){return this.fitBounds([[-90,-180],[90,180]],n)},panTo:function(n,r){return this.setView(n,this._zoom,{pan:r})},panBy:function(n,r){if(n=tt(n).round(),r=r||{},!n.x&&!n.y)return this.fire("moveend");if(r.animate!==!0&&!this.getSize().contains(n))return this._resetView(this.unproject(this.project(this.getCenter()).add(n)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Yi,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),r.noMoveStart||this.fire("movestart"),r.animate!==!1){St(this._mapPane,"leaflet-pan-anim");var c=this._getMapPanePos().subtract(n).round();this._panAnim.run(this._mapPane,c,r.duration||.25,r.easeLinearity)}else this._rawPanBy(n),this.fire("move").fire("moveend");return this},flyTo:function(n,r,c){if(c=c||{},c.animate===!1||!mt.any3d)return this.setView(n,r,c);this._stop();var m=this.project(this.getCenter()),y=this.project(n),S=this.getSize(),j=this._zoom;n=lt(n),r=r===void 0?j:r;var N=Math.max(S.x,S.y),Z=N*this.getZoomScale(j,r),J=y.distanceTo(m)||1,st=1.42,gt=st*st;function jt(he){var qn=he?-1:1,Ti=he?Z:N,so=Z*Z-N*N+qn*gt*gt*J*J,rr=2*Ti*gt*J,sr=so/rr,oi=Math.sqrt(sr*sr+1)-sr,Zn=oi<1e-9?-18:Math.log(oi);return Zn}function Oe(he){return(Math.exp(he)-Math.exp(-he))/2}function pe(he){return(Math.exp(he)+Math.exp(-he))/2}function Ke(he){return Oe(he)/pe(he)}var It=jt(0);function Vt(he){return N*(pe(It)/pe(It+st*he))}function kt(he){return N*(pe(It)*Ke(It+st*he)-Oe(It))/gt}function ri(he){return 1-Math.pow(1-he,1.5)}var an=Date.now(),Wr=(jt(1)-It)/st,si=c.duration?1e3*c.duration:1e3*Wr*.8;function ro(){var he=(Date.now()-an)/si,qn=ri(he)*Wr;he<=1?(this._flyToFrame=Ct(ro,this),this._move(this.unproject(m.add(y.subtract(m).multiplyBy(kt(qn)/J)),j),this.getScaleZoom(N/Vt(qn),j),{flyTo:!0})):this._move(n,r)._moveEnd(!0)}return this._moveStart(!0,c.noMoveStart),ro.call(this),this},flyToBounds:function(n,r){var c=this._getBoundsCenterZoom(n,r);return this.flyTo(c.center,c.zoom,r)},setMaxBounds:function(n){return n=nt(n),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),n.isValid()?(this.options.maxBounds=n,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(n){var r=this.options.minZoom;return this.options.minZoom=n,this._loaded&&r!==n&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(n):this},setMaxZoom:function(n){var r=this.options.maxZoom;return this.options.maxZoom=n,this._loaded&&r!==n&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(n):this},panInsideBounds:function(n,r){this._enforcingBounds=!0;var c=this.getCenter(),m=this._limitCenter(c,this._zoom,nt(n));return c.equals(m)||this.panTo(m,r),this._enforcingBounds=!1,this},panInside:function(n,r){r=r||{};var c=tt(r.paddingTopLeft||r.padding||[0,0]),m=tt(r.paddingBottomRight||r.padding||[0,0]),y=this.project(this.getCenter()),S=this.project(n),j=this.getPixelBounds(),N=V([j.min.add(c),j.max.subtract(m)]),Z=N.getSize();if(!N.contains(S)){this._enforcingBounds=!0;var J=S.subtract(N.getCenter()),st=N.extend(S).getSize().subtract(Z);y.x+=J.x<0?-st.x:st.x,y.y+=J.y<0?-st.y:st.y,this.panTo(this.unproject(y),r),this._enforcingBounds=!1}return this},invalidateSize:function(n){if(!this._loaded)return this;n=d({animate:!1,pan:!0},n===!0?{animate:!0}:n);var r=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var c=this.getSize(),m=r.divideBy(2).round(),y=c.divideBy(2).round(),S=m.subtract(y);return!S.x&&!S.y?this:(n.animate&&n.pan?this.panBy(S):(n.pan&&this._rawPanBy(S),this.fire("move"),n.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(g(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:r,newSize:c}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(n){if(n=this._locateOptions=d({timeout:1e4,watch:!1},n),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var r=g(this._handleGeolocationResponse,this),c=g(this._handleGeolocationError,this);return n.watch?this._locationWatchId=navigator.geolocation.watchPosition(r,c,n):navigator.geolocation.getCurrentPosition(r,c,n),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(n){if(this._container._leaflet_id){var r=n.code,c=n.message||(r===1?"permission denied":r===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:r,message:"Geolocation error: "+c+"."})}},_handleGeolocationResponse:function(n){if(this._container._leaflet_id){var r=n.coords.latitude,c=n.coords.longitude,m=new ut(r,c),y=m.toBounds(n.coords.accuracy*2),S=this._locateOptions;if(S.setView){var j=this.getBoundsZoom(y);this.setView(m,S.maxZoom?Math.min(j,S.maxZoom):j)}var N={latlng:m,bounds:y,timestamp:n.timestamp};for(var Z in n.coords)typeof n.coords[Z]=="number"&&(N[Z]=n.coords[Z]);this.fire("locationfound",N)}},addHandler:function(n,r){if(!r)return this;var c=this[n]=new r(this);return this._handlers.push(c),this.options[n]&&c.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Jt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(Ut(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var n;for(n in this._layers)this._layers[n].remove();for(n in this._panes)Jt(this._panes[n]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(n,r){var c="leaflet-pane"+(n?" leaflet-"+n.replace("Pane","")+"-pane":""),m=Lt("div",c,r||this._mapPane);return n&&(this._panes[n]=m),m},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var n=this.getPixelBounds(),r=this.unproject(n.getBottomLeft()),c=this.unproject(n.getTopRight());return new et(r,c)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(n,r,c){n=nt(n),c=tt(c||[0,0]);var m=this.getZoom()||0,y=this.getMinZoom(),S=this.getMaxZoom(),j=n.getNorthWest(),N=n.getSouthEast(),Z=this.getSize().subtract(c),J=V(this.project(N,m),this.project(j,m)).getSize(),st=mt.any3d?this.options.zoomSnap:1,gt=Z.x/J.x,jt=Z.y/J.y,Oe=r?Math.max(gt,jt):Math.min(gt,jt);return m=this.getScaleZoom(Oe,m),st&&(m=Math.round(m/(st/100))*(st/100),m=r?Math.ceil(m/st)*st:Math.floor(m/st)*st),Math.max(y,Math.min(S,m))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new k(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(n,r){var c=this._getTopLeftPoint(n,r);return new O(c,c.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(n){return this.options.crs.getProjectedBounds(n===void 0?this.getZoom():n)},getPane:function(n){return typeof n=="string"?this._panes[n]:n},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(n,r){var c=this.options.crs;return r=r===void 0?this._zoom:r,c.scale(n)/c.scale(r)},getScaleZoom:function(n,r){var c=this.options.crs;r=r===void 0?this._zoom:r;var m=c.zoom(n*c.scale(r));return isNaN(m)?1/0:m},project:function(n,r){return r=r===void 0?this._zoom:r,this.options.crs.latLngToPoint(lt(n),r)},unproject:function(n,r){return r=r===void 0?this._zoom:r,this.options.crs.pointToLatLng(tt(n),r)},layerPointToLatLng:function(n){var r=tt(n).add(this.getPixelOrigin());return this.unproject(r)},latLngToLayerPoint:function(n){var r=this.project(lt(n))._round();return r._subtract(this.getPixelOrigin())},wrapLatLng:function(n){return this.options.crs.wrapLatLng(lt(n))},wrapLatLngBounds:function(n){return this.options.crs.wrapLatLngBounds(nt(n))},distance:function(n,r){return this.options.crs.distance(lt(n),lt(r))},containerPointToLayerPoint:function(n){return tt(n).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(n){return tt(n).add(this._getMapPanePos())},containerPointToLatLng:function(n){var r=this.containerPointToLayerPoint(tt(n));return this.layerPointToLatLng(r)},latLngToContainerPoint:function(n){return this.layerPointToContainerPoint(this.latLngToLayerPoint(lt(n)))},mouseEventToContainerPoint:function(n){return Ia(n,this._container)},mouseEventToLayerPoint:function(n){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(n))},mouseEventToLatLng:function(n){return this.layerPointToLatLng(this.mouseEventToLayerPoint(n))},_initContainer:function(n){var r=this._container=Hs(n);if(r){if(r._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");xt(r,"scroll",this._onScroll,this),this._containerId=w(r)},_initLayout:function(){var n=this._container;this._fadeAnimated=this.options.fadeAnimation&&mt.any3d,St(n,"leaflet-container"+(mt.touch?" leaflet-touch":"")+(mt.retina?" leaflet-retina":"")+(mt.ielt9?" leaflet-oldie":"")+(mt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var r=Na(n,"position");r!=="absolute"&&r!=="relative"&&r!=="fixed"&&r!=="sticky"&&(n.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var n=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),ne(this._mapPane,new k(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(St(n.markerPane,"leaflet-zoom-hide"),St(n.shadowPane,"leaflet-zoom-hide"))},_resetView:function(n,r,c){ne(this._mapPane,new k(0,0));var m=!this._loaded;this._loaded=!0,r=this._limitZoom(r),this.fire("viewprereset");var y=this._zoom!==r;this._moveStart(y,c)._move(n,r)._moveEnd(y),this.fire("viewreset"),m&&this.fire("load")},_moveStart:function(n,r){return n&&this.fire("zoomstart"),r||this.fire("movestart"),this},_move:function(n,r,c,m){r===void 0&&(r=this._zoom);var y=this._zoom!==r;return this._zoom=r,this._lastCenter=n,this._pixelOrigin=this._getNewPixelOrigin(n),m?c&&c.pinch&&this.fire("zoom",c):((y||c&&c.pinch)&&this.fire("zoom",c),this.fire("move",c)),this},_moveEnd:function(n){return n&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return Ut(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(n){ne(this._mapPane,this._getMapPanePos().subtract(n))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(n){this._targets={},this._targets[w(this._container)]=this;var r=n?Wt:xt;r(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&r(window,"resize",this._onResize,this),mt.any3d&&this.options.transform3DLimit&&(n?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){Ut(this._resizeRequest),this._resizeRequest=Ct(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var n=this._getMapPanePos();Math.max(Math.abs(n.x),Math.abs(n.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(n,r){for(var c=[],m,y=r==="mouseout"||r==="mouseover",S=n.target||n.srcElement,j=!1;S;){if(m=this._targets[w(S)],m&&(r==="click"||r==="preclick")&&this._draggableMoved(m)){j=!0;break}if(m&&m.listens(r,!0)&&(y&&!Nn(S,n)||(c.push(m),y))||S===this._container)break;S=S.parentNode}return!c.length&&!j&&!y&&this.listens(r,!0)&&(c=[this]),c},_isClickDisabled:function(n){for(;n&&n!==this._container;){if(n._leaflet_disable_click)return!0;n=n.parentNode}},_handleDOMEvent:function(n){var r=n.target||n.srcElement;if(!(!this._loaded||r._leaflet_disable_events||n.type==="click"&&this._isClickDisabled(r))){var c=n.type;c==="mousedown"&&Gi(r),this._fireDOMEvent(n,c)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(n,r,c){if(n.type==="click"){var m=d({},n);m.type="preclick",this._fireDOMEvent(m,m.type,c)}var y=this._findEventTargets(n,r);if(c){for(var S=[],j=0;j<c.length;j++)c[j].listens(r,!0)&&S.push(c[j]);y=S.concat(y)}if(y.length){r==="contextmenu"&&fe(n);var N=y[0],Z={originalEvent:n};if(n.type!=="keypress"&&n.type!=="keydown"&&n.type!=="keyup"){var J=N.getLatLng&&(!N._radius||N._radius<=10);Z.containerPoint=J?this.latLngToContainerPoint(N.getLatLng()):this.mouseEventToContainerPoint(n),Z.layerPoint=this.containerPointToLayerPoint(Z.containerPoint),Z.latlng=J?N.getLatLng():this.layerPointToLatLng(Z.layerPoint)}for(j=0;j<y.length;j++)if(y[j].fire(r,Z,!0),Z.originalEvent._stopped||y[j].options.bubblingMouseEvents===!1&&ot(this._mouseEvents,r)!==-1)return}},_draggableMoved:function(n){return n=n.dragging&&n.dragging.enabled()?n:this,n.dragging&&n.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var n=0,r=this._handlers.length;n<r;n++)this._handlers[n].disable()},whenReady:function(n,r){return this._loaded?n.call(r||this,{target:this}):this.on("load",n,r),this},_getMapPanePos:function(){return Qn(this._mapPane)||new k(0,0)},_moved:function(){var n=this._getMapPanePos();return n&&!n.equals([0,0])},_getTopLeftPoint:function(n,r){var c=n&&r!==void 0?this._getNewPixelOrigin(n,r):this.getPixelOrigin();return c.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(n,r){var c=this.getSize()._divideBy(2);return this.project(n,r)._subtract(c)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(n,r,c){var m=this._getNewPixelOrigin(c,r);return this.project(n,r)._subtract(m)},_latLngBoundsToNewLayerBounds:function(n,r,c){var m=this._getNewPixelOrigin(c,r);return V([this.project(n.getSouthWest(),r)._subtract(m),this.project(n.getNorthWest(),r)._subtract(m),this.project(n.getSouthEast(),r)._subtract(m),this.project(n.getNorthEast(),r)._subtract(m)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(n){return this.latLngToLayerPoint(n).subtract(this._getCenterLayerPoint())},_limitCenter:function(n,r,c){if(!c)return n;var m=this.project(n,r),y=this.getSize().divideBy(2),S=new O(m.subtract(y),m.add(y)),j=this._getBoundsOffset(S,c,r);return Math.abs(j.x)<=1&&Math.abs(j.y)<=1?n:this.unproject(m.add(j),r)},_limitOffset:function(n,r){if(!r)return n;var c=this.getPixelBounds(),m=new O(c.min.add(n),c.max.add(n));return n.add(this._getBoundsOffset(m,r))},_getBoundsOffset:function(n,r,c){var m=V(this.project(r.getNorthEast(),c),this.project(r.getSouthWest(),c)),y=m.min.subtract(n.min),S=m.max.subtract(n.max),j=this._rebound(y.x,-S.x),N=this._rebound(y.y,-S.y);return new k(j,N)},_rebound:function(n,r){return n+r>0?Math.round(n-r)/2:Math.max(0,Math.ceil(n))-Math.max(0,Math.floor(r))},_limitZoom:function(n){var r=this.getMinZoom(),c=this.getMaxZoom(),m=mt.any3d?this.options.zoomSnap:1;return m&&(n=Math.round(n/m)*m),Math.max(r,Math.min(c,n))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){ue(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(n,r){var c=this._getCenterOffset(n)._trunc();return(r&&r.animate)!==!0&&!this.getSize().contains(c)?!1:(this.panBy(c,r),!0)},_createAnimProxy:function(){var n=this._proxy=Lt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(n),this.on("zoomanim",function(r){var c=Xn,m=this._proxy.style[c];Dn(this._proxy,this.project(r.center,r.zoom),this.getZoomScale(r.zoom,1)),m===this._proxy.style[c]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Jt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var n=this.getCenter(),r=this.getZoom();Dn(this._proxy,this.project(n,r),this.getZoomScale(r,1))},_catchTransitionEnd:function(n){this._animatingZoom&&n.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(n,r,c){if(this._animatingZoom)return!0;if(c=c||{},!this._zoomAnimated||c.animate===!1||this._nothingToAnimate()||Math.abs(r-this._zoom)>this.options.zoomAnimationThreshold)return!1;var m=this.getZoomScale(r),y=this._getCenterOffset(n)._divideBy(1-1/m);return c.animate!==!0&&!this.getSize().contains(y)?!1:(Ct(function(){this._moveStart(!0,c.noMoveStart||!1)._animateZoom(n,r,!0)},this),!0)},_animateZoom:function(n,r,c,m){this._mapPane&&(c&&(this._animatingZoom=!0,this._animateToCenter=n,this._animateToZoom=r,St(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:n,zoom:r,noUpdate:m}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(g(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&ue(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function $s(n,r){return new Dt(n,r)}var We=Kt.extend({options:{position:"topright"},initialize:function(n){P(this,n)},getPosition:function(){return this.options.position},setPosition:function(n){var r=this._map;return r&&r.removeControl(this),this.options.position=n,r&&r.addControl(this),this},getContainer:function(){return this._container},addTo:function(n){this.remove(),this._map=n;var r=this._container=this.onAdd(n),c=this.getPosition(),m=n._controlCorners[c];return St(r,"leaflet-control"),c.indexOf("bottom")!==-1?m.insertBefore(r,m.firstChild):m.appendChild(r),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Jt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(n){this._map&&n&&n.screenX>0&&n.screenY>0&&this._map.getContainer().focus()}}),Pn=function(n){return new We(n)};Dt.include({addControl:function(n){return n.addTo(this),this},removeControl:function(n){return n.remove(),this},_initControlPos:function(){var n=this._controlCorners={},r="leaflet-",c=this._controlContainer=Lt("div",r+"control-container",this._container);function m(y,S){var j=r+y+" "+r+S;n[y+S]=Lt("div",j,c)}m("top","left"),m("top","right"),m("bottom","left"),m("bottom","right")},_clearControlPos:function(){for(var n in this._controlCorners)Jt(this._controlCorners[n]);Jt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Va=We.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(n,r,c,m){return c<m?-1:m<c?1:0}},initialize:function(n,r,c){P(this,c),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var m in n)this._addLayer(n[m],m);for(m in r)this._addLayer(r[m],m,!0)},onAdd:function(n){this._initLayout(),this._update(),this._map=n,n.on("zoomend",this._checkDisabledLayers,this);for(var r=0;r<this._layers.length;r++)this._layers[r].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(n){return We.prototype.addTo.call(this,n),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var n=0;n<this._layers.length;n++)this._layers[n].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(n,r){return this._addLayer(n,r),this._map?this._update():this},addOverlay:function(n,r){return this._addLayer(n,r,!0),this._map?this._update():this},removeLayer:function(n){n.off("add remove",this._onLayerChange,this);var r=this._getLayer(w(n));return r&&this._layers.splice(this._layers.indexOf(r),1),this._map?this._update():this},expand:function(){St(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var n=this._map.getSize().y-(this._container.offsetTop+50);return n<this._section.clientHeight?(St(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=n+"px"):ue(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return ue(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var n="leaflet-control-layers",r=this._container=Lt("div",n),c=this.options.collapsed;r.setAttribute("aria-haspopup",!0),bi(r),Tn(r);var m=this._section=Lt("section",n+"-list");c&&(this._map.on("click",this.collapse,this),xt(r,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var y=this._layersLink=Lt("a",n+"-toggle",r);y.href="#",y.title="Layers",y.setAttribute("role","button"),xt(y,{keydown:function(S){S.keyCode===13&&this._expandSafely()},click:function(S){fe(S),this._expandSafely()}},this),c||this.expand(),this._baseLayersList=Lt("div",n+"-base",m),this._separator=Lt("div",n+"-separator",m),this._overlaysList=Lt("div",n+"-overlays",m),r.appendChild(m)},_getLayer:function(n){for(var r=0;r<this._layers.length;r++)if(this._layers[r]&&w(this._layers[r].layer)===n)return this._layers[r]},_addLayer:function(n,r,c){this._map&&n.on("add remove",this._onLayerChange,this),this._layers.push({layer:n,name:r,overlay:c}),this.options.sortLayers&&this._layers.sort(g(function(m,y){return this.options.sortFunction(m.layer,y.layer,m.name,y.name)},this)),this.options.autoZIndex&&n.setZIndex&&(this._lastZIndex++,n.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Je(this._baseLayersList),Je(this._overlaysList),this._layerControlInputs=[];var n,r,c,m,y=0;for(c=0;c<this._layers.length;c++)m=this._layers[c],this._addItem(m),r=r||m.overlay,n=n||!m.overlay,y+=m.overlay?0:1;return this.options.hideSingleBase&&(n=n&&y>1,this._baseLayersList.style.display=n?"":"none"),this._separator.style.display=r&&n?"":"none",this},_onLayerChange:function(n){this._handlingClick||this._update();var r=this._getLayer(w(n.target)),c=r.overlay?n.type==="add"?"overlayadd":"overlayremove":n.type==="add"?"baselayerchange":null;c&&this._map.fire(c,r)},_createRadioElement:function(n,r){var c='<input type="radio" class="leaflet-control-layers-selector" name="'+n+'"'+(r?' checked="checked"':"")+"/>",m=document.createElement("div");return m.innerHTML=c,m.firstChild},_addItem:function(n){var r=document.createElement("label"),c=this._map.hasLayer(n.layer),m;n.overlay?(m=document.createElement("input"),m.type="checkbox",m.className="leaflet-control-layers-selector",m.defaultChecked=c):m=this._createRadioElement("leaflet-base-layers_"+w(this),c),this._layerControlInputs.push(m),m.layerId=w(n.layer),xt(m,"click",this._onInputClick,this);var y=document.createElement("span");y.innerHTML=" "+n.name;var S=document.createElement("span");r.appendChild(S),S.appendChild(m),S.appendChild(y);var j=n.overlay?this._overlaysList:this._baseLayersList;return j.appendChild(r),this._checkDisabledLayers(),r},_onInputClick:function(){if(!this._preventClick){var n=this._layerControlInputs,r,c,m=[],y=[];this._handlingClick=!0;for(var S=n.length-1;S>=0;S--)r=n[S],c=this._getLayer(r.layerId).layer,r.checked?m.push(c):r.checked||y.push(c);for(S=0;S<y.length;S++)this._map.hasLayer(y[S])&&this._map.removeLayer(y[S]);for(S=0;S<m.length;S++)this._map.hasLayer(m[S])||this._map.addLayer(m[S]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var n=this._layerControlInputs,r,c,m=this._map.getZoom(),y=n.length-1;y>=0;y--)r=n[y],c=this._getLayer(r.layerId).layer,r.disabled=c.options.minZoom!==void 0&&m<c.options.minZoom||c.options.maxZoom!==void 0&&m>c.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var n=this._section;this._preventClick=!0,xt(n,"click",fe),this.expand();var r=this;setTimeout(function(){Wt(n,"click",fe),r._preventClick=!1})}}),ul=function(n,r,c){return new Va(n,r,c)},Ys=We.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(n){var r="leaflet-control-zoom",c=Lt("div",r+" leaflet-bar"),m=this.options;return this._zoomInButton=this._createButton(m.zoomInText,m.zoomInTitle,r+"-in",c,this._zoomIn),this._zoomOutButton=this._createButton(m.zoomOutText,m.zoomOutTitle,r+"-out",c,this._zoomOut),this._updateDisabled(),n.on("zoomend zoomlevelschange",this._updateDisabled,this),c},onRemove:function(n){n.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(n){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(n.shiftKey?3:1))},_zoomOut:function(n){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(n.shiftKey?3:1))},_createButton:function(n,r,c,m,y){var S=Lt("a",c,m);return S.innerHTML=n,S.href="#",S.title=r,S.setAttribute("role","button"),S.setAttribute("aria-label",r),bi(S),xt(S,"click",Jn),xt(S,"click",y,this),xt(S,"click",this._refocusOnMap,this),S},_updateDisabled:function(){var n=this._map,r="leaflet-disabled";ue(this._zoomInButton,r),ue(this._zoomOutButton,r),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||n._zoom===n.getMinZoom())&&(St(this._zoomOutButton,r),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||n._zoom===n.getMaxZoom())&&(St(this._zoomInButton,r),this._zoomInButton.setAttribute("aria-disabled","true"))}});Dt.mergeOptions({zoomControl:!0}),Dt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Ys,this.addControl(this.zoomControl))});var tc=function(n){return new Ys(n)},cl=We.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(n){var r="leaflet-control-scale",c=Lt("div",r),m=this.options;return this._addScales(m,r+"-line",c),n.on(m.updateWhenIdle?"moveend":"move",this._update,this),n.whenReady(this._update,this),c},onRemove:function(n){n.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(n,r,c){n.metric&&(this._mScale=Lt("div",r,c)),n.imperial&&(this._iScale=Lt("div",r,c))},_update:function(){var n=this._map,r=n.getSize().y/2,c=n.distance(n.containerPointToLatLng([0,r]),n.containerPointToLatLng([this.options.maxWidth,r]));this._updateScales(c)},_updateScales:function(n){this.options.metric&&n&&this._updateMetric(n),this.options.imperial&&n&&this._updateImperial(n)},_updateMetric:function(n){var r=this._getRoundNum(n),c=r<1e3?r+" m":r/1e3+" km";this._updateScale(this._mScale,c,r/n)},_updateImperial:function(n){var r=n*3.2808399,c,m,y;r>5280?(c=r/5280,m=this._getRoundNum(c),this._updateScale(this._iScale,m+" mi",m/c)):(y=this._getRoundNum(r),this._updateScale(this._iScale,y+" ft",y/r))},_updateScale:function(n,r,c){n.style.width=Math.round(this.options.maxWidth*c)+"px",n.innerHTML=r},_getRoundNum:function(n){var r=Math.pow(10,(Math.floor(n)+"").length-1),c=n/r;return c=c>=10?10:c>=5?5:c>=3?3:c>=2?2:1,r*c}}),Ws=function(n){return new cl(n)},ec='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Ks=We.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(mt.inlineSvg?ec+" ":"")+"Leaflet</a>"},initialize:function(n){P(this,n),this._attributions={}},onAdd:function(n){n.attributionControl=this,this._container=Lt("div","leaflet-control-attribution"),bi(this._container);for(var r in n._layers)n._layers[r].getAttribution&&this.addAttribution(n._layers[r].getAttribution());return this._update(),n.on("layeradd",this._addAttribution,this),this._container},onRemove:function(n){n.off("layeradd",this._addAttribution,this)},_addAttribution:function(n){n.layer.getAttribution&&(this.addAttribution(n.layer.getAttribution()),n.layer.once("remove",function(){this.removeAttribution(n.layer.getAttribution())},this))},setPrefix:function(n){return this.options.prefix=n,this._update(),this},addAttribution:function(n){return n?(this._attributions[n]||(this._attributions[n]=0),this._attributions[n]++,this._update(),this):this},removeAttribution:function(n){return n?(this._attributions[n]&&(this._attributions[n]--,this._update()),this):this},_update:function(){if(this._map){var n=[];for(var r in this._attributions)this._attributions[r]&&n.push(r);var c=[];this.options.prefix&&c.push(this.options.prefix),n.length&&c.push(n.join(", ")),this._container.innerHTML=c.join(' <span aria-hidden="true">|</span> ')}}});Dt.mergeOptions({attributionControl:!0}),Dt.addInitHook(function(){this.options.attributionControl&&new Ks().addTo(this)});var nc=function(n){return new Ks(n)};We.Layers=Va,We.Zoom=Ys,We.Scale=cl,We.Attribution=Ks,Pn.layers=ul,Pn.zoom=tc,Pn.scale=Ws,Pn.attribution=nc;var En=Kt.extend({initialize:function(n){this._map=n},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});En.addTo=function(n,r){return n.addHandler(r,this),this};var ic={Events:$},Xs=mt.touch?"touchstart mousedown":"mousedown",Fn=at.extend({options:{clickTolerance:3},initialize:function(n,r,c,m){P(this,m),this._element=n,this._dragStartTarget=r||n,this._preventOutline=c},enable:function(){this._enabled||(xt(this._dragStartTarget,Xs,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Fn._dragging===this&&this.finishDrag(!0),Wt(this._dragStartTarget,Xs,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(n){if(this._enabled&&(this._moved=!1,!qs(this._element,"leaflet-zoom-anim"))){if(n.touches&&n.touches.length!==1){Fn._dragging===this&&this.finishDrag();return}if(!(Fn._dragging||n.shiftKey||n.which!==1&&n.button!==1&&!n.touches)&&(Fn._dragging=this,this._preventOutline&&Gi(this._element),Rr(),Ii(),!this._moving)){this.fire("down");var r=n.touches?n.touches[0]:n,c=kr(this._element);this._startPoint=new k(r.clientX,r.clientY),this._startPos=Qn(this._element),this._parentScale=Ha(c);var m=n.type==="mousedown";xt(document,m?"mousemove":"touchmove",this._onMove,this),xt(document,m?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(n){if(this._enabled){if(n.touches&&n.touches.length>1){this._moved=!0;return}var r=n.touches&&n.touches.length===1?n.touches[0]:n,c=new k(r.clientX,r.clientY)._subtract(this._startPoint);!c.x&&!c.y||Math.abs(c.x)+Math.abs(c.y)<this.options.clickTolerance||(c.x/=this._parentScale.x,c.y/=this._parentScale.y,fe(n),this._moved||(this.fire("dragstart"),this._moved=!0,St(document.body,"leaflet-dragging"),this._lastTarget=n.target||n.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),St(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(c),this._moving=!0,this._lastEvent=n,this._updatePosition())}},_updatePosition:function(){var n={originalEvent:this._lastEvent};this.fire("predrag",n),ne(this._element,this._newPos),this.fire("drag",n)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(n){ue(document.body,"leaflet-dragging"),this._lastTarget&&(ue(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Wt(document,"mousemove touchmove",this._onMove,this),Wt(document,"mouseup touchend touchcancel",this._onUp,this),Ua(),Sn();var r=this._moved&&this._moving;this._moving=!1,Fn._dragging=!1,r&&this.fire("dragend",{noInertia:n,distance:this._newPos.distanceTo(this._startPos)})}});function hl(n,r,c){var m,y=[1,4,2,8],S,j,N,Z,J,st,gt,jt;for(S=0,st=n.length;S<st;S++)n[S]._code=xi(n[S],r);for(N=0;N<4;N++){for(gt=y[N],m=[],S=0,st=n.length,j=st-1;S<st;j=S++)Z=n[S],J=n[j],Z._code&gt?J._code&gt||(jt=Br(J,Z,gt,r,c),jt._code=xi(jt,r),m.push(jt)):(J._code&gt&&(jt=Br(J,Z,gt,r,c),jt._code=xi(jt,r),m.push(jt)),m.push(Z));n=m}return n}function dl(n,r){var c,m,y,S,j,N,Z,J,st;if(!n||n.length===0)throw new Error("latlngs not passed");tn(n)||(console.warn("latlngs are not flat! Only the first ring will be used"),n=n[0]);var gt=lt([0,0]),jt=nt(n),Oe=jt.getNorthWest().distanceTo(jt.getSouthWest())*jt.getNorthEast().distanceTo(jt.getNorthWest());Oe<1700&&(gt=Qs(n));var pe=n.length,Ke=[];for(c=0;c<pe;c++){var It=lt(n[c]);Ke.push(r.project(lt([It.lat-gt.lat,It.lng-gt.lng])))}for(N=Z=J=0,c=0,m=pe-1;c<pe;m=c++)y=Ke[c],S=Ke[m],j=y.y*S.x-S.y*y.x,Z+=(y.x+S.x)*j,J+=(y.y+S.y)*j,N+=j*3;N===0?st=Ke[0]:st=[Z/N,J/N];var Vt=r.unproject(tt(st));return lt([Vt.lat+gt.lat,Vt.lng+gt.lng])}function Qs(n){for(var r=0,c=0,m=0,y=0;y<n.length;y++){var S=lt(n[y]);r+=S.lat,c+=S.lng,m++}return lt([r/m,c/m])}var Js={__proto__:null,clipPolygon:hl,polygonCenter:dl,centroid:Qs};function fl(n,r){if(!r||!n.length)return n.slice();var c=r*r;return n=rc(n,c),n=ml(n,c),n}function pl(n,r,c){return Math.sqrt(Ga(n,r,c,!0))}function ac(n,r,c){return Ga(n,r,c)}function ml(n,r){var c=n.length,m=typeof Uint8Array<"u"?Uint8Array:Array,y=new m(c);y[0]=y[c-1]=1,Fs(n,y,r,0,c-1);var S,j=[];for(S=0;S<c;S++)y[S]&&j.push(n[S]);return j}function Fs(n,r,c,m,y){var S=0,j,N,Z;for(N=m+1;N<=y-1;N++)Z=Ga(n[N],n[m],n[y],!0),Z>S&&(j=N,S=Z);S>c&&(r[j]=1,Fs(n,r,c,m,j),Fs(n,r,c,j,y))}function rc(n,r){for(var c=[n[0]],m=1,y=0,S=n.length;m<S;m++)sc(n[m],n[y])>r&&(c.push(n[m]),y=m);return y<S-1&&c.push(n[S-1]),c}var gl;function _l(n,r,c,m,y){var S=m?gl:xi(n,c),j=xi(r,c),N,Z,J;for(gl=j;;){if(!(S|j))return[n,r];if(S&j)return!1;N=S||j,Z=Br(n,r,N,c,y),J=xi(Z,c),N===S?(n=Z,S=J):(r=Z,j=J)}}function Br(n,r,c,m,y){var S=r.x-n.x,j=r.y-n.y,N=m.min,Z=m.max,J,st;return c&8?(J=n.x+S*(Z.y-n.y)/j,st=Z.y):c&4?(J=n.x+S*(N.y-n.y)/j,st=N.y):c&2?(J=Z.x,st=n.y+j*(Z.x-n.x)/S):c&1&&(J=N.x,st=n.y+j*(N.x-n.x)/S),new k(J,st,y)}function xi(n,r){var c=0;return n.x<r.min.x?c|=1:n.x>r.max.x&&(c|=2),n.y<r.min.y?c|=4:n.y>r.max.y&&(c|=8),c}function sc(n,r){var c=r.x-n.x,m=r.y-n.y;return c*c+m*m}function Ga(n,r,c,m){var y=r.x,S=r.y,j=c.x-y,N=c.y-S,Z=j*j+N*N,J;return Z>0&&(J=((n.x-y)*j+(n.y-S)*N)/Z,J>1?(y=c.x,S=c.y):J>0&&(y+=j*J,S+=N*J)),j=n.x-y,N=n.y-S,m?j*j+N*N:new k(y,S)}function tn(n){return!B(n[0])||typeof n[0][0]!="object"&&typeof n[0][0]<"u"}function Dr(n){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),tn(n)}function Wi(n,r){var c,m,y,S,j,N,Z,J;if(!n||n.length===0)throw new Error("latlngs not passed");tn(n)||(console.warn("latlngs are not flat! Only the first ring will be used"),n=n[0]);var st=lt([0,0]),gt=nt(n),jt=gt.getNorthWest().distanceTo(gt.getSouthWest())*gt.getNorthEast().distanceTo(gt.getNorthWest());jt<1700&&(st=Qs(n));var Oe=n.length,pe=[];for(c=0;c<Oe;c++){var Ke=lt(n[c]);pe.push(r.project(lt([Ke.lat-st.lat,Ke.lng-st.lng])))}for(c=0,m=0;c<Oe-1;c++)m+=pe[c].distanceTo(pe[c+1])/2;if(m===0)J=pe[0];else for(c=0,S=0;c<Oe-1;c++)if(j=pe[c],N=pe[c+1],y=j.distanceTo(N),S+=y,S>m){Z=(S-m)/y,J=[N.x-Z*(N.x-j.x),N.y-Z*(N.y-j.y)];break}var It=r.unproject(tt(J));return lt([It.lat+st.lat,It.lng+st.lng])}var oc={__proto__:null,simplify:fl,pointToSegmentDistance:pl,closestPointOnSegment:ac,clipSegment:_l,_getEdgeIntersection:Br,_getBitCode:xi,_sqClosestPointOnSegment:Ga,isFlat:tn,_flat:Dr,polylineCenter:Wi},Nr={project:function(n){return new k(n.lng,n.lat)},unproject:function(n){return new ut(n.y,n.x)},bounds:new O([-180,-90],[180,90])},Pr={R:6378137,R_MINOR:6356752314245179e-9,bounds:new O([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(n){var r=Math.PI/180,c=this.R,m=n.lat*r,y=this.R_MINOR/c,S=Math.sqrt(1-y*y),j=S*Math.sin(m),N=Math.tan(Math.PI/4-m/2)/Math.pow((1-j)/(1+j),S/2);return m=-c*Math.log(Math.max(N,1e-10)),new k(n.lng*r*c,m)},unproject:function(n){for(var r=180/Math.PI,c=this.R,m=this.R_MINOR/c,y=Math.sqrt(1-m*m),S=Math.exp(-n.y/c),j=Math.PI/2-2*Math.atan(S),N=0,Z=.1,J;N<15&&Math.abs(Z)>1e-7;N++)J=y*Math.sin(j),J=Math.pow((1-J)/(1+J),y/2),Z=Math.PI/2-2*Math.atan(S*J)-j,j+=Z;return new ut(j*r,n.x*r/c)}},yl={__proto__:null,LonLat:Nr,Mercator:Pr,SphericalMercator:ci},vl=d({},oe,{code:"EPSG:3395",projection:Pr,transformation:(function(){var n=.5/(Math.PI*Pr.R);return hi(n,.5,-n,.5)})()}),to=d({},oe,{code:"EPSG:4326",projection:Nr,transformation:hi(1/180,1,-1/180,.5)}),Ki=d({},zt,{projection:Nr,transformation:hi(1,0,-1,0),scale:function(n){return Math.pow(2,n)},zoom:function(n){return Math.log(n)/Math.LN2},distance:function(n,r){var c=r.lng-n.lng,m=r.lat-n.lat;return Math.sqrt(c*c+m*m)},infinite:!0});zt.Earth=oe,zt.EPSG3395=vl,zt.EPSG3857=Tr,zt.EPSG900913=di,zt.EPSG4326=to,zt.Simple=Ki;var pn=at.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(n){return n.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(n){return n&&n.removeLayer(this),this},getPane:function(n){return this._map.getPane(n?this.options[n]||n:this.options.pane)},addInteractiveTarget:function(n){return this._map._targets[w(n)]=this,this},removeInteractiveTarget:function(n){return delete this._map._targets[w(n)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(n){var r=n.target;if(r.hasLayer(this)){if(this._map=r,this._zoomAnimated=r._zoomAnimated,this.getEvents){var c=this.getEvents();r.on(c,this),this.once("remove",function(){r.off(c,this)},this)}this.onAdd(r),this.fire("add"),r.fire("layeradd",{layer:this})}}});Dt.include({addLayer:function(n){if(!n._layerAdd)throw new Error("The provided object is not a Layer.");var r=w(n);return this._layers[r]?this:(this._layers[r]=n,n._mapToAdd=this,n.beforeAdd&&n.beforeAdd(this),this.whenReady(n._layerAdd,n),this)},removeLayer:function(n){var r=w(n);return this._layers[r]?(this._loaded&&n.onRemove(this),delete this._layers[r],this._loaded&&(this.fire("layerremove",{layer:n}),n.fire("remove")),n._map=n._mapToAdd=null,this):this},hasLayer:function(n){return w(n)in this._layers},eachLayer:function(n,r){for(var c in this._layers)n.call(r,this._layers[c]);return this},_addLayers:function(n){n=n?B(n)?n:[n]:[];for(var r=0,c=n.length;r<c;r++)this.addLayer(n[r])},_addZoomLimit:function(n){(!isNaN(n.options.maxZoom)||!isNaN(n.options.minZoom))&&(this._zoomBoundLayers[w(n)]=n,this._updateZoomLevels())},_removeZoomLimit:function(n){var r=w(n);this._zoomBoundLayers[r]&&(delete this._zoomBoundLayers[r],this._updateZoomLevels())},_updateZoomLevels:function(){var n=1/0,r=-1/0,c=this._getZoomSpan();for(var m in this._zoomBoundLayers){var y=this._zoomBoundLayers[m].options;n=y.minZoom===void 0?n:Math.min(n,y.minZoom),r=y.maxZoom===void 0?r:Math.max(r,y.maxZoom)}this._layersMaxZoom=r===-1/0?void 0:r,this._layersMinZoom=n===1/0?void 0:n,c!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Xi=pn.extend({initialize:function(n,r){P(this,r),this._layers={};var c,m;if(n)for(c=0,m=n.length;c<m;c++)this.addLayer(n[c])},addLayer:function(n){var r=this.getLayerId(n);return this._layers[r]=n,this._map&&this._map.addLayer(n),this},removeLayer:function(n){var r=n in this._layers?n:this.getLayerId(n);return this._map&&this._layers[r]&&this._map.removeLayer(this._layers[r]),delete this._layers[r],this},hasLayer:function(n){var r=typeof n=="number"?n:this.getLayerId(n);return r in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(n){var r=Array.prototype.slice.call(arguments,1),c,m;for(c in this._layers)m=this._layers[c],m[n]&&m[n].apply(m,r);return this},onAdd:function(n){this.eachLayer(n.addLayer,n)},onRemove:function(n){this.eachLayer(n.removeLayer,n)},eachLayer:function(n,r){for(var c in this._layers)n.call(r,this._layers[c]);return this},getLayer:function(n){return this._layers[n]},getLayers:function(){var n=[];return this.eachLayer(n.push,n),n},setZIndex:function(n){return this.invoke("setZIndex",n)},getLayerId:function(n){return w(n)}}),lc=function(n,r){return new Xi(n,r)},Cn=Xi.extend({addLayer:function(n){return this.hasLayer(n)?this:(n.addEventParent(this),Xi.prototype.addLayer.call(this,n),this.fire("layeradd",{layer:n}))},removeLayer:function(n){return this.hasLayer(n)?(n in this._layers&&(n=this._layers[n]),n.removeEventParent(this),Xi.prototype.removeLayer.call(this,n),this.fire("layerremove",{layer:n})):this},setStyle:function(n){return this.invoke("setStyle",n)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var n=new et;for(var r in this._layers){var c=this._layers[r];n.extend(c.getBounds?c.getBounds():c.getLatLng())}return n}}),bl=function(n,r){return new Cn(n,r)},On=Kt.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(n){P(this,n)},createIcon:function(n){return this._createIcon("icon",n)},createShadow:function(n){return this._createIcon("shadow",n)},_createIcon:function(n,r){var c=this._getIconUrl(n);if(!c){if(n==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var m=this._createImg(c,r&&r.tagName==="IMG"?r:null);return this._setIconStyles(m,n),(this.options.crossOrigin||this.options.crossOrigin==="")&&(m.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),m},_setIconStyles:function(n,r){var c=this.options,m=c[r+"Size"];typeof m=="number"&&(m=[m,m]);var y=tt(m),S=tt(r==="shadow"&&c.shadowAnchor||c.iconAnchor||y&&y.divideBy(2,!0));n.className="leaflet-marker-"+r+" "+(c.className||""),S&&(n.style.marginLeft=-S.x+"px",n.style.marginTop=-S.y+"px"),y&&(n.style.width=y.x+"px",n.style.height=y.y+"px")},_createImg:function(n,r){return r=r||document.createElement("img"),r.src=n,r},_getIconUrl:function(n){return mt.retina&&this.options[n+"RetinaUrl"]||this.options[n+"Url"]}});function $a(n){return new On(n)}var Ya=On.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(n){return typeof Ya.imagePath!="string"&&(Ya.imagePath=this._detectIconPath()),(this.options.imagePath||Ya.imagePath)+On.prototype._getIconUrl.call(this,n)},_stripUrl:function(n){var r=function(c,m,y){var S=m.exec(c);return S&&S[y]};return n=r(n,/^url\((['"])?(.+)\1\)$/,2),n&&r(n,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var n=Lt("div","leaflet-default-icon-path",document.body),r=Na(n,"background-image")||Na(n,"backgroundImage");if(document.body.removeChild(n),r=this._stripUrl(r),r)return r;var c=document.querySelector('link[href$="leaflet.css"]');return c?c.href.substring(0,c.href.length-11-1):""}}),Wa=En.extend({initialize:function(n){this._marker=n},addHooks:function(){var n=this._marker._icon;this._draggable||(this._draggable=new Fn(n,n,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),St(n,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&ue(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(n){var r=this._marker,c=r._map,m=this._marker.options.autoPanSpeed,y=this._marker.options.autoPanPadding,S=Qn(r._icon),j=c.getPixelBounds(),N=c.getPixelOrigin(),Z=V(j.min._subtract(N).add(y),j.max._subtract(N).subtract(y));if(!Z.contains(S)){var J=tt((Math.max(Z.max.x,S.x)-Z.max.x)/(j.max.x-Z.max.x)-(Math.min(Z.min.x,S.x)-Z.min.x)/(j.min.x-Z.min.x),(Math.max(Z.max.y,S.y)-Z.max.y)/(j.max.y-Z.max.y)-(Math.min(Z.min.y,S.y)-Z.min.y)/(j.min.y-Z.min.y)).multiplyBy(m);c.panBy(J,{animate:!1}),this._draggable._newPos._add(J),this._draggable._startPos._add(J),ne(r._icon,this._draggable._newPos),this._onDrag(n),this._panRequest=Ct(this._adjustPan.bind(this,n))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(n){this._marker.options.autoPan&&(Ut(this._panRequest),this._panRequest=Ct(this._adjustPan.bind(this,n)))},_onDrag:function(n){var r=this._marker,c=r._shadow,m=Qn(r._icon),y=r._map.layerPointToLatLng(m);c&&ne(c,m),r._latlng=y,n.latlng=y,n.oldLatLng=this._oldLatLng,r.fire("move",n).fire("drag",n)},_onDragEnd:function(n){Ut(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",n)}}),Ka=pn.extend({options:{icon:new Ya,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(n,r){P(this,r),this._latlng=lt(n)},onAdd:function(n){this._zoomAnimated=this._zoomAnimated&&n.options.markerZoomAnimation,this._zoomAnimated&&n.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(n){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&n.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(n){var r=this._latlng;return this._latlng=lt(n),this.update(),this.fire("move",{oldLatLng:r,latlng:this._latlng})},setZIndexOffset:function(n){return this.options.zIndexOffset=n,this.update()},getIcon:function(){return this.options.icon},setIcon:function(n){return this.options.icon=n,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var n=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(n)}return this},_initIcon:function(){var n=this.options,r="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),c=n.icon.createIcon(this._icon),m=!1;c!==this._icon&&(this._icon&&this._removeIcon(),m=!0,n.title&&(c.title=n.title),c.tagName==="IMG"&&(c.alt=n.alt||"")),St(c,r),n.keyboard&&(c.tabIndex="0",c.setAttribute("role","button")),this._icon=c,n.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&xt(c,"focus",this._panOnFocus,this);var y=n.icon.createShadow(this._shadow),S=!1;y!==this._shadow&&(this._removeShadow(),S=!0),y&&(St(y,r),y.alt=""),this._shadow=y,n.opacity<1&&this._updateOpacity(),m&&this.getPane().appendChild(this._icon),this._initInteraction(),y&&S&&this.getPane(n.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Wt(this._icon,"focus",this._panOnFocus,this),Jt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Jt(this._shadow),this._shadow=null},_setPos:function(n){this._icon&&ne(this._icon,n),this._shadow&&ne(this._shadow,n),this._zIndex=n.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(n){this._icon&&(this._icon.style.zIndex=this._zIndex+n)},_animateZoom:function(n){var r=this._map._latLngToNewLayerPoint(this._latlng,n.zoom,n.center).round();this._setPos(r)},_initInteraction:function(){if(this.options.interactive&&(St(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Wa)){var n=this.options.draggable;this.dragging&&(n=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Wa(this),n&&this.dragging.enable()}},setOpacity:function(n){return this.options.opacity=n,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var n=this.options.opacity;this._icon&&re(this._icon,n),this._shadow&&re(this._shadow,n)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var n=this._map;if(n){var r=this.options.icon.options,c=r.iconSize?tt(r.iconSize):tt(0,0),m=r.iconAnchor?tt(r.iconAnchor):tt(0,0);n.panInside(this._latlng,{paddingTopLeft:m,paddingBottomRight:c.subtract(m)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function xl(n,r){return new Ka(n,r)}var jn=pn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(n){this._renderer=n.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(n){return P(this,n),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&n&&Object.prototype.hasOwnProperty.call(n,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Qi=jn.extend({options:{fill:!0,radius:10},initialize:function(n,r){P(this,r),this._latlng=lt(n),this._radius=this.options.radius},setLatLng:function(n){var r=this._latlng;return this._latlng=lt(n),this.redraw(),this.fire("move",{oldLatLng:r,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(n){return this.options.radius=this._radius=n,this.redraw()},getRadius:function(){return this._radius},setStyle:function(n){var r=n&&n.radius||this._radius;return jn.prototype.setStyle.call(this,n),this.setRadius(r),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var n=this._radius,r=this._radiusY||n,c=this._clickTolerance(),m=[n+c,r+c];this._pxBounds=new O(this._point.subtract(m),this._point.add(m))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(n){return n.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function wl(n,r){return new Qi(n,r)}var Ur=Qi.extend({initialize:function(n,r,c){if(typeof r=="number"&&(r=d({},c,{radius:r})),P(this,r),this._latlng=lt(n),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(n){return this._mRadius=n,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var n=[this._radius,this._radiusY||this._radius];return new et(this._map.layerPointToLatLng(this._point.subtract(n)),this._map.layerPointToLatLng(this._point.add(n)))},setStyle:jn.prototype.setStyle,_project:function(){var n=this._latlng.lng,r=this._latlng.lat,c=this._map,m=c.options.crs;if(m.distance===oe.distance){var y=Math.PI/180,S=this._mRadius/oe.R/y,j=c.project([r+S,n]),N=c.project([r-S,n]),Z=j.add(N).divideBy(2),J=c.unproject(Z).lat,st=Math.acos((Math.cos(S*y)-Math.sin(r*y)*Math.sin(J*y))/(Math.cos(r*y)*Math.cos(J*y)))/y;(isNaN(st)||st===0)&&(st=S/Math.cos(Math.PI/180*r)),this._point=Z.subtract(c.getPixelOrigin()),this._radius=isNaN(st)?0:Z.x-c.project([J,n-st]).x,this._radiusY=Z.y-j.y}else{var gt=m.unproject(m.project(this._latlng).subtract([this._mRadius,0]));this._point=c.latLngToLayerPoint(this._latlng),this._radius=this._point.x-c.latLngToLayerPoint(gt).x}this._updateBounds()}});function Sl(n,r,c){return new Ur(n,r,c)}var Un=jn.extend({options:{smoothFactor:1,noClip:!1},initialize:function(n,r){P(this,r),this._setLatLngs(n)},getLatLngs:function(){return this._latlngs},setLatLngs:function(n){return this._setLatLngs(n),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(n){for(var r=1/0,c=null,m=Ga,y,S,j=0,N=this._parts.length;j<N;j++)for(var Z=this._parts[j],J=1,st=Z.length;J<st;J++){y=Z[J-1],S=Z[J];var gt=m(n,y,S,!0);gt<r&&(r=gt,c=m(n,y,S))}return c&&(c.distance=Math.sqrt(r)),c},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Wi(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(n,r){return r=r||this._defaultShape(),n=lt(n),r.push(n),this._bounds.extend(n),this.redraw()},_setLatLngs:function(n){this._bounds=new et,this._latlngs=this._convertLatLngs(n)},_defaultShape:function(){return tn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(n){for(var r=[],c=tn(n),m=0,y=n.length;m<y;m++)c?(r[m]=lt(n[m]),this._bounds.extend(r[m])):r[m]=this._convertLatLngs(n[m]);return r},_project:function(){var n=new O;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,n),this._bounds.isValid()&&n.isValid()&&(this._rawPxBounds=n,this._updateBounds())},_updateBounds:function(){var n=this._clickTolerance(),r=new k(n,n);this._rawPxBounds&&(this._pxBounds=new O([this._rawPxBounds.min.subtract(r),this._rawPxBounds.max.add(r)]))},_projectLatlngs:function(n,r,c){var m=n[0]instanceof ut,y=n.length,S,j;if(m){for(j=[],S=0;S<y;S++)j[S]=this._map.latLngToLayerPoint(n[S]),c.extend(j[S]);r.push(j)}else for(S=0;S<y;S++)this._projectLatlngs(n[S],r,c)},_clipPoints:function(){var n=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(n))){if(this.options.noClip){this._parts=this._rings;return}var r=this._parts,c,m,y,S,j,N,Z;for(c=0,y=0,S=this._rings.length;c<S;c++)for(Z=this._rings[c],m=0,j=Z.length;m<j-1;m++)N=_l(Z[m],Z[m+1],n,m,!0),N&&(r[y]=r[y]||[],r[y].push(N[0]),(N[1]!==Z[m+1]||m===j-2)&&(r[y].push(N[1]),y++))}},_simplifyPoints:function(){for(var n=this._parts,r=this.options.smoothFactor,c=0,m=n.length;c<m;c++)n[c]=fl(n[c],r)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(n,r){var c,m,y,S,j,N,Z=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(n))return!1;for(c=0,S=this._parts.length;c<S;c++)for(N=this._parts[c],m=0,j=N.length,y=j-1;m<j;y=m++)if(!(!r&&m===0)&&pl(n,N[y],N[m])<=Z)return!0;return!1}});function uc(n,r){return new Un(n,r)}Un._flat=Dr;var Ji=Un.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return dl(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(n){var r=Un.prototype._convertLatLngs.call(this,n),c=r.length;return c>=2&&r[0]instanceof ut&&r[0].equals(r[c-1])&&r.pop(),r},_setLatLngs:function(n){Un.prototype._setLatLngs.call(this,n),tn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return tn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var n=this._renderer._bounds,r=this.options.weight,c=new k(r,r);if(n=new O(n.min.subtract(c),n.max.add(c)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(n))){if(this.options.noClip){this._parts=this._rings;return}for(var m=0,y=this._rings.length,S;m<y;m++)S=hl(this._rings[m],n,!0),S.length&&this._parts.push(S)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(n){var r=!1,c,m,y,S,j,N,Z,J;if(!this._pxBounds||!this._pxBounds.contains(n))return!1;for(S=0,Z=this._parts.length;S<Z;S++)for(c=this._parts[S],j=0,J=c.length,N=J-1;j<J;N=j++)m=c[j],y=c[N],m.y>n.y!=y.y>n.y&&n.x<(y.x-m.x)*(n.y-m.y)/(y.y-m.y)+m.x&&(r=!r);return r||Un.prototype._containsPoint.call(this,n,!0)}});function cc(n,r){return new Ji(n,r)}var Hn=Cn.extend({initialize:function(n,r){P(this,r),this._layers={},n&&this.addData(n)},addData:function(n){var r=B(n)?n:n.features,c,m,y;if(r){for(c=0,m=r.length;c<m;c++)y=r[c],(y.geometries||y.geometry||y.features||y.coordinates)&&this.addData(y);return this}var S=this.options;if(S.filter&&!S.filter(n))return this;var j=Le(n,S);return j?(j.feature=Zr(n),j.defaultOptions=j.options,this.resetStyle(j),S.onEachFeature&&S.onEachFeature(n,j),this.addLayer(j)):this},resetStyle:function(n){return n===void 0?this.eachLayer(this.resetStyle,this):(n.options=d({},n.defaultOptions),this._setLayerStyle(n,this.options.style),this)},setStyle:function(n){return this.eachLayer(function(r){this._setLayerStyle(r,n)},this)},_setLayerStyle:function(n,r){n.setStyle&&(typeof r=="function"&&(r=r(n.feature)),n.setStyle(r))}});function Le(n,r){var c=n.type==="Feature"?n.geometry:n,m=c?c.coordinates:null,y=[],S=r&&r.pointToLayer,j=r&&r.coordsToLatLng||Hr,N,Z,J,st;if(!m&&!c)return null;switch(c.type){case"Point":return N=j(m),Fi(S,n,N,r);case"MultiPoint":for(J=0,st=m.length;J<st;J++)N=j(m[J]),y.push(Fi(S,n,N,r));return new Cn(y);case"LineString":case"MultiLineString":return Z=Xa(m,c.type==="LineString"?0:1,j),new Un(Z,r);case"Polygon":case"MultiPolygon":return Z=Xa(m,c.type==="Polygon"?1:2,j),new Ji(Z,r);case"GeometryCollection":for(J=0,st=c.geometries.length;J<st;J++){var gt=Le({geometry:c.geometries[J],type:"Feature",properties:n.properties},r);gt&&y.push(gt)}return new Cn(y);case"FeatureCollection":for(J=0,st=c.features.length;J<st;J++){var jt=Le(c.features[J],r);jt&&y.push(jt)}return new Cn(y);default:throw new Error("Invalid GeoJSON object.")}}function Fi(n,r,c,m){return n?n(r,c):new Ka(c,m&&m.markersInheritOptions&&m)}function Hr(n){return new ut(n[1],n[0],n[2])}function Xa(n,r,c){for(var m=[],y=0,S=n.length,j;y<S;y++)j=r?Xa(n[y],r-1,c):(c||Hr)(n[y]),m.push(j);return m}function qr(n,r){return n=lt(n),n.alt!==void 0?[z(n.lng,r),z(n.lat,r),z(n.alt,r)]:[z(n.lng,r),z(n.lat,r)]}function Qa(n,r,c,m){for(var y=[],S=0,j=n.length;S<j;S++)y.push(r?Qa(n[S],tn(n[S])?0:r-1,c,m):qr(n[S],m));return!r&&c&&y.length>0&&y.push(y[0].slice()),y}function ti(n,r){return n.feature?d({},n.feature,{geometry:r}):Zr(r)}function Zr(n){return n.type==="Feature"||n.type==="FeatureCollection"?n:{type:"Feature",properties:{},geometry:n}}var ei={toGeoJSON:function(n){return ti(this,{type:"Point",coordinates:qr(this.getLatLng(),n)})}};Ka.include(ei),Ur.include(ei),Qi.include(ei),Un.include({toGeoJSON:function(n){var r=!tn(this._latlngs),c=Qa(this._latlngs,r?1:0,!1,n);return ti(this,{type:(r?"Multi":"")+"LineString",coordinates:c})}}),Ji.include({toGeoJSON:function(n){var r=!tn(this._latlngs),c=r&&!tn(this._latlngs[0]),m=Qa(this._latlngs,c?2:r?1:0,!0,n);return r||(m=[m]),ti(this,{type:(c?"Multi":"")+"Polygon",coordinates:m})}}),Xi.include({toMultiPoint:function(n){var r=[];return this.eachLayer(function(c){r.push(c.toGeoJSON(n).geometry.coordinates)}),ti(this,{type:"MultiPoint",coordinates:r})},toGeoJSON:function(n){var r=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(r==="MultiPoint")return this.toMultiPoint(n);var c=r==="GeometryCollection",m=[];return this.eachLayer(function(y){if(y.toGeoJSON){var S=y.toGeoJSON(n);if(c)m.push(S.geometry);else{var j=Zr(S);j.type==="FeatureCollection"?m.push.apply(m,j.features):m.push(j)}}}),c?ti(this,{geometries:m,type:"GeometryCollection"}):{type:"FeatureCollection",features:m}}});function Ir(n,r){return new Hn(n,r)}var Ja=Ir,ta=pn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(n,r,c){this._url=n,this._bounds=nt(r),P(this,c)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(St(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Jt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(n){return this.options.opacity=n,this._image&&this._updateOpacity(),this},setStyle:function(n){return n.opacity&&this.setOpacity(n.opacity),this},bringToFront:function(){return this._map&&Ce(this._image),this},bringToBack:function(){return this._map&&yi(this._image),this},setUrl:function(n){return this._url=n,this._image&&(this._image.src=n),this},setBounds:function(n){return this._bounds=nt(n),this._map&&this._reset(),this},getEvents:function(){var n={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(n.zoomanim=this._animateZoom),n},setZIndex:function(n){return this.options.zIndex=n,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var n=this._url.tagName==="IMG",r=this._image=n?this._url:Lt("img");if(St(r,"leaflet-image-layer"),this._zoomAnimated&&St(r,"leaflet-zoom-animated"),this.options.className&&St(r,this.options.className),r.onselectstart=E,r.onmousemove=E,r.onload=g(this.fire,this,"load"),r.onerror=g(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(r.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),n){this._url=r.src;return}r.src=this._url,r.alt=this.options.alt},_animateZoom:function(n){var r=this._map.getZoomScale(n.zoom),c=this._map._latLngBoundsToNewLayerBounds(this._bounds,n.zoom,n.center).min;Dn(this._image,c,r)},_reset:function(){var n=this._image,r=new O(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),c=r.getSize();ne(n,r.min),n.style.width=c.x+"px",n.style.height=c.y+"px"},_updateOpacity:function(){re(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var n=this.options.errorOverlayUrl;n&&this._url!==n&&(this._url=n,this._image.src=n)},getCenter:function(){return this._bounds.getCenter()}}),Tl=function(n,r,c){return new ta(n,r,c)},ni=ta.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var n=this._url.tagName==="VIDEO",r=this._image=n?this._url:Lt("video");if(St(r,"leaflet-image-layer"),this._zoomAnimated&&St(r,"leaflet-zoom-animated"),this.options.className&&St(r,this.options.className),r.onselectstart=E,r.onmousemove=E,r.onloadeddata=g(this.fire,this,"load"),n){for(var c=r.getElementsByTagName("source"),m=[],y=0;y<c.length;y++)m.push(c[y].src);this._url=c.length>0?m:[r.src];return}B(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(r.style,"objectFit")&&(r.style.objectFit="fill"),r.autoplay=!!this.options.autoplay,r.loop=!!this.options.loop,r.muted=!!this.options.muted,r.playsInline=!!this.options.playsInline;for(var S=0;S<this._url.length;S++){var j=Lt("source");j.src=this._url[S],r.appendChild(j)}}});function ea(n,r,c){return new ni(n,r,c)}var Vr=ta.extend({_initImage:function(){var n=this._image=this._url;St(n,"leaflet-image-layer"),this._zoomAnimated&&St(n,"leaflet-zoom-animated"),this.options.className&&St(n,this.options.className),n.onselectstart=E,n.onmousemove=E}});function El(n,r,c){return new Vr(n,r,c)}var ke=pn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(n,r){n&&(n instanceof ut||B(n))?(this._latlng=lt(n),P(this,r)):(P(this,n),this._source=r),this.options.content&&(this._content=this.options.content)},openOn:function(n){return n=arguments.length?n:this._source._map,n.hasLayer(this)||n.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(n){return this._map?this.close():(arguments.length?this._source=n:n=this._source,this._prepareOpen(),this.openOn(n._map)),this},onAdd:function(n){this._zoomAnimated=n._zoomAnimated,this._container||this._initLayout(),n._fadeAnimated&&re(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),n._fadeAnimated&&re(this._container,1),this.bringToFront(),this.options.interactive&&(St(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(n){n._fadeAnimated?(re(this._container,0),this._removeTimeout=setTimeout(g(Jt,void 0,this._container),200)):Jt(this._container),this.options.interactive&&(ue(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(n){return this._latlng=lt(n),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(n){return this._content=n,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var n={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(n.zoomanim=this._animateZoom),n},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Ce(this._container),this},bringToBack:function(){return this._map&&yi(this._container),this},_prepareOpen:function(n){var r=this._source;if(!r._map)return!1;if(r instanceof Cn){r=null;var c=this._source._layers;for(var m in c)if(c[m]._map){r=c[m];break}if(!r)return!1;this._source=r}if(!n)if(r.getCenter)n=r.getCenter();else if(r.getLatLng)n=r.getLatLng();else if(r.getBounds)n=r.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(n),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var n=this._contentNode,r=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof r=="string")n.innerHTML=r;else{for(;n.hasChildNodes();)n.removeChild(n.firstChild);n.appendChild(r)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var n=this._map.latLngToLayerPoint(this._latlng),r=tt(this.options.offset),c=this._getAnchor();this._zoomAnimated?ne(this._container,n.add(c)):r=r.add(n).add(c);var m=this._containerBottom=-r.y,y=this._containerLeft=-Math.round(this._containerWidth/2)+r.x;this._container.style.bottom=m+"px",this._container.style.left=y+"px"}},_getAnchor:function(){return[0,0]}});Dt.include({_initOverlay:function(n,r,c,m){var y=r;return y instanceof n||(y=new n(m).setContent(r)),c&&y.setLatLng(c),y}}),pn.include({_initOverlay:function(n,r,c,m){var y=c;return y instanceof n?(P(y,m),y._source=this):(y=r&&!m?r:new n(m,this),y.setContent(c)),y}});var Fa=ke.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(n){return n=arguments.length?n:this._source._map,!n.hasLayer(this)&&n._popup&&n._popup.options.autoClose&&n.removeLayer(n._popup),n._popup=this,ke.prototype.openOn.call(this,n)},onAdd:function(n){ke.prototype.onAdd.call(this,n),n.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof jn||this._source.on("preclick",fn))},onRemove:function(n){ke.prototype.onRemove.call(this,n),n.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof jn||this._source.off("preclick",fn))},getEvents:function(){var n=ke.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(n.preclick=this.close),this.options.keepInView&&(n.moveend=this._adjustPan),n},_initLayout:function(){var n="leaflet-popup",r=this._container=Lt("div",n+" "+(this.options.className||"")+" leaflet-zoom-animated"),c=this._wrapper=Lt("div",n+"-content-wrapper",r);if(this._contentNode=Lt("div",n+"-content",c),bi(r),Tn(this._contentNode),xt(r,"contextmenu",fn),this._tipContainer=Lt("div",n+"-tip-container",r),this._tip=Lt("div",n+"-tip",this._tipContainer),this.options.closeButton){var m=this._closeButton=Lt("a",n+"-close-button",r);m.setAttribute("role","button"),m.setAttribute("aria-label","Close popup"),m.href="#close",m.innerHTML='<span aria-hidden="true">&#215;</span>',xt(m,"click",function(y){fe(y),this.close()},this)}},_updateLayout:function(){var n=this._contentNode,r=n.style;r.width="",r.whiteSpace="nowrap";var c=n.offsetWidth;c=Math.min(c,this.options.maxWidth),c=Math.max(c,this.options.minWidth),r.width=c+1+"px",r.whiteSpace="",r.height="";var m=n.offsetHeight,y=this.options.maxHeight,S="leaflet-popup-scrolled";y&&m>y?(r.height=y+"px",St(n,S)):ue(n,S),this._containerWidth=this._container.offsetWidth},_animateZoom:function(n){var r=this._map._latLngToNewLayerPoint(this._latlng,n.zoom,n.center),c=this._getAnchor();ne(this._container,r.add(c))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var n=this._map,r=parseInt(Na(this._container,"marginBottom"),10)||0,c=this._container.offsetHeight+r,m=this._containerWidth,y=new k(this._containerLeft,-c-this._containerBottom);y._add(Qn(this._container));var S=n.layerPointToContainerPoint(y),j=tt(this.options.autoPanPadding),N=tt(this.options.autoPanPaddingTopLeft||j),Z=tt(this.options.autoPanPaddingBottomRight||j),J=n.getSize(),st=0,gt=0;S.x+m+Z.x>J.x&&(st=S.x+m-J.x+Z.x),S.x-st-N.x<0&&(st=S.x-N.x),S.y+c+Z.y>J.y&&(gt=S.y+c-J.y+Z.y),S.y-gt-N.y<0&&(gt=S.y-N.y),(st||gt)&&(this.options.keepInView&&(this._autopanning=!0),n.fire("autopanstart").panBy([st,gt]))}},_getAnchor:function(){return tt(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Cl=function(n,r){return new Fa(n,r)};Dt.mergeOptions({closePopupOnClick:!0}),Dt.include({openPopup:function(n,r,c){return this._initOverlay(Fa,n,r,c).openOn(this),this},closePopup:function(n){return n=arguments.length?n:this._popup,n&&n.close(),this}}),pn.include({bindPopup:function(n,r){return this._popup=this._initOverlay(Fa,this._popup,n,r),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(n){return this._popup&&(this instanceof Cn||(this._popup._source=this),this._popup._prepareOpen(n||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(n){return this._popup&&this._popup.setContent(n),this},getPopup:function(){return this._popup},_openPopup:function(n){if(!(!this._popup||!this._map)){Jn(n);var r=n.layer||n.target;if(this._popup._source===r&&!(r instanceof jn)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(n.latlng);return}this._popup._source=r,this.openPopup(n.latlng)}},_movePopup:function(n){this._popup.setLatLng(n.latlng)},_onKeyPress:function(n){n.originalEvent.keyCode===13&&this._openPopup(n)}});var tr=ke.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(n){ke.prototype.onAdd.call(this,n),this.setOpacity(this.options.opacity),n.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(n){ke.prototype.onRemove.call(this,n),n.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var n=ke.prototype.getEvents.call(this);return this.options.permanent||(n.preclick=this.close),n},_initLayout:function(){var n="leaflet-tooltip",r=n+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Lt("div",r),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+w(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(n){var r,c,m=this._map,y=this._container,S=m.latLngToContainerPoint(m.getCenter()),j=m.layerPointToContainerPoint(n),N=this.options.direction,Z=y.offsetWidth,J=y.offsetHeight,st=tt(this.options.offset),gt=this._getAnchor();N==="top"?(r=Z/2,c=J):N==="bottom"?(r=Z/2,c=0):N==="center"?(r=Z/2,c=J/2):N==="right"?(r=0,c=J/2):N==="left"?(r=Z,c=J/2):j.x<S.x?(N="right",r=0,c=J/2):(N="left",r=Z+(st.x+gt.x)*2,c=J/2),n=n.subtract(tt(r,c,!0)).add(st).add(gt),ue(y,"leaflet-tooltip-right"),ue(y,"leaflet-tooltip-left"),ue(y,"leaflet-tooltip-top"),ue(y,"leaflet-tooltip-bottom"),St(y,"leaflet-tooltip-"+N),ne(y,n)},_updatePosition:function(){var n=this._map.latLngToLayerPoint(this._latlng);this._setPosition(n)},setOpacity:function(n){this.options.opacity=n,this._container&&re(this._container,n)},_animateZoom:function(n){var r=this._map._latLngToNewLayerPoint(this._latlng,n.zoom,n.center);this._setPosition(r)},_getAnchor:function(){return tt(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),hc=function(n,r){return new tr(n,r)};Dt.include({openTooltip:function(n,r,c){return this._initOverlay(tr,n,r,c).openOn(this),this},closeTooltip:function(n){return n.close(),this}}),pn.include({bindTooltip:function(n,r){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(tr,this._tooltip,n,r),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(n){if(!(!n&&this._tooltipHandlersAdded)){var r=n?"off":"on",c={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?c.add=this._openTooltip:(c.mouseover=this._openTooltip,c.mouseout=this.closeTooltip,c.click=this._openTooltip,this._map?this._addFocusListeners():c.add=this._addFocusListeners),this._tooltip.options.sticky&&(c.mousemove=this._moveTooltip),this[r](c),this._tooltipHandlersAdded=!n}},openTooltip:function(n){return this._tooltip&&(this instanceof Cn||(this._tooltip._source=this),this._tooltip._prepareOpen(n)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(n){return this._tooltip&&this._tooltip.setContent(n),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(n){var r=typeof n.getElement=="function"&&n.getElement();r&&(xt(r,"focus",function(){this._tooltip._source=n,this.openTooltip()},this),xt(r,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(n){var r=typeof n.getElement=="function"&&n.getElement();r&&r.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(n){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var r=this;this._map.once("moveend",function(){r._openOnceFlag=!1,r._openTooltip(n)});return}this._tooltip._source=n.layer||n.target,this.openTooltip(this._tooltip.options.sticky?n.latlng:void 0)}},_moveTooltip:function(n){var r=n.latlng,c,m;this._tooltip.options.sticky&&n.originalEvent&&(c=this._map.mouseEventToContainerPoint(n.originalEvent),m=this._map.containerPointToLayerPoint(c),r=this._map.layerPointToLatLng(m)),this._tooltip.setLatLng(r)}});var Ol=On.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(n){var r=n&&n.tagName==="DIV"?n:document.createElement("div"),c=this.options;if(c.html instanceof Element?(Je(r),r.appendChild(c.html)):r.innerHTML=c.html!==!1?c.html:"",c.bgPos){var m=tt(c.bgPos);r.style.backgroundPosition=-m.x+"px "+-m.y+"px"}return this._setIconStyles(r,"icon"),r},createShadow:function(){return null}});function dc(n){return new Ol(n)}On.Default=Ya;var na=pn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:mt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(n){P(this,n)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(n){n._addZoomLimit(this)},onRemove:function(n){this._removeAllTiles(),Jt(this._container),n._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Ce(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(yi(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(n){return this.options.opacity=n,this._updateOpacity(),this},setZIndex:function(n){return this.options.zIndex=n,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var n=this._clampZoom(this._map.getZoom());n!==this._tileZoom&&(this._tileZoom=n,this._updateLevels()),this._update()}return this},getEvents:function(){var n={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=x(this._onMoveEnd,this.options.updateInterval,this)),n.move=this._onMove),this._zoomAnimated&&(n.zoomanim=this._animateZoom),n},createTile:function(){return document.createElement("div")},getTileSize:function(){var n=this.options.tileSize;return n instanceof k?n:new k(n,n)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(n){for(var r=this.getPane().children,c=-n(-1/0,1/0),m=0,y=r.length,S;m<y;m++)S=r[m].style.zIndex,r[m]!==this._container&&S&&(c=n(c,+S));isFinite(c)&&(this.options.zIndex=c+n(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!mt.ielt9){re(this._container,this.options.opacity);var n=+new Date,r=!1,c=!1;for(var m in this._tiles){var y=this._tiles[m];if(!(!y.current||!y.loaded)){var S=Math.min(1,(n-y.loaded)/200);re(y.el,S),S<1?r=!0:(y.active?c=!0:this._onOpaqueTile(y),y.active=!0)}}c&&!this._noPrune&&this._pruneTiles(),r&&(Ut(this._fadeFrame),this._fadeFrame=Ct(this._updateOpacity,this))}},_onOpaqueTile:E,_initContainer:function(){this._container||(this._container=Lt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var n=this._tileZoom,r=this.options.maxZoom;if(n!==void 0){for(var c in this._levels)c=Number(c),this._levels[c].el.children.length||c===n?(this._levels[c].el.style.zIndex=r-Math.abs(n-c),this._onUpdateLevel(c)):(Jt(this._levels[c].el),this._removeTilesAtZoom(c),this._onRemoveLevel(c),delete this._levels[c]);var m=this._levels[n],y=this._map;return m||(m=this._levels[n]={},m.el=Lt("div","leaflet-tile-container leaflet-zoom-animated",this._container),m.el.style.zIndex=r,m.origin=y.project(y.unproject(y.getPixelOrigin()),n).round(),m.zoom=n,this._setZoomTransform(m,y.getCenter(),y.getZoom()),E(m.el.offsetWidth),this._onCreateLevel(m)),this._level=m,m}},_onUpdateLevel:E,_onRemoveLevel:E,_onCreateLevel:E,_pruneTiles:function(){if(this._map){var n,r,c=this._map.getZoom();if(c>this.options.maxZoom||c<this.options.minZoom){this._removeAllTiles();return}for(n in this._tiles)r=this._tiles[n],r.retain=r.current;for(n in this._tiles)if(r=this._tiles[n],r.current&&!r.active){var m=r.coords;this._retainParent(m.x,m.y,m.z,m.z-5)||this._retainChildren(m.x,m.y,m.z,m.z+2)}for(n in this._tiles)this._tiles[n].retain||this._removeTile(n)}},_removeTilesAtZoom:function(n){for(var r in this._tiles)this._tiles[r].coords.z===n&&this._removeTile(r)},_removeAllTiles:function(){for(var n in this._tiles)this._removeTile(n)},_invalidateAll:function(){for(var n in this._levels)Jt(this._levels[n].el),this._onRemoveLevel(Number(n)),delete this._levels[n];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(n,r,c,m){var y=Math.floor(n/2),S=Math.floor(r/2),j=c-1,N=new k(+y,+S);N.z=+j;var Z=this._tileCoordsToKey(N),J=this._tiles[Z];return J&&J.active?(J.retain=!0,!0):(J&&J.loaded&&(J.retain=!0),j>m?this._retainParent(y,S,j,m):!1)},_retainChildren:function(n,r,c,m){for(var y=2*n;y<2*n+2;y++)for(var S=2*r;S<2*r+2;S++){var j=new k(y,S);j.z=c+1;var N=this._tileCoordsToKey(j),Z=this._tiles[N];if(Z&&Z.active){Z.retain=!0;continue}else Z&&Z.loaded&&(Z.retain=!0);c+1<m&&this._retainChildren(y,S,c+1,m)}},_resetView:function(n){var r=n&&(n.pinch||n.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),r,r)},_animateZoom:function(n){this._setView(n.center,n.zoom,!0,n.noUpdate)},_clampZoom:function(n){var r=this.options;return r.minNativeZoom!==void 0&&n<r.minNativeZoom?r.minNativeZoom:r.maxNativeZoom!==void 0&&r.maxNativeZoom<n?r.maxNativeZoom:n},_setView:function(n,r,c,m){var y=Math.round(r);this.options.maxZoom!==void 0&&y>this.options.maxZoom||this.options.minZoom!==void 0&&y<this.options.minZoom?y=void 0:y=this._clampZoom(y);var S=this.options.updateWhenZooming&&y!==this._tileZoom;(!m||S)&&(this._tileZoom=y,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),y!==void 0&&this._update(n),c||this._pruneTiles(),this._noPrune=!!c),this._setZoomTransforms(n,r)},_setZoomTransforms:function(n,r){for(var c in this._levels)this._setZoomTransform(this._levels[c],n,r)},_setZoomTransform:function(n,r,c){var m=this._map.getZoomScale(c,n.zoom),y=n.origin.multiplyBy(m).subtract(this._map._getNewPixelOrigin(r,c)).round();mt.any3d?Dn(n.el,y,m):ne(n.el,y)},_resetGrid:function(){var n=this._map,r=n.options.crs,c=this._tileSize=this.getTileSize(),m=this._tileZoom,y=this._map.getPixelWorldBounds(this._tileZoom);y&&(this._globalTileRange=this._pxBoundsToTileRange(y)),this._wrapX=r.wrapLng&&!this.options.noWrap&&[Math.floor(n.project([0,r.wrapLng[0]],m).x/c.x),Math.ceil(n.project([0,r.wrapLng[1]],m).x/c.y)],this._wrapY=r.wrapLat&&!this.options.noWrap&&[Math.floor(n.project([r.wrapLat[0],0],m).y/c.x),Math.ceil(n.project([r.wrapLat[1],0],m).y/c.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(n){var r=this._map,c=r._animatingZoom?Math.max(r._animateToZoom,r.getZoom()):r.getZoom(),m=r.getZoomScale(c,this._tileZoom),y=r.project(n,this._tileZoom).floor(),S=r.getSize().divideBy(m*2);return new O(y.subtract(S),y.add(S))},_update:function(n){var r=this._map;if(r){var c=this._clampZoom(r.getZoom());if(n===void 0&&(n=r.getCenter()),this._tileZoom!==void 0){var m=this._getTiledPixelBounds(n),y=this._pxBoundsToTileRange(m),S=y.getCenter(),j=[],N=this.options.keepBuffer,Z=new O(y.getBottomLeft().subtract([N,-N]),y.getTopRight().add([N,-N]));if(!(isFinite(y.min.x)&&isFinite(y.min.y)&&isFinite(y.max.x)&&isFinite(y.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var J in this._tiles){var st=this._tiles[J].coords;(st.z!==this._tileZoom||!Z.contains(new k(st.x,st.y)))&&(this._tiles[J].current=!1)}if(Math.abs(c-this._tileZoom)>1){this._setView(n,c);return}for(var gt=y.min.y;gt<=y.max.y;gt++)for(var jt=y.min.x;jt<=y.max.x;jt++){var Oe=new k(jt,gt);if(Oe.z=this._tileZoom,!!this._isValidTile(Oe)){var pe=this._tiles[this._tileCoordsToKey(Oe)];pe?pe.current=!0:j.push(Oe)}}if(j.sort(function(It,Vt){return It.distanceTo(S)-Vt.distanceTo(S)}),j.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Ke=document.createDocumentFragment();for(jt=0;jt<j.length;jt++)this._addTile(j[jt],Ke);this._level.el.appendChild(Ke)}}}},_isValidTile:function(n){var r=this._map.options.crs;if(!r.infinite){var c=this._globalTileRange;if(!r.wrapLng&&(n.x<c.min.x||n.x>c.max.x)||!r.wrapLat&&(n.y<c.min.y||n.y>c.max.y))return!1}if(!this.options.bounds)return!0;var m=this._tileCoordsToBounds(n);return nt(this.options.bounds).overlaps(m)},_keyToBounds:function(n){return this._tileCoordsToBounds(this._keyToTileCoords(n))},_tileCoordsToNwSe:function(n){var r=this._map,c=this.getTileSize(),m=n.scaleBy(c),y=m.add(c),S=r.unproject(m,n.z),j=r.unproject(y,n.z);return[S,j]},_tileCoordsToBounds:function(n){var r=this._tileCoordsToNwSe(n),c=new et(r[0],r[1]);return this.options.noWrap||(c=this._map.wrapLatLngBounds(c)),c},_tileCoordsToKey:function(n){return n.x+":"+n.y+":"+n.z},_keyToTileCoords:function(n){var r=n.split(":"),c=new k(+r[0],+r[1]);return c.z=+r[2],c},_removeTile:function(n){var r=this._tiles[n];r&&(Jt(r.el),delete this._tiles[n],this.fire("tileunload",{tile:r.el,coords:this._keyToTileCoords(n)}))},_initTile:function(n){St(n,"leaflet-tile");var r=this.getTileSize();n.style.width=r.x+"px",n.style.height=r.y+"px",n.onselectstart=E,n.onmousemove=E,mt.ielt9&&this.options.opacity<1&&re(n,this.options.opacity)},_addTile:function(n,r){var c=this._getTilePos(n),m=this._tileCoordsToKey(n),y=this.createTile(this._wrapCoords(n),g(this._tileReady,this,n));this._initTile(y),this.createTile.length<2&&Ct(g(this._tileReady,this,n,null,y)),ne(y,c),this._tiles[m]={el:y,coords:n,current:!0},r.appendChild(y),this.fire("tileloadstart",{tile:y,coords:n})},_tileReady:function(n,r,c){r&&this.fire("tileerror",{error:r,tile:c,coords:n});var m=this._tileCoordsToKey(n);c=this._tiles[m],c&&(c.loaded=+new Date,this._map._fadeAnimated?(re(c.el,0),Ut(this._fadeFrame),this._fadeFrame=Ct(this._updateOpacity,this)):(c.active=!0,this._pruneTiles()),r||(St(c.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:c.el,coords:n})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),mt.ielt9||!this._map._fadeAnimated?Ct(this._pruneTiles,this):setTimeout(g(this._pruneTiles,this),250)))},_getTilePos:function(n){return n.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(n){var r=new k(this._wrapX?C(n.x,this._wrapX):n.x,this._wrapY?C(n.y,this._wrapY):n.y);return r.z=n.z,r},_pxBoundsToTileRange:function(n){var r=this.getTileSize();return new O(n.min.unscaleBy(r).floor(),n.max.unscaleBy(r).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var n in this._tiles)if(!this._tiles[n].loaded)return!1;return!0}});function jl(n){return new na(n)}var ii=na.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(n,r){this._url=n,r=P(this,r),r.detectRetina&&mt.retina&&r.maxZoom>0?(r.tileSize=Math.floor(r.tileSize/2),r.zoomReverse?(r.zoomOffset--,r.minZoom=Math.min(r.maxZoom,r.minZoom+1)):(r.zoomOffset++,r.maxZoom=Math.max(r.minZoom,r.maxZoom-1)),r.minZoom=Math.max(0,r.minZoom)):r.zoomReverse?r.minZoom=Math.min(r.maxZoom,r.minZoom):r.maxZoom=Math.max(r.minZoom,r.maxZoom),typeof r.subdomains=="string"&&(r.subdomains=r.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(n,r){return this._url===n&&r===void 0&&(r=!0),this._url=n,r||this.redraw(),this},createTile:function(n,r){var c=document.createElement("img");return xt(c,"load",g(this._tileOnLoad,this,r,c)),xt(c,"error",g(this._tileOnError,this,r,c)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(c.referrerPolicy=this.options.referrerPolicy),c.alt="",c.src=this.getTileUrl(n),c},getTileUrl:function(n){var r={r:mt.retina?"@2x":"",s:this._getSubdomain(n),x:n.x,y:n.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var c=this._globalTileRange.max.y-n.y;this.options.tms&&(r.y=c),r["-y"]=c}return K(this._url,d(r,this.options))},_tileOnLoad:function(n,r){mt.ielt9?setTimeout(g(n,this,null,r),0):n(null,r)},_tileOnError:function(n,r,c){var m=this.options.errorTileUrl;m&&r.getAttribute("src")!==m&&(r.src=m),n(c,r)},_onTileRemove:function(n){n.tile.onload=null},_getZoomForUrl:function(){var n=this._tileZoom,r=this.options.maxZoom,c=this.options.zoomReverse,m=this.options.zoomOffset;return c&&(n=r-n),n+m},_getSubdomain:function(n){var r=Math.abs(n.x+n.y)%this.options.subdomains.length;return this.options.subdomains[r]},_abortLoading:function(){var n,r;for(n in this._tiles)if(this._tiles[n].coords.z!==this._tileZoom&&(r=this._tiles[n].el,r.onload=E,r.onerror=E,!r.complete)){r.src=_t;var c=this._tiles[n].coords;Jt(r),delete this._tiles[n],this.fire("tileabort",{tile:r,coords:c})}},_removeTile:function(n){var r=this._tiles[n];if(r)return r.el.setAttribute("src",_t),na.prototype._removeTile.call(this,n)},_tileReady:function(n,r,c){if(!(!this._map||c&&c.getAttribute("src")===_t))return na.prototype._tileReady.call(this,n,r,c)}});function en(n,r){return new ii(n,r)}var er=ii.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(n,r){this._url=n;var c=d({},this.defaultWmsParams);for(var m in r)m in this.options||(c[m]=r[m]);r=P(this,r);var y=r.detectRetina&&mt.retina?2:1,S=this.getTileSize();c.width=S.x*y,c.height=S.y*y,this.wmsParams=c},onAdd:function(n){this._crs=this.options.crs||n.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var r=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[r]=this._crs.code,ii.prototype.onAdd.call(this,n)},getTileUrl:function(n){var r=this._tileCoordsToNwSe(n),c=this._crs,m=V(c.project(r[0]),c.project(r[1])),y=m.min,S=m.max,j=(this._wmsVersion>=1.3&&this._crs===to?[y.y,y.x,S.y,S.x]:[y.x,y.y,S.x,S.y]).join(","),N=ii.prototype.getTileUrl.call(this,n);return N+W(this.wmsParams,N,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+j},setParams:function(n,r){return d(this.wmsParams,n),r||this.redraw(),this}});function nn(n,r){return new er(n,r)}ii.WMS=er,en.wms=nn;var Ze=pn.extend({options:{padding:.1},initialize:function(n){P(this,n),w(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),St(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var n={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(n.zoomanim=this._onAnimZoom),n},_onAnimZoom:function(n){this._updateTransform(n.center,n.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(n,r){var c=this._map.getZoomScale(r,this._zoom),m=this._map.getSize().multiplyBy(.5+this.options.padding),y=this._map.project(this._center,r),S=m.multiplyBy(-c).add(y).subtract(this._map._getNewPixelOrigin(n,r));mt.any3d?Dn(this._container,S,c):ne(this._container,S)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var n in this._layers)this._layers[n]._reset()},_onZoomEnd:function(){for(var n in this._layers)this._layers[n]._project()},_updatePaths:function(){for(var n in this._layers)this._layers[n]._update()},_update:function(){var n=this.options.padding,r=this._map.getSize(),c=this._map.containerPointToLayerPoint(r.multiplyBy(-n)).round();this._bounds=new O(c,c.add(r.multiplyBy(1+n*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Gr=Ze.extend({options:{tolerance:0},getEvents:function(){var n=Ze.prototype.getEvents.call(this);return n.viewprereset=this._onViewPreReset,n},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Ze.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var n=this._container=document.createElement("canvas");xt(n,"mousemove",this._onMouseMove,this),xt(n,"click dblclick mousedown mouseup contextmenu",this._onClick,this),xt(n,"mouseout",this._handleMouseOut,this),n._leaflet_disable_events=!0,this._ctx=n.getContext("2d")},_destroyContainer:function(){Ut(this._redrawRequest),delete this._ctx,Jt(this._container),Wt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var n;this._redrawBounds=null;for(var r in this._layers)n=this._layers[r],n._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ze.prototype._update.call(this);var n=this._bounds,r=this._container,c=n.getSize(),m=mt.retina?2:1;ne(r,n.min),r.width=m*c.x,r.height=m*c.y,r.style.width=c.x+"px",r.style.height=c.y+"px",mt.retina&&this._ctx.scale(2,2),this._ctx.translate(-n.min.x,-n.min.y),this.fire("update")}},_reset:function(){Ze.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(n){this._updateDashArray(n),this._layers[w(n)]=n;var r=n._order={layer:n,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=r),this._drawLast=r,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(n){this._requestRedraw(n)},_removePath:function(n){var r=n._order,c=r.next,m=r.prev;c?c.prev=m:this._drawLast=m,m?m.next=c:this._drawFirst=c,delete n._order,delete this._layers[w(n)],this._requestRedraw(n)},_updatePath:function(n){this._extendRedrawBounds(n),n._project(),n._update(),this._requestRedraw(n)},_updateStyle:function(n){this._updateDashArray(n),this._requestRedraw(n)},_updateDashArray:function(n){if(typeof n.options.dashArray=="string"){var r=n.options.dashArray.split(/[, ]+/),c=[],m,y;for(y=0;y<r.length;y++){if(m=Number(r[y]),isNaN(m))return;c.push(m)}n.options._dashArray=c}else n.options._dashArray=n.options.dashArray},_requestRedraw:function(n){this._map&&(this._extendRedrawBounds(n),this._redrawRequest=this._redrawRequest||Ct(this._redraw,this))},_extendRedrawBounds:function(n){if(n._pxBounds){var r=(n.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new O,this._redrawBounds.extend(n._pxBounds.min.subtract([r,r])),this._redrawBounds.extend(n._pxBounds.max.add([r,r]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var n=this._redrawBounds;if(n){var r=n.getSize();this._ctx.clearRect(n.min.x,n.min.y,r.x,r.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var n,r=this._redrawBounds;if(this._ctx.save(),r){var c=r.getSize();this._ctx.beginPath(),this._ctx.rect(r.min.x,r.min.y,c.x,c.y),this._ctx.clip()}this._drawing=!0;for(var m=this._drawFirst;m;m=m.next)n=m.layer,(!r||n._pxBounds&&n._pxBounds.intersects(r))&&n._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(n,r){if(this._drawing){var c,m,y,S,j=n._parts,N=j.length,Z=this._ctx;if(N){for(Z.beginPath(),c=0;c<N;c++){for(m=0,y=j[c].length;m<y;m++)S=j[c][m],Z[m?"lineTo":"moveTo"](S.x,S.y);r&&Z.closePath()}this._fillStroke(Z,n)}}},_updateCircle:function(n){if(!(!this._drawing||n._empty())){var r=n._point,c=this._ctx,m=Math.max(Math.round(n._radius),1),y=(Math.max(Math.round(n._radiusY),1)||m)/m;y!==1&&(c.save(),c.scale(1,y)),c.beginPath(),c.arc(r.x,r.y/y,m,0,Math.PI*2,!1),y!==1&&c.restore(),this._fillStroke(c,n)}},_fillStroke:function(n,r){var c=r.options;c.fill&&(n.globalAlpha=c.fillOpacity,n.fillStyle=c.fillColor||c.color,n.fill(c.fillRule||"evenodd")),c.stroke&&c.weight!==0&&(n.setLineDash&&n.setLineDash(r.options&&r.options._dashArray||[]),n.globalAlpha=c.opacity,n.lineWidth=c.weight,n.strokeStyle=c.color,n.lineCap=c.lineCap,n.lineJoin=c.lineJoin,n.stroke())},_onClick:function(n){for(var r=this._map.mouseEventToLayerPoint(n),c,m,y=this._drawFirst;y;y=y.next)c=y.layer,c.options.interactive&&c._containsPoint(r)&&(!(n.type==="click"||n.type==="preclick")||!this._map._draggableMoved(c))&&(m=c);this._fireEvent(m?[m]:!1,n)},_onMouseMove:function(n){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var r=this._map.mouseEventToLayerPoint(n);this._handleMouseHover(n,r)}},_handleMouseOut:function(n){var r=this._hoveredLayer;r&&(ue(this._container,"leaflet-interactive"),this._fireEvent([r],n,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(n,r){if(!this._mouseHoverThrottled){for(var c,m,y=this._drawFirst;y;y=y.next)c=y.layer,c.options.interactive&&c._containsPoint(r)&&(m=c);m!==this._hoveredLayer&&(this._handleMouseOut(n),m&&(St(this._container,"leaflet-interactive"),this._fireEvent([m],n,"mouseover"),this._hoveredLayer=m)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,n),this._mouseHoverThrottled=!0,setTimeout(g(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(n,r,c){this._map._fireDOMEvent(r,c||r.type,n)},_bringToFront:function(n){var r=n._order;if(r){var c=r.next,m=r.prev;if(c)c.prev=m;else return;m?m.next=c:c&&(this._drawFirst=c),r.prev=this._drawLast,this._drawLast.next=r,r.next=null,this._drawLast=r,this._requestRedraw(n)}},_bringToBack:function(n){var r=n._order;if(r){var c=r.next,m=r.prev;if(m)m.next=c;else return;c?c.prev=m:m&&(this._drawLast=m),r.prev=null,r.next=this._drawFirst,this._drawFirst.prev=r,this._drawFirst=r,this._requestRedraw(n)}}});function nr(n){return mt.canvas?new Gr(n):null}var ai=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(n){return document.createElement("<lvml:"+n+' class="lvml">')}}catch{}return function(n){return document.createElement("<"+n+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),eo={_initContainer:function(){this._container=Lt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Ze.prototype._update.call(this),this.fire("update"))},_initPath:function(n){var r=n._container=ai("shape");St(r,"leaflet-vml-shape "+(this.options.className||"")),r.coordsize="1 1",n._path=ai("path"),r.appendChild(n._path),this._updateStyle(n),this._layers[w(n)]=n},_addPath:function(n){var r=n._container;this._container.appendChild(r),n.options.interactive&&n.addInteractiveTarget(r)},_removePath:function(n){var r=n._container;Jt(r),n.removeInteractiveTarget(r),delete this._layers[w(n)]},_updateStyle:function(n){var r=n._stroke,c=n._fill,m=n.options,y=n._container;y.stroked=!!m.stroke,y.filled=!!m.fill,m.stroke?(r||(r=n._stroke=ai("stroke")),y.appendChild(r),r.weight=m.weight+"px",r.color=m.color,r.opacity=m.opacity,m.dashArray?r.dashStyle=B(m.dashArray)?m.dashArray.join(" "):m.dashArray.replace(/( *, *)/g," "):r.dashStyle="",r.endcap=m.lineCap.replace("butt","flat"),r.joinstyle=m.lineJoin):r&&(y.removeChild(r),n._stroke=null),m.fill?(c||(c=n._fill=ai("fill")),y.appendChild(c),c.color=m.fillColor||m.color,c.opacity=m.fillOpacity):c&&(y.removeChild(c),n._fill=null)},_updateCircle:function(n){var r=n._point.round(),c=Math.round(n._radius),m=Math.round(n._radiusY||c);this._setPath(n,n._empty()?"M0 0":"AL "+r.x+","+r.y+" "+c+","+m+" 0,"+65535*360)},_setPath:function(n,r){n._path.v=r},_bringToFront:function(n){Ce(n._container)},_bringToBack:function(n){yi(n._container)}},An=mt.vml?ai:Er,ia=Ze.extend({_initContainer:function(){this._container=An("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=An("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Jt(this._container),Wt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ze.prototype._update.call(this);var n=this._bounds,r=n.getSize(),c=this._container;(!this._svgSize||!this._svgSize.equals(r))&&(this._svgSize=r,c.setAttribute("width",r.x),c.setAttribute("height",r.y)),ne(c,n.min),c.setAttribute("viewBox",[n.min.x,n.min.y,r.x,r.y].join(" ")),this.fire("update")}},_initPath:function(n){var r=n._path=An("path");n.options.className&&St(r,n.options.className),n.options.interactive&&St(r,"leaflet-interactive"),this._updateStyle(n),this._layers[w(n)]=n},_addPath:function(n){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(n._path),n.addInteractiveTarget(n._path)},_removePath:function(n){Jt(n._path),n.removeInteractiveTarget(n._path),delete this._layers[w(n)]},_updatePath:function(n){n._project(),n._update()},_updateStyle:function(n){var r=n._path,c=n.options;r&&(c.stroke?(r.setAttribute("stroke",c.color),r.setAttribute("stroke-opacity",c.opacity),r.setAttribute("stroke-width",c.weight),r.setAttribute("stroke-linecap",c.lineCap),r.setAttribute("stroke-linejoin",c.lineJoin),c.dashArray?r.setAttribute("stroke-dasharray",c.dashArray):r.removeAttribute("stroke-dasharray"),c.dashOffset?r.setAttribute("stroke-dashoffset",c.dashOffset):r.removeAttribute("stroke-dashoffset")):r.setAttribute("stroke","none"),c.fill?(r.setAttribute("fill",c.fillColor||c.color),r.setAttribute("fill-opacity",c.fillOpacity),r.setAttribute("fill-rule",c.fillRule||"evenodd")):r.setAttribute("fill","none"))},_updatePoly:function(n,r){this._setPath(n,Cr(n._parts,r))},_updateCircle:function(n){var r=n._point,c=Math.max(Math.round(n._radius),1),m=Math.max(Math.round(n._radiusY),1)||c,y="a"+c+","+m+" 0 1,0 ",S=n._empty()?"M0 0":"M"+(r.x-c)+","+r.y+y+c*2+",0 "+y+-c*2+",0 ";this._setPath(n,S)},_setPath:function(n,r){n._path.setAttribute("d",r)},_bringToFront:function(n){Ce(n._path)},_bringToBack:function(n){yi(n._path)}});mt.vml&&ia.include(eo);function ir(n){return mt.svg||mt.vml?new ia(n):null}Dt.include({getRenderer:function(n){var r=n.options.renderer||this._getPaneRenderer(n.options.pane)||this.options.renderer||this._renderer;return r||(r=this._renderer=this._createRenderer()),this.hasLayer(r)||this.addLayer(r),r},_getPaneRenderer:function(n){if(n==="overlayPane"||n===void 0)return!1;var r=this._paneRenderers[n];return r===void 0&&(r=this._createRenderer({pane:n}),this._paneRenderers[n]=r),r},_createRenderer:function(n){return this.options.preferCanvas&&nr(n)||ir(n)}});var wi=Ji.extend({initialize:function(n,r){Ji.prototype.initialize.call(this,this._boundsToLatLngs(n),r)},setBounds:function(n){return this.setLatLngs(this._boundsToLatLngs(n))},_boundsToLatLngs:function(n){return n=nt(n),[n.getSouthWest(),n.getNorthWest(),n.getNorthEast(),n.getSouthEast()]}});function fc(n,r){return new wi(n,r)}ia.create=An,ia.pointsToPath=Cr,Hn.geometryToLayer=Le,Hn.coordsToLatLng=Hr,Hn.coordsToLatLngs=Xa,Hn.latLngToCoords=qr,Hn.latLngsToCoords=Qa,Hn.getFeature=ti,Hn.asFeature=Zr,Dt.mergeOptions({boxZoom:!0});var Ie=En.extend({initialize:function(n){this._map=n,this._container=n._container,this._pane=n._panes.overlayPane,this._resetStateTimeout=0,n.on("unload",this._destroy,this)},addHooks:function(){xt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Wt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Jt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(n){if(!n.shiftKey||n.which!==1&&n.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Ii(),Rr(),this._startPoint=this._map.mouseEventToContainerPoint(n),xt(document,{contextmenu:Jn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(n){this._moved||(this._moved=!0,this._box=Lt("div","leaflet-zoom-box",this._container),St(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(n);var r=new O(this._point,this._startPoint),c=r.getSize();ne(this._box,r.min),this._box.style.width=c.x+"px",this._box.style.height=c.y+"px"},_finish:function(){this._moved&&(Jt(this._box),ue(this._container,"leaflet-crosshair")),Sn(),Ua(),Wt(document,{contextmenu:Jn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(n){if(!(n.which!==1&&n.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(g(this._resetState,this),0);var r=new et(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(r).fire("boxzoomend",{boxZoomBounds:r})}},_onKeyDown:function(n){n.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Dt.addInitHook("addHandler","boxZoom",Ie),Dt.mergeOptions({doubleClickZoom:!0});var $r=En.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(n){var r=this._map,c=r.getZoom(),m=r.options.zoomDelta,y=n.originalEvent.shiftKey?c-m:c+m;r.options.doubleClickZoom==="center"?r.setZoom(y):r.setZoomAround(n.containerPoint,y)}});Dt.addInitHook("addHandler","doubleClickZoom",$r),Dt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var zn=En.extend({addHooks:function(){if(!this._draggable){var n=this._map;this._draggable=new Fn(n._mapPane,n._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),n.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),n.on("zoomend",this._onZoomEnd,this),n.whenReady(this._onZoomEnd,this))}St(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){ue(this._map._container,"leaflet-grab"),ue(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var n=this._map;if(n._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var r=nt(this._map.options.maxBounds);this._offsetLimit=V(this._map.latLngToContainerPoint(r.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(r.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;n.fire("movestart").fire("dragstart"),n.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(n){if(this._map.options.inertia){var r=this._lastTime=+new Date,c=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(c),this._times.push(r),this._prunePositions(r)}this._map.fire("move",n).fire("drag",n)},_prunePositions:function(n){for(;this._positions.length>1&&n-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var n=this._map.getSize().divideBy(2),r=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=r.subtract(n).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(n,r){return n-(n-r)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var n=this._draggable._newPos.subtract(this._draggable._startPos),r=this._offsetLimit;n.x<r.min.x&&(n.x=this._viscousLimit(n.x,r.min.x)),n.y<r.min.y&&(n.y=this._viscousLimit(n.y,r.min.y)),n.x>r.max.x&&(n.x=this._viscousLimit(n.x,r.max.x)),n.y>r.max.y&&(n.y=this._viscousLimit(n.y,r.max.y)),this._draggable._newPos=this._draggable._startPos.add(n)}},_onPreDragWrap:function(){var n=this._worldWidth,r=Math.round(n/2),c=this._initialWorldOffset,m=this._draggable._newPos.x,y=(m-r+c)%n+r-c,S=(m+r+c)%n-r-c,j=Math.abs(y+c)<Math.abs(S+c)?y:S;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=j},_onDragEnd:function(n){var r=this._map,c=r.options,m=!c.inertia||n.noInertia||this._times.length<2;if(r.fire("dragend",n),m)r.fire("moveend");else{this._prunePositions(+new Date);var y=this._lastPos.subtract(this._positions[0]),S=(this._lastTime-this._times[0])/1e3,j=c.easeLinearity,N=y.multiplyBy(j/S),Z=N.distanceTo([0,0]),J=Math.min(c.inertiaMaxSpeed,Z),st=N.multiplyBy(J/Z),gt=J/(c.inertiaDeceleration*j),jt=st.multiplyBy(-gt/2).round();!jt.x&&!jt.y?r.fire("moveend"):(jt=r._limitOffset(jt,r.options.maxBounds),Ct(function(){r.panBy(jt,{duration:gt,easeLinearity:j,noMoveStart:!0,animate:!0})}))}}});Dt.addInitHook("addHandler","dragging",zn),Dt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var no=En.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(n){this._map=n,this._setPanDelta(n.options.keyboardPanDelta),this._setZoomDelta(n.options.zoomDelta)},addHooks:function(){var n=this._map._container;n.tabIndex<=0&&(n.tabIndex="0"),xt(n,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Wt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var n=document.body,r=document.documentElement,c=n.scrollTop||r.scrollTop,m=n.scrollLeft||r.scrollLeft;this._map._container.focus(),window.scrollTo(m,c)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(n){var r=this._panKeys={},c=this.keyCodes,m,y;for(m=0,y=c.left.length;m<y;m++)r[c.left[m]]=[-1*n,0];for(m=0,y=c.right.length;m<y;m++)r[c.right[m]]=[n,0];for(m=0,y=c.down.length;m<y;m++)r[c.down[m]]=[0,n];for(m=0,y=c.up.length;m<y;m++)r[c.up[m]]=[0,-1*n]},_setZoomDelta:function(n){var r=this._zoomKeys={},c=this.keyCodes,m,y;for(m=0,y=c.zoomIn.length;m<y;m++)r[c.zoomIn[m]]=n;for(m=0,y=c.zoomOut.length;m<y;m++)r[c.zoomOut[m]]=-n},_addHooks:function(){xt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Wt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(n){if(!(n.altKey||n.ctrlKey||n.metaKey)){var r=n.keyCode,c=this._map,m;if(r in this._panKeys){if(!c._panAnim||!c._panAnim._inProgress)if(m=this._panKeys[r],n.shiftKey&&(m=tt(m).multiplyBy(3)),c.options.maxBounds&&(m=c._limitOffset(tt(m),c.options.maxBounds)),c.options.worldCopyJump){var y=c.wrapLatLng(c.unproject(c.project(c.getCenter()).add(m)));c.panTo(y)}else c.panBy(m)}else if(r in this._zoomKeys)c.setZoom(c.getZoom()+(n.shiftKey?3:1)*this._zoomKeys[r]);else if(r===27&&c._popup&&c._popup.options.closeOnEscapeKey)c.closePopup();else return;Jn(n)}}});Dt.addInitHook("addHandler","keyboard",no),Dt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var ar=En.extend({addHooks:function(){xt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Wt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(n){var r=Pe(n),c=this._map.options.wheelDebounceTime;this._delta+=r,this._lastMousePos=this._map.mouseEventToContainerPoint(n),this._startTime||(this._startTime=+new Date);var m=Math.max(c-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(g(this._performZoom,this),m),Jn(n)},_performZoom:function(){var n=this._map,r=n.getZoom(),c=this._map.options.zoomSnap||0;n._stop();var m=this._delta/(this._map.options.wheelPxPerZoomLevel*4),y=4*Math.log(2/(1+Math.exp(-Math.abs(m))))/Math.LN2,S=c?Math.ceil(y/c)*c:y,j=n._limitZoom(r+(this._delta>0?S:-S))-r;this._delta=0,this._startTime=null,j&&(n.options.scrollWheelZoom==="center"?n.setZoom(r+j):n.setZoomAround(this._lastMousePos,r+j))}});Dt.addInitHook("addHandler","scrollWheelZoom",ar);var Si=600;Dt.mergeOptions({tapHold:mt.touchNative&&mt.safari&&mt.mobile,tapTolerance:15});var Yr=En.extend({addHooks:function(){xt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Wt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(n){if(clearTimeout(this._holdTimeout),n.touches.length===1){var r=n.touches[0];this._startPos=this._newPos=new k(r.clientX,r.clientY),this._holdTimeout=setTimeout(g(function(){this._cancel(),this._isTapValid()&&(xt(document,"touchend",fe),xt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",r))},this),Si),xt(document,"touchend touchcancel contextmenu",this._cancel,this),xt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function n(){Wt(document,"touchend",fe),Wt(document,"touchend touchcancel",n)},_cancel:function(){clearTimeout(this._holdTimeout),Wt(document,"touchend touchcancel contextmenu",this._cancel,this),Wt(document,"touchmove",this._onMove,this)},_onMove:function(n){var r=n.touches[0];this._newPos=new k(r.clientX,r.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(n,r){var c=new MouseEvent(n,{bubbles:!0,cancelable:!0,view:window,screenX:r.screenX,screenY:r.screenY,clientX:r.clientX,clientY:r.clientY});c._simulated=!0,r.target.dispatchEvent(c)}});Dt.addInitHook("addHandler","tapHold",Yr),Dt.mergeOptions({touchZoom:mt.touch,bounceAtZoomLimits:!0});var io=En.extend({addHooks:function(){St(this._map._container,"leaflet-touch-zoom"),xt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){ue(this._map._container,"leaflet-touch-zoom"),Wt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(n){var r=this._map;if(!(!n.touches||n.touches.length!==2||r._animatingZoom||this._zooming)){var c=r.mouseEventToContainerPoint(n.touches[0]),m=r.mouseEventToContainerPoint(n.touches[1]);this._centerPoint=r.getSize()._divideBy(2),this._startLatLng=r.containerPointToLatLng(this._centerPoint),r.options.touchZoom!=="center"&&(this._pinchStartLatLng=r.containerPointToLatLng(c.add(m)._divideBy(2))),this._startDist=c.distanceTo(m),this._startZoom=r.getZoom(),this._moved=!1,this._zooming=!0,r._stop(),xt(document,"touchmove",this._onTouchMove,this),xt(document,"touchend touchcancel",this._onTouchEnd,this),fe(n)}},_onTouchMove:function(n){if(!(!n.touches||n.touches.length!==2||!this._zooming)){var r=this._map,c=r.mouseEventToContainerPoint(n.touches[0]),m=r.mouseEventToContainerPoint(n.touches[1]),y=c.distanceTo(m)/this._startDist;if(this._zoom=r.getScaleZoom(y,this._startZoom),!r.options.bounceAtZoomLimits&&(this._zoom<r.getMinZoom()&&y<1||this._zoom>r.getMaxZoom()&&y>1)&&(this._zoom=r._limitZoom(this._zoom)),r.options.touchZoom==="center"){if(this._center=this._startLatLng,y===1)return}else{var S=c._add(m)._divideBy(2)._subtract(this._centerPoint);if(y===1&&S.x===0&&S.y===0)return;this._center=r.unproject(r.project(this._pinchStartLatLng,this._zoom).subtract(S),this._zoom)}this._moved||(r._moveStart(!0,!1),this._moved=!0),Ut(this._animRequest);var j=g(r._move,r,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=Ct(j,this,!0),fe(n)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,Ut(this._animRequest),Wt(document,"touchmove",this._onTouchMove,this),Wt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Dt.addInitHook("addHandler","touchZoom",io),Dt.BoxZoom=Ie,Dt.DoubleClickZoom=$r,Dt.Drag=zn,Dt.Keyboard=no,Dt.ScrollWheelZoom=ar,Dt.TapHold=Yr,Dt.TouchZoom=io,o.Bounds=O,o.Browser=mt,o.CRS=zt,o.Canvas=Gr,o.Circle=Ur,o.CircleMarker=Qi,o.Class=Kt,o.Control=We,o.DivIcon=Ol,o.DivOverlay=ke,o.DomEvent=Mr,o.DomUtil=$i,o.Draggable=Fn,o.Evented=at,o.FeatureGroup=Cn,o.GeoJSON=Hn,o.GridLayer=na,o.Handler=En,o.Icon=On,o.ImageOverlay=ta,o.LatLng=ut,o.LatLngBounds=et,o.Layer=pn,o.LayerGroup=Xi,o.LineUtil=oc,o.Map=Dt,o.Marker=Ka,o.Mixin=ic,o.Path=jn,o.Point=k,o.PolyUtil=Js,o.Polygon=Ji,o.Polyline=Un,o.Popup=Fa,o.PosAnimation=Yi,o.Projection=yl,o.Rectangle=wi,o.Renderer=Ze,o.SVG=ia,o.SVGOverlay=Vr,o.TileLayer=ii,o.Tooltip=tr,o.Transformation=Pi,o.Util=ze,o.VideoOverlay=ni,o.bind=g,o.bounds=V,o.canvas=nr,o.circle=Sl,o.circleMarker=wl,o.control=Pn,o.divIcon=dc,o.extend=d,o.featureGroup=bl,o.geoJSON=Ir,o.geoJson=Ja,o.gridLayer=jl,o.icon=$a,o.imageOverlay=Tl,o.latLng=lt,o.latLngBounds=nt,o.layerGroup=lc,o.map=$s,o.marker=xl,o.point=tt,o.polygon=cc,o.polyline=uc,o.popup=Cl,o.rectangle=fc,o.setOptions=P,o.stamp=w,o.svg=ir,o.svgOverlay=El,o.tileLayer=en,o.tooltip=hc,o.transformation=hi,o.version=l,o.videoOverlay=ea;var ao=window.L;o.noConflict=function(){return window.L=ao,this},window.L=o}))})(qo,qo.exports)),qo.exports}var zs=Lb();const Xo=Uu(zs);function Vu(u,a,o){return Object.freeze({instance:u,context:a,container:o})}function Gu(u,a){return a==null?function(l,d){const f=it.useRef(void 0);return f.current||(f.current=u(l,d)),f}:function(l,d){const f=it.useRef(void 0);f.current||(f.current=u(l,d));const g=it.useRef(l),{instance:b}=f.current;return it.useEffect(function(){g.current!==l&&(a(b,l,g.current),g.current=l)},[b,l,a]),f}}function m_(u,a){it.useEffect(function(){return(a.layerContainer??a.map).addLayer(u.instance),function(){a.layerContainer?.removeLayer(u.instance),a.map.removeLayer(u.instance)}},[a,u])}function g_(u){return function(o){const l=Zu(),d=u(Iu(o,l),l);return d_(l.map,o.attribution),zd(d.current,o.eventHandlers),m_(d.current,l),d}}function kb(u,a){const o=it.useRef(void 0);it.useEffect(function(){if(a.pathOptions!==o.current){const d=a.pathOptions??{};u.instance.setStyle(d),o.current=d}},[u,a])}function Mb(u){return function(o){const l=Zu(),d=u(Iu(o,l),l);return zd(d.current,o.eventHandlers),m_(d.current,l),kb(d.current,o),d}}function Bb(u,a){const o=Gu(u,a),l=g_(o);return p_(l)}function Db(u,a){const o=Gu(u),l=zb(o,a);return jb(l)}function Nb(u,a){const o=Gu(u,a),l=Mb(o);return p_(l)}function Pb(u,a){const o=Gu(u,a),l=g_(o);return Ab(l)}function Ub(u,a,o){const{opacity:l,zIndex:d}=a;l!=null&&l!==o.opacity&&u.setOpacity(l),d!=null&&d!==o.zIndex&&u.setZIndex(d)}function Rd(){return Zu().map}const Hb=Nb(function({center:a,children:o,...l},d){const f=new zs.Circle(a,l);return Vu(f,f_(d,{overlayContainer:f}))},Tb);function qb({bounds:u,boundsOptions:a,center:o,children:l,className:d,id:f,placeholder:g,style:b,whenReady:w,zoom:x,...C},E){const[z]=it.useState({className:d,id:f,style:b}),[R,q]=it.useState(null),P=it.useRef(void 0);it.useImperativeHandle(E,()=>R?.map??null,[R]);const W=it.useCallback(K=>{if(K!==null&&!P.current){const B=new zs.Map(K,C);P.current=B,o!=null&&x!=null?B.setView(o,x):u!=null&&B.fitBounds(u,a),w!=null&&B.whenReady(w),q(Ob(B))}},[]);it.useEffect(()=>()=>{R?.map.remove()},[R]);const G=R?Ts.createElement(Ad,{value:R},l):g??null;return Ts.createElement("div",{...z,ref:W},G)}const Zb=it.forwardRef(qb),rd=Bb(function({position:a,...o},l){const d=new zs.Marker(a,o);return Vu(d,f_(l,{overlayContainer:d}))},function(a,o,l){o.position!==l.position&&a.setLatLng(o.position),o.icon!=null&&o.icon!==l.icon&&a.setIcon(o.icon),o.zIndexOffset!=null&&o.zIndexOffset!==l.zIndexOffset&&a.setZIndexOffset(o.zIndexOffset),o.opacity!=null&&o.opacity!==l.opacity&&a.setOpacity(o.opacity),a.dragging!=null&&o.draggable!==l.draggable&&(o.draggable===!0?a.dragging.enable():a.dragging.disable())}),pg=Db(function(a,o){const l=new zs.Popup(a,o.overlayContainer);return Vu(l,o)},function(a,o,{position:l},d){it.useEffect(function(){const{instance:g}=a;function b(x){x.popup===g&&(g.update(),d(!0))}function w(x){x.popup===g&&d(!1)}return o.map.on({popupopen:b,popupclose:w}),o.overlayContainer==null?(l!=null&&g.setLatLng(l),g.openOn(o.map)):o.overlayContainer.bindPopup(g),function(){o.map.off({popupopen:b,popupclose:w}),o.overlayContainer?.unbindPopup(),o.map.removeLayer(g)}},[a,o,d,l])}),Ib=Pb(function({url:a,...o},l){const d=new zs.TileLayer(a,Iu(o,l));return Vu(d,l)},function(a,o,l){Ub(a,o,l);const{url:d}=o;d!=null&&d!==l.url&&a.setUrl(d)});var Rt=(u=>(u.Safe="safe",u.Calm="calm",u.Lively="lively",u.Festive="festive",u.Crowded="crowded",u.Suspicious="suspicious",u.Dangerous="dangerous",u.Noisy="noisy",u.Quiet="quiet",u))(Rt||{});const __={"sports-fitness":{label:"Sports & Fitness",icon:"",items:["Running","Gym","Yoga","Football","Basketball","Swimming","Cycling","Tennis","Martial Arts","Dance"]},"music-arts":{label:"Music & Arts",icon:"",items:["Concerts","Theater","Painting","Photography","Music Production","Film","Writing","Sculpture","Design","Crafts"]},"food-dining":{label:"Food & Dining",icon:"",items:["Restaurants","Cooking","Baking","Coffee Shops","Fine Dining","Street Food","Vegan","Wine","Beer","Cocktails"]},"education-learning":{label:"Education & Learning",icon:"",items:["Courses","Workshops","Books","Online Learning","Languages","Science","History","Technology","Business","Art History"]},"environment-nature":{label:"Environment & Nature",icon:"",items:["Hiking","Camping","Gardening","Sustainability","Wildlife","Photography","Conservation","Fishing","Bird Watching","Eco-friendly Living"]},"gaming-tech":{label:"Gaming & Tech",icon:"",items:["Video Games","Programming","Gadgets","AI/ML","Cybersecurity","Mobile Apps","Web Development","Hardware","Virtual Reality","Board Games"]},"social-community":{label:"Social & Community",icon:"",items:["Meetups","Volunteering","Clubs","Networking","Charity","Community Events","Book Clubs","Sports Teams","Cultural Events","Religious Groups"]},"shopping-lifestyle":{label:"Shopping & Lifestyle",icon:"",items:["Markets","Fashion","Beauty","Home Decor","Antiques","Vintage","Luxury","Thrifting","Art Galleries","Craft Markets"]},transportation:{label:"Transportation",icon:"",items:["Cycling","Public Transport","Electric Vehicles","Motorcycles","Car Sharing","Ride Sharing","Walking","Scooters","Boats","Aviation"]},"home-garden":{label:"Home & Garden",icon:"",items:["DIY","Gardening","Home Improvement","Interior Design","Landscaping","Furniture","Tools","Renovation","Smart Home","Pets"]}},Vb=({size:u=20,color:a="#666",className:o=""})=>_.jsxs("svg",{width:u,height:u,viewBox:"0 0 24 24",fill:"none",stroke:a,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:o,children:[_.jsx("polygon",{points:"12,2 2,7 12,12 22,7 12,2"}),_.jsx("polyline",{points:"2,17 12,22 22,17"}),_.jsx("polyline",{points:"2,12 12,17 22,12"})]}),Gb=({size:u=14,color:a="#666",className:o=""})=>_.jsxs("svg",{width:u,height:u,viewBox:"0 0 24 24",fill:"none",stroke:a,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:o,children:[_.jsx("path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.29 1.51 4.04 3 5.5l7 7Z"}),_.jsx("path",{d:"M3.5 12.5 9 17l4-4 2 2 3-3"})]}),$b=u=>({safe:"fas fa-shield-alt",calm:"fas fa-peace",lively:"fas fa-glass-cheers",crowded:"fas fa-users",suspicious:"fas fa-eye-slash",dangerous:"fas fa-exclamation-triangle",noisy:"fas fa-volume-up",quiet:"fas fa-moon"})[u]||"fas fa-question-circle",Yb=Xo.divIcon({html:`
    <div style="
      background: linear-gradient(135deg, #ef4444, #dc2626);
      border: 3px solid white;
      border-radius: 50%;
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 4px 12px rgba(239, 68, 68, 0.4);
      animation: sos-pulse 1s ease-in-out infinite alternate;
    ">
      <i class="fas fa-exclamation-triangle" style="color: white; font-size: 16px;"></i>
    </div>
  `,className:"sos-marker",iconSize:[32,32],iconAnchor:[16,16]}),Wb=Xo.divIcon({html:`
    <div style="
      background: linear-gradient(135deg, #3b82f6, #1d4ed8);
      border: 3px solid white;
      border-radius: 50%;
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 4px 8px rgba(0,0,0,0.4);
      animation: pulse-user 2s infinite ease-in-out;
    ">
      <i class="fas fa-user" style="color: white; font-size: 16px;"></i>
    </div>
  `,className:"user-location-marker",iconSize:[32,32],iconAnchor:[16,16]});class Kb{async getReports(a={}){let o=Zt.from("reports").select(`
        *,
        users:user_id (
          username,
          first_name,
          last_name
        )
      `).order("created_at",{ascending:!1});if(a.emergency!==void 0&&(o=o.eq("emergency",a.emergency)),a.userId&&(o=o.eq("user_id",a.userId)),a.bounds){const{northEast:f,southWest:g}=a.bounds;o=o.gte("latitude",g[0]).lte("latitude",f[0]).gte("longitude",g[1]).lte("longitude",f[1])}a.limit&&(o=o.limit(a.limit)),a.offset&&(o=o.range(a.offset,a.offset+(a.limit||50)-1));const{data:l,error:d}=await o;if(d)throw console.error("Error fetching reports:",d),d;return(l||[]).map(f=>({id:f.id,user_id:f.user_id,vibe_type:f.vibe_type,notes:f.notes,location:f.location,latitude:f.latitude,longitude:f.longitude,emergency:f.emergency,upvotes:f.upvotes||0,downvotes:f.downvotes||0,created_at:f.created_at,updated_at:f.updated_at,profile:f.users?{username:f.users.username,first_name:f.users.first_name,last_name:f.users.last_name}:void 0}))}async getVibes(a={}){return this.getReports({...a,emergency:!1})}async getSOSAlerts(a={}){return this.getReports({...a,emergency:!0})}async createReport(a){const{data:o,error:l}=await Zt.from("reports").insert([{vibe_type:a.vibe_type,latitude:a.latitude,longitude:a.longitude,notes:a.notes,location:a.location,emergency:a.emergency||!1,upvotes:0,downvotes:0}]).select(`
        *,
        users:user_id (
          username,
          first_name,
          last_name
        )
      `).single();if(l)throw console.error("Error creating report:",l),l;return{id:o.id,user_id:o.user_id,vibe_type:o.vibe_type,notes:o.notes,location:o.location,latitude:o.latitude,longitude:o.longitude,emergency:o.emergency,upvotes:o.upvotes||0,downvotes:o.downvotes||0,created_at:o.created_at,updated_at:o.updated_at,profile:o.users?{username:o.users.username,first_name:o.users.first_name,last_name:o.users.last_name}:void 0}}async getUserVote(a,o){const{data:l,error:d}=await Zt.from("votes").select("vote_type").eq("report_id",a).eq("user_id",o).maybeSingle();return d?(console.error("Error fetching user vote:",d),null):l?.vote_type||null}async vote(a,o,l){const d=await this.getUserVote(a,o);if(d===l){const{error:f}=await Zt.from("votes").delete().eq("report_id",a).eq("user_id",o);if(f)throw console.error("Error removing vote:",f),f}else if(d){const{error:f}=await Zt.from("votes").update({vote_type:l}).eq("report_id",a).eq("user_id",o);if(f)throw console.error("Error updating vote:",f),f}else{const{error:f}=await Zt.from("votes").insert([{report_id:a,user_id:o,vote_type:l}]);if(f)throw console.error("Error creating vote:",f),f}}subscribeToReports(a){return Zt.channel("reports").on("postgres_changes",{event:"INSERT",schema:"public",table:"reports"},async o=>{const{data:l,error:d}=await Zt.from("reports").select(`
              *,
              users:user_id (
                username,
                first_name,
                last_name
              )
            `).eq("id",o.new.id).single();if(!d&&l){const f={id:l.id,user_id:l.user_id,vibe_type:l.vibe_type,notes:l.notes,location:l.location,latitude:l.latitude,longitude:l.longitude,emergency:l.emergency,upvotes:l.upvotes||0,downvotes:l.downvotes||0,created_at:l.created_at,updated_at:l.updated_at,profile:l.users?{username:l.users.username,first_name:l.users.first_name,last_name:l.users.last_name}:void 0};a(f)}}).subscribe()}subscribeToVotes(a){return Zt.channel("votes").on("postgres_changes",{event:"UPDATE",schema:"public",table:"reports"},o=>{o.new&&(o.new.upvotes!==o.old?.upvotes||o.new.downvotes!==o.old?.downvotes)&&a({reportId:o.new.id,upvotes:o.new.upvotes||0,downvotes:o.new.downvotes||0})}).subscribe()}}const Be=new Kb;(function(u,a,o){var l=typeof u<"u"?u.L:typeof global<"u"?global.L:null;l.HeatLayer=(l.Layer?l.Layer:l.Class).extend({initialize:function(f,g){this._latlngs=f,l.setOptions(this,g)},setLatLngs:function(f){return this._latlngs=f,this.redraw()},addLatLng:function(f){return this._latlngs.push(f),this.redraw()},setOptions:function(f){return l.setOptions(this,f),this._heat&&this._updateOptions(),this.redraw()},redraw:function(){return this._heat&&!this._frame&&!this._map._animating&&(this._frame=l.Util.requestAnimFrame(this._redraw,this)),this},onAdd:function(f){this._map=f,this._canvas||this._initCanvas(),f._panes.overlayPane.appendChild(this._canvas),f.on("moveend",this._reset,this),f.options.zoomAnimation&&l.Browser.any3d&&f.on("zoomanim",this._animateZoom,this),this._reset()},onRemove:function(f){f.getPanes().overlayPane.removeChild(this._canvas),f.off("moveend",this._reset,this),f.options.zoomAnimation&&f.off("zoomanim",this._animateZoom,this)},addTo:function(f){return f.addLayer(this),this},_initCanvas:function(){var f=this._canvas=l.DomUtil.create("canvas","leaflet-heatmap-layer leaflet-layer"),g=l.DomUtil.testProp(["transformOrigin","WebkitTransformOrigin","msTransformOrigin"]);f.style[g]="50% 50%";var b=this._map.getSize();f.width=b.x,f.height=b.y;var w=this._map.options.zoomAnimation&&l.Browser.any3d;l.DomUtil.addClass(f,"leaflet-zoom-"+(w?"animated":"hide")),this._heat=d(f),this._updateOptions()},_updateOptions:function(){this._heat.radius(this.options.radius||this._heat.defaultRadius,this.options.blur),this.options.gradient&&this._heat.gradient(this.options.gradient),this.options.max&&this._heat.max(this.options.max)},_reset:function(){var f=this._map.containerPointToLayerPoint([0,0]);l.DomUtil.setPosition(this._canvas,f);var g=this._map.getSize();this._heat._width!==g.x&&(this._canvas.width=this._heat._width=g.x),this._heat._height!==g.y&&(this._canvas.height=this._heat._height=g.y),this._redraw()},_redraw:function(){if(this._map){var f=[],g=this._heat._r,b=this._map.getSize(),w=new l.LatLngBounds(this._map.containerPointToLatLng(l.point([-g,-g])),this._map.containerPointToLatLng(b.add([g,g]))),x=this.options.max===o?1:this.options.max,C=this.options.maxZoom===o?this._map.getMaxZoom():this.options.maxZoom;1/Math.pow(2,Math.max(0,Math.min(C-this._map.getZoom(),12)));var E=g/2,z=[],R=this._map._getMapPanePos(),q=R.x%E,P=R.y%E,W,G,K,B,ot,_t,ht,ct;for(W=0,G=this._latlngs.length;W<G;W++){if(this._latlngs[W].length===2)K=this._map.latLngToContainerPoint(this._latlngs[W]);else{var Ht=l.latLng(this._latlngs[W][0],this._latlngs[W][1]);K=this._map.latLngToContainerPoint(Ht)}if(w.contains(this._map.containerPointToLatLng(K))){ot=Math.floor((K.x-q)/E)+2,_t=Math.floor((K.y-P)/E)+2;var qt=this._latlngs[W].length===3?this._latlngs[W][2]:this._latlngs[W].length===2&&this.options.max||1;z[_t]=z[_t]||[],B=z[_t][ot],B?qt>=B[2]&&(B[0]=K.x,B[1]=K.y,B[2]=qt):z[_t][ot]=[K.x,K.y,qt]}}for(W=0,G=z.length;W<G;W++)if(z[W])for(ht=0,ct=z[W].length;ht<ct;ht++)B=z[W][ht],B&&f.push([B[0],B[1],Math.min(B[2],x)]);this._heat.data(f).draw(this.options.minOpacity),this._frame=null}},_animateZoom:function(f){var g=this._map.getZoomScale(f.zoom),b=this._map._getCenterOffset(f.center)._multiplyBy(-g).subtract(this._map._getMapPanePos());l.DomUtil.setTransform&&l.DomUtil.setTransform(this._canvas,b,g)}}),l.heatLayer=function(f,g){return new l.HeatLayer(f,g)};function d(f){if(!(this instanceof d))return new d(f);this._canvas=f=typeof f=="string"?a.getElementById(f):f,f.getContext?this._ctx=f.getContext("2d",{willReadFrequently:!0}):this._ctx=f.getContext("2d"),this._width=f.width,this._height=f.height,this._max=1,this._data=[],this._grad={.4:"blue",.6:"cyan",.7:"lime",.8:"yellow",1:"red"},this._onRenderingStart=null,this._onRenderingEnd=null}d.prototype={defaultRadius:25,data:function(f){return this._data=f,this},max:function(f){return this._max=f,this},add:function(f){return this._data.push(f),this},clear:function(){return this._data=[],this},radius:function(f,g){g=g===o?15:g;var b=this._circle=this._createCanvas(),w=b.getContext("2d"),x=this._r=f+g;return b.width=b.height=x*2,w.shadowOffsetX=w.shadowOffsetY=x*2,w.shadowBlur=g,w.shadowColor="black",w.beginPath(),w.arc(-x,-x,f,0,Math.PI*2,!0),w.closePath(),w.fill(),this},resize:function(){this._width=this._canvas.width,this._height=this._canvas.height},gradient:function(f){return this._grad=f,this},draw:function(f){this._circle||this.radius(this.defaultRadius),this._grad||this.gradient(this._grad);var g=this._ctx;g.clearRect(0,0,this._width,this._height);for(var b=0,w=this._data.length,x;b<w;b++)x=this._data[b],g.globalAlpha=Math.min(Math.max(x[2]/this._max,f===o?.05:f),1),g.drawImage(this._circle,x[0]-this._r,x[1]-this._r);var C=g.getImageData(0,0,this._width,this._height);return this._colorize(C.data,this._grad),g.putImageData(C,0,0),this},_colorize:function(f,g){for(var b=0,w=f.length,x;b<w;b+=4)x=f[b+3]*4,x&&(f[b]=g[x],f[b+1]=g[x+1],f[b+2]=g[x+2])},_createCanvas:function(){if(typeof a<"u"){var f=a.createElement("canvas");return f.setAttribute("willReadFrequently","true"),f}else return new this._Canvas(this._width,this._height)}},u.simpleheat=d})(typeof window<"u"?window:{},typeof document<"u"?document:{});delete Xo.Icon.Default.prototype._getIconUrl;Xo.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});const Xb=({center:u,zoom:a})=>{const o=Rd(),l=it.useRef(!1);return it.useEffect(()=>{u&&!l.current&&(o.flyTo(u,a),l.current=!0)},[u,a,o]),null},y_=({children:u,onClick:a,title:o,top:l})=>_.jsx("div",{className:"leaflet-top leaflet-right",children:_.jsx("div",{className:"leaflet-control leaflet-bar mr-[10px]",style:{marginTop:l},children:_.jsx("button",{onClick:a,title:o,style:{width:"34px",height:"34px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#fff",border:"none",cursor:"pointer",borderRadius:"4px",boxShadow:"0 1px 5px rgba(0,0,0,0.65)"},children:u})})}),Qb=({userLocation:u})=>{const a=Rd();return _.jsx(y_,{onClick:()=>u&&a.flyTo(u,15),title:"Re-center map",top:"48px",children:_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#333",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[_.jsx("circle",{cx:"12",cy:"12",r:"10"}),_.jsx("circle",{cx:"12",cy:"12",r:"6"}),_.jsx("line",{x1:"22",x2:"18",y1:"12",y2:"12"}),_.jsx("line",{x1:"6",x2:"2",y1:"12",y2:"12"}),_.jsx("line",{x1:"12",y1:"6",x2:"12",y2:"2"}),_.jsx("line",{x1:"12",y1:"22",x2:"12",y2:"18"})]})})},Jb=({isVisible:u,onToggle:a})=>_.jsx(y_,{onClick:a,title:"Toggle Heatmap",top:"92px",children:_.jsx(Vb,{size:20,color:u?"#3b82f6":"#666"})}),Fb={[Rt.Safe]:"#22c55e",[Rt.Calm]:"#3b82f6",[Rt.Lively]:"#eab308",[Rt.Festive]:"#f59e0b",[Rt.Crowded]:"#f97316",[Rt.Suspicious]:"#a855f7",[Rt.Dangerous]:"#ef4444",[Rt.Noisy]:"#06b6d4",[Rt.Quiet]:"#2dd4bf"},tx=({vibes:u,isVisible:a})=>{const o=Rd(),l=it.useRef([]);return it.useEffect(()=>{const d=window.L;if(!d||!d.heatLayer){console.warn("Leaflet.heat plugin not found. Heatmap will not be rendered.");return}if(l.current.forEach(b=>{o.hasLayer(b)&&o.removeLayer(b)}),l.current=[],!a)return;const f={[Rt.Safe]:[],[Rt.Calm]:[],[Rt.Lively]:[],[Rt.Festive]:[],[Rt.Crowded]:[],[Rt.Suspicious]:[],[Rt.Dangerous]:[],[Rt.Noisy]:[],[Rt.Quiet]:[]};return u.forEach(b=>{b.latitude&&b.longitude&&b.vibe_type&&f[b.vibe_type]&&f[b.vibe_type].push(b)}),[Rt.Quiet,Rt.Calm,Rt.Safe,Rt.Lively,Rt.Festive,Rt.Crowded,Rt.Noisy,Rt.Suspicious,Rt.Dangerous].forEach(b=>{const w=f[b];if(w.length===0)return;const x=w.map(z=>[z.latitude,z.longitude,.8]),C=Fb[b],E=d.heatLayer(x,{radius:25,blur:15,maxZoom:17,minOpacity:.4,maxOpacity:.9,gradient:{0:C,.5:C,1:C}});o.addLayer(E),l.current.push(E),console.log(`Created heatmap layer for ${b} with ${w.length} points, hex color: ${C}`)}),()=>{l.current.forEach(b=>{o.hasLayer(b)&&o.removeLayer(b)}),l.current=[]}},[o,u,a]),null},mg=({type:u,id:a,userId:o,initialBoosts:l,onBoostUpdate:d})=>{const[f,g]=it.useState(l),[b,w]=it.useState(!1),[x,C]=it.useState(!1);it.useEffect(()=>{o&&(async()=>{try{const R=await Be.getUserVote(a,o);w(R==="upvote")}catch(R){console.error("Error checking vote status:",R)}})()},[a,u,o]);const E=async()=>{if(!(x||!o)){C(!0);try{await Be.vote(a,o,"upvote");const z=!b,R=z?f+1:f-1;w(z),g(R),d(a,u,R,z)}catch(z){console.error("Error voting:",z)}finally{C(!1)}}};return _.jsxs("button",{onClick:E,disabled:x,style:{display:"flex",alignItems:"center",gap:"4px",padding:"4px 12px",borderRadius:"9999px",fontSize:"14px",fontWeight:"500",transition:"all 0.3s ease",border:"1px solid",backgroundColor:b?"#fef2f2":"#f9fafb",color:b?"#b91c1c":"#374151",borderColor:b?"#fecaca":"#d1d5db",opacity:x?.5:1,cursor:x?"not-allowed":"pointer"},title:b?"Remove boost":"Raise awareness",children:[_.jsx(Gb,{size:14,color:b?"#ef4444":"#6b7280"}),_.jsx("span",{children:f})]})},ex=({vibes:u,sosAlerts:a,center:o,zoom:l,userLocation:d,isHeatmapVisible:f,onToggleHeatmap:g,userId:b})=>{const w=(x,C,E,z)=>{console.log(`${C} ${x} ${z?"boosted":"unboosted"}, new count: ${E}`)};return _.jsxs(Zb,{center:o,zoom:l,scrollWheelZoom:!0,style:{height:"100%",width:"100%"},children:[_.jsx(Xb,{center:o,zoom:l}),_.jsx(Qb,{userLocation:d}),_.jsx(Jb,{isVisible:f,onToggle:g}),_.jsx(Ib,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),d&&_.jsx(rd,{position:d,icon:Wb}),_.jsx(tx,{vibes:u,isVisible:f}),!f&&u.map(x=>!x.latitude||!x.longitude?(console.warn(`Vibe ${x.id} has missing location data and will not be rendered.`),null):Object.values(Rt).includes(x.vibe_type)?_.jsx(rd,{position:[x.latitude,x.longitude],icon:Xo.divIcon({html:`<div class="vibe-marker"><i class="${$b(x.vibe_type)}"></i></div>`,className:"vibe-marker",iconSize:[30,30],iconAnchor:[15,30]}),children:_.jsx(pg,{children:_.jsxs("div",{style:{color:"#1f2937",maxWidth:"320px"},children:[_.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"8px"},children:[_.jsxs("div",{children:[_.jsx("strong",{style:{textTransform:"capitalize"},children:x.vibe_type})," vibe reported by ",x.profile?.username||"anonymous","."]}),_.jsx(mg,{type:"vibe",id:x.id,userId:b,initialBoosts:x.upvotes||0,onBoostUpdate:w})]}),_.jsx("small",{style:{color:"#6b7280"},children:new Date(x.created_at).toLocaleString()})]})})},`vibe-${x.id}`):(console.warn(`Vibe ${x.id} has an unrecognized vibe_type ('${x.vibe_type}') and will not be rendered.`),null)),a.map(x=>!x.latitude||!x.longitude?(console.warn(`SOS Alert ${x.id} has missing location data and will not be rendered.`),null):_.jsxs(Ts.Fragment,{children:[_.jsx(rd,{position:[x.latitude,x.longitude],icon:Yb,children:_.jsx(pg,{children:_.jsxs("div",{style:{color:"#1f2937",maxWidth:"320px"},children:[_.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"8px"},children:[_.jsxs("div",{children:[_.jsx("strong",{children:"SOS Alert!"}),_.jsx("p",{style:{marginTop:"4px"},children:x.notes||"No details provided."})]}),_.jsx(mg,{type:"sos",id:x.id,userId:b,initialBoosts:x.upvotes||0,onBoostUpdate:w})]}),_.jsxs("small",{style:{color:"#6b7280"},children:["Reported by ",x.profile?.username||"anonymous"," at ",new Date(x.created_at).toLocaleString()]})]})})}),_.jsx(Hb,{center:[x.latitude,x.longitude],radius:3e3,pathOptions:{color:"#ef4444",fillColor:"#ef4444",fillOpacity:.1,weight:1}})]},`sos-${x.id}`))]})},wr=({size:u="md",color:a="#3b82f6",className:o=""})=>{const l={sm:"w-4 h-4",md:"w-8 h-8",lg:"w-12 h-12"};return _.jsx("div",{className:`inline-block animate-spin rounded-full border-4 border-solid border-current border-r-transparent motion-reduce:animate-[spin_1.5s_linear_infinite] ${l[u]} ${o}`,style:{color:a},role:"status",children:_.jsx("span",{className:"sr-only",children:"Loading..."})})},Ld=({isOpen:u,onClose:a,title:o,children:l,size:d="md",showCloseButton:f=!0,className:g=""})=>{it.useEffect(()=>{const x=C=>{C.key==="Escape"&&u&&a()};return u&&(document.addEventListener("keydown",x),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",x),document.body.style.overflow="unset"}},[u,a]);const b=x=>{x.target===x.currentTarget&&a()};if(!u)return null;const w={sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"};return _.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center",padding:"16px",backgroundColor:"rgba(0, 0, 0, 0.5)"},onClick:b,children:_.jsxs("div",{style:{backgroundColor:"white",borderRadius:"8px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)",width:"100%",maxWidth:w[d]==="max-w-md"?"28rem":w[d]==="max-w-lg"?"32rem":w[d]==="max-w-2xl"?"42rem":w[d]==="max-w-4xl"?"56rem":"32rem",maxHeight:"90vh",overflow:"auto"},onClick:x=>x.stopPropagation(),children:[(o||f)&&_.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"24px",borderBottom:"1px solid #e5e7eb"},children:[o&&_.jsx("h2",{style:{fontSize:"20px",fontWeight:"600",color:"#111827"},children:o}),f&&_.jsx("button",{onClick:a,style:{width:"36px",height:"36px",borderRadius:"50%",background:"linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%)",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.04)",position:"relative",overflow:"hidden"},onMouseEnter:x=>{x.currentTarget.style.transform="scale(1.1)",x.currentTarget.style.boxShadow="0 6px 16px rgba(0, 0, 0, 0.12)",x.currentTarget.style.background="linear-gradient(135deg, #e5e7eb 0%, #d1d5db 100%)"},onMouseLeave:x=>{x.currentTarget.style.transform="scale(1)",x.currentTarget.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.04)",x.currentTarget.style.background="linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%)"},onMouseDown:x=>{x.currentTarget.style.transform="scale(0.95)"},onMouseUp:x=>{x.currentTarget.style.transform="scale(1.1)"},"aria-label":"Close modal",children:_.jsx("svg",{style:{width:"18px",height:"18px",color:"#6b7280",filter:"drop-shadow(0 1px 2px rgba(0, 0, 0, 0.1))"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M6 18L18 6M6 6l12 12"})})})]}),_.jsx("div",{style:{padding:"24px"},children:l})]})})},nx=({icon:u,title:a,description:o,action:l,className:d=""})=>_.jsxs("div",{className:`text-center py-12 px-4 ${d}`,children:[u&&_.jsx("div",{className:"mx-auto w-24 h-24 text-gray-400 mb-4 opacity-50",children:u}),_.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:a}),o&&_.jsx("p",{className:"text-gray-500 mb-6 max-w-sm mx-auto",children:o}),l&&_.jsx("div",{className:"flex justify-center",children:l})]}),ix=()=>{const{user:u,updateProfile:a}=Ko(),[o,l]=it.useState({totalReports:0,totalUpvotes:0,reputation:0,rank:null}),[d,f]=it.useState([]),[g,b]=it.useState([]),[w,x]=it.useState([]),[C,E]=it.useState([]),[z,R]=it.useState(!0),[q,P]=it.useState(!1),[W,G]=it.useState(!1),[K,B]=it.useState({firstName:"",lastName:"",phone:"",interests:[]});it.useEffect(()=>{if(u){ot(),ze();const k=Be.subscribeToReports(tt=>{ot(),ze()}),rt=Be.subscribeToVotes(tt=>{ot(),ze()});return()=>{k.unsubscribe(),rt.unsubscribe()}}},[u]);const ot=async()=>{if(u)try{R(!0);const[k,rt,tt]=await Promise.all([_t(),Ht(),qt()]);l(k),f(rt),b(tt)}catch(k){console.error("Error loading profile data:",k)}finally{R(!1)}},_t=async()=>{try{const k=await Be.getReports({userId:u.id}),rt=k.length,tt=k.reduce((et,nt)=>et+(nt.upvotes||0),0),O=await ht(u.id),V=await ct(u.id);return{totalReports:rt,totalUpvotes:tt,reputation:O,rank:V}}catch(k){return console.error("Error calculating user stats:",k),{totalReports:0,totalUpvotes:0,reputation:0,rank:null}}},ht=async k=>{try{const rt=await Be.getReports({userId:k});let tt=0;return rt.forEach(O=>{const V=(O.upvotes||0)-(O.downvotes||0);tt+=Math.max(0,V)}),tt+=Math.min(10,rt.length),Math.max(0,tt)}catch(rt){return console.error("Error calculating user reputation:",rt),0}},ct=async k=>{try{const{data:rt,error:tt}=await cn.getAllUsersByReputation();if(tt)return console.error("Error calculating user rank:",tt),null;const O=rt.findIndex(V=>V.user_id===k);return O!==-1?O+1:null}catch(rt){return console.error("Error calculating user rank:",rt),null}},Ht=async()=>{const k=[],rt=await ht(u.id);rt>=100?k.push({id:"community-leader",name:"Community Leader",description:"Earned 100+ reputation points",icon:"fas fa-crown",color:"linear-gradient(135deg, #FFD700, #FFA500)",earned:!0}):rt>=50?k.push({id:"trusted-reporter",name:"Trusted Reporter",description:"Earned 50+ reputation points",icon:"fas fa-shield-alt",color:"linear-gradient(135deg, #4CAF50, #45A049)",earned:!0}):rt>=10&&k.push({id:"active-contributor",name:"Active Contributor",description:"Earned 10+ reputation points",icon:"fas fa-star",color:"linear-gradient(135deg, #2196F3, #1976D2)",earned:!0});try{const O=(await Be.getReports({userId:u.id})).length;O>=50?k.push({id:"safety-guardian",name:"Safety Guardian",description:"Submitted 50+ safety reports",icon:"fas fa-user-shield",color:"linear-gradient(135deg, #9C27B0, #7B1FA2)",earned:!0}):O>=20?k.push({id:"community-watch",name:"Community Watch",description:"Submitted 20+ safety reports",icon:"fas fa-eye",color:"linear-gradient(135deg, #FF5722, #D84315)",earned:!0}):O>=5&&k.push({id:"first-responder",name:"First Responder",description:"Submitted 5+ safety reports",icon:"fas fa-plus-circle",color:"linear-gradient(135deg, #009688, #00796B)",earned:!0})}catch(tt){console.error("Error checking user badges:",tt)}return k},qt=async()=>{try{return(await Be.getReports({userId:u.id,limit:5})).map(rt=>({id:rt.id,vibe_type:rt.vibe_type,location:rt.location||"",notes:rt.notes||"",created_at:rt.created_at,upvotes:rt.upvotes,downvotes:rt.downvotes}))}catch(k){return console.error("Error loading user recent activity:",k),[]}},wt=k=>{const rt=new Date,tt=new Date(k),O=Math.floor((rt.getTime()-tt.getTime())/1e3);if(O<60)return"Just now";const V=Math.floor(O/60);if(V<60)return`${V} min ago`;const et=Math.floor(V/60);if(et<24)return`${et} hour${et>1?"s":""} ago`;const nt=Math.floor(et/24);return`${nt} day${nt>1?"s":""} ago`},Ct=k=>({crowded:"fas fa-users",noisy:"fas fa-volume-up",festive:"fas fa-glass-cheers",calm:"fas fa-peace",suspicious:"fas fa-eye-slash",dangerous:"fas fa-exclamation-triangle"})[k]||"fas fa-question-circle",Ut=k=>({crowded:"#FFA500",noisy:"#FF6B35",festive:"#28A745",calm:"#17A2B8",suspicious:"#FFC107",dangerous:"#DC3545"})[k]||"#6C757D",ze=async()=>{if(u)try{P(!0);const[k,rt]=await Promise.all([Kt(),De()]);x(k),E(rt)}catch(k){console.error("Error loading reports data:",k)}finally{P(!1)}},Kt=async()=>{try{return(await Be.getReports({userId:u.id})).map(rt=>({...rt,user_vote:null}))}catch(k){return console.error("Error loading user reports:",k),[]}},De=async()=>{try{const k=await Be.getReports({limit:10});return await Promise.all(k.map(async tt=>{try{const O=await Be.getUserVote(tt.id,u.id);return{...tt,user_vote:O}}catch{return{...tt,user_vote:null}}}))}catch(k){return console.error("Error loading nearby reports:",k),[]}},$=async(k,rt)=>{if(u)try{await Be.vote(k,u.id,rt),E(tt=>tt.map(O=>{if(O.id===k){const V=O.user_vote;let et=O.upvotes||0,nt=O.downvotes||0;return V==="upvote"?et--:V==="downvote"&&nt--,rt==="upvote"?et++:nt++,{...O,upvotes:et,downvotes:nt,user_vote:rt}}return O}))}catch(tt){console.error("Error voting on report:",tt)}},at=k=>k?k.charAt(0).toUpperCase()+k.slice(1):"";return z?_.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"400px",flexDirection:"column"},children:[_.jsx(wr,{size:"lg"}),_.jsx("p",{style:{color:"#6b7280",fontSize:"16px",marginTop:"16px"},children:"Loading your profile..."})]}):_.jsxs("div",{style:{padding:"20px",maxWidth:"800px",margin:"0 auto",backgroundColor:"#f9fafb"},children:[_.jsxs("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"24px",marginBottom:"24px",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)",display:"flex",alignItems:"center",gap:"20px"},children:[_.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",backgroundColor:"#e5e7eb",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"32px",color:"#6b7280"},children:_.jsx("i",{className:"fas fa-user"})}),_.jsxs("div",{style:{flex:1},children:[_.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"8px"},children:[_.jsx("h1",{style:{fontSize:"24px",fontWeight:"bold",color:"#1f2937",margin:0},children:u?.first_name&&u?.last_name?`${u.first_name} ${u.last_name}`:u?.username||"User"}),_.jsxs("button",{onClick:()=>{B({firstName:u?.first_name||"",lastName:u?.last_name||"",phone:u?.phone||"",interests:u?.interests||[]}),G(!0)},style:{backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"8px",padding:"8px 16px",fontSize:"14px",fontWeight:"500",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[_.jsx("i",{className:"fas fa-edit"}),"Edit Profile"]})]}),_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[_.jsx("i",{className:"fas fa-star",style:{color:"#fbbf24"}}),_.jsxs("span",{style:{fontSize:"18px",fontWeight:"600",color:o.reputation>50?"#059669":"#1f2937"},children:[o.reputation," Reputation Points"]})]}),_.jsxs("p",{style:{color:"#6b7280",fontSize:"14px",margin:0},children:["Member since ",u?.created_at?new Date(u.created_at).toLocaleDateString():"Recently"]})]})]}),_.jsxs("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"24px",marginBottom:"24px",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"},children:[_.jsxs("h2",{style:{fontSize:"20px",fontWeight:"bold",color:"#1f2937",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[_.jsx("i",{className:"fas fa-id-card",style:{color:"#6b7280"}}),"Personal Information"]}),_.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"16px"},children:[_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[_.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"8px",backgroundColor:"#f3f4f6",display:"flex",alignItems:"center",justifyContent:"center",color:"#6b7280"},children:_.jsx("i",{className:"fas fa-envelope"})}),_.jsxs("div",{children:[_.jsx("div",{style:{fontSize:"14px",color:"#6b7280",marginBottom:"2px"},children:"Email"}),_.jsx("div",{style:{fontSize:"16px",fontWeight:"500",color:"#1f2937"},children:u?.email||"Not provided"})]})]}),_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[_.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"8px",backgroundColor:"#f3f4f6",display:"flex",alignItems:"center",justifyContent:"center",color:"#6b7280"},children:_.jsx("i",{className:"fas fa-phone"})}),_.jsxs("div",{children:[_.jsx("div",{style:{fontSize:"14px",color:"#6b7280",marginBottom:"2px"},children:"Phone"}),_.jsx("div",{style:{fontSize:"16px",fontWeight:"500",color:"#1f2937"},children:u?.phone||"Not provided"})]})]}),_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[_.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"8px",backgroundColor:"#f3f4f6",display:"flex",alignItems:"center",justifyContent:"center",color:"#6b7280"},children:_.jsx("i",{className:"fas fa-map-marker-alt"})}),_.jsxs("div",{children:[_.jsx("div",{style:{fontSize:"14px",color:"#6b7280",marginBottom:"2px"},children:"Location"}),_.jsx("div",{style:{fontSize:"16px",fontWeight:"500",color:"#1f2937"},children:u?.location?typeof u.location=="string"?u.location:u.location.address||`${u.location.latitude.toFixed(4)}, ${u.location.longitude.toFixed(4)}`:"Not provided"})]})]})]})]}),_.jsxs("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"24px",marginBottom:"24px",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"},children:[_.jsxs("h2",{style:{fontSize:"20px",fontWeight:"bold",color:"#1f2937",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[_.jsx("i",{className:"fas fa-heart",style:{color:"#6b7280"}}),"Community Interests"]}),u?.interests&&u.interests.length>0?_.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:u.interests.map((k,rt)=>_.jsxs("span",{style:{backgroundColor:"#e0f2fe",color:"#0277bd",padding:"6px 12px",borderRadius:"20px",fontSize:"14px",fontWeight:"500",display:"inline-flex",alignItems:"center",gap:"6px"},children:[_.jsx("i",{className:"fas fa-tag"}),k]},`${k}-${rt}`))}):_.jsxs("div",{style:{textAlign:"center",padding:"40px 20px",color:"#6b7280"},children:[_.jsx("i",{className:"fas fa-heart",style:{fontSize:"48px",marginBottom:"16px",opacity:.5}}),_.jsx("p",{children:"No interests selected yet. Add some to connect with like-minded community members!"})]})]}),_.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px",marginBottom:"24px"},children:[_.jsxs("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"20px",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)",textAlign:"center"},children:[_.jsx("div",{style:{fontSize:"32px",fontWeight:"bold",color:"#3b82f6",marginBottom:"8px"},children:o.totalReports}),_.jsx("div",{style:{color:"#6b7280",fontSize:"14px",fontWeight:"500"},children:"Total Reports"})]}),_.jsxs("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"20px",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)",textAlign:"center"},children:[_.jsx("div",{style:{fontSize:"32px",fontWeight:"bold",color:"#10b981",marginBottom:"8px"},children:o.totalUpvotes}),_.jsx("div",{style:{color:"#6b7280",fontSize:"14px",fontWeight:"500"},children:"Community Upvotes"})]}),_.jsxs("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"20px",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)",textAlign:"center"},children:[_.jsxs("div",{style:{fontSize:"32px",fontWeight:"bold",color:"#f59e0b",marginBottom:"8px"},children:["#",o.rank||"-"]}),_.jsx("div",{style:{color:"#6b7280",fontSize:"14px",fontWeight:"500"},children:"Community Rank"})]})]}),_.jsxs("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"24px",marginBottom:"24px",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"},children:[_.jsx("h2",{style:{fontSize:"20px",fontWeight:"bold",color:"#1f2937",marginBottom:"16px"},children:"Achievement Badges"}),d.length===0?_.jsxs("div",{style:{textAlign:"center",padding:"40px 20px",color:"#6b7280"},children:[_.jsx("i",{className:"fas fa-medal",style:{fontSize:"48px",marginBottom:"16px",opacity:.5}}),_.jsx("p",{children:"No badges earned yet. Start reporting to unlock achievements!"})]}):_.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"16px"},children:d.map(k=>_.jsxs("div",{style:{border:"2px solid #e5e7eb",borderRadius:"12px",padding:"16px",textAlign:"center",background:k.color,color:"white"},children:[_.jsx("div",{style:{fontSize:"32px",marginBottom:"8px",opacity:.9},children:_.jsx("i",{className:k.icon})}),_.jsx("h3",{style:{fontSize:"16px",fontWeight:"bold",marginBottom:"4px"},children:k.name}),_.jsx("p",{style:{fontSize:"12px",opacity:.9,margin:0},children:k.description})]},k.id))})]}),_.jsxs("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"24px",marginBottom:"24px",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"},children:[_.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"16px"},children:[_.jsxs("h2",{style:{fontSize:"20px",fontWeight:"bold",color:"#1f2937",margin:0,display:"flex",alignItems:"center",gap:"8px"},children:[_.jsx("i",{className:"fas fa-list",style:{color:"#6b7280"}}),"My Reports (",w.length,")"]}),_.jsxs("button",{style:{backgroundColor:"#10b981",color:"white",border:"none",borderRadius:"8px",padding:"8px 16px",fontSize:"14px",fontWeight:"500",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[_.jsx("i",{className:"fas fa-plus"}),"New Report"]})]}),w.length===0?_.jsxs("div",{style:{textAlign:"center",padding:"40px 20px",color:"#6b7280"},children:[_.jsx("i",{className:"fas fa-plus-circle",style:{fontSize:"48px",marginBottom:"16px",opacity:.5}}),_.jsx("p",{children:"You haven't submitted any reports yet. Start contributing to your community!"})]}):_.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[w.slice(0,3).map(k=>_.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:"8px",padding:"16px",display:"flex",alignItems:"center",gap:"12px"},children:[_.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:Ut(k.vibe_type),display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"16px"},children:_.jsx("i",{className:Ct(k.vibe_type)})}),_.jsxs("div",{style:{flex:1},children:[_.jsxs("div",{style:{fontWeight:"600",color:"#1f2937",marginBottom:"2px"},children:[at(k.vibe_type)," Report"]}),_.jsx("div",{style:{color:"#6b7280",fontSize:"14px",marginBottom:"4px"},children:k.location||"Unknown location"}),k.notes&&_.jsx("div",{style:{color:"#4b5563",fontSize:"14px",marginBottom:"4px"},children:k.notes}),_.jsxs("div",{style:{color:"#6b7280",fontSize:"12px"},children:[wt(k.created_at),"   ",k.upvotes||0,"  ",k.downvotes||0]})]})]},k.id)),w.length>3&&_.jsxs("button",{style:{alignSelf:"center",backgroundColor:"transparent",color:"#3b82f6",border:"1px solid #3b82f6",borderRadius:"8px",padding:"8px 16px",fontSize:"14px",fontWeight:"500",cursor:"pointer",marginTop:"8px"},children:["View All Reports (",w.length,")"]})]})]}),_.jsxs("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"24px",marginBottom:"24px",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"},children:[_.jsxs("h2",{style:{fontSize:"20px",fontWeight:"bold",color:"#1f2937",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[_.jsx("i",{className:"fas fa-users",style:{color:"#6b7280"}}),"Community Activity"]}),q?_.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"40px 20px"},children:_.jsx(wr,{size:"md"})}):C.length===0?_.jsxs("div",{style:{textAlign:"center",padding:"40px 20px",color:"#6b7280"},children:[_.jsx("i",{className:"fas fa-users",style:{fontSize:"48px",marginBottom:"16px",opacity:.5}}),_.jsx("p",{children:"No community reports nearby. Be the first to share what's happening!"})]}):_.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:C.slice(0,5).map(k=>_.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:"8px",padding:"16px",display:"flex",alignItems:"center",gap:"12px"},children:[_.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:Ut(k.vibe_type),display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"16px"},children:_.jsx("i",{className:Ct(k.vibe_type)})}),_.jsxs("div",{style:{flex:1},children:[_.jsxs("div",{style:{fontWeight:"600",color:"#1f2937",marginBottom:"2px"},children:[at(k.vibe_type)," Report"]}),_.jsx("div",{style:{color:"#6b7280",fontSize:"14px",marginBottom:"4px"},children:k.location||"Unknown location"}),k.notes&&_.jsx("div",{style:{color:"#4b5563",fontSize:"14px",marginBottom:"4px"},children:k.notes}),_.jsx("div",{style:{color:"#6b7280",fontSize:"12px"},children:wt(k.created_at)})]}),_.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[_.jsxs("button",{onClick:()=>$(k.id,"upvote"),style:{backgroundColor:k.user_vote==="upvote"?"#10b981":"transparent",color:k.user_vote==="upvote"?"white":"#6b7280",border:`1px solid ${k.user_vote==="upvote"?"#10b981":"#d1d5db"}`,borderRadius:"6px",padding:"4px 8px",fontSize:"12px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},children:[_.jsx("i",{className:"fas fa-thumbs-up"}),k.upvotes||0]}),_.jsxs("button",{onClick:()=>$(k.id,"downvote"),style:{backgroundColor:k.user_vote==="downvote"?"#ef4444":"transparent",color:k.user_vote==="downvote"?"white":"#6b7280",border:`1px solid ${k.user_vote==="downvote"?"#ef4444":"#d1d5db"}`,borderRadius:"6px",padding:"4px 8px",fontSize:"12px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},children:[_.jsx("i",{className:"fas fa-thumbs-down"}),k.downvotes||0]})]})]},k.id))})]}),_.jsxs("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"24px",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"},children:[_.jsx("h2",{style:{fontSize:"20px",fontWeight:"bold",color:"#1f2937",marginBottom:"16px"},children:"Recent Activity"}),g.length===0?_.jsxs("div",{style:{textAlign:"center",padding:"40px 20px",color:"#6b7280"},children:[_.jsx("i",{className:"fas fa-plus-circle",style:{fontSize:"48px",marginBottom:"16px",opacity:.5}}),_.jsx("p",{children:"No recent activity. Submit your first report to get started!"})]}):_.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:g.map(k=>_.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:"8px",padding:"16px",display:"flex",alignItems:"center",gap:"12px"},children:[_.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:Ut(k.vibe_type),display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"16px"},children:_.jsx("i",{className:Ct(k.vibe_type)})}),_.jsxs("div",{style:{flex:1},children:[_.jsxs("div",{style:{fontWeight:"600",color:"#1f2937",marginBottom:"2px"},children:[at(k.vibe_type)," Report"]}),_.jsx("div",{style:{color:"#6b7280",fontSize:"14px",marginBottom:"4px"},children:k.location||"Unknown location"}),k.notes&&_.jsx("div",{style:{color:"#4b5563",fontSize:"14px",marginBottom:"4px"},children:k.notes}),_.jsxs("div",{style:{color:"#6b7280",fontSize:"12px"},children:[wt(k.created_at),"   ",k.upvotes||0,"  ",k.downvotes||0]})]})]},k.id))})]}),W&&_.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3,padding:"20px"},children:_.jsxs("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"24px",maxWidth:"500px",width:"100%",maxHeight:"90vh",overflow:"auto"},children:[_.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"24px"},children:[_.jsx("h2",{style:{fontSize:"24px",fontWeight:"bold",color:"#1f2937",margin:0},children:"Edit Profile"}),_.jsx("button",{onClick:()=>G(!1),style:{background:"none",border:"none",fontSize:"24px",color:"#6b7280",cursor:"pointer",padding:"4px"},children:""})]}),_.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"20px"},children:[_.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[_.jsxs("div",{children:[_.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"First Name"}),_.jsx("input",{type:"text",value:K.firstName,onChange:k=>B(rt=>({...rt,firstName:k.target.value})),placeholder:"Enter your first name",style:{width:"100%",padding:"10px 12px",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"16px",outline:"none"}})]}),_.jsxs("div",{children:[_.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Last Name"}),_.jsx("input",{type:"text",value:K.lastName,onChange:k=>B(rt=>({...rt,lastName:k.target.value})),placeholder:"Enter your last name",style:{width:"100%",padding:"10px 12px",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"16px",outline:"none"}})]})]}),_.jsxs("div",{children:[_.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Phone Number"}),_.jsx("input",{type:"tel",value:K.phone,onChange:k=>B(rt=>({...rt,phone:k.target.value})),placeholder:"Enter your phone number",style:{width:"100%",padding:"10px 12px",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"16px",outline:"none"}})]}),_.jsxs("div",{children:[_.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"12px"},children:"Community Interests"}),_.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))",gap:"8px",maxHeight:"200px",overflow:"auto"},children:Object.entries(__).map(([k,rt])=>_.jsxs("div",{children:[_.jsxs("div",{style:{fontSize:"12px",fontWeight:"600",color:"#6b7280",marginBottom:"4px",textTransform:"uppercase",letterSpacing:"0.5px"},children:[rt.icon," ",rt.label]}),_.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:rt.items.slice(0,3).map((tt,O)=>{const V=K.interests.includes(tt);return _.jsx("button",{onClick:()=>{B(et=>({...et,interests:V?et.interests.filter(nt=>nt!==tt):[...et.interests,tt]}))},style:{padding:"6px 8px",border:`1px solid ${V?"#3b82f6":"#d1d5db"}`,borderRadius:"6px",backgroundColor:V?"#eff6ff":"white",color:V?"#1d4ed8":"#374151",fontSize:"12px",cursor:"pointer",textAlign:"left"},children:tt},`${k}-${tt}-${O}`)})})]},k))})]}),_.jsxs("div",{style:{display:"flex",gap:"12px",marginTop:"24px"},children:[_.jsx("button",{onClick:()=>G(!1),style:{flex:1,padding:"12px",border:"1px solid #d1d5db",borderRadius:"8px",backgroundColor:"white",color:"#374151",fontSize:"16px",fontWeight:"500",cursor:"pointer"},children:"Cancel"}),_.jsx("button",{onClick:async()=>{try{await a({first_name:K.firstName,last_name:K.lastName,phone:K.phone,interests:K.interests}),G(!1),ot()}catch(k){console.error("Error updating profile:",k)}},style:{flex:1,padding:"12px",border:"none",borderRadius:"8px",backgroundColor:"#3b82f6",color:"white",fontSize:"16px",fontWeight:"500",cursor:"pointer"},children:"Save Changes"})]})]})]})})]})},v_=it.createContext(void 0),ax=({children:u})=>{const[a,o]=it.useState(()=>{const f=localStorage.getItem("hyperapp-theme");return f||(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")});it.useEffect(()=>{const f=document.documentElement;a==="dark"?(f.style.setProperty("--bg-primary","#1f2937"),f.style.setProperty("--bg-secondary","#374151"),f.style.setProperty("--bg-tertiary","#4b5563"),f.style.setProperty("--text-primary","#f9fafb"),f.style.setProperty("--text-secondary","#d1d5db"),f.style.setProperty("--text-muted","#9ca3af"),f.style.setProperty("--border-color","#4b5563"),f.style.setProperty("--shadow-color","rgba(0, 0, 0, 0.3)"),f.style.setProperty("--accent-primary","#3b82f6"),f.style.setProperty("--accent-secondary","#10b981"),f.style.setProperty("--danger","#ef4444"),f.style.setProperty("--warning","#f59e0b"),f.style.setProperty("--success","#10b981")):(f.style.setProperty("--bg-primary","#ffffff"),f.style.setProperty("--bg-secondary","#f9fafb"),f.style.setProperty("--bg-tertiary","#f3f4f6"),f.style.setProperty("--text-primary","#1f2937"),f.style.setProperty("--text-secondary","#374151"),f.style.setProperty("--text-muted","#6b7280"),f.style.setProperty("--border-color","#e5e7eb"),f.style.setProperty("--shadow-color","rgba(0, 0, 0, 0.1)"),f.style.setProperty("--accent-primary","#3b82f6"),f.style.setProperty("--accent-secondary","#10b981"),f.style.setProperty("--danger","#dc3545"),f.style.setProperty("--warning","#ffc107"),f.style.setProperty("--success","#28a745")),localStorage.setItem("hyperapp-theme",a)},[a]);const l=()=>{o(f=>f==="light"?"dark":"light")},d=f=>{o(f)};return _.jsx(v_.Provider,{value:{theme:a,toggleTheme:l,setTheme:d},children:u})},rx=()=>{const u=it.useContext(v_);if(u===void 0)throw new Error("useTheme must be used within a ThemeProvider");return u},sx=()=>{const{user:u,signOut:a,updateProfile:o}=Ko(),{theme:l,toggleTheme:d,setTheme:f}=rx(),[g,b]=it.useState(!1),[w,x]=it.useState(!1),[C,E]=it.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[z,R]=it.useState(!0),[q,P]=it.useState(!0),[W,G]=it.useState(u?.language||"en"),[K,B]=it.useState(!1),ot=[{code:"en",name:"English"},{code:"es",name:"Espaol"},{code:"fr",name:"Franais"},{code:"de",name:"Deutsch"},{code:"ar",name:""}],_t=async()=>{if(C.newPassword!==C.confirmPassword){alert("New passwords do not match");return}if(C.newPassword.length<6){alert("Password must be at least 6 characters long");return}B(!0);try{const{error:wt}=await cn.updatePassword(C.newPassword);wt?alert("Error updating password: "+wt.message):(alert("Password updated successfully!"),b(!1),E({currentPassword:"",newPassword:"",confirmPassword:""}))}catch{alert("Error updating password")}finally{B(!1)}},ht=async wt=>{if(G(wt),u)try{await o({language:wt})}catch(Ct){console.error("Error updating language:",Ct)}},ct=async()=>{try{await a()}catch(wt){console.error("Error logging out:",wt)}},Ht=async()=>{if(!(!u||!window.confirm("Are you sure you want to delete your account? This action cannot be undone and will permanently delete all your data, reports, and profile information."))){B(!0);try{const{error:Ct}=await cn.deleteAccount(u.id);Ct?alert("Error deleting account: "+Ct.message):(alert("Account deleted successfully. You will be logged out."),await a())}catch{alert("Error deleting account")}finally{B(!1),x(!1)}}},qt=()=>{if(!u)return;const wt={profile:{id:u.id,email:u.email,username:u.username,first_name:u.first_name,last_name:u.last_name,phone:u.phone,interests:u.interests,reputation:u.reputation,language:u.language,created_at:u.created_at},exportDate:new Date().toISOString(),appVersion:"1.0.0"},Ct=JSON.stringify(wt,null,2),Ut=new Blob([Ct],{type:"application/json"}),ze=URL.createObjectURL(Ut),Kt=document.createElement("a");Kt.href=ze,Kt.download=`hyperapp-data-${u.id}.json`,document.body.appendChild(Kt),Kt.click(),document.body.removeChild(Kt),URL.revokeObjectURL(ze)};return _.jsxs("div",{style:{padding:"20px",maxWidth:"600px",margin:"0 auto",backgroundColor:"var(--bg-secondary)",minHeight:"100vh"},children:[_.jsxs("div",{style:{textAlign:"center",marginBottom:"32px"},children:[_.jsx("h1",{style:{fontSize:"28px",fontWeight:"bold",color:"var(--text-primary)",marginBottom:"8px"},children:"Settings"}),_.jsx("p",{style:{color:"var(--text-muted)",fontSize:"16px"},children:"Manage your account and app preferences"})]}),_.jsxs("div",{style:{backgroundColor:"var(--bg-primary)",borderRadius:"12px",padding:"24px",marginBottom:"24px",boxShadow:"0 1px 3px var(--shadow-color)"},children:[_.jsxs("h2",{style:{fontSize:"20px",fontWeight:"bold",color:"var(--text-primary)",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[_.jsx("i",{className:"fas fa-user-cog",style:{color:"var(--accent-primary)"}}),"Account Management"]}),_.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[_.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px",border:"1px solid var(--border-color)",borderRadius:"8px"},children:[_.jsxs("div",{children:[_.jsx("div",{style:{fontWeight:"600",color:"var(--text-primary)",marginBottom:"4px"},children:"Change Password"}),_.jsx("div",{style:{fontSize:"14px",color:"var(--text-muted)"},children:"Update your account password"})]}),_.jsx("button",{onClick:()=>b(!0),style:{backgroundColor:"var(--accent-primary)",color:"white",border:"none",borderRadius:"8px",padding:"8px 16px",fontSize:"14px",fontWeight:"500",cursor:"pointer"},children:"Change"})]}),_.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px",border:"1px solid var(--border-color)",borderRadius:"8px"},children:[_.jsxs("div",{children:[_.jsx("div",{style:{fontWeight:"600",color:"var(--text-primary)",marginBottom:"4px"},children:"Logout"}),_.jsx("div",{style:{fontSize:"14px",color:"var(--text-muted)"},children:"Sign out of your account"})]}),_.jsx("button",{onClick:ct,style:{backgroundColor:"var(--warning)",color:"white",border:"none",borderRadius:"8px",padding:"8px 16px",fontSize:"14px",fontWeight:"500",cursor:"pointer"},children:"Logout"})]}),_.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px",border:"1px solid var(--danger)",borderRadius:"8px",backgroundColor:"rgba(239, 68, 68, 0.05)"},children:[_.jsxs("div",{children:[_.jsx("div",{style:{fontWeight:"600",color:"var(--danger)",marginBottom:"4px"},children:"Delete Account"}),_.jsx("div",{style:{fontSize:"14px",color:"var(--text-muted)"},children:"Permanently delete your account and all data"})]}),_.jsx("button",{onClick:()=>x(!0),style:{backgroundColor:"var(--danger)",color:"white",border:"none",borderRadius:"8px",padding:"8px 16px",fontSize:"14px",fontWeight:"500",cursor:"pointer"},children:"Delete"})]})]})]}),_.jsxs("div",{style:{backgroundColor:"var(--bg-primary)",borderRadius:"12px",padding:"24px",marginBottom:"24px",boxShadow:"0 1px 3px var(--shadow-color)"},children:[_.jsxs("h2",{style:{fontSize:"20px",fontWeight:"bold",color:"var(--text-primary)",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[_.jsx("i",{className:"fas fa-sliders-h",style:{color:"var(--accent-primary)"}}),"App Preferences"]}),_.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[_.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px",border:"1px solid var(--border-color)",borderRadius:"8px"},children:[_.jsxs("div",{children:[_.jsx("div",{style:{fontWeight:"600",color:"var(--text-primary)",marginBottom:"4px"},children:"Language"}),_.jsx("div",{style:{fontSize:"14px",color:"var(--text-muted)"},children:"Choose your preferred language"})]}),_.jsx("select",{value:W,onChange:wt=>ht(wt.target.value),style:{padding:"8px 12px",border:"1px solid var(--border-color)",borderRadius:"6px",backgroundColor:"var(--bg-primary)",color:"var(--text-primary)",fontSize:"14px"},children:ot.map(wt=>_.jsx("option",{value:wt.code,children:wt.name},wt.code))})]}),_.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px",border:"1px solid var(--border-color)",borderRadius:"8px"},children:[_.jsxs("div",{children:[_.jsx("div",{style:{fontWeight:"600",color:"var(--text-primary)",marginBottom:"4px"},children:"Theme"}),_.jsx("div",{style:{fontSize:"14px",color:"var(--text-muted)"},children:"Switch between light and dark mode"})]}),_.jsxs("div",{style:{display:"flex",gap:"8px"},children:[_.jsxs("button",{onClick:()=>f("light"),style:{backgroundColor:l==="light"?"var(--accent-primary)":"var(--bg-tertiary)",color:l==="light"?"white":"var(--text-primary)",border:"none",borderRadius:"6px",padding:"6px 12px",fontSize:"12px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},children:[_.jsx("i",{className:"fas fa-sun"}),"Light"]}),_.jsxs("button",{onClick:()=>f("dark"),style:{backgroundColor:l==="dark"?"var(--accent-primary)":"var(--bg-tertiary)",color:l==="dark"?"white":"var(--text-primary)",border:"none",borderRadius:"6px",padding:"6px 12px",fontSize:"12px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},children:[_.jsx("i",{className:"fas fa-moon"}),"Dark"]})]})]}),_.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px",border:"1px solid var(--border-color)",borderRadius:"8px"},children:[_.jsxs("div",{children:[_.jsx("div",{style:{fontWeight:"600",color:"var(--text-primary)",marginBottom:"4px"},children:"Notifications"}),_.jsx("div",{style:{fontSize:"14px",color:"var(--text-muted)"},children:"Receive app notifications and updates"})]}),_.jsxs("label",{style:{position:"relative",display:"inline-block",width:"50px",height:"24px"},children:[_.jsx("input",{type:"checkbox",checked:z,onChange:wt=>R(wt.target.checked),style:{opacity:0,width:0,height:0}}),_.jsx("span",{style:{position:"absolute",cursor:"pointer",top:0,left:0,right:0,bottom:0,backgroundColor:z?"var(--accent-primary)":"var(--bg-tertiary)",transition:"0.4s",borderRadius:"24px"},children:_.jsx("span",{style:{position:"absolute",height:"18px",width:"18px",left:z?"28px":"3px",bottom:"3px",backgroundColor:"white",transition:"0.4s",borderRadius:"50%"}})})]})]})]})]}),_.jsxs("div",{style:{backgroundColor:"var(--bg-primary)",borderRadius:"12px",padding:"24px",marginBottom:"24px",boxShadow:"0 1px 3px var(--shadow-color)"},children:[_.jsxs("h2",{style:{fontSize:"20px",fontWeight:"bold",color:"var(--text-primary)",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[_.jsx("i",{className:"fas fa-shield-alt",style:{color:"var(--accent-primary)"}}),"Privacy & Security"]}),_.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[_.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px",border:"1px solid var(--border-color)",borderRadius:"8px"},children:[_.jsxs("div",{children:[_.jsx("div",{style:{fontWeight:"600",color:"var(--text-primary)",marginBottom:"4px"},children:"Location Sharing"}),_.jsx("div",{style:{fontSize:"14px",color:"var(--text-muted)"},children:"Allow the app to access your location"})]}),_.jsxs("label",{style:{position:"relative",display:"inline-block",width:"50px",height:"24px"},children:[_.jsx("input",{type:"checkbox",checked:q,onChange:wt=>P(wt.target.checked),style:{opacity:0,width:0,height:0}}),_.jsx("span",{style:{position:"absolute",cursor:"pointer",top:0,left:0,right:0,bottom:0,backgroundColor:q?"var(--accent-primary)":"var(--bg-tertiary)",transition:"0.4s",borderRadius:"24px"},children:_.jsx("span",{style:{position:"absolute",height:"18px",width:"18px",left:q?"28px":"3px",bottom:"3px",backgroundColor:"white",transition:"0.4s",borderRadius:"50%"}})})]})]}),_.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px",border:"1px solid var(--border-color)",borderRadius:"8px"},children:[_.jsxs("div",{children:[_.jsx("div",{style:{fontWeight:"600",color:"var(--text-primary)",marginBottom:"4px"},children:"Export Data"}),_.jsx("div",{style:{fontSize:"14px",color:"var(--text-muted)"},children:"Download a copy of your data"})]}),_.jsx("button",{onClick:qt,style:{backgroundColor:"var(--accent-secondary)",color:"white",border:"none",borderRadius:"8px",padding:"8px 16px",fontSize:"14px",fontWeight:"500",cursor:"pointer"},children:"Export"})]})]})]}),_.jsxs("div",{style:{backgroundColor:"var(--bg-primary)",borderRadius:"12px",padding:"24px",boxShadow:"0 1px 3px var(--shadow-color)"},children:[_.jsxs("h2",{style:{fontSize:"20px",fontWeight:"bold",color:"var(--text-primary)",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[_.jsx("i",{className:"fas fa-info-circle",style:{color:"var(--accent-primary)"}}),"About & Support"]}),_.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[_.jsxs("div",{style:{padding:"16px",border:"1px solid var(--border-color)",borderRadius:"8px",textAlign:"center"},children:[_.jsx("div",{style:{fontWeight:"600",color:"var(--text-primary)",marginBottom:"4px"},children:"HyperApp v1.0.0"}),_.jsx("div",{style:{fontSize:"14px",color:"var(--text-muted)"},children:"Community Safety & Vibe Mapping"})]}),_.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[_.jsxs("button",{onClick:()=>window.open("https://example.com/help","_blank"),style:{padding:"12px",border:"1px solid var(--border-color)",borderRadius:"8px",backgroundColor:"var(--bg-primary)",color:"var(--text-primary)",fontSize:"14px",fontWeight:"500",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[_.jsx("i",{className:"fas fa-question-circle"}),"Help"]}),_.jsxs("button",{onClick:()=>window.open("https://example.com/privacy","_blank"),style:{padding:"12px",border:"1px solid var(--border-color)",borderRadius:"8px",backgroundColor:"var(--bg-primary)",color:"var(--text-primary)",fontSize:"14px",fontWeight:"500",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[_.jsx("i",{className:"fas fa-file-contract"}),"Privacy"]})]}),_.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[_.jsxs("button",{onClick:()=>window.open("https://example.com/terms","_blank"),style:{padding:"12px",border:"1px solid var(--border-color)",borderRadius:"8px",backgroundColor:"var(--bg-primary)",color:"var(--text-primary)",fontSize:"14px",fontWeight:"500",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[_.jsx("i",{className:"fas fa-gavel"}),"Terms"]}),_.jsxs("button",{onClick:()=>window.open("mailto:support@example.com","_blank"),style:{padding:"12px",border:"1px solid var(--border-color)",borderRadius:"8px",backgroundColor:"var(--bg-primary)",color:"var(--text-primary)",fontSize:"14px",fontWeight:"500",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[_.jsx("i",{className:"fas fa-envelope"}),"Contact"]})]})]})]}),g&&_.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3,padding:"20px"},children:_.jsxs("div",{style:{backgroundColor:"var(--bg-primary)",borderRadius:"12px",padding:"24px",maxWidth:"400px",width:"100%"},children:[_.jsx("h3",{style:{fontSize:"20px",fontWeight:"bold",color:"var(--text-primary)",marginBottom:"20px"},children:"Change Password"}),_.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[_.jsx("input",{type:"password",placeholder:"New Password",value:C.newPassword,onChange:wt=>E(Ct=>({...Ct,newPassword:wt.target.value})),style:{padding:"12px",border:"1px solid var(--border-color)",borderRadius:"8px",fontSize:"16px",backgroundColor:"var(--bg-primary)",color:"var(--text-primary)"}}),_.jsx("input",{type:"password",placeholder:"Confirm New Password",value:C.confirmPassword,onChange:wt=>E(Ct=>({...Ct,confirmPassword:wt.target.value})),style:{padding:"12px",border:"1px solid var(--border-color)",borderRadius:"8px",fontSize:"16px",backgroundColor:"var(--bg-primary)",color:"var(--text-primary)"}}),_.jsxs("div",{style:{display:"flex",gap:"12px",marginTop:"20px"},children:[_.jsx("button",{onClick:()=>b(!1),style:{flex:1,padding:"12px",border:"1px solid var(--border-color)",borderRadius:"8px",backgroundColor:"var(--bg-primary)",color:"var(--text-primary)",fontSize:"16px",cursor:"pointer"},children:"Cancel"}),_.jsx("button",{onClick:_t,disabled:K,style:{flex:1,padding:"12px",border:"none",borderRadius:"8px",backgroundColor:"var(--accent-primary)",color:"white",fontSize:"16px",cursor:K?"not-allowed":"pointer",opacity:K?.6:1},children:K?"Updating...":"Update Password"})]})]})]})}),w&&_.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3,padding:"20px"},children:_.jsxs("div",{style:{backgroundColor:"var(--bg-primary)",borderRadius:"12px",padding:"24px",maxWidth:"400px",width:"100%"},children:[_.jsx("h3",{style:{fontSize:"20px",fontWeight:"bold",color:"var(--danger)",marginBottom:"16px"},children:" Delete Account"}),_.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:"20px",lineHeight:"1.5"},children:"This action cannot be undone. All your reports, votes, profile data, and account information will be permanently deleted."}),_.jsxs("div",{style:{display:"flex",gap:"12px"},children:[_.jsx("button",{onClick:()=>x(!1),style:{flex:1,padding:"12px",border:"1px solid var(--border-color)",borderRadius:"8px",backgroundColor:"var(--bg-primary)",color:"var(--text-primary)",fontSize:"16px",cursor:"pointer"},children:"Cancel"}),_.jsx("button",{onClick:Ht,disabled:K,style:{flex:1,padding:"12px",border:"none",borderRadius:"8px",backgroundColor:"var(--danger)",color:"white",fontSize:"16px",cursor:K?"not-allowed":"pointer",opacity:K?.6:1},children:K?"Deleting...":"Delete Account"})]})]})})]})},ox=({activeTab:u,onTabChange:a,onNewReport:o})=>{const l=[{id:"map",label:"Map",icon:"fas fa-map"},{id:"reports",label:"Reports",icon:"fas fa-list"},{id:"profile",label:"Profile",icon:"fas fa-user"},{id:"settings",label:"Settings",icon:"fas fa-cog"}];return _.jsxs("div",{style:{position:"fixed",bottom:0,left:0,right:0,backgroundColor:"white",borderTop:"1px solid #e5e7eb",boxShadow:"0 -2px 10px rgba(0, 0, 0, 0.1)",zIndex:100,display:"flex",alignItems:"center"},children:[_.jsx("div",{style:{display:"flex",flex:1},children:l.slice(0,2).map(d=>_.jsxs("button",{onClick:()=>a(d.id),style:{flex:1,padding:"12px 8px",border:"none",backgroundColor:u===d.id?"#3b82f6":"transparent",color:u===d.id?"white":"#6b7280",display:"flex",flexDirection:"column",alignItems:"center",gap:"4px",cursor:"pointer",transition:"all 0.2s ease",fontSize:"12px",fontWeight:u===d.id?"600":"500"},children:[_.jsx("i",{className:d.icon,style:{fontSize:"18px",marginBottom:"2px"}}),_.jsx("span",{children:d.label})]},d.id))}),o&&_.jsx("div",{style:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},children:_.jsx("button",{onClick:()=>{console.log("FAB clicked"),o()},style:{width:"48px",height:"48px",borderRadius:"50%",background:"linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%)",border:"none",boxShadow:"0 4px 14px rgba(59, 130, 246, 0.4), 0 0 0 4px white",color:"white",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",zIndex:101,transition:"all 0.2s ease",pointerEvents:"auto",animation:"pulse 2s infinite"},onMouseEnter:d=>{d.currentTarget.style.transform="scale(1.1)",d.currentTarget.style.boxShadow="0 6px 20px rgba(59, 130, 246, 0.6), 0 0 0 4px white"},onMouseLeave:d=>{d.currentTarget.style.transform="scale(1)",d.currentTarget.style.boxShadow="0 4px 14px rgba(59, 130, 246, 0.4), 0 0 0 4px white"},title:"New Report",children:_.jsx("i",{className:"fas fa-plus",style:{fontSize:"20px",fontWeight:"bold"}})})}),_.jsx("div",{style:{display:"flex",flex:1},children:l.slice(2).map(d=>_.jsxs("button",{onClick:()=>a(d.id),style:{flex:1,padding:"12px 8px",border:"none",backgroundColor:u===d.id?"#3b82f6":"transparent",color:u===d.id?"white":"#6b7280",display:"flex",flexDirection:"column",alignItems:"center",gap:"4px",cursor:"pointer",transition:"all 0.2s ease",fontSize:"12px",fontWeight:u===d.id?"600":"500"},children:[_.jsx("i",{className:d.icon,style:{fontSize:"18px",marginBottom:"2px"}}),_.jsx("span",{children:d.label})]},d.id))}),_.jsx("style",{children:`
          @keyframes pulse {
            0%, 100% {
              transform: scale(1);
              box-shadow: 0 4px 14px rgba(59, 130, 246, 0.4), 0 0 0 4px white;
            }
            50% {
              transform: scale(1.05);
              box-shadow: 0 6px 16px rgba(59, 130, 246, 0.5), 0 0 0 4px white;
            }
          }
        `})]})},lx=({isOpen:u,onClose:a})=>{const{signIn:o,signUp:l,isLoading:d}=Ko(),[f,g]=it.useState("login"),[b,w]=it.useState({loginEmail:"",loginPassword:"",signupUsername:"",signupEmail:"",signupPassword:"",signupPasswordConfirm:""}),[x,C]=it.useState(""),E=(q,P)=>{w(W=>({...W,[q]:P})),C("")},z=async q=>{if(q.preventDefault(),C(""),!b.loginEmail||!b.loginPassword){C("Please fill in all fields");return}try{await o(b.loginEmail,b.loginPassword),a(),w(P=>({...P,loginEmail:"",loginPassword:""}))}catch(P){console.error("Login error:",P),C(P.message||"Login failed. Please try again.")}},R=async q=>{if(q.preventDefault(),C(""),!b.signupUsername||!b.signupEmail||!b.signupPassword||!b.signupPasswordConfirm){C("Please fill in all fields");return}if(b.signupPassword!==b.signupPasswordConfirm){C("Passwords do not match");return}if(b.signupPassword.length<6){C("Password must be at least 6 characters long");return}try{await l(b.signupEmail,b.signupPassword,b.signupUsername),C("Signup successful! Please check your email for verification."),g("login"),w(P=>({...P,signupUsername:"",signupEmail:"",signupPassword:"",signupPasswordConfirm:""}))}catch(P){console.error("Signup error:",P),C(P.message||"Signup failed. Please try again.")}};return u?_.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:_.jsxs("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"32px",maxWidth:"400px",width:"90%",maxHeight:"90vh",overflow:"auto",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"},children:[_.jsxs("div",{style:{textAlign:"center",marginBottom:"24px"},children:[_.jsx("h2",{style:{fontSize:"24px",fontWeight:"bold",color:"#1f2937",marginBottom:"8px"},children:"Welcome to HyperApp"}),_.jsx("p",{style:{color:"#6b7280",fontSize:"16px"},children:"Join the community safety platform"})]}),_.jsxs("div",{style:{display:"flex",marginBottom:"24px",borderRadius:"8px",overflow:"hidden",border:"1px solid #e5e7eb"},children:[_.jsx("button",{onClick:()=>g("login"),style:{flex:1,padding:"12px",backgroundColor:f==="login"?"#3b82f6":"white",color:f==="login"?"white":"#374151",border:"none",fontSize:"16px",fontWeight:"500",cursor:"pointer"},children:"Login"}),_.jsx("button",{onClick:()=>g("signup"),style:{flex:1,padding:"12px",backgroundColor:f==="signup"?"#3b82f6":"white",color:f==="signup"?"white":"#374151",border:"none",fontSize:"16px",fontWeight:"500",cursor:"pointer"},children:"Sign Up"})]}),x&&_.jsx("div",{style:{padding:"12px",marginBottom:"16px",borderRadius:"8px",backgroundColor:x.includes("successful")?"#d1fae5":"#fee2e2",border:`1px solid ${x.includes("successful")?"#a7f3d0":"#fecaca"}`,color:x.includes("successful")?"#065f46":"#991b1b",fontSize:"14px"},children:x}),f==="login"&&_.jsxs("form",{onSubmit:z,children:[_.jsxs("div",{style:{marginBottom:"16px"},children:[_.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"4px"},children:"Email"}),_.jsx("input",{type:"email",value:b.loginEmail,onChange:q=>E("loginEmail",q.target.value),placeholder:"Enter your email",required:!0,style:{width:"100%",padding:"12px",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"16px",outline:"none"}})]}),_.jsxs("div",{style:{marginBottom:"24px"},children:[_.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"4px"},children:"Password"}),_.jsx("input",{type:"password",value:b.loginPassword,onChange:q=>E("loginPassword",q.target.value),placeholder:"Enter your password",required:!0,style:{width:"100%",padding:"12px",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"16px",outline:"none"}})]}),_.jsx("button",{type:"submit",disabled:d,style:{width:"100%",padding:"12px",borderRadius:"8px",border:"none",backgroundColor:"#3b82f6",color:"white",fontSize:"16px",fontWeight:"500",cursor:d?"not-allowed":"pointer",opacity:d?.5:1},children:d?"Logging in...":"Login"})]}),f==="signup"&&_.jsxs("form",{onSubmit:R,children:[_.jsxs("div",{style:{marginBottom:"16px"},children:[_.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"4px"},children:"Username"}),_.jsx("input",{type:"text",value:b.signupUsername,onChange:q=>E("signupUsername",q.target.value),placeholder:"Choose a username",required:!0,style:{width:"100%",padding:"12px",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"16px",outline:"none"}})]}),_.jsxs("div",{style:{marginBottom:"16px"},children:[_.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"4px"},children:"Email"}),_.jsx("input",{type:"email",value:b.signupEmail,onChange:q=>E("signupEmail",q.target.value),placeholder:"Enter your email",required:!0,style:{width:"100%",padding:"12px",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"16px",outline:"none"}})]}),_.jsxs("div",{style:{marginBottom:"16px"},children:[_.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"4px"},children:"Password"}),_.jsx("input",{type:"password",value:b.signupPassword,onChange:q=>E("signupPassword",q.target.value),placeholder:"Create a password (min 6 characters)",required:!0,style:{width:"100%",padding:"12px",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"16px",outline:"none"}})]}),_.jsxs("div",{style:{marginBottom:"24px"},children:[_.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"4px"},children:"Confirm Password"}),_.jsx("input",{type:"password",value:b.signupPasswordConfirm,onChange:q=>E("signupPasswordConfirm",q.target.value),placeholder:"Confirm your password",required:!0,style:{width:"100%",padding:"12px",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"16px",outline:"none"}})]}),_.jsx("button",{type:"submit",disabled:d,style:{width:"100%",padding:"12px",borderRadius:"8px",border:"none",backgroundColor:"#10b981",color:"white",fontSize:"16px",fontWeight:"500",cursor:d?"not-allowed":"pointer",opacity:d?.5:1},children:d?"Creating account...":"Create Account"})]}),_.jsx("button",{onClick:a,style:{position:"absolute",top:"16px",right:"16px",background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"#6b7280"},children:""})]})}):null},ux=({isOpen:u,onComplete:a,onClose:o})=>{const{user:l,refreshProfile:d}=Ko(),[f,g]=it.useState(1),[b,w]=it.useState(!1),[x,C]=it.useState({firstName:"",lastName:"",phone:"",location:{latitude:30.0444,longitude:31.2357,address:"Cairo, Egypt"},interests:[],language:"en",notifications:!0});it.useEffect(()=>{u&&l&&E()},[u,l]);const E=()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(async G=>{const{latitude:K,longitude:B}=G.coords;try{const ht=(await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${K}&lon=${B}&zoom=18&addressdetails=1`)).json()).display_name||`${K.toFixed(4)}, ${B.toFixed(4)}`;C(ct=>({...ct,location:{latitude:K,longitude:B,address:ht}}))}catch(ot){console.error("Error reverse geocoding:",ot),C(_t=>({..._t,location:{latitude:K,longitude:B,address:`${K.toFixed(4)}, ${B.toFixed(4)}`}}))}},G=>{console.error("Error getting location:",G)},{timeout:1e4,enableHighAccuracy:!0})},z=()=>{f<4&&g(f+1)},R=()=>{f>1&&g(f-1)},q=async()=>{if(l){w(!0);try{await cn.completeOnboarding(l.id,x),await d(),a()}catch(G){console.error("Error completing onboarding:",G),alert("Error completing setup. Please try again.")}finally{w(!1)}}},P=G=>{C(K=>({...K,...G}))},W=G=>{C(K=>({...K,interests:K.interests.includes(G)?K.interests.filter(B=>B!==G):[...K.interests,G]}))};return u?_.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:_.jsxs("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"32px",maxWidth:"500px",width:"90%",maxHeight:"90vh",overflow:"auto",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"},children:[_.jsxs("div",{style:{textAlign:"center",marginBottom:"32px"},children:[_.jsx("h2",{style:{fontSize:"24px",fontWeight:"bold",color:"#1f2937",marginBottom:"8px"},children:"Welcome to HyperApp! "}),_.jsx("p",{style:{color:"#6b7280",fontSize:"16px"},children:"Let's set up your profile to get the most out of the community"})]}),_.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"32px",gap:"8px"},children:[1,2,3,4].map(G=>_.jsx("div",{style:{width:"40px",height:"4px",borderRadius:"2px",backgroundColor:G<=f?"#3b82f6":"#e5e7eb"}},G))}),_.jsxs("div",{style:{marginBottom:"32px"},children:[f===1&&_.jsx(cx,{data:x,onUpdate:P}),f===2&&_.jsx(hx,{data:x,onUpdate:P}),f===3&&_.jsx(dx,{data:x,onToggleInterest:W}),f===4&&_.jsx(fx,{data:x})]}),_.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:"16px"},children:[_.jsx("button",{onClick:f===1?o:R,style:{padding:"12px 24px",borderRadius:"8px",border:"1px solid #d1d5db",backgroundColor:"white",color:"#374151",fontSize:"16px",fontWeight:"500",cursor:"pointer"},children:f===1?"Skip for now":"Previous"}),f<4?_.jsx("button",{onClick:z,style:{padding:"12px 24px",borderRadius:"8px",border:"none",backgroundColor:"#3b82f6",color:"white",fontSize:"16px",fontWeight:"500",cursor:"pointer"},children:"Next"}):_.jsx("button",{onClick:q,disabled:b,style:{padding:"12px 24px",borderRadius:"8px",border:"none",backgroundColor:"#10b981",color:"white",fontSize:"16px",fontWeight:"500",cursor:b?"not-allowed":"pointer",opacity:b?.5:1},children:b?"Setting up...":"Complete Setup"})]})]})}):null},cx=({data:u,onUpdate:a})=>_.jsxs("div",{children:[_.jsx("h3",{style:{fontSize:"20px",fontWeight:"600",color:"#1f2937",marginBottom:"16px"},children:"Personal Information"}),_.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[_.jsxs("div",{children:[_.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"4px"},children:"First Name *"}),_.jsx("input",{type:"text",value:u.firstName,onChange:o=>a({firstName:o.target.value}),placeholder:"Enter your first name",style:{width:"100%",padding:"12px",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"16px",outline:"none"}})]}),_.jsxs("div",{children:[_.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"4px"},children:"Last Name *"}),_.jsx("input",{type:"text",value:u.lastName,onChange:o=>a({lastName:o.target.value}),placeholder:"Enter your last name",style:{width:"100%",padding:"12px",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"16px",outline:"none"}})]}),_.jsxs("div",{children:[_.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"4px"},children:"Phone Number"}),_.jsx("input",{type:"tel",value:u.phone,onChange:o=>a({phone:o.target.value}),placeholder:"+1 (555) 123-4567",style:{width:"100%",padding:"12px",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"16px",outline:"none"}})]})]})]}),hx=({data:u,onUpdate:a})=>_.jsxs("div",{children:[_.jsx("h3",{style:{fontSize:"20px",fontWeight:"600",color:"#1f2937",marginBottom:"16px"},children:"Location & Preferences"}),_.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[_.jsxs("div",{children:[_.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"4px"},children:"Your Location"}),_.jsxs("div",{style:{padding:"12px",border:"1px solid #d1d5db",borderRadius:"8px",backgroundColor:"#f9fafb",fontSize:"14px",color:"#6b7280"},children:[" ",u.location.address]}),_.jsx("p",{style:{fontSize:"12px",color:"#6b7280",marginTop:"4px"},children:"We'll use this to show you relevant community reports and connect you with nearby users."})]}),_.jsxs("div",{children:[_.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"8px"},children:"Language Preference"}),_.jsxs("select",{value:u.language,onChange:o=>a({language:o.target.value}),style:{width:"100%",padding:"12px",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"16px",outline:"none"},children:[_.jsx("option",{value:"en",children:"English"}),_.jsx("option",{value:"ar",children:" (Arabic)"})]})]}),_.jsx("div",{children:_.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",fontSize:"14px",fontWeight:"500",color:"#374151",cursor:"pointer"},children:[_.jsx("input",{type:"checkbox",checked:u.notifications,onChange:o=>a({notifications:o.target.checked}),style:{width:"16px",height:"16px"}}),"Enable notifications for nearby safety alerts"]})})]})]}),dx=({data:u,onToggleInterest:a})=>_.jsxs("div",{children:[_.jsx("h3",{style:{fontSize:"20px",fontWeight:"600",color:"#1f2937",marginBottom:"16px"},children:"Community Interests"}),_.jsx("p",{style:{color:"#6b7280",marginBottom:"24px",fontSize:"14px"},children:"Select your interests to help us connect you with relevant communities and events. You can change these anytime in your settings."}),_.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:Object.entries(__).map(([o,l])=>_.jsxs("div",{children:[_.jsxs("h4",{style:{fontSize:"16px",fontWeight:"600",color:"#1f2937",marginBottom:"8px",display:"flex",alignItems:"center",gap:"8px"},children:[_.jsx("span",{children:l.icon}),l.label]}),_.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:l.items.map(d=>_.jsx("button",{onClick:()=>a(d),style:{padding:"8px 16px",borderRadius:"20px",border:u.interests.includes(d)?"2px solid #3b82f6":"2px solid #d1d5db",backgroundColor:u.interests.includes(d)?"#eff6ff":"white",color:u.interests.includes(d)?"#1d4ed8":"#374151",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},children:d},d))})]},o))}),_.jsx("div",{style:{marginTop:"16px",padding:"12px",backgroundColor:"#f0f9ff",borderRadius:"8px",border:"1px solid #bae6fd"},children:_.jsxs("p",{style:{fontSize:"14px",color:"#0369a1",margin:0},children:[" ",_.jsx("strong",{children:"Tip:"})," Selecting interests helps us show you relevant community events and connect you with like-minded people in your area."]})})]}),fx=({data:u})=>_.jsxs("div",{style:{textAlign:"center"},children:[_.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:""}),_.jsx("h3",{style:{fontSize:"24px",fontWeight:"bold",color:"#1f2937",marginBottom:"16px"},children:"You're all set up!"}),_.jsxs("p",{style:{color:"#6b7280",fontSize:"16px",marginBottom:"24px"},children:["Welcome to the HyperApp community, ",u.firstName,"! Your profile is now complete and you're ready to explore."]}),_.jsxs("div",{style:{backgroundColor:"#f0f9ff",padding:"16px",borderRadius:"8px",border:"1px solid #bae6fd",textAlign:"left"},children:[_.jsx("h4",{style:{fontSize:"16px",fontWeight:"600",color:"#1f2937",marginBottom:"8px"},children:"What's next?"}),_.jsxs("ul",{style:{color:"#0369a1",fontSize:"14px",margin:0,paddingLeft:"20px"},children:[_.jsx("li",{children:"Explore the interactive safety map"}),_.jsx("li",{children:"Submit your first community report"}),_.jsx("li",{children:"Connect with people in your interests"}),_.jsx("li",{children:"Earn reputation points and badges"})]})]})]}),px=({isOpen:u,onClose:a,onSelectVibe:o,onSelectEmergency:l})=>(console.log("ReportTypeModal render, isOpen:",u),_.jsx(Ld,{isOpen:u,onClose:a,title:"New Report",children:_.jsxs("div",{style:{padding:"20px 0"},children:[_.jsxs("div",{style:{textAlign:"center",marginBottom:"32px"},children:[_.jsx("div",{style:{width:"64px",height:"64px",borderRadius:"50%",background:"linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px",boxShadow:"0 8px 24px rgba(59, 130, 246, 0.3)"},children:_.jsx("i",{className:"fas fa-plus",style:{fontSize:"28px",color:"white"}})}),_.jsx("h2",{style:{fontSize:"24px",fontWeight:"700",color:"#1f2937",margin:"0 0 8px 0"},children:"Create New Report"}),_.jsx("p",{style:{color:"#6b7280",fontSize:"16px",margin:0,lineHeight:"1.5"},children:"Choose what type of report you'd like to create"})]}),_.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px"},children:[_.jsxs("button",{onClick:()=>{a(),o()},style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"32px 20px",border:"2px solid #e5e7eb",borderRadius:"16px",background:"linear-gradient(135deg, #ffffff 0%, #f8fafc 100%)",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",textAlign:"center",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.05), 0 2px 4px rgba(0, 0, 0, 0.02)",position:"relative",overflow:"hidden"},onMouseEnter:d=>{d.currentTarget.style.transform="translateY(-6px) scale(1.02)",d.currentTarget.style.boxShadow="0 12px 32px rgba(59, 130, 246, 0.2), 0 4px 8px rgba(59, 130, 246, 0.1)",d.currentTarget.style.borderColor="#3b82f6",d.currentTarget.style.background="linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%)"},onMouseLeave:d=>{d.currentTarget.style.transform="translateY(0) scale(1)",d.currentTarget.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.05), 0 2px 4px rgba(0, 0, 0, 0.02)",d.currentTarget.style.borderColor="#e5e7eb",d.currentTarget.style.background="linear-gradient(135deg, #ffffff 0%, #f8fafc 100%)"},onMouseDown:d=>{d.currentTarget.style.transform="translateY(-2px) scale(0.98)"},onMouseUp:d=>{d.currentTarget.style.transform="translateY(-6px) scale(1.02)"},children:[_.jsxs("div",{style:{width:"64px",height:"64px",borderRadius:"50%",background:"linear-gradient(135deg, #dbeafe 0%, #bfdbfe 50%, #93c5fd 100%)",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"18px",boxShadow:"0 6px 16px rgba(59, 130, 246, 0.25), inset 0 2px 4px rgba(255, 255, 255, 0.1)",position:"relative"},children:[_.jsx("i",{className:"fas fa-smile",style:{fontSize:"30px",color:"#1d4ed8",filter:"drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1))"}}),_.jsx("div",{style:{position:"absolute",top:"-2px",right:"-2px",width:"20px",height:"20px",borderRadius:"50%",background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 8px rgba(16, 185, 129, 0.3)"},children:_.jsx("i",{className:"fas fa-plus",style:{fontSize:"10px",color:"white",fontWeight:"bold"}})})]}),_.jsx("h3",{style:{fontSize:"20px",fontWeight:"700",color:"#1f2937",margin:"0 0 8px 0",letterSpacing:"-0.025em"},children:"Report Vibe"}),_.jsx("p",{style:{fontSize:"14px",color:"#6b7280",margin:0,lineHeight:"1.5",fontWeight:"500"},children:"Share what's happening around you"})]}),_.jsxs("button",{onClick:()=>{a(),l()},style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"32px 20px",border:"2px solid #e5e7eb",borderRadius:"16px",background:"linear-gradient(135deg, #ffffff 0%, #fef7f7 100%)",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",textAlign:"center",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.05), 0 2px 4px rgba(0, 0, 0, 0.02)",position:"relative",overflow:"hidden"},onMouseEnter:d=>{d.currentTarget.style.transform="translateY(-6px) scale(1.02)",d.currentTarget.style.boxShadow="0 12px 32px rgba(239, 68, 68, 0.2), 0 4px 8px rgba(239, 68, 68, 0.1)",d.currentTarget.style.borderColor="#ef4444",d.currentTarget.style.background="linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%)"},onMouseLeave:d=>{d.currentTarget.style.transform="translateY(0) scale(1)",d.currentTarget.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.05), 0 2px 4px rgba(0, 0, 0, 0.02)",d.currentTarget.style.borderColor="#e5e7eb",d.currentTarget.style.background="linear-gradient(135deg, #ffffff 0%, #fef7f7 100%)"},onMouseDown:d=>{d.currentTarget.style.transform="translateY(-2px) scale(0.98)"},onMouseUp:d=>{d.currentTarget.style.transform="translateY(-6px) scale(1.02)"},children:[_.jsxs("div",{style:{width:"64px",height:"64px",borderRadius:"50%",background:"linear-gradient(135deg, #fee2e2 0%, #fecaca 50%, #fca5a5 100%)",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"18px",boxShadow:"0 6px 16px rgba(239, 68, 68, 0.25), inset 0 2px 4px rgba(255, 255, 255, 0.1)",position:"relative"},children:[_.jsx("i",{className:"fas fa-exclamation-triangle",style:{fontSize:"30px",color:"#dc2626",filter:"drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1))"}}),_.jsx("div",{style:{position:"absolute",top:"-2px",right:"-2px",width:"20px",height:"20px",borderRadius:"50%",background:"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 8px rgba(239, 68, 68, 0.3)"},children:_.jsx("i",{className:"fas fa-exclamation",style:{fontSize:"10px",color:"white",fontWeight:"bold"}})})]}),_.jsx("h3",{style:{fontSize:"20px",fontWeight:"700",color:"#1f2937",margin:"0 0 8px 0",letterSpacing:"-0.025em"},children:"Emergency"}),_.jsx("p",{style:{fontSize:"14px",color:"#6b7280",margin:0,lineHeight:"1.5",fontWeight:"500"},children:"Report urgent situations"})]})]})]})}));async function b_(u,a){if("geolocation"in navigator)try{return await new Promise((l,d)=>{const f=setTimeout(()=>{d(new Error("Geocoding timeout"))},5e3);setTimeout(()=>{clearTimeout(f);const g=mx(u,a);l(g)},1e3)})}catch{console.warn("Browser geocoding failed, falling back to coordinates")}return`${u.toFixed(4)}, ${a.toFixed(4)}`}function mx(u,a){if(u>=30&&u<=30.2&&a>=31.2&&a<=31.4){const o=["Tahrir Square","Corniche Road","Pyramids Road","Zamalek Island","Garden City"],l=["Downtown Cairo","Zamalek","Maadi","Heliopolis","Nasr City"],d=o[Math.floor(Math.random()*o.length)],f=l[Math.floor(Math.random()*l.length)];return`${d}, ${f}, Cairo, Egypt`}return`Near ${u.toFixed(4)}, ${a.toFixed(4)}`}function x_(u,a){return`${u.toFixed(6)}, ${a.toFixed(6)}`}const gx=[{type:Rt.Safe,label:"Safe",icon:"fas fa-shield-alt",color:"#22c55e",description:"Area feels safe and secure"},{type:Rt.Calm,label:"Calm",icon:"fas fa-peace",color:"#3b82f6",description:"Peaceful and relaxed atmosphere"},{type:Rt.Lively,label:"Lively",icon:"fas fa-music",color:"#eab308",description:"Energetic and active area"},{type:Rt.Festive,label:"Festive",icon:"fas fa-glass-cheers",color:"#f59e0b",description:"Celebratory or party atmosphere"},{type:Rt.Crowded,label:"Crowded",icon:"fas fa-users",color:"#f97316",description:"Many people gathered here"},{type:Rt.Suspicious,label:"Suspicious",icon:"fas fa-eye-slash",color:"#a855f7",description:"Something feels off or concerning"},{type:Rt.Dangerous,label:"Dangerous",icon:"fas fa-exclamation-triangle",color:"#ef4444",description:"Potentially unsafe area"},{type:Rt.Noisy,label:"Noisy",icon:"fas fa-volume-up",color:"#06b6d4",description:"High noise levels"},{type:Rt.Quiet,label:"Quiet",icon:"fas fa-volume-off",color:"#2dd4bf",description:"Peaceful and quiet area"}],_x=({isOpen:u,onClose:a,onSuccess:o})=>{const[l,d]=it.useState(null),[f,g]=it.useState(""),[b,w]=it.useState(""),[x,C]=it.useState(null),[E,z]=it.useState(!1),[R,q]=it.useState(!1);it.useEffect(()=>{u&&(d(null),g(""),w(""),C(null),P())},[u]);const P=async()=>{q(!0),navigator.geolocation?navigator.geolocation.getCurrentPosition(async G=>{const{latitude:K,longitude:B}=G.coords;C([K,B]);try{const ot=await b_(K,B);w(ot)}catch{console.warn("Geocoding failed, using coordinates"),w(x_(K,B))}q(!1)},G=>{console.error("Error getting location:",G),q(!1)},{timeout:1e4,enableHighAccuracy:!0}):q(!1)},W=async()=>{if(!(!l||!x)){z(!0);try{await Be.createReport({vibe_type:l,latitude:x[0],longitude:x[1],notes:f.trim()||void 0,location:b.trim()||void 0,emergency:!1}),o?.(),a()}catch(G){console.error("Error creating vibe report:",G)}finally{z(!1)}}};return _.jsx(Ld,{isOpen:u,onClose:a,title:"Report Vibe",children:_.jsxs("div",{style:{padding:"20px 0"},children:[_.jsxs("div",{style:{textAlign:"center",marginBottom:"32px"},children:[_.jsx("div",{style:{width:"56px",height:"56px",borderRadius:"50%",background:"linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px",boxShadow:"0 6px 16px rgba(59, 130, 246, 0.2)"},children:_.jsx("i",{className:"fas fa-smile",style:{fontSize:"24px",color:"#3b82f6"}})}),_.jsx("h2",{style:{fontSize:"22px",fontWeight:"700",color:"#1f2937",margin:"0 0 8px 0"},children:"Share the Vibe"}),_.jsx("p",{style:{color:"#6b7280",fontSize:"15px",margin:0,lineHeight:"1.5"},children:"Help others know what's happening in your area"})]}),_.jsxs("div",{style:{marginBottom:"28px"},children:[_.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",marginBottom:"16px",textAlign:"center"},children:"What's the vibe like here?"}),_.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"16px"},children:gx.map(G=>_.jsxs("button",{onClick:()=>d(G.type),style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"20px 16px",border:`2px solid ${l===G.type?G.color:"#e5e7eb"}`,borderRadius:"12px",background:l===G.type?`linear-gradient(135deg, ${G.color}08 0%, ${G.color}15 100%)`:"linear-gradient(135deg, #ffffff 0%, #f8fafc 100%)",cursor:"pointer",transition:"all 0.3s ease",textAlign:"center",boxShadow:l===G.type?`0 6px 20px ${G.color}20`:"0 2px 8px rgba(0, 0, 0, 0.04)",transform:l===G.type?"scale(1.02)":"scale(1)"},onMouseEnter:K=>{l!==G.type&&(K.currentTarget.style.transform="scale(1.02)",K.currentTarget.style.boxShadow=`0 4px 16px ${G.color}15`)},onMouseLeave:K=>{l!==G.type&&(K.currentTarget.style.transform="scale(1)",K.currentTarget.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.04)")},children:[_.jsx("i",{className:G.icon,style:{fontSize:"28px",color:G.color,marginBottom:"10px"}}),_.jsx("span",{style:{fontSize:"15px",fontWeight:"700",color:"#1f2937",marginBottom:"6px"},children:G.label}),_.jsx("span",{style:{fontSize:"13px",color:"#6b7280",lineHeight:"1.3"},children:G.description})]},G.type))})]}),_.jsxs("div",{style:{marginBottom:"20px"},children:[_.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Location"}),_.jsxs("div",{style:{position:"relative"},children:[_.jsx("input",{type:"text",value:b,onChange:G=>w(G.target.value),placeholder:"Enter location or use current location",style:{width:"100%",padding:"10px 40px 10px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px",outline:"none"}}),_.jsx("button",{onClick:P,disabled:R,style:{position:"absolute",right:"8px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",color:R?"#9ca3af":"#3b82f6",cursor:R?"not-allowed":"pointer",padding:"4px"},title:"Use current location",children:R?_.jsx(wr,{size:"sm"}):_.jsx("i",{className:"fas fa-crosshairs"})})]})]}),_.jsxs("div",{style:{marginBottom:"24px"},children:[_.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Additional Notes (Optional)"}),_.jsx("textarea",{value:f,onChange:G=>g(G.target.value),placeholder:"Any additional details about this vibe...",rows:3,style:{width:"100%",padding:"10px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px",outline:"none",resize:"vertical",fontFamily:"inherit"}})]}),_.jsxs("div",{style:{display:"flex",gap:"16px",justifyContent:"flex-end",marginTop:"32px"},children:[_.jsx("button",{onClick:a,disabled:E,style:{padding:"14px 24px",border:"2px solid #e5e7eb",borderRadius:"12px",background:"linear-gradient(135deg, #ffffff 0%, #f8fafc 100%)",color:"#6b7280",fontSize:"16px",fontWeight:"600",cursor:E?"not-allowed":"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.04)",opacity:E?.6:1},onMouseEnter:G=>{E||(G.currentTarget.style.transform="translateY(-2px)",G.currentTarget.style.boxShadow="0 6px 16px rgba(0, 0, 0, 0.08)",G.currentTarget.style.borderColor="#d1d5db")},onMouseLeave:G=>{E||(G.currentTarget.style.transform="translateY(0)",G.currentTarget.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.04)",G.currentTarget.style.borderColor="#e5e7eb")},onMouseDown:G=>{E||(G.currentTarget.style.transform="translateY(0)")},onMouseUp:G=>{E||(G.currentTarget.style.transform="translateY(-2px)")},children:"Cancel"}),_.jsx("button",{onClick:W,disabled:!l||!x||E,style:{padding:"14px 28px",border:"none",borderRadius:"12px",background:!l||!x||E?"linear-gradient(135deg, #e5e7eb 0%, #d1d5db 100%)":"linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%)",color:"white",fontSize:"16px",fontWeight:"700",cursor:!l||!x||E?"not-allowed":"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:!l||!x||E?"0 2px 8px rgba(0, 0, 0, 0.04)":"0 6px 20px rgba(59, 130, 246, 0.3), 0 2px 8px rgba(59, 130, 246, 0.1)",display:"flex",alignItems:"center",gap:"8px",position:"relative",overflow:"hidden"},onMouseEnter:G=>{l&&x&&!E&&(G.currentTarget.style.transform="translateY(-3px) scale(1.02)",G.currentTarget.style.boxShadow="0 12px 32px rgba(59, 130, 246, 0.4), 0 4px 12px rgba(59, 130, 246, 0.2)")},onMouseLeave:G=>{l&&x&&!E&&(G.currentTarget.style.transform="translateY(0) scale(1)",G.currentTarget.style.boxShadow="0 6px 20px rgba(59, 130, 246, 0.3), 0 2px 8px rgba(59, 130, 246, 0.1)")},onMouseDown:G=>{l&&x&&!E&&(G.currentTarget.style.transform="translateY(-1px) scale(0.98)")},onMouseUp:G=>{l&&x&&!E&&(G.currentTarget.style.transform="translateY(-3px) scale(1.02)")},children:E?_.jsxs(_.Fragment,{children:[_.jsx(wr,{size:"sm"}),"Reporting..."]}):_.jsxs(_.Fragment,{children:[_.jsx("i",{className:"fas fa-paper-plane",style:{fontSize:"16px"}}),"Report Vibe"]})})]})]})})},gg=[{id:"fire",label:"Fire",icon:"fas fa-fire",color:"#ef4444",description:"Fire emergency"},{id:"medical",label:"Medical",icon:"fas fa-ambulance",color:"#dc2626",description:"Medical emergency"},{id:"crime",label:"Crime",icon:"fas fa-shield-alt",color:"#7c2d12",description:"Crime in progress"},{id:"accident",label:"Accident",icon:"fas fa-car-crash",color:"#ea580c",description:"Traffic accident"},{id:"hazard",label:"Hazard",icon:"fas fa-exclamation-triangle",color:"#d97706",description:"Safety hazard"},{id:"other",label:"Other",icon:"fas fa-question-circle",color:"#6b7280",description:"Other emergency"}],yx=({isOpen:u,onClose:a,onSuccess:o})=>{const[l,d]=it.useState(null),[f,g]=it.useState("medium"),[b,w]=it.useState(""),[x,C]=it.useState(""),[E,z]=it.useState(null),[R,q]=it.useState(!1),[P,W]=it.useState(!1);it.useEffect(()=>{u&&(d(null),g("medium"),w(""),C(""),z(null),G())},[u]);const G=async()=>{W(!0),navigator.geolocation?navigator.geolocation.getCurrentPosition(async B=>{const{latitude:ot,longitude:_t}=B.coords;z([ot,_t]);try{const ht=await b_(ot,_t);C(ht)}catch{console.warn("Geocoding failed, using coordinates"),C(x_(ot,_t))}W(!1)},B=>{console.error("Error getting location:",B),W(!1)},{timeout:1e4,enableHighAccuracy:!0}):W(!1)},K=async()=>{if(!(!l||!E)){q(!0);try{const ot=[`EMERGENCY: ${gg.find(_t=>_t.id===l)?.label}`,`Urgency: ${f.toUpperCase()}`,b.trim()].filter(Boolean).join(" | ");await Be.createReport({vibe_type:Rt.Dangerous,latitude:E[0],longitude:E[1],notes:ot,location:x.trim()||void 0,emergency:!0}),o?.(),a()}catch(B){console.error("Error creating emergency report:",B)}finally{q(!1)}}};return _.jsxs(Ld,{isOpen:u,onClose:a,title:"Report Emergency",children:[_.jsxs("div",{style:{padding:"20px 0"},children:[_.jsxs("div",{style:{padding:"20px",border:"2px solid #fee2e2",borderRadius:"12px",background:"linear-gradient(135deg, #fef2f2 0%, #fef2f2 100%)",marginBottom:"24px",boxShadow:"0 4px 12px rgba(239, 68, 68, 0.1)"},children:[_.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",color:"#dc2626",fontSize:"16px",fontWeight:"700"},children:[_.jsx("i",{className:"fas fa-exclamation-triangle",style:{marginRight:"12px",fontSize:"20px"}}),"Emergency Alert"]}),_.jsx("p",{style:{textAlign:"center",color:"#dc2626",fontSize:"14px",margin:"8px 0 0 0",lineHeight:"1.4"},children:"This will create an emergency alert visible to all users in the area"})]}),_.jsxs("div",{style:{textAlign:"center",marginBottom:"32px"},children:[_.jsx("div",{style:{width:"56px",height:"56px",borderRadius:"50%",background:"linear-gradient(135deg, #fee2e2 0%, #fecaca 100%)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px",boxShadow:"0 6px 16px rgba(239, 68, 68, 0.2)"},children:_.jsx("i",{className:"fas fa-exclamation-triangle",style:{fontSize:"24px",color:"#ef4444"}})}),_.jsx("h2",{style:{fontSize:"22px",fontWeight:"700",color:"#1f2937",margin:"0 0 8px 0"},children:"Report Emergency"}),_.jsx("p",{style:{color:"#6b7280",fontSize:"15px",margin:0,lineHeight:"1.5"},children:"Get help quickly by reporting urgent situations"})]})]}),_.jsxs("div",{style:{marginBottom:"24px"},children:[_.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",color:"#1f2937",marginBottom:"12px"},children:"What type of emergency?"}),_.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))",gap:"12px"},children:gg.map(B=>_.jsxs("button",{onClick:()=>d(B.id),style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"16px 12px",border:`2px solid ${l===B.id?B.color:"#e5e7eb"}`,borderRadius:"8px",backgroundColor:l===B.id?`${B.color}10`:"white",cursor:"pointer",transition:"all 0.2s ease",textAlign:"center"},children:[_.jsx("i",{className:B.icon,style:{fontSize:"24px",color:B.color,marginBottom:"8px"}}),_.jsx("span",{style:{fontSize:"14px",fontWeight:"600",color:"#1f2937"},children:B.label})]},B.id))})]}),_.jsxs("div",{style:{marginBottom:"20px"},children:[_.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",color:"#1f2937",marginBottom:"12px"},children:"Urgency Level"}),_.jsx("div",{style:{display:"flex",gap:"8px"},children:[{value:"low",label:"Low",color:"#22c55e"},{value:"medium",label:"Medium",color:"#f59e0b"},{value:"high",label:"High",color:"#ef4444"}].map(B=>_.jsx("button",{onClick:()=>g(B.value),style:{flex:1,padding:"12px 16px",border:`2px solid ${f===B.value?B.color:"#e5e7eb"}`,borderRadius:"6px",backgroundColor:f===B.value?`${B.color}10`:"white",color:f===B.value?B.color:"#6b7280",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease"},children:B.label},B.value))})]}),_.jsxs("div",{style:{marginBottom:"20px"},children:[_.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Location"}),_.jsxs("div",{style:{position:"relative"},children:[_.jsx("input",{type:"text",value:x,onChange:B=>C(B.target.value),placeholder:"Enter location or use current location",style:{width:"100%",padding:"10px 40px 10px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px",outline:"none"}}),_.jsx("button",{onClick:G,disabled:P,style:{position:"absolute",right:"8px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",color:P?"#9ca3af":"#3b82f6",cursor:P?"not-allowed":"pointer",padding:"4px"},title:"Use current location",children:P?_.jsx(wr,{size:"sm"}):_.jsx("i",{className:"fas fa-crosshairs"})})]})]}),_.jsxs("div",{style:{marginBottom:"24px"},children:[_.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Description (Required)"}),_.jsx("textarea",{value:b,onChange:B=>w(B.target.value),placeholder:"Please provide details about the emergency situation...",rows:4,style:{width:"100%",padding:"10px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px",outline:"none",resize:"vertical",fontFamily:"inherit"},required:!0})]}),_.jsxs("div",{style:{display:"flex",gap:"16px",justifyContent:"flex-end",marginTop:"32px"},children:[_.jsx("button",{onClick:a,disabled:R,style:{padding:"14px 24px",border:"2px solid #e5e7eb",borderRadius:"12px",background:"linear-gradient(135deg, #ffffff 0%, #f8fafc 100%)",color:"#6b7280",fontSize:"16px",fontWeight:"600",cursor:R?"not-allowed":"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.04)",opacity:R?.6:1},onMouseEnter:B=>{R||(B.currentTarget.style.transform="translateY(-2px)",B.currentTarget.style.boxShadow="0 6px 16px rgba(0, 0, 0, 0.08)",B.currentTarget.style.borderColor="#d1d5db")},onMouseLeave:B=>{R||(B.currentTarget.style.transform="translateY(0)",B.currentTarget.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.04)",B.currentTarget.style.borderColor="#e5e7eb")},onMouseDown:B=>{R||(B.currentTarget.style.transform="translateY(0)")},onMouseUp:B=>{R||(B.currentTarget.style.transform="translateY(-2px)")},children:"Cancel"}),_.jsx("button",{onClick:K,disabled:!l||!b.trim()||!E||R,style:{padding:"14px 28px",border:"none",borderRadius:"12px",background:!l||!b.trim()||!E||R?"linear-gradient(135deg, #e5e7eb 0%, #d1d5db 100%)":"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",color:"white",fontSize:"16px",fontWeight:"700",cursor:!l||!b.trim()||!E||R?"not-allowed":"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:!l||!b.trim()||!E||R?"0 2px 8px rgba(0, 0, 0, 0.04)":"0 6px 20px rgba(239, 68, 68, 0.3), 0 2px 8px rgba(239, 68, 68, 0.1)",display:"flex",alignItems:"center",gap:"8px",position:"relative",overflow:"hidden"},onMouseEnter:B=>{l&&b.trim()&&E&&!R&&(B.currentTarget.style.transform="translateY(-3px) scale(1.02)",B.currentTarget.style.boxShadow="0 12px 32px rgba(239, 68, 68, 0.4), 0 4px 12px rgba(239, 68, 68, 0.2)")},onMouseLeave:B=>{l&&b.trim()&&E&&!R&&(B.currentTarget.style.transform="translateY(0) scale(1)",B.currentTarget.style.boxShadow="0 6px 20px rgba(239, 68, 68, 0.3), 0 2px 8px rgba(239, 68, 68, 0.1)")},onMouseDown:B=>{l&&b.trim()&&E&&!R&&(B.currentTarget.style.transform="translateY(-1px) scale(0.98)")},onMouseUp:B=>{l&&b.trim()&&E&&!R&&(B.currentTarget.style.transform="translateY(-3px) scale(1.02)")},children:R?_.jsxs(_.Fragment,{children:[_.jsx(wr,{size:"sm"}),"Reporting..."]}):_.jsxs(_.Fragment,{children:[_.jsx("i",{className:"fas fa-exclamation-triangle",style:{fontSize:"16px"}}),"Report Emergency"]})})]})]})},vx=()=>{const{user:u,isAuthenticated:a,isLoading:o,checkOnboardingStatus:l}=Ko(),[d,f]=it.useState("map"),[g,b]=it.useState([]),[w,x]=it.useState([]),[C,E]=it.useState(null),[z,R]=it.useState(!1),[q,P]=it.useState(!1),[W,G]=it.useState(!1),[K,B]=it.useState(!1),[ot,_t]=it.useState(!1),[ht,ct]=it.useState(!1),Ht=[30.0444,31.2357],qt=10;it.useEffect(()=>{o||(a?l()?wt():G(!0):P(!0)),navigator.geolocation&&navigator.geolocation.getCurrentPosition(tt=>{const{latitude:O,longitude:V}=tt.coords;E([O,V])},tt=>{console.log("Location not available:",tt)},{timeout:1e4,enableHighAccuracy:!0})},[a,o]);const wt=async()=>{try{const[tt,O]=await Promise.all([Be.getVibes({limit:100}),Be.getSOSAlerts({limit:50})]);b(tt),x(O);const V=Be.subscribeToReports(nt=>{nt.emergency?x(ut=>[nt,...ut]):b(ut=>[nt,...ut])}),et=Be.subscribeToVotes(nt=>{b(ut=>ut.map(lt=>lt.id===nt.reportId?{...lt,upvotes:nt.upvotes,downvotes:nt.downvotes}:lt)),x(ut=>ut.map(lt=>lt.id===nt.reportId?{...lt,upvotes:nt.upvotes,downvotes:nt.downvotes}:lt))});return()=>{V.unsubscribe(),et.unsubscribe()}}catch(tt){console.error("Error loading data:",tt),b([]),x([])}},Ct=()=>{R(!z)},Ut=()=>{P(!1)},ze=()=>{G(!1),wt()},Kt=()=>{G(!1),wt()},De=()=>{console.log("handleNewReport called, current modal state:",K),B(!0),console.log("Setting modal to true")},$=()=>{B(!1),_t(!0)},at=()=>{B(!1),ct(!0)},k=()=>{wt()};if(Ts.useEffect(()=>{console.log("Modal states:",{showReportTypeModal:K,showVibeReportModal:ot,showEmergencyReportModal:ht})},[K,ot,ht]),o)return _.jsxs("div",{style:{height:"100vh",width:"100vw",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f0f0f0",flexDirection:"column"},children:[_.jsx(wr,{size:"lg"}),_.jsx("p",{style:{color:"#6b7280",fontSize:"16px",marginTop:"16px"},children:"Loading HyperApp..."})]});const rt=()=>{switch(d){case"map":return _.jsx(ex,{vibes:g,sosAlerts:w,center:Ht,zoom:qt,userLocation:C,isHeatmapVisible:z,onToggleHeatmap:Ct,userId:u?.id||"demo-user"});case"profile":return _.jsx(ix,{});case"reports":return _.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"calc(100vh - 80px)",backgroundColor:"#f9fafb"},children:_.jsx(nx,{icon:_.jsx("i",{className:"fas fa-list",style:{fontSize:"48px"}}),title:"Reports View",description:"Coming soon - Nearby reports and voting system"})});case"settings":return _.jsx(sx,{});default:return null}};return _.jsxs("div",{style:{height:"100vh",width:"100vw",backgroundColor:"#f0f0f0"},children:[a&&l()&&d==="map"&&_.jsxs("div",{style:{position:"absolute",top:"10px",left:"10px",background:"white",padding:"10px",borderRadius:"5px",zIndex:1e3,fontSize:"12px"},children:["Welcome back, ",u?.first_name||u?.username,"! ",_.jsx("br",{}),"Vibes: ",g.length," | SOS: ",w.length,_.jsx("br",{}),"Heatmap: ",z?"ON":"OFF"]}),a&&l()&&_.jsxs(_.Fragment,{children:[_.jsx("div",{style:{height:"calc(100vh - 70px)",width:"100vw",overflow:d==="profile"||d==="settings"?"auto":"hidden"},children:rt()}),_.jsx(ox,{activeTab:d,onTabChange:f,onNewReport:De})]}),_.jsx(lx,{isOpen:q,onClose:Ut}),_.jsx(ux,{isOpen:W,onComplete:ze,onClose:Kt}),_.jsx(px,{isOpen:K,onClose:()=>B(!1),onSelectVibe:$,onSelectEmergency:at}),_.jsx(_x,{isOpen:ot,onClose:()=>_t(!1),onSuccess:k}),_.jsx(yx,{isOpen:ht,onClose:()=>ct(!1),onSuccess:k})]})},bx=()=>_.jsx(Sb,{children:_.jsx(vx,{})});Yy.createRoot(document.getElementById("root")).render(_.jsx(Ts.StrictMode,{children:_.jsx(ax,{children:_.jsx(bx,{})})}));
